"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-8c7a7a"],{4257:(e,t,i)=>{i.r(t),i.d(t,{buffer_drivetime_settings:()=>n});var o=i(8796),s=i(6227);const n=class{get el(){return(0,o.g)(this)}baseConfig;_localeSettings={};_popoverIsOpen=!1;_instanceId;_idPrefix="buffer-drivetime-settings-selector-";_elementIds={};_idButtonPrefix="drivetime-settings-selector-dropdown-button-";_idDropdownArrowPrefix="drivetime-settings-selector-dropdown-arrow-";_idDropdownLabelPrefix="drivetime-settings-selector-dropdown-label-";_idPopoverPrefix="drivetime-settings-selector-popover-";_idPopoverContentPrefix="drivetime-settings-selector-popover-content-";constructor(e){(0,o.r)(this,e),this.selectorPopupOpened=(0,o.c)(this,"selectorPopupOpened",6),this.selectorPopupClosed=(0,o.c)(this,"selectorPopupClosed",6),this.drivetimeOptionsChanged=(0,o.c)(this,"drivetimeOptionsChanged",6),this.colors=void 0,this.theme=void 0,this.langCode=void 0,this.sourceCountry=void 0,this.config=void 0,this.drivingMode=s.D.driving,this.offsetTime=0,this.offsetHr="12:00 PM",this.offsetDay=s.c.mon,this.travelDirection=s.T.away,this.trafficType=s.b.live,this.useTrafficChecked=!1,this.useTrafficEnabled=!0,this.baseConfig=new s.a("selector",this,this.onUpdateUI),s.A.announceVersion(),this.langCode=this.langCode||"en-us",s.B._initialize(this.langCode),this.sourceCountry=this.sourceCountry||"US",this.baseConfig.updateLocaleSettings({language:this.langCode,country:this.sourceCountry})}selectorPopupOpened;selectorPopupClosed;drivetimeOptionsChanged;_loadInstances(){this._instanceId||(this._instanceId=s.E.generateId(this._idPrefix).id),this._elementIds.label||(this._elementIds.label=s.E.generateId(this._idDropdownLabelPrefix).id),this._elementIds.button||(this._elementIds.button=s.E.generateId(this._idButtonPrefix).id),this._elementIds.popover||(this._elementIds.popover=s.E.generateId(this._idPopoverPrefix).id),this._elementIds.content||(this._elementIds.content=s.E.generateId(this._idPopoverContentPrefix).id),this._elementIds.arrow||(this._elementIds.arrow=s.E.generateId(this._idDropdownArrowPrefix).id)}onUpdateUI(){this.applyStyles()}onClickDriveOptions(e){return e.stopPropagation(),this._popoverIsOpen=!this._popoverIsOpen,this._popoverIsOpen?this.showPopover():this.hidePopover(),!1}showPopover(){const e=s.A.queryElementById.call(this.el,this._elementIds.popover);e&&e&&e.setAttribute("open","true");const t=s.A.queryElementById.call(this.el,this._elementIds.arrow);t&&t.classList.add("drivetime-settings-selector-drop-open"),this.selectorPopupOpened.emit()}hidePopover(){const e=s.A.queryElementById.call(this.el,this._elementIds.popover);e&&e.removeAttribute("open");const t=s.A.queryElementById.call(this.el,this._elementIds.arrow);t&&t.classList.remove("drivetime-settings-selector-drop-open"),this.selectorPopupClosed.emit()}async componentWillLoad(){this.config&&this.onConfigChange(this.config,""),this.theme?this.baseConfig.setTheme(this.theme):this.baseConfig.setTheme("light"),this._setDrivetimeDataFromConfig(),this._loadInstances(),this.applyStyles()}componentDidUpdate(){this.baseConfig&&this.baseConfig.onComponentHasRendered(),this.applyStyles()}componentDidLoad(){const e=this;requestAnimationFrame((()=>{function t(t){e.onClickDriveOptions.call(e,t)}s.a.Log("buffer-drivetime-settings didLoad"),e._loadInstances();const i=s.A.queryElementById.call(e.el,e._elementIds.button);i&&(i.removeEventListener("click",t),i.addEventListener("click",t));const o=s.A.queryElementById.call(e.el,e._elementIds.label);o&&(o.removeEventListener("click",t),o.addEventListener("click",t));const n=s.A.queryElementById.call(e.el,e._elementIds.arrow);function r(){e.hidePopover()}n&&(n.removeEventListener("click",t),n.addEventListener("click",t)),window.removeEventListener("resize",r),window.addEventListener("resize",r),e.baseConfig&&e.baseConfig.onComponentHasRendered(),e.applyStyles()}))}applyStyles(){const e=this;if(e.baseConfig?.config?.colors&&Object.keys(e.baseConfig.config.colors).length>0){const t=e.baseConfig.config.colors,i=s.A.queryElement.call(e.el,"calcite-popover");i&&"style"in i&&(i.style.setProperty("--calcite-color-foreground-1",t.foreground),i.style.setProperty("background-color",t.foreground),i.style.setProperty("z-index","2003"));const o=s.A.queryElement.call(e.el,"drivetime-settings-selector-dropdown");o&&"style"in o&&o.style.setProperty("border","solid 1px "+t.border);let n=s.A.queryElementAll.call(e,"calcite-segmented-control");n&&n.length>0&&n.forEach((function(t){const i=s.A.queryElement.call(e.el,"calcite-segmented-control",t);i&&"style"in i&&(i.style.setProperty("--calcite-color-border-input","unset"),i.style.setProperty("--calcite-color-brand","#eaeaea"),i.style.setProperty("--calcite-color-text-inverse","#151515"))}))}}onConfigChange(e,t){if(this.baseConfig&&e&&s.A.hasText(e)){const i=JSON.parse(e);s.a.LogConfig("drivetime settings config change",i,t),this.baseConfig.updateConfig(i),this.applyStyles(),this._drivetimeOptionsHaveChanged(e)&&this._setDrivetimeDataFromConfig()}}_drivetimeOptionsHaveChanged(e){if(e&&e.length>0){const t=JSON.parse(e),i=t?.infographicOptions?.drivetimeOptions;if(i){return i.drivingMode!=this.drivingMode||i.offsetTime.toString()!=this.offsetTime.toString()||i.offsetHr!=this.offsetHr||i.offsetDay!=this.offsetDay||i.travelDirection!=this.travelDirection||i.trafficType!=this.trafficType||i.useTrafficEnabled!=this.useTrafficEnabled||i.useTrafficChecked!=this.useTrafficChecked}}return!1}_setDrivetimeDataFromConfig(){const e=this.baseConfig?.config;if(!e)return;const t=e.infographicOptions?.drivetimeOptions;t&&(this.drivingMode=t.drivingMode||s.D.driving,this.offsetTime=t.offsetTime||0,this.offsetHr=t.offsetHr||s.A.time24ToLocale(this.langCode||"en-us","12:00"),this.offsetDay=t.offsetDay||s.c.mon,this.travelDirection=t.travelDirection?.toString().toLowerCase().indexOf("away")>=0?s.T.away:s.T.toward,this.trafficType=t.trafficType||s.b.live,this.useTrafficEnabled=!0,this.useTrafficChecked=void 0!==t.useTrafficChecked&&t.useTrafficChecked)}handleDrivetimeOptionChange(e){const t=e.target;switch(t.id){case"drivingMode":this.drivingMode=t.value;break;case"travelDirection":this.travelDirection=t.value;break;case"trafficType":this.trafficType=t.value;break;case"useTrafficCheckbox":this.useTrafficChecked=t.checked;break;case"offsetTime":this.offsetTime=Number(t.value);break;case"offsetDay":this.offsetDay=t.value;break;case"offsetHr":this.offsetHr=t.value;break;default:console.warn(`Unhandled drivetime option change for target ID: ${t.id}`)}this.emitDrivetimeOptionsChanged()}emitDrivetimeOptionsChanged(){const e={drivingMode:this.drivingMode,offsetTime:this.offsetTime,offsetHr:this.offsetHr,offsetDay:this.offsetDay,travelDirection:this.travelDirection,trafficType:this.trafficType,useTrafficEnabled:!0,useTrafficChecked:this.useTrafficChecked};this.drivetimeOptionsChanged.emit(e)}getTimeOffsets(){return[{value:0,label:s.B.i18n("now")},...Array.from({length:48},((e,t)=>{const i=15*(t+1),o=Math.floor(i/60),n=i%60;return{value:i,label:o>0?`+${o} ${s.B.i18n("offsetHr")} ${n>0?n+" "+s.B.i18n("min"):""}`:`+${n} ${s.B.i18n("min")}`}}))]}getDayOptions(){return Object.keys(s.c).map((e=>(0,o.h)("calcite-option",{value:s.c[e],selected:this.offsetDay===s.c[e]},s.B.i18n(e))))}getTimeOptions(){const e=[],t=["AM","PM"];for(let i=0;i<24;i++)for(let o=0;o<4;o++){const s=i%12==0?12:i%12,n=15*o==0?"00":15*o,r=t[Math.floor(i/12)];e.push(`${s}:${n} ${r}`)}return e.map((e=>(0,o.h)("calcite-option",{key:e,value:e,selected:this.offsetHr===e},e)))}render(){const e={paddingTop:"10px"};return(0,o.h)("div",{key:"0b8a7086ec5f93ca16c9674e44abe32fc9770213",id:this._instanceId,class:"drivetimeSettingsOuter"},(0,o.h)("div",{key:"c2e43a868915694cd2d309e47b9280ba811a4e2d",id:this._elementIds.button,class:"drivetime-settings-selector-dropdown"},(0,o.h)("div",{key:"7912c820a42610318a5864fb86ac11cfa1b71aa6",id:this._elementIds.label,class:"drivetime-settings-selector-dropdown-label"},s.B.i18n("driveTimeOptions")),(0,o.h)("svg",{key:"99f817a9f978cd3e72fe3899a637a6beaa06d053",id:this._elementIds.arrow,class:"drivetime-settings-selector-dropdown-arrow",width:"24",height:"24",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,o.h)("path",{key:"5a278486d94510f296d6b3940d8e6412f95802a8",fill:"currentColor","fill-rule":"evenodd",stroke:"currentColor",d:"M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .538.538 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.538.538 0 0 1 0-.738Z","clip-rule":"evenodd"}))),(0,o.h)("calcite-popover",{key:"0944e34de6d8dc5735cf2f51259b2ccdbe1558d4",id:this._elementIds.popover,style:{position:"absolute",top:"0px",left:"0px",transform:"translate(-312px, 7px)",border:"none",boxShadow:"none",minWidth:"340px",zIndex:"1"},label:"Choose infographics","pointer-disabled":"true","overlay-positioning":"absolute",placement:"bottom-start","offset-skidding":"4","auto-close":"true",referenceElement:this._elementIds.button,onCalcitePopoverClose:()=>{this._popoverIsOpen=!1,this.selectorPopupClosed.emit();const e=s.A.queryElementById.call(this.el,this._elementIds.arrow);e&&e.classList.remove("drivetime-settings-selector-drop-open")}},(0,o.h)("div",{key:"73f0efe7b485f39e13774528cdc444232282f375",id:this._elementIds.content,style:{width:"100%",minWidth:"340px",height:"auto"},onClick:e=>{e.stopPropagation()}},(0,o.h)("div",{key:"6519f68a9f1b300ea3b867d141751a0014e775cc",style:{padding:"20px"}},(0,o.h)("div",{key:"0ff79d6eaa8938a346535ac6bc4ae0be8f3b13ec"},(0,o.h)("calcite-label",{key:"6154ffefe56bcd5ef91f26425bb5b2025695b632"},s.B.i18n("driving-mode"),(0,o.h)("calcite-select",{key:"5a65e3cc8b1990580231fd3040d0d8c64352e722",label:"",id:"drivingMode",onCalciteSelectChange:e=>this.handleDrivetimeOptionChange(e)},(0,o.h)("calcite-option",{key:"9a82718dcdbde5cf221dd97d17320a16402612ed",value:s.D.driving,selected:this.drivingMode===s.D.driving},s.B.i18n("drivingTime")),(0,o.h)("calcite-option",{key:"48c8693f0c11fd8cde8a277078a54aeee65dfb08",value:s.D.rural,selected:this.drivingMode===s.D.rural},s.B.i18n("ruralDrivingTime")),(0,o.h)("calcite-option",{key:"ea925d68d6011d62e4fe7319a8d7002971022a34",value:s.D.trucking,selected:this.drivingMode===s.D.trucking},s.B.i18n("truckingTime"))))),(0,o.h)("div",{key:"c05aeeb6ff00beb73fc3adfb92eb8bd8950d085a",class:"segmented-control",style:{padding:"10px 0px 10px 0px",borderBottom:"1px solid #eaeaea"}},(0,o.h)("calcite-segmented-control",{key:"2a6d73678d06fdca3807cb950f588902866fd29f",id:"travelDirection",required:!0,width:"full",onCalciteSegmentedControlChange:e=>this.handleDrivetimeOptionChange(e)},(0,o.h)("calcite-segmented-control-item",{key:"19bf5a676ea277c2bacb5ac8c0a385d6bed90364",value:s.T.away,checked:this.travelDirection===s.T.away},s.B.i18n("awayFacility")),(0,o.h)("calcite-segmented-control-item",{key:"9418a884c8b9b99b189bbc279b88b48f0cff641f",value:s.T.toward,checked:this.travelDirection===s.T.toward},s.B.i18n("towardFacility")))),this.useTrafficEnabled&&(0,o.h)("div",{key:"4c82998c95da7f6385a20054c5f2d170a36b7cc1",class:"useTraffic-div",style:e},(0,o.h)("calcite-label",{key:"0e64e93ddcfc40eb287fe44c58fc8e82ba861601",layout:"inline",style:{margin:"5px 0px 0px 3px"}},(0,o.h)("calcite-checkbox",{key:"e4d3f82dfa2bf9cc1bf3cba9eaf307324861c745",id:"useTrafficCheckbox",checked:this.useTrafficChecked,onCalciteCheckboxChange:e=>this.handleDrivetimeOptionChange(e)}),s.B.i18n("useTraffic"))),this.useTrafficEnabled&&this.useTrafficChecked&&(0,o.h)("div",{key:"393a9455c95180ecfb6bc1aafd8ace41203f63d4",class:"useTraffic-content-div"},(0,o.h)("div",{key:"e82f9c82ac575e777992411bcaa3c46e69f4a9f6",class:"segmented-control",style:{padding:"10px 0px 10px 0px"}},(0,o.h)("calcite-segmented-control",{key:"0faf226ec363792590a9c48b63170488634157d3",id:"trafficType",required:!0,width:"full",onCalciteSegmentedControlChange:e=>this.handleDrivetimeOptionChange(e)},(0,o.h)("calcite-segmented-control-item",{key:"bd2dc30aee362ea33dfe707dd830ef9f217122f5",value:s.b.live,checked:this.trafficType===s.b.live},s.B.i18n("liveTraffic")),(0,o.h)("calcite-segmented-control-item",{key:"cfd04a96361bded3969fb43269aac2d1c5c79770",value:s.b.typical,checked:this.trafficType===s.b.typical},s.B.i18n("typicalTraffic")))),this.trafficType===s.b.live?(0,o.h)("div",{class:"use-liveTraffic-content-div",style:e},(0,o.h)("calcite-label",null,s.B.i18n("timeOffset"),(0,o.h)("calcite-select",{label:"",id:"offsetTime",onCalciteSelectChange:e=>this.handleDrivetimeOptionChange(e)},this.getTimeOffsets().map((e=>(0,o.h)("calcite-option",{key:e.value,value:e.value.toString(),selected:this.offsetTime===e.value},e.label)))))):(0,o.h)("div",{class:"use-typicalTraffic-content-div",style:e},(0,o.h)("calcite-label",null,(0,o.h)("calcite-select",{label:s.B.i18n("day"),id:"offsetDay",onCalciteSelectChange:e=>this.handleDrivetimeOptionChange(e)},this.getDayOptions())),(0,o.h)("calcite-label",null,(0,o.h)("calcite-select",{label:s.B.i18n("time"),id:"offsetHr",onCalciteSelectChange:e=>this.handleDrivetimeOptionChange(e)},this.getTimeOptions()))))))))}static get watchers(){return{config:["onConfigChange"]}}};n.style=":host{display:block}.drivetimeSettingsOuter{position:relative;width:100%;height:30px;justify-content:left;align-items:center;border:solid 0px;border-color:var(--calcite-ui-border-input)}.drivetime-settings-selector-label-placeholder{color:gray}.drivetime-settings-selector-dropdown-label{position:absolute;top:7px;left:6px;width:calc(100% - 35px);height:25px;font-size:10.5pt;font-weight:300;text-align:left;text-overflow:ellipsis;border-radius:0px;overflow:hidden;white-space:nowrap;cursor:pointer}.drivetime-settings-selector-dropdown{position:relative;height:32px;width:100%;cursor:pointer}.drivetime-settings-selector-dropdown-arrow{position:absolute;top:9px;right:7px;width:12px;height:12px;transition:all 0.15s 0.15s;transform:rotate(0)}.drivetime-settings-selector-drop-open{transform:rotate(180deg)}calcite-popover ::-webkit-scrollbar{background-color:var(--calcite-color-background-1);width:8px;height:8px}calcite-popover ::-webkit-scrollbar-thumb{background-color:var(--calcite-color-foreground-3)}calcite-popover ::-webkit-scrollbar-track{background-color:transparent}calcite-popover ::-webkit-scrollbar-corner{background-color:var(--calcite-color-background-1);width:8px;height:8px}"}}]);