System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-ui/advanced/map"],(function(e,n){var i={},o={},a={},t={};return{setters:[function(e){i.BaseVersionManager=e.BaseVersionManager,i.React=e.React,i.classNames=e.classNames,i.css=e.css,i.jsx=e.jsx,i.useIntl=e.useIntl},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent,o.SnappingUtils=e.SnappingUtils},function(e){a.WidgetPlaceholder=e.WidgetPlaceholder},function(e){t.JimuDraw=e.JimuDraw,t.SnappingMode=e.SnappingMode}],execute:function(){e((()=>{var e={7074:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M4.921 15.425a1 1 0 0 0 .1-.371c.009-.296.061-.59.157-.87a7.7 7.7 0 0 1-2.55-1.595A4.2 4.2 0 0 1 1.25 9.562C1.261 6.5 5.055 3.95 9.888 3.752l.26-.002a2.3 2.3 0 0 1 1.713.561 2.53 2.53 0 0 1 .414 1.981L12.19 7.48l1.254.15c.477-.328 1.007-.694 1.55-1.07q-.475-.062-.95-.117l-.521-.06a3.65 3.65 0 0 0-.755-2.933 3.5 3.5 0 0 0-2.647-.95l-.284.006C4.245 2.732.014 5.766 0 9.556a5.43 5.43 0 0 0 1.75 3.923 9.1 9.1 0 0 0 3.171 1.945M8.75 5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5m0 1.75a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1M5 11.25a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0m1.25.5a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1m13.209.286a3.37 3.37 0 0 0 .137-3.426 2.5 2.5 0 0 0-.32-.448q-.432.414-.907.877.067.072.122.156a2.13 2.13 0 0 1-.104 2.199c-.998 1.655-3.606 2.837-6.193 3.337l-1.084.966a3 3 0 0 1-.071.465c3.249-.338 7.004-1.778 8.42-4.126M6.25 7.5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 7a.5.5 0 1 1 0 1 .5.5 0 0 1 0-1m3.209 6.534 1.656 1.945s.121 1.496-1.935 2.41a4.08 4.08 0 0 1-3.689-.137s1.993-1.03 2.03-2.67c.038-1.66 1.938-1.548 1.938-1.548m-1.24 3.373c.342-.538.533-1.16.552-1.797a.255.255 0 0 1 .168-.258l.841.988c-.254.42-.645.74-1.107.905q-.222.098-.454.162m8.302-6.595S19.396 6.265 20 5.775l-.314-.389L19.369 5c-.604.485-5.363 3.757-5.363 3.757l-4.581 4.088 1.284 1.535z" clip-rule="evenodd"></path></svg>'},62686:e=>{"use strict";e.exports=o},79244:e=>{"use strict";e.exports=i},14321:e=>{"use strict";e.exports=a},48993:e=>{"use strict";e.exports=t}},n={};function l(i){var o=n[i];if(void 0!==o)return o.exports;var a=n[i]={exports:{}};return e[i](a,a.exports,l),a.exports}l.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return l.d(n,{a:n}),n},l.d=(e,n)=>{for(var i in n)l.o(n,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},l.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var d={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(d),l.d(d,{__set_webpack_public_path__:()=>b,default:()=>m});var e,n,i,o,a=l(79244),t=l(62686),r=l(14321);!function(e){e.Panel="Panel",e.Toolbar="Toolbar"}(e||(e={})),function(e){e.Continuous="continuous",e.Update="update"}(n||(n={})),function(e){e.Point="point",e.Polyline="polyline",e.Polygon="polygon",e.Rectangle="rectangle",e.Circle="circle",e.Text="text"}(i||(i={})),function(e){e.Show="show",e.Hide="hide"}(o||(o={}));var s=l(48993);class c extends a.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.12.0",description:"support decimal places in measurements #13051",upgrader:e=>e=e.setIn(["measurementsInfo"],{decimalPlaces:{point:5,line:3,area:3}})},{version:"1.16.0",description:"support text #14881",upgrader:e=>e=e.setIn(["layerListMode"],o.Hide)}]}}const u=new c,p="Draw";var g=l(7074),f=l.n(g),v=function(e,n,i,o){return new(i||(i=Promise))((function(a,t){function l(e){try{r(o.next(e))}catch(e){t(e)}}function d(e){try{r(o.throw(e))}catch(e){t(e)}}function r(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(l,d)}r((o=o.apply(e,n||[])).next())}))};function w(e){var n,o,l,d,c,u,g,w,m,b,O,M;const[y,h]=a.React.useState(null),E={};E.createTools={point:e.config.drawingTools.includes(i.Point),polyline:e.config.drawingTools.includes(i.Polyline),polygon:e.config.drawingTools.includes(i.Polygon),rectangle:e.config.drawingTools.includes(i.Rectangle),circle:e.config.drawingTools.includes(i.Circle),customText:e.config.drawingTools.includes(i.Text)};const x=!!(null===(n=e.config.drawOptions)||void 0===n?void 0:n.defaultGeometryGuidesEnabled)||!!(null===(o=e.config.drawOptions)||void 0===o?void 0:o.defaultFeatureToFeatureEnabled)||!!(null===(l=e.config.drawOptions)||void 0===l?void 0:l.defaultGridEnabled);(n=>{var i,o,a,t,l,d,r;let c=!1;e.config.drawOptions&&(null===(i=e.config.drawOptions)||void 0===i?void 0:i.snappingMode)!==s.SnappingMode.Prescriptive?(null===(a=e.config.drawOptions)||void 0===a?void 0:a.snappingMode)===s.SnappingMode.Flexible&&(c=(null===(t=e.config.drawOptions)||void 0===t?void 0:t.tooltipEnabled)||(null===(l=e.config.drawOptions)||void 0===l?void 0:l.geometryGuidesEnabled)||(null===(d=e.config.drawOptions)||void 0===d?void 0:d.featureToFeatureEnabled)||(null===(r=e.config.drawOptions)||void 0===r?void 0:r.gridEnabled)):c=null===(o=e.config.drawOptions)||void 0===o?void 0:o.tooltipEnabled,n.settingsMenu=c})(E),E.tooltipsToggle=null===(d=e.config.drawOptions)||void 0===d?void 0:d.tooltipEnabled,(n=>{var i,o,a,t,l,d,r;const c=(null===(i=e.config.drawOptions)||void 0===i?void 0:i.snappingMode)===s.SnappingMode.Prescriptive,u=!c&&(null===(o=e.config.drawOptions)||void 0===o?void 0:o.geometryGuidesEnabled),p=!c&&(null===(a=e.config.drawOptions)||void 0===a?void 0:a.featureToFeatureEnabled),g=!c&&(null===(t=e.config.drawOptions)||void 0===t?void 0:t.gridEnabled),f=!c&&((null===(l=e.config.drawOptions)||void 0===l?void 0:l.geometryGuidesEnabled)||(null===(d=e.config.drawOptions)||void 0===d?void 0:d.featureToFeatureEnabled)||(null===(r=e.config.drawOptions)||void 0===r?void 0:r.gridEnabled)),v=f;n.snappingControlsElements={enabledToggle:f,selfEnabledToggle:u,featureEnabledToggle:p,gridEnabledToggle:g,gridControls:g,layerList:v}})(E);const[T,S]=a.React.useState(null);a.React.useEffect((()=>{(()=>{v(this,void 0,void 0,(function*(){var n;const i=yield t.SnappingUtils.getSnappingFeatureSourcesCollection(y,null===(n=e.config.drawOptions)||void 0===n?void 0:n.defaultSnappingLayers);S(i)}))})()}),[y,null===(c=e.config.drawOptions)||void 0===c?void 0:c.defaultSnappingLayers]);const[P,j]=a.React.useState(!1);a.React.useEffect((()=>{var n,i,o;const a=(null===(n=e.config.drawOptions)||void 0===n?void 0:n.snappingMode)!==s.SnappingMode.Prescriptive&&((null===(i=e.config.drawOptions)||void 0===i?void 0:i.gridEnabled)&&(null===(o=e.config.drawOptions)||void 0===o?void 0:o.defaultGridEnabled));j(a)}),[e.config.drawOptions]);const C=!y,I=(0,a.useIntl)().formatMessage({id:"_widgetLabel",defaultMessage:p});return(0,a.jsx)("div",{className:"draw-widget-container h-100",css:a.css`
    .placeholder-wrapper { /* larger placeholder size ,#11524 */
      display: flex;
      align-items: center;
      min-width: 468px;
      min-height: 444px;
    }

    .placeholder-wrapper.in-controller { /* smaller placeholder size ,#22767 */
      min-width: 270px;
      min-height: 44px;
    }
  `},C&&(0,a.jsx)("div",{className:"w-100 h-100"},(0,a.jsx)(r.WidgetPlaceholder,{className:(0,a.classNames)("w-100 placeholder-wrapper",{"in-controller":!!e.controllerWidgetId}),icon:f(),widgetId:e.id,message:I})),!C&&(0,a.jsx)(s.JimuDraw,{jimuMapView:y,operatorWidgetId:e.id,isDisplayCanvasLayer:e.config.isDisplayCanvasLayer,drawingOptions:{creationMode:e.config.drawMode,visibleElements:E,layerListMode:e.config.layerListMode,updateOnGraphicClick:!0,drawingElevationMode3D:e.config.drawingElevationMode3D,snappingOptions:{enabled:x,selfEnabled:(null===(u=e.config.drawOptions)||void 0===u?void 0:u.geometryGuidesEnabled)&&(null===(g=e.config.drawOptions)||void 0===g?void 0:g.defaultGeometryGuidesEnabled),featureEnabled:(null===(w=e.config.drawOptions)||void 0===w?void 0:w.featureToFeatureEnabled)&&(null===(m=e.config.drawOptions)||void 0===m?void 0:m.defaultFeatureToFeatureEnabled),gridEnabled:P,featureSources:T},tooltipOptions:{enabled:(null===(b=e.config.drawOptions)||void 0===b?void 0:b.tooltipEnabled)&&(null===(O=e.config.drawOptions)||void 0===O?void 0:O.defaultTooltipEnabled)}},uiOptions:{arrangement:e.config.arrangement,isAutoWidth:e.autoWidth,isAutoHeight:e.autoHeight},measurementsInfo:e.config.measurementsInfo.asMutable(),measurementsUnitsInfos:e.config.measurementsUnitsInfos.asMutable()}),(0,a.jsx)(t.JimuMapViewComponent,{useMapWidgetId:null===(M=e.useMapWidgetIds)||void 0===M?void 0:M[0],onActiveViewChange:e=>{h(e)}}))}w.versionManager=u;const m=w;function b(e){l.p=e}})(),d})())}}}));