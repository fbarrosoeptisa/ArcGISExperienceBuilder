/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-97a16d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-97a16d"],{47436:(e,i,r)=>{r.r(i),r.d(i,{arcgis_service_scope:()=>c});var t=r(19564),n=r(96487),o=r(26408),s=r(66507),l=r(24211),a=r(69117);r(57159),r(4948),r(18991),r(98034),r(99004),r(44508),r(65174),r(91102),r(73807),r(89261),r(67336);const c=class{constructor(e){(0,t.r)(this,e),this.arcgisServiceScopeChange=(0,t.c)(this,"arcgisServiceScopeChange",7),this.availableServiceScopes=[],this.unavailableServiceScopes=[],this.user=void 0,this.portal=void 0,this.developerPrivileges=[],this.selectedServiceScope=[]}assignSelectedServiceScope(){var e,i;this.selectedServiceScope=null!==(i=null===(e=this.developerPrivileges)||void 0===e?void 0:e.map((e=>{var i;return null===(i=this.privilegeToServiceScope)||void 0===i?void 0:i[e]})))&&void 0!==i?i:[]}async componentWillLoad(){const e=await(0,s.g)(this.el);this.i18n=e[0],this.privilegeToServiceScope=Object.entries(a.s).reduce(((e,[i,r])=>(e[r]=i,e)),{}),this.availableServiceScopes=(await this.getEnabledPrivileges()).map((e=>this.privilegeToServiceScope[e])),this.unavailableServiceScopes=a.a.filter((e=>!this.availableServiceScopes.includes(e))),this.assignSelectedServiceScope()}async getEnabledPrivileges(){const{user:e,portal:i}=this,{result:r}=await(0,n.g)(i,e),t=(0,l.f)(r);return a.a.filter((e=>t||"places"!==e)).map((e=>a.s[e])).filter((e=>this.user.privileges.includes(e)))}render(){const{i18n:e,selectedServiceScope:i}=this;return(0,t.h)(t.H,{key:"b592b624719bd18cb288c0db16bc0f7c907a5fe8"},(0,t.h)("arcgis-new-item-description",{key:"5e12ae13c3e6c1e240d0b4ca2c811f407300a90c",header:e.title,content:e.description}),(0,t.h)("div",{key:"cbed8735a5bbf2c74cf7daff513f5c3145d46d95",class:"section"},(0,t.h)("arcgis-new-item-description",{key:"13731f3663057d83082a27c0e2706931ef80cb98",header:e.availableServices}),(0,t.h)("div",{key:"faffb37f710415d3e2e34c1ee2fc6c728da2d03b",class:"content"},(0,t.h)("calcite-tile-select-group",{key:"5a3c4103406035615b9cc6e27382125574e1269a",layout:"vertical"},this.availableServiceScopes.map((r=>(0,t.h)("calcite-tile-select",{key:r,width:"full",checked:i.includes(r),description:e.services[r].description,heading:e.services[r].heading,inputEnabled:!0,inputAlignment:"start",type:"checkbox",value:r,onCalciteTileSelectChange:e=>{const{checked:t}=e.currentTarget;this.selectedServiceScope=t?[...this.selectedServiceScope,r]:i.filter((e=>e!==r)),this.arcgisServiceScopeChange.emit((0,o.b)(this.selectedServiceScope).map((e=>a.s[e])))}})))))),this.unavailableServiceScopes.length>0&&(0,t.h)("div",{key:"a905490150303c9941714a95051c63d732bfc87b",class:"section"},(0,t.h)("arcgis-new-item-description",{key:"c4cbcbaac3a14fffdbedb8cc6059c6854dfcd42b",header:e.unavailableServices,content:e.unavailableServicesDescription}),(0,t.h)("div",{key:"7776172eae30d4d6ca6ac9c6146294a1741d8681",class:"content"},(0,t.h)("calcite-tile-select-group",{key:"a9e4a19d4b6e9abba51e9279c9ed378081ff6df3",layout:"vertical"},this.unavailableServiceScopes.map((i=>(0,t.h)("calcite-tile-select",{key:i,width:"full",checked:!1,disabled:!0,description:"basemap"===i?void 0:e.services[i].description,heading:e.services[i].heading,inputEnabled:!0,inputAlignment:"start",type:"checkbox",value:i})))))))}get el(){return(0,t.d)(this)}static get watchers(){return{developerPrivileges:["assignSelectedServiceScope"]}}};c.style=".section{margin-top:2rem}calcite-tile{pointer-events:none;width:100%}.content{margin-top:0.5rem}"},69117:(e,i,r)=>{r.d(i,{a:()=>t,d:()=>o,i:()=>l,o:()=>n,p:()=>a,s:()=>s});const t=["basemap","geocodingNotStored","routing","serviceArea","geocodingStored","optimizedRouting","closestFacility","locationAllocation","multiVehicleRouting","costMatrix","places","geoEnrichment"],n=["geocodingNotStored"],o=["geocodingNotStored","routing","serviceArea"],s={basemap:"premium:user:basemaps",geocodingNotStored:"premium:user:geocode:temporary",routing:"premium:user:networkanalysis:routing",serviceArea:"premium:user:networkanalysis:servicearea",places:"premium:user:places",geocodingStored:"premium:user:geocode:stored",optimizedRouting:"premium:user:networkanalysis:optimizedrouting",closestFacility:"premium:user:networkanalysis:closestfacility",locationAllocation:"premium:user:networkanalysis:locationallocation",multiVehicleRouting:"premium:user:networkanalysis:vehiclerouting",costMatrix:"premium:user:networkanalysis:origindestinationcostmatrix",geoEnrichment:"premium:user:geoenrichment"},l=["features:user:edit","features:user:fullEdit","features:user:manageVersions","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems","portal:admin:categorizeItems","portal:admin:reassignItems","portal:admin:updateItemCategorySchema","portal:admin:updateItemClassificationSchema","portal:admin:viewUsers","portal:user:createItem","portal:user:categorizeItems","portal:user:reassignItems","portal:user:receiveItems","portal:user:viewTracks","portal:user:viewOrgItems","portal:user:viewHostedFeatureServices","portal:user:viewHostedTileServices","portal:user:viewOrgUsers"],a=["premium:publisher:createNotebooks","premium:publisher:scheduleNotebooks"]},67336:(e,i,r)=>{r.d(i,{a:()=>l,b:()=>s,c:()=>u,d:()=>d,e:()=>v,f:()=>g,g:()=>I,h:()=>h,i:()=>a,j:()=>S,k:()=>y,l:()=>f,m:()=>k,n:()=>w,o:()=>m,p:()=>b,q:()=>p,u:()=>c});var t=r(98034),n=r(44508);function o(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function s(e){var i;return o(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function l(e){var i;return o(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function a(e,i){return e.owner===i.username}function c(e,i){return a(e,i)||function(e,i){var r;if(null!=e.isAdmin)return!!e.isAdmin;const t=e.owner,n="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(r=e.portal)||void 0===r?void 0:r.isPortal)&&!a(e,i)&&n&&t.includes("esri_")&&!o.includes(t))return!1;return n}(e,i)}const u=(e,i)=>!!i.orgId&&e.every((e=>e.isOrgItem)),d=(e,i)=>`${(0,n.a)(i)}item.html?id=${e}`,v=(e,i)=>`${(0,n.g)(i)}/content/users/${e}`,p=e=>e.reduce(((e,i)=>(e[i.owner]=e[i.owner]?[...e[i.owner],i.id]:[i.id],e)),{});function m(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Spatiotemporal")}function g(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("View Service")}function h(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Hosted Service")}function f(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Multi Services View")}function b(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function S(e){var i;const r=null==e?void 0:e.portalItem;if(!r)return Promise.resolve(null);const o=r.portal,[s]=await(0,t.l)(["esri/request"]);if(null==o?void 0:o.user){return s(`${(0,n.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(i=r.portal.credential)||void 0===i?void 0:i.token},responseType:"json"}).then((e=>{var i,r;const t=null!==(r=null===(i=e.data)||void 0===i?void 0:i.groups)&&void 0!==r?r:[];return Promise.resolve(t)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function y(e){var i;const r=null==e?void 0:e.portalItem;if(!r)return Promise.resolve(null);const o=r.portal,[s]=await(0,t.l)(["esri/request"]);return s(`${(0,n.g)(o)}content/items/${r.id}/groups`,{query:{f:"json",token:null===(i=r.portal.credential)||void 0===i?void 0:i.token},responseType:"json"}).then((e=>{var i,r,t,n,o,s;const l=[...null!==(r=null===(i=e.data)||void 0===i?void 0:i.admin)&&void 0!==r?r:[],...null!==(n=null===(t=e.data)||void 0===t?void 0:t.member)&&void 0!==n?n:[],...null!==(s=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==s?s:[]];return Promise.resolve(l)}),(()=>Promise.reject()))}async function w(e,i,{relationshipType:r,direction:o}){const s=`${(0,n.g)(i)}content/items/${e}/relatedItems`,[l]=await(0,t.l)(["esri/request"]);return await l(s,{query:{f:"json",relationshipType:r,direction:o},method:"get",responseType:"json"})}function k(e,i){return null==e?void 0:e.some((e=>null==i?void 0:i.some((i=>e.id===i.id&&e.capabilities.includes("updateitemcontrol")))))}const I=(e,i)=>`${(0,n.a)(i)}content/items/${e}`},24211:(e,i,r)=>{r.d(i,{A:()=>A,a:()=>l,b:()=>o,c:()=>s,d:()=>h,e:()=>g,f:()=>v,g:()=>f,h:()=>S,i:()=>c,j:()=>b,k:()=>$,l:()=>a,m:()=>y,n:()=>d,o:()=>x,p:()=>q,q:()=>k,r:()=>I,s:()=>C,t:()=>_,u:()=>p,v:()=>m,w:()=>T,x:()=>P,y:()=>E,z:()=>u});var t=r(67336);const n=e=>{var i,r,t;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(r=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==r?r:null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.id};function o(e){return e&&!e.orgId}function s(e,i){return(0,t.u)(e,i)||"update"===e.itemControl||(0,t.c)([e],i)&&g(i)}function l(e,i){const r=(0,t.c)([e],i),n=(0,t.u)(e,i)||g(i)&&r,o=f(i)&&w(i);return!!(n||r&&o)}const a=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))};function c(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function u(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function d(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const v=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},p=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},m=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function g(e){return"org_admin"===n(e)||"account_admin"===n(e)}function h(e){return["org_admin","account_admin"].includes(n(e))&&!(null==e?void 0:e.roleId)}function f(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function b(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function S(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function y(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const w=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function I(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function _(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function C(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function $(e,i,r,t){const n=t&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(t.type),o=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!g(i)&&!o||!(null==r?void 0:r.isPortal)&&!n)}function A(e){return!!e&&(!f(e)||f(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const E=({items:e,user:i,portal:r})=>{const n=e[0],o=n.owner;if(r.isPortal&&o!==i.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const l=(0,t.u)(n,i),a=f(i),c=j(i),u=s(n,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!a&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||k(e)||I(e)||!!i.canSharePublic&&T(e)}(i,r)||j(i));return l||u||(0,t.c)(e,i)&&c};function j(e){return C(e)||_(e)||P(e)}const D=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function q(e){return e.some((e=>D.includes(e)))}function x(e){return e.filter((e=>D.includes(e)))}},96487:(e,i,r)=>{r.d(i,{a:()=>s,g:()=>l});var t=r(57159),n=r(44508),o=r(84873);const s=async e=>{try{return{result:await(0,t.r)(`${(0,n.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},l=async(e,i)=>await(0,t.f)((()=>s(e)),"subscriptionType",(0,o.g)(i))}}]);