/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_esm_arc-380f1a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_esm_arc-380f1a"],{76810:(e,t,i)=>{i.r(t),i.d(t,{arcgis_field_pick_list:()=>n});var s=i(99184),l=i(15773),a=i(40612),o=i(85068);var r;!function(e){e.expression="expression/",e.relationship="relationships/",e.raster="Raster."}(r||(r={}));const n=class{constructor(e){(0,s.r)(this,e),this.arcgisClose=(0,s.c)(this,"arcgisClose",7),this.arcgisFieldPickListDismissed=(0,s.c)(this,"arcgisFieldPickListDismissed",7),this.arcgisChange=(0,s.c)(this,"arcgisChange",7),this.arcgisFieldPickListChange=(0,s.c)(this,"arcgisFieldPickListChange",7),this.arcgisSortByChange=(0,s.c)(this,"arcgisSortByChange",7),this.arcgisFieldPickListSortByChange=(0,s.c)(this,"arcgisFieldPickListSortByChange",7),this.manager=(0,o.u)(this),this.messages=(0,o.a)(),this.fieldsOnly=[],this.expressionsOnly=[],this.calciteValueList=e=>(0,s.h)("calcite-list-item",{key:e.name,label:e.alias||e.name,description:(()=>this.showFieldName&&!0!==e.hideFieldName?`{${e.name}}`:this.showDescription&&!0!==e.hideDescription&&e.description?e.description:void 0)(),value:e.name,selected:!this.multiple&&e.name===this.selectedFields[0]||this.multiple&&this.selectedFields.includes(e.name),metadata:{label:e.alias,fieldName:e.name}},this.showFieldInfoCheck(e)&&(0,s.h)("calcite-action",{slot:"actions-end",text:this.messages.info??"",title:this.messages.info,scale:"s",icon:"information",onClick:t=>{t.stopPropagation();const i=t.target,s=document.createElement("calcite-flow-item");s.heading=e.alias??e.name,s.description=e.name,s.className="panel";const l=document.createElement("arcgis-field-info");l.lang=this.messages._lang,l.fieldName=e.name,l.layer=this.layer,l.view=this.mapView,l.classList.add("content"),s.appendChild(l),s.addEventListener("calciteFlowItemBack",(()=>{this.flowElement.removeChild(s),this.panelElement.selected=!0,setTimeout((()=>requestAnimationFrame((async()=>await i.setFocus()))),200)})),this.flowElement.appendChild(s),s.selected=!0,this.panelElement.selected=!1,setTimeout((()=>requestAnimationFrame((async()=>await s.setFocus()))),200)}})),this.selectedFields=[],this.fields=void 0,this.popoverProps=void 0,this.layer=void 0,this.mapView=void 0,this.showFieldInfo=!1,this.showFieldName=!1,this.showDescription=!1,this.showSelectionAll=!1,this.showCancel=!0,this.hideCancel=!1,this.showSort=!0,this.hideSort=!1,this.showFilterLength=10,this.multiple=!1,this.heading=void 0,this.okBtnText=void 0,this.filterPlaceholderText=void 0,this.filterNoResultsText=void 0,this.sortBy="default",this.groupFieldsAndExpressions=!1,this.fieldsGroupHeading=void 0,this.expressionsGroupHeading=void 0,this.customExpressionCheck=void 0,this.lastSortBy="default",this.filterFields=null}updateGroupedLists(){this.fieldsOnly=[...this.getSortedList()].filter((e=>!this.isExpression(e))),this.expressionsOnly=[...this.getSortedList()].filter((e=>this.isExpression(e)))}async componentWillLoad(){this.showCancel||this.hideCancel||(this.hideCancel=!0),this.showSort||this.hideSort||(this.hideSort=!0),!this.multiple&&this.selectedFields.length>1&&(this.selectedFields=[this.selectedFields[0]]),this.lastSortBy=this.sortBy??this.lastSortBy,this.updateGroupedLists()}async componentDidLoad(){(await(0,l.i)()).setLocale(this.messages._lang),this.setUpObserver(),this.popoverNode&&(this.popoverNode.open=!0),setTimeout((()=>requestAnimationFrame((async()=>await(this.panelElement?.setFocus())))),200)}disconnectedCallback(){this.observer?.disconnect()}async setFocus(){setTimeout((()=>requestAnimationFrame((async()=>await(this.panelElement?.setFocus())))),1)}async reposition(){await(this.popoverNode?.reposition())}getSortedList(){const e=[...this.fields];return"display"===this.lastSortBy?e.sort(((e,t)=>e.alias.localeCompare(t.alias))):"field"===this.lastSortBy?e.sort(((e,t)=>e.name.localeCompare(t.name))):"type"===this.lastSortBy&&e.sort(((e,t)=>e.type.localeCompare(t.type))),e}showFieldInfoCheck(e){return!!this.showFieldInfo&&(!this.isExpression(e)&&!e.name.includes(r.relationship))}selectDeselect(){return this.filterFields?.length?this.filterContainsAll():this.selectedFields.length===this.fields.length}filterContainsAll(){return!!this.filterFields?.every((e=>this.selectedFields.some((t=>t===e))))}render(){const e=(0,s.h)("calcite-button",{key:"74b0604d8095efe6a15306b839c8c0122832afc5",slot:"footer",appearance:this.hideCancel?"outline-fill":"solid",width:this.hideCancel?"full":"half",scale:"m",onClick:()=>{this.arcgisClose.emit({selectedFields:this.selectedFields}),this.arcgisFieldPickListDismissed.emit({selectedFields:this.selectedFields})}},this.okBtnText||(this.multiple?this.messages.done:this.messages.ok)),t=(0,s.h)("calcite-button",{key:"abcf10edd696c8d43b1c049fa03a6663233911d8",slot:"footer",appearance:"outline-fill",width:this.multiple?"half":"full",scale:"m",onClick:()=>{this.arcgisClose.emit(),this.arcgisFieldPickListDismissed.emit()}},this.messages.cancel),i=this.fields.every((e=>!!e.type)),l=(0,s.h)("calcite-dropdown",{key:"ea606acb17cabec3e9c835c8836040045f733956",slot:"filter-actions-end",placement:"bottom-end",overlayPositioning:"fixed",ref:e=>this.dropdownNode=e,onCalciteDropdownOpen:()=>{this.observer?.disconnect(),this.popoverNode&&this.observer?.observe(this.popoverNode,{attributes:!0})},onCalciteDropdownClose:()=>this.observer?.disconnect()},(0,s.h)("calcite-action",{key:"aeb3c72e3100f9bc1f0a07123f58ee193a862dea",slot:"trigger",text:this.messages.sort??"",title:this.messages.sort},(0,s.h)("calcite-icon",{key:"3433eda57430fa2ae3d46ba7aaf5f77e65b7492f",scale:"s",icon:"sortDescending"})),(0,s.h)("calcite-dropdown-group",{key:"d4b96eaa534dc1ebb4f6156f6c4cf2152a3a7651"},(0,s.h)("calcite-dropdown-item",{key:"71ab3add786cd360aec87000a91954933d75554c",selected:"default"===this.lastSortBy,onClick:()=>{this.lastSortBy="default",this.arcgisSortByChange.emit(this.lastSortBy),this.arcgisFieldPickListSortByChange.emit(this.lastSortBy)},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||(this.lastSortBy="default",this.arcgisSortByChange.emit(this.lastSortBy),this.arcgisFieldPickListSortByChange.emit(this.lastSortBy))}},this.messages.default),(0,s.h)("calcite-dropdown-item",{key:"68eaf0f7a0fce33c1223feb4060c633df190b923",selected:"display"===this.lastSortBy,onClick:()=>{this.lastSortBy="display",this.arcgisSortByChange.emit(this.lastSortBy),this.arcgisFieldPickListSortByChange.emit(this.lastSortBy)},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||(this.lastSortBy="display",this.arcgisSortByChange.emit(this.lastSortBy),this.arcgisFieldPickListSortByChange.emit(this.lastSortBy))}},this.messages.displayName),i&&(0,s.h)("calcite-dropdown-item",{key:"123b9eb0356e6badb88362fdeabc44b97b82363d",selected:"type"===this.lastSortBy,onClick:()=>{this.lastSortBy="type",this.arcgisSortByChange.emit(this.lastSortBy),this.arcgisFieldPickListSortByChange.emit(this.lastSortBy)},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||(this.lastSortBy="type",this.arcgisSortByChange.emit(this.lastSortBy),this.arcgisFieldPickListSortByChange.emit(this.lastSortBy))}},this.messages.type),(0,s.h)("calcite-dropdown-item",{key:"04672265cf94e8f5cab8e73c1c8c1de097c65582",selected:"field"===this.lastSortBy,onClick:()=>{this.lastSortBy="field",this.arcgisSortByChange.emit(this.lastSortBy),this.arcgisFieldPickListSortByChange.emit(this.lastSortBy)},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||(this.lastSortBy="field",this.arcgisSortByChange.emit(this.lastSortBy),this.arcgisFieldPickListSortByChange.emit(this.lastSortBy))}},this.messages.fieldName))),o=(0,s.h)("div",{key:"cf27f69162d3031939f4a93ef17d43f157b34412",class:"selection-button-div"},(0,s.h)("calcite-button",{key:"b4b6b520692a2c087dd0810f30c98ec232b501d4",appearance:"transparent",scale:"s",width:"full",onClick:()=>{this.selectDeselect()?this.selectedFields=this.filterFields?.length?this.selectedFields.filter((e=>!this.filterFields?.includes(e))):[]:this.selectedFields=this.filterFields?.length?[...new Set([...this.selectedFields,...this.filterFields])]:this.fields.map((e=>e.name)),this.arcgisChange.emit({selectedFields:this.selectedFields}),this.arcgisFieldPickListChange.emit({selectedFields:this.selectedFields})}},this.selectDeselect()?this.messages.deselectAll:this.messages.selectAll)),r=this.heading||(this.multiple?this.messages.headerSelect:this.messages.header);return(0,s.h)(s.H,{key:"5901d4302d8b708104d1a24aa52d676194ff8858",class:"js-app-flyout"},(0,s.h)("calcite-popover",{key:"77809b78c6acc6ad3adb1da5a0c289454372d6c6",dir:(0,a.g)(this.el),style:{"--calcite-popover-z-index":`${this.popoverProps.zIndex??100}`},placement:this.popoverProps.placement??"leading-start",open:!1,pointerDisabled:!0,referenceElement:this.popoverProps.refElement,offsetDistance:this.popoverProps.offsetDistance??-Math.round(this.popoverProps.refElement.getBoundingClientRect().width),offsetSkidding:this.popoverProps.offsetSkidding??0,overlayPositioning:this.popoverProps.overlayPositioning,triggerDisabled:this.popoverProps.triggerDisabled,autoClose:this.popoverProps.autoClose,label:this.heading??(this.multiple?this.messages.headerSelect:this.messages.header)??"",onCalcitePopoverClose:()=>{this.arcgisClose.emit(),this.arcgisFieldPickListDismissed.emit()},ref:e=>this.popoverNode=e},(0,s.h)("calcite-flow",{key:"b0ea73c0655211a1a42979e31ccdbadc29bcc2b4",ref:e=>{this.flowElement=e},style:{width:`${this.popoverProps.popoverWidth??this.popoverProps.refElement.getBoundingClientRect().width}px`}},(0,s.h)("calcite-flow-item",{key:"a098623ea6922d924949d7864430b4ce2f15e748",ref:e=>this.panelElement=e,class:"panel",heading:r,closable:!0,onCalciteFlowItemClose:()=>{this.arcgisClose.emit(),this.arcgisFieldPickListDismissed.emit()}},this.multiple&&e,!this.hideCancel&&t,!this.fields.length&&(0,s.h)("slot",{key:"88b8c134bf92f0cb02a9e001b0332c5d1d9204c6",name:"no-fields"}),(0,s.h)("calcite-list",{key:"5772758320bd8757ef34452a1f265457280e15fe",label:r,selectionMode:this.multiple?"multiple":"single",ref:e=>this.listNode=e,class:"content",filterEnabled:this.fields.length>=this.showFilterLength,filterPlaceholder:this.filterPlaceholderText??this.messages.filter,onCalciteListChange:()=>{const e=this.listNode.selectedItems.map((e=>e.value)),t=this.selectedFields.filter((t=>e.includes(t))),i=e.filter((e=>!this.selectedFields.includes(e)));this.selectedFields=[...new Set([...t,...i])],this.arcgisChange.emit({selectedFields:this.selectedFields}),this.arcgisFieldPickListChange.emit({selectedFields:this.selectedFields}),this.multiple||(this.arcgisClose.emit({selectedFields:this.selectedFields}),this.arcgisFieldPickListDismissed.emit({selectedFields:this.selectedFields}))},onCalciteListFilter:e=>{e.stopPropagation(),this.filterFields=this.listNode.filteredItems?.map((e=>e.value))}},this.fields.length>=this.showFilterLength&&!this.hideSort&&l,this.multiple&&this.showSelectionAll&&this.fields.length&&this.filterFields?.length?o:null,this.renderListItems()),this.filterFields&&!this.filterFields.length&&this.listNode?(0,s.h)("div",{class:"no-match-text"},this.filterNoResultsText??this.messages.noMatches):null))))}renderListItems(){return this.groupFieldsAndExpressions?(0,s.h)(s.F,null,this.expressionsOnly.length>0&&(0,s.h)("calcite-list-item-group",{heading:this.expressionsGroupHeading},this.expressionsOnly.map((e=>this.calciteValueList(e)))),this.fieldsOnly.length>0&&(0,s.h)("calcite-list-item-group",{heading:this.fieldsGroupHeading},this.fieldsOnly.map((e=>this.calciteValueList(e))))):(0,s.h)(s.F,null,[...this.getSortedList()].map((e=>this.calciteValueList(e))))}setUpObserver(){this.observer=new MutationObserver((e=>{for(const t of e)"style"===t.attributeName&&this.popoverNode&&this.dropdownNode&&"hidden"===this.popoverNode.style.visibility&&(this.dropdownNode.open=!1)}))}isExpression(e){return this.customExpressionCheck?this.customExpressionCheck(e):e.name.includes(r.expression)}static get assetsDirs(){return["assets"]}get el(){return(0,s.g)(this)}static get watchers(){return{fields:["updateGroupedLists"],lastSortBy:["updateGroupedLists"],customExpressionCheck:["updateGroupedLists"]}}};n.style=".panel{min-height:300px}.content{max-height:60vh}.selection-button-div{padding:4px 10px}.no-match-text{padding:12px}"},15773:(e,t,i)=>{i.d(t,{a:()=>r,b:()=>o,c:()=>a,d:()=>c,e:()=>d,f:()=>n,i:()=>h});var s="undefined"!=typeof window&&"$arcgis"in window&&"object"==typeof window.$arcgis&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function l(e){return void 0!==e.default}async function a(){if(s)return await window.$arcgis.import("esri/rest/support/Query");const e=await Promise.resolve().then(i.bind(i,34031));return l(e)?e.default:e}async function o(){if(s)return await window.$arcgis.import("esri/config");const e=await Promise.resolve().then(i.bind(i,12762));return l(e)?e.default:e}async function r(){if(s)return await window.$arcgis.import("esri/core/lang");const e=await Promise.resolve().then(i.bind(i,5294));return l(e)?e.default:e}async function n(){if(s)return await window.$arcgis.import("esri/core/reactiveUtils");const e=await Promise.resolve().then(i.bind(i,54312));return l(e)?e.default:e}async function h(){if(s)return await window.$arcgis.import("esri/intl");const e=await Promise.resolve().then(i.bind(i,52797));return l(e)?e.default:e}async function c(){if(s)return await window.$arcgis.import("esri/smartMapping/statistics/summaryStatistics");const e=await Promise.resolve().then(i.bind(i,24457));return l(e)?e.default:e}async function d(){if(s)return await window.$arcgis.import("esri/smartMapping/statistics/uniqueValues");const e=await Promise.resolve().then(i.bind(i,72349));return l(e)?e.default:e}}}]);