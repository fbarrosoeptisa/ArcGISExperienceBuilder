/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-6b6f47.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-6b6f47"],{80216:(e,o,s)=>{s.d(o,{a:()=>i,b:()=>n,c:()=>r,d:()=>a});var l=s(68180),t=s(99592);s(97127);async function r(e,o){const{layer:s,useFeatureReduction:r,mapImageSublayer:i,mapView:a,modules:n}=e,c=s;o=o||{};const p=(0,t.k)((0,t.j)(e));return await n.LocationCreator.createRenderer({layer:c,view:a,outlineOptimizationEnabled:!i&&(!(0,l.i)(o.outlineOptimizationEnabled)||o.outlineOptimizationEnabled),sizeOptimizationEnabled:!i&&(!(0,l.i)(o.sizeOptimizationEnabled)||o.sizeOptimizationEnabled),forBinning:"binning"===c.featureReduction?.type&&r}).then((e=>((0,t.l)(p,e.renderer),e)))}async function i(e,o){const{layer:s,useFeatureReduction:r,mapImageSublayer:i,mapView:a,modules:n}=e,c=s;o=o||{};const p=(0,t.j)(e),u=(0,t.a)(e),m=(0,t.k)(p),d=p.symbol?p.symbol:(0,t.m)(e,u),y={layer:c,view:a,outlineOptimizationEnabled:!i&&((0,l.i)(o.outlineOptimizationEnabled)?o.outlineOptimizationEnabled:!!m.sizeOutlineVisVar),sizeOptimizationEnabled:!i&&((0,l.i)(o.sizeOptimizationEnabled)?o.sizeOptimizationEnabled:!!m.sizeAutoVisVar),forBinning:"binning"===c.featureReduction?.type&&r};return await n.LocationCreator.createRenderer(y).then((e=>((0,t.l)(m,e.renderer),d&&(e.renderer.symbol=d),e)))}async function a(e){const{layer:o,useFeatureReduction:s,mapView:l,modules:r}=e,i=o;return await r.LocationCreator.createRenderer({layer:i,view:l,outlineOptimizationEnabled:!0,forBinning:"binning"===i.featureReduction?.type&&s}).then((e=>(0,t.b)(e.renderer,"size","outline")))}async function n(e){const{layer:o,useFeatureReduction:s,mapView:l,modules:r}=e,i=o;return await r.LocationCreator.createRenderer({layer:i,view:l,outlineOptimizationEnabled:!1,sizeOptimizationEnabled:!0,forBinning:"binning"===i.featureReduction?.type&&s}).then((e=>(0,t.b)(e.renderer,"size","auto")))}},39304:(e,o,s)=>{s.d(o,{a:()=>G,b:()=>B,c:()=>u,d:()=>L,e:()=>O,f:()=>V,g:()=>k,h:()=>h,i:()=>A,j:()=>q,k:()=>z,l:()=>w,m:()=>x,n:()=>F,o:()=>f,p:()=>T,q:()=>v,r:()=>m,s:()=>I,t:()=>j,u:()=>S,v:()=>E,w:()=>b});s(68180);var l=s(99592),t=s(99818),r=(s(97127),s(80216));let i;const a="polygon";function n(e){const{modules:o}=e;return[new o.EsriColor([255,255,255]),new o.EsriColor([178,178,178]),new o.EsriColor([128,128,128]),new o.EsriColor([92,92,92]),new o.EsriColor([77,77,77]),new o.EsriColor([51,51,51]),new o.EsriColor([26,26,26])]}function c(e){const{modules:o}=e;return[new o.EsriColor("#ff4040"),new o.EsriColor("#ff8200"),new o.EsriColor("#faa83f"),new o.EsriColor("#ffd159"),new o.EsriColor("#74b566"),new o.EsriColor("#008977"),new o.EsriColor("#33e3c8"),new o.EsriColor("#43abeb"),new o.EsriColor("#4c64c9"),new o.EsriColor("#9868ed"),new o.EsriColor("#b155e6"),new o.EsriColor("#db5181"),new o.EsriColor("#e03b99"),new o.EsriColor("#2b2b2b"),new o.EsriColor("#bdbdbd"),new o.EsriColor("#ffffff")]}function p(e){return c(e).reverse()}function u(e,o){const{referenceElement:s,heading:l}=o,t=document.createElement("arcgis-smart-mapping-styler-popover");return t.smartMappingState=e,t.referenceElement=s,t.heading=l,document.body.appendChild(t),t.open=!0,t.reposition(),t}function m(e){e?.parentNode&&(e.open=!1,e.parentNode?.removeChild(e))}async function d(e,o){const s=document.createElement("arcgis-symbol-styler");return s.initialSourceId=i,s.hideSvgUploadSymbols=e.hideSvgUploadSymbols,s.hideAddStyles=e.hideAddStyles,s.style="max-height: max(calc(100vh - 200px), 300px)",s.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:e.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await o.getPopoverRefElement()},s.addEventListener("arcgisSourceIdChange",(({detail:e})=>i=e)),s}function y(e,o,s){return document.URL.includes("debug=true")&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify({...s,portal:"..."}))),e.edit(o,s)}function g(e,o){const{symbol:s,info:{marker:l,stroke:t,fill:r}}=o.detail;document.URL.includes("debug=true")&&(console.log("onStylerEdit - symbol:",JSON.stringify(s?.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(t)),console.log("onStylerEdit - info.fill:",JSON.stringify(r))),e(o)}async function b(e,o){const{mapImageSublayer:s,portal:t,modules:r}=e,{onChange:i,popoverNode:a}=o,c=(0,l.j)(e),p=(0,l.z)(e),u="pie-chart"===(0,l.j)(e).type,m=(0,l.b)(c,"size"),b=(0,l.b)(c,"size","outline");let f=c.backgroundFillSymbol;f||(f=new r.SimpleFillSymbol,f.color=null,(0,l.j)(e).backgroundFillSymbol=f,i());const h=!!f.color,k=(0,l.a9)(f),w=n(e),z=n(e);let C;C=f.outline?{color:f.outline.color?f.outline.color:new r.EsriColor([0,0,0,.5]),size:f.outline.width,style:f.outline.style,autoAdjusted:!!b}:{color:new r.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!b},f.outline||(f.outline=new r.SimpleLineSymbol,(0,l.X)(e,f,new r.EsriColor([0,0,0,0])));const E=await d(e,a),v=y(E,r.esriLang.clone(f),{portal:t,symbolFilter:"simple",sections:{fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:w},stroke:{type:"color",optional:!0,suggestedColors:z,extraParts:{width:!0,autoStrokeAdjust:!(s||p&&u&&!m)&&"editable"}}},fill:{color:f.color?f.color:new r.EsriColor([0,0,0,.5])},stroke:C,fillEnabled:h,strokeEnabled:k});return E.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{(0,l.j)(e).backgroundFillSymbol=s,P(e,s,t?.autoAdjusted,r?.autoAdjusted,E,o)}))),a.addStyler(E),await v,N(e,f,E)}async function f(e,o){const{mapImageSublayer:s,portal:t,modules:r}=e,{popoverNode:i}=o,a=(0,l.j)(e),c=(0,l.b)(a,"size","outline"),p=!!a.backgroundColor,u=!!a.outline?.color,m=n(e),b=n(e);let f;f=a.outline?{color:a.outline.color?a.outline.color:new r.EsriColor([0,0,0,.5]),size:a.outline.width,style:a.outline.style,autoAdjusted:!!c}:{color:new r.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!c};const h=new r.SimpleFillSymbol;h.color=(0,l.j)(e).backgroundColor,h.outline=(0,l.j)(e).outline;const k=await d(e,i),w=y(k,r.esriLang.clone(h),{portal:t,symbolFilter:"simple",sections:{fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:m},stroke:{type:"color",optional:!0,suggestedColors:b,extraParts:{width:!0,autoStrokeAdjust:!s&&"editable"}}},fill:{color:a.backgroundColor?a.backgroundColor:new r.EsriColor([0,0,0,.5])},stroke:f,fillEnabled:p,strokeEnabled:u});k.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{(0,l.j)(e).backgroundColor=(0,l.Z)(e,s),(0,l.j)(e).outline=s.outline,P(e,s,t?.autoAdjusted,r?.autoAdjusted,k,o)}))),i.addStyler(k),await w;const z=new r.SimpleFillSymbol;return z.color=a.backgroundColor,z.outline=a.outline,N(e,z,k)}async function h(e,o){const{onChange:s,popoverNode:t}=o,{portal:r,modules:i}=e,a=(0,l.w)(e),c=(0,l.x)(e),p=(0,l.z)(e),u=(0,l.j)(e),m=(0,l.a)(e),b=(0,l.b)(u,"size","auto"),f=(0,l.b)(u,"size","outline");let h=u.defaultSymbol;_(h)||(h=(0,l.m)(e,m));const k="picture-marker"!==h.type&&!!h.color,w=(0,l.a9)(h),z="cim"===h.type&&"CIMPointSymbol"===h.data.symbol.type,C=n(e),E=n(e);let v;if(h||(h=p?new i.SimpleFillSymbol:c?new i.SimpleLineSymbol:new i.SimpleMarkerSymbol),"simple-fill"===h.type){const e=h;if(e.outline){const o=e.outline;v={color:o.color?o.color:new i.EsriColor([0,0,0,.5]),size:o.width,style:o.style,autoAdjusted:!!f}}else v={color:new i.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!f}}else if("simple-line"===h.type){const e=h;v={color:e.color?e.color:new i.EsriColor([0,0,0,.5]),size:e.width,style:e.style,marker:e.marker}}else if("simple-marker"===h.type&&h.outline){const e=h.outline;v={color:e.color?e.color:new i.EsriColor([0,0,0,.5]),size:e.width,style:e.style}}else v="cim"===h.type?X(e,h):{color:new i.EsriColor([255,255,255,.5]),size:1};const S=await d(e,t);let j;j=y(S,i.esriLang.clone(h),c?{portal:r,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:E,extraParts:{width:!b,autoStrokeAdjust:!1}}},stroke:v}:{portal:r,symbolFilter:p&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:z||["simple-marker","picture-marker"].includes(h.type)?{open:!0,parts:{size:!b},symbolsOpen:!0,sizeOpen:!0,markerType:(0,l.ad)(e)?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:C},stroke:{type:"color",optional:!0,suggestedColors:E,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(h.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.Z)(e,h)||new i.EsriColor([128,128,128])},marker:a?{size:(0,l.$)(e,h)}:void 0,stroke:v,fillEnabled:k,strokeEnabled:w}),S.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:o}})=>{(0,l.j)(e).defaultSymbol=o,s()}))),t.addStyler(S),await j}async function k(e,o){const{mapImageSublayer:s,mapView:r,classedSymbolSelectedIdx:i,portal:a,modules:n}=e,{onChange:u,popoverNode:m}=o,b=(0,l.w)(e),f=(0,l.x)(e),h=(0,l.z)(e),k=(0,l.j)(e),w=(0,l.a)(e),z=(0,l.b)(k,"size","auto"),C=(0,l.b)(k,"size","outline");let E=k.classBreakInfos?.length?n.esriLang.clone(k.classBreakInfos[i].symbol):(0,l.m)(e,w);_(E)||(E=(0,l.m)(e,w)),z&&(0,l.a0)(e,E,(0,t.g)(z,r.scale));const v="picture-marker"!==E.type&&!!E.color,S=(0,l.a9)(E),j="cim"===E.type&&"CIMPointSymbol"===E.data.symbol.type,A=c(e),O=p(e);let V;if((b||f)&&z?(0,l.a0)(e,E,(0,t.g)(z,r.scale)):h&&C&&E.outline&&(E.outline.width=(0,t.g)(C,r.scale)),"simple-fill"===E.type){const e=E;V=e.outline?{color:e.outline.color?e.outline.color:new n.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!C}:{color:new n.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!C}}else if("simple-marker"===E.type){const e=E;V=e.outline?{color:e.outline.color?e.outline.color:new n.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new n.EsriColor([0,0,0,.5]),size:1}}else if("cim"===E.type)V=X(e,E);else if("simple-line"===E.type){const e=E;V={size:e.width,style:e.style,marker:e.marker,color:e.color?e.color:new n.EsriColor([0,0,0,.5])}}else V={color:new n.EsriColor([255,255,255,.5]),size:1};const I=await d(e,m);let x;if(x=y(I,n.esriLang.clone(E),f?{portal:a,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:A,extraParts:{style:"cim"!==E.type,arrow:"cim"!==E.type,width:"size"!==w,autoStrokeAdjust:!s&&"size"!==w&&"editable"},parts:{extra:"size"!==w&&!z||"cim"!==E.type}}},stroke:V}:{portal:a,symbolFilter:h&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:j||["simple-marker","picture-marker"].includes(E.type)?{open:!0,parts:{size:"size"!==w&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:"size"!==w,markerType:(0,l.ad)(e)?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.aa)(e,E),suggestedColors:A},stroke:{type:"color",optional:!0,suggestedColors:O,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(E.type),width:!0,autoStrokeAdjust:!(s||!h||"cim"===E.type||"size"===w)&&"editable"}}},fill:{color:(0,l.Z)(e,E)||M(A[1],.85)},marker:b?{size:(0,l.$)(e,E),autoAdjusted:!!z}:void 0,stroke:V,fillEnabled:v,strokeEnabled:S}),I.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{const a=(0,l.j)(e),n=a.classBreakInfos.slice(),c=n[i],p=(0,l.$)(e,c.symbol);c.symbol=s,a.classBreakInfos=n,"size"===w?((0,l.a0)(e,c.symbol,p),u()):P(e,s,t?.autoAdjusted,r?.autoAdjusted,I,o)}))),m.addStyler(I),await x,"size"!==w)return N(e,k.classBreakInfos?.length?k.classBreakInfos[0].symbol:void 0,I)}async function w(e,o){await C(e,{...o,type:"above"})}async function z(e,o){await C(e,{...o,type:"below"})}async function C(e,o){const{portal:s,modules:t}=e,{onChange:r,popoverNode:i}=o,a=(0,l.j)(e),n=(0,l.b)(a,"color"),u="above"===o.type;let m=a.classBreakInfos?.[u?1:0]?.symbol||(0,l.m)(e,"color-size");_(m)||(m=(0,l.m)(e,"color-size"));const b="picture-marker"!==m.type&&!!m.color,f=(0,l.a9)(m),h=c(e),k="simple-line"===m.type?c(e):p(e);let w;if("simple-marker"===m.type){const e=m;w=e.outline?{color:e.outline.color?e.outline.color:new t.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new t.EsriColor([0,0,0,.5]),size:1}}else if("simple-line"===m.type){const e=m;w={color:e.color,size:e.width,style:e.style,marker:e.marker}}else w="cim"===m.type?X(e,m):{color:new t.EsriColor([255,255,255,.5]),size:1};const z=await d(e,i),C=y(z,t.esriLang.clone(m),{portal:s,sections:{marker:n&&["simple-marker","cim"].includes(m.type)?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.ad)(e)?["simple","cim:vector"]:["simple"]}:!n&&["simple-marker","picture-marker","cim"].includes(m.type)?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1}:void 0,fill:n?void 0:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.aa)(e,m),suggestedColors:h},stroke:n?void 0:{type:"color",optional:!0,suggestedColors:k,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(m.type),width:!0,autoStrokeAdjust:!1}}},fill:n?void 0:{color:(0,l.Z)(e,m)||M(h[1],.85)},marker:{size:(0,l.$)(e,m)},stroke:w,fillEnabled:b,strokeEnabled:f});z.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:o}})=>{const s=(0,l.j)(e);s.authoringInfo.univariateSymbolStyle="custom";const t=s.classBreakInfos.slice();t[u?1:0].symbol=o,s.classBreakInfos=t,r()}))),i.addStyler(z),await C}async function E(e,o){const{layer:s,mapImageSublayer:r,mapView:i,portal:a,modules:n}=e,{popoverNode:u}=o,m="ogc-feature"===s.type,b=(0,l.w)(e),f=(0,l.x)(e),h=(0,l.z)(e),k=(0,l.j)(e),w=(0,l.b)(k,"size","auto"),z=(0,l.b)(k,"size","outline");let C=k.symbol;_(C)||(C=(0,l.m)(e));const E="picture-marker"!==C.type&&!!C.color,v=(0,l.a9)(C),S="cim"===C.type&&"CIMPointSymbol"===C.data.symbol.type,j=c(e),A="simple-line"===C.type?c(e):p(e);let O;if("simple-fill"===C.type){const e=C;O=e.outline?{color:e.outline.color?e.outline.color:new n.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!z}:{color:new n.EsriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===C.type){const e=C;O=e.outline?{color:e.outline.color?e.outline.color:new n.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new n.EsriColor([0,0,0,.5]),size:1}}else if("simple-line"===C.type){const e=C;O={color:e.color,size:w?(0,t.g)(w,i.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!w}}else"cim"===C.type?(O=X(e,C),f&&(O.size=w?(0,t.g)(w,i.scale):O.size,O.autoAdjusted=!!w,w&&(0,l.a0)(e,C,O.size))):O={color:new n.EsriColor([255,255,255,.5]),size:1};const V=await d(e,u);let I;return I=y(V,n.esriLang.clone(C),f?{portal:a,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color",optional:"cim"===C.type,open:!0,suggestedColorsOpen:!0,suggestedColors:A,extraParts:{style:"cim"!==C.type,arrow:"cim"!==C.type,width:!0,autoStrokeAdjust:!m&&!r&&"editable"}}},stroke:O}:{portal:a,symbolFilter:h&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:S||["simple-marker","picture-marker"].includes(C.type)?{open:!0,symbolsOpen:!0,sizeOpen:!0,parts:{size:{autoSizeAdjust:!m&&!r&&"editable"}},markerType:(0,l.ad)(e)?"all":["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.aa)(e,C),suggestedColors:j},stroke:{type:"color",optional:!0,suggestedColors:A,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(C.type),width:!0,autoStrokeAdjust:!(m||r||!h||"cim"===C.type)&&"editable"}}},fill:{color:(0,l.Z)(e,C)||M(j[1],.85)},marker:b?{size:w?(0,t.g)(w,i.scale):(0,l.$)(e,C),autoAdjusted:!r&&!!w}:void 0,stroke:O,fillEnabled:E,strokeEnabled:v}),V.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{(0,l.j)(e).symbol=s,P(e,s,t?.autoAdjusted,r?.autoAdjusted,V,o)}))),u.addStyler(V),await I,N(e,k.symbol,V)}async function v(e,o,s){const{layer:t,portal:r,modules:i}=o,{onChange:a,popoverNode:n}=s,u=t,m="point"===e,b="line"===e;let f=m?u.pointSymbol:b?u.lineSymbol:u.polygonSymbol;_(f)||(f=(0,l.ak)(o,e));const h="picture-marker"!==f.type&&!!f.color,k=(0,l.a9)(f),w=c(o),z="simple-line"===f.type?c(o):p(o);let C;if("simple-fill"===f.type){const e=f;C=e.outline?{color:e.outline.color?e.outline.color:new i.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!1}:{color:new i.EsriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===f.type){const e=f;C=e.outline?{color:e.outline.color?e.outline.color:new i.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.EsriColor([0,0,0,.5]),size:1}}else if("simple-line"===f.type){const e=f;C={color:e.color,size:e.width,style:e.style,marker:e.marker,autoAdjusted:!1}}else C={color:new i.EsriColor([255,255,255,.5]),size:1};const E=await d(o,n);let v;v=y(E,i.esriLang.clone(f),b?{portal:r,sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:z,extraParts:{width:!0,autoStrokeAdjust:!1}}},stroke:C}:{portal:r,sections:{marker:["simple-marker","picture-marker"].includes(f.type)?{open:!0,symbolsOpen:!0,sizeOpen:!0,markerType:["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.aa)(o,f),suggestedColors:w},stroke:{type:"color",optional:!0,suggestedColors:z,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(f.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.Z)(o,f)||M(w[1],.85)},marker:m?{size:(0,l.$)(o,f),autoAdjusted:!1}:void 0,stroke:C,fillEnabled:h,strokeEnabled:k}),E.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:e}})=>{m?u.pointSymbol=e:b?u.lineSymbol=e:u.polygonSymbol=e,a()}))),n.addStyler(E),await v}async function S(e,o){const{portal:s,modules:t}=e,{onChange:r,popoverNode:i}=o,a=(0,l.x)(e),n=(0,l.j)(e),u=(0,l.a)(e),m=(0,l.b)(n,"color"),b=(0,l.G)(n,"reference-size");let f;if(["type-size","type-size-age","predominance-size","relationship-size"].includes(u)){const o=(0,l.j)(e);f=o.uniqueValueInfos?.length?o.uniqueValueInfos[0].symbol:(0,l.m)(e,u)}else f=n.classBreakInfos?.length?n.classBreakInfos[0].symbol:(0,l.m)(e,u);_(f)||(f=(0,l.m)(e,u));const h="picture-marker"!==f.type&&!!f.color,k=(0,l.a9)(f),w="cim"===f.type&&"CIMPointSymbol"===f.data.symbol.type,z=c(e),C="simple-line"===f.type?c(e):p(e);let E;if("simple-fill"===f.type){const e=f;E=e.outline?{color:e.outline.color?e.outline.color:new t.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style}:{color:new t.EsriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===f.type){const e=f;E=e.outline?{color:e.outline.color?e.outline.color:new t.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new t.EsriColor([0,0,0,.5]),size:1}}else if("simple-line"===f.type){const e=f;E={color:e.color,size:e.width,style:e.style,marker:e.marker}}else E="cim"===f.type?X(e,f):{color:new t.EsriColor([255,255,255,.5]),size:1};const v=await d(e,i);let S;b&&(v.mode="minimal"),S=["color-size","color-age-size","color-size-age","type-size","type-size-age","predominance-size","relationship-size"].includes((0,l.a)(e))?y(v,t.esriLang.clone(f),a?{portal:s,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraOpen:!0,extraParts:{style:"cim"!==f.type,arrow:"cim"!==f.type,width:!1,autoStrokeAdjust:!1},suggestedColors:C,parts:{suggestedColors:!1,customColor:!1,transparency:!0,extra:"cim"!==f.type}}},stroke:E}:{portal:s,sections:{marker:w||["simple-marker","picture-marker"].includes(f.type)?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.ad)(e)?["simple","cim:vector"]:["simple"]}:b?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,stroke:{type:"color",open:!0,optional:!0,suggestedColors:C,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(f.type),width:!0,autoStrokeAdjust:!1}}},marker:{size:(0,l.$)(e,f)},stroke:E,strokeEnabled:k}):y(v,t.esriLang.clone(f),a?{portal:s,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraParts:{style:"cim"!==f.type,arrow:"cim"!==f.type,width:!1,autoStrokeAdjust:!1},suggestedColorsOpen:!0,suggestedColors:C,parts:{extra:"cim"!==f.type}}},stroke:E}:{portal:s,sections:{marker:w||["simple-marker","picture-marker"].includes(f.type)?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.ad)(e)?"all":["simple","picture"]}:b?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.aa)(e,f),suggestedColors:z},stroke:{type:"color",optional:!0,suggestedColors:C,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(f.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.Z)(e,f)||M(z[1],.85)},marker:{size:(0,l.$)(e,f)},stroke:E,fillEnabled:h,strokeEnabled:k}),v.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:o}})=>{const s=(0,l.j)(e);if(s.classBreakInfos){let r=s.classBreakInfos;if(!r?.length)return;r=r.slice(),r.forEach((r=>{const i=(0,l.$)(e,r.symbol),a=(0,l.Z)(e,r.symbol);r.symbol=o.clone(),m?(0,l.X)(e,r.symbol,new t.EsriColor([0,0,0,.5])):s.uniqueValueInfos&&(0,l.X)(e,r.symbol,a),b||(0,l.a0)(e,r.symbol,i)})),s.classBreakInfos=r}else{let r=s.uniqueValueGroups;if(!r?.length||!r[0].classes?.length)return;r=r.slice(),r.forEach((s=>{s.classes.forEach((s=>{const r=(0,l.$)(e,s.symbol),i=(0,l.Z)(e,s.symbol);s.symbol=o.clone(),m?(0,l.X)(e,s.symbol,new t.EsriColor([0,0,0,.5])):(0,l.X)(e,s.symbol,i),(0,l.a0)(e,s.symbol,r)}))})),s.uniqueValueGroups=r}r()}))),i.addStyler(v),await S}async function j(e,o){const{mapImageSublayer:s,mapView:r,portal:i,modules:n}=e,{onChange:c,popoverNode:u}=o,m=(0,l.w)(e),b=(0,l.x)(e),f=(0,l.z)(e),h=(0,l.j)(e),k=h.authoringInfo,w=(0,l.a)(e),z="univariate-color-size"===k?.type,C="above-and-below"===k?.univariateTheme,E=C&&!k.univariateSymbolStyle,v=(0,l.b)((0,l.j)(e),"color"),S=(0,l.b)(h,"size","auto"),j=(0,l.b)(h,"size","outline"),A=(0,l.G)(h,"reference-size"),O=["color-size","color-age-size","color-size-age"].includes(w),V=(0,l.G)((0,l.j)(e),"color");let I,x=v?v.stops.map((e=>e.color)):h.classBreakInfos.map((o=>(0,l.Z)(e,o.symbol)?.clone()||new n.EsriColor([0,0,0,0])));x.length>10&&(x=x.slice(0,10)),x.reverse();let L=h.classBreakInfos?.length?h.classBreakInfos[0].symbol:(0,l.m)(e);if(!_(L)||(!C||E)&&!D(L)){const o=(0,l.$)(e,L)??L.width;L=(0,l.m)(e,w),(0,l.a0)(e,L,o)}const q=!(C&&!v&&"picture-marker"===L.type&&"picture-marker"===h.classBreakInfos[1].symbol?.type),G=(0,l.a9)(L),T="cim"===L.type&&"CIMPointSymbol"===L.data.symbol.type,B=await n.colorUtils.getBackgroundColorTheme(r),F=n.colorSchemes.getSchemes({basemapTheme:B,geometryType:(0,l.A)(e)||a,theme:k?.univariateTheme||V?.theme||"high-to-low"});if(!v){const o=n.colorSchemes.getSchemes({basemap:r.map.basemap||"topo",geometryType:(0,l.A)(e)||a,theme:"above-and-below"});F.secondarySchemes.push(o.primaryScheme),F.secondarySchemes=F.secondarySchemes.concat(o.secondarySchemes)}const R=v?0:h.classBreakInfos.length;let Z=(0,l.ab)(F,R);Z=Z.filter((e=>e.colors?.length));const $=Z.map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),M=p(e);let U;if((0,l.X)(e,L,x[x.length-1]),(O||m||b)&&S?(0,l.a0)(e,L,(0,t.g)(S,r.scale)):f&&j&&L.outline&&(L.outline.width=(0,t.g)(j,r.scale)),"simple-fill"===L.type){const e=L;U=e.outline?{color:e.outline.color?e.outline.color:new n.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!j}:{color:new n.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!j}}else if("simple-marker"===L.type){const e=L;U=e.outline?{color:e.outline.color?e.outline.color:new n.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new n.EsriColor([0,0,0,.5]),size:1}}else if("cim"===L.type)U=X(e,L),b&&(U.size=S?(0,t.g)(S,r.scale):U.size,U.autoAdjusted=!!S,S&&(0,l.a0)(e,L,U.size));else if("simple-line"===L.type){const e=L;U={color:new n.EsriColor([255,255,255,.5]),size:S?(0,t.g)(S,r.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!S}}else U={color:new n.EsriColor([255,255,255,.5]),size:1};const J=await d(e,u);let W;return A&&(J.mode="minimal"),I=L.clone(),W=b?y(J,n.esriLang.clone(L),{portal:i,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color-ramp",style:v?"continuous":"discrete",colorRamps:$,open:!0,colorRampsOpen:!0,extraParts:{style:"cim"!==L.type,arrow:"cim"!==L.type,autoStrokeAdjust:!s&&!O&&"editable",width:!O},parts:{extra:!O||"cim"!==L.type}}},stroke:{...U,color:x}}):y(J,!C||E?n.esriLang.clone(L):(0,l.m)(e),{portal:i,symbolFilter:f&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:C&&!E||!T&&!["simple-marker","picture-marker"].includes(L.type)?C&&!E?{parts:{preview:!1,rotation:!1,size:!1}}:A?{parts:{preview:!1,size:!1}}:void 0:{open:!0,parts:{size:!O&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!O,markerType:(0,l.ad)(e)?["simple","cim:vector"]:["simple"]},fill:{type:"color-ramp",style:v?"continuous":"discrete",open:!(0,l.al)(L),colorRampsOpen:!(0,l.al)(L),colorRamps:$},stroke:!C||E?{type:"color",optional:!0,open:!1,suggestedColors:M,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(L.type),width:!0,autoStrokeAdjust:!(s||!f||"cim"===L.type||O)&&"editable"}}:void 0},fill:{color:x},marker:C&&!E||!O&&!m?void 0:{size:S?(0,t.g)(S,r.scale):(0,l.$)(e,L),autoAdjusted:!!S},stroke:U,strokeEnabled:G,fillEnabled:q}),J.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r,fill:i}}})=>{const a=(0,l.j)(e),p=(0,l.b)(a,"color"),u=n.esriLang.clone((i||r).color),m=x[0],d=x.length!==u.length||x.some(((e,o)=>e.r!==u[o].r||e.g!==u[o].g||e.b!==u[o].b))||m.r!==u[0].r||m.g!==u[0].g||m.b!==u[0].b,y=m.a!==u[0].a,g=u[0].a,b=(0,l.ap)(e,s,I);if(d&&!b.any&&(b.any=!0,b.color=!0),z&&C||u.reverse(),!C||E){if(b.any){const o=a.classBreakInfos.slice();o.forEach(((o,t)=>{o.symbol=(0,l.aq)(e,o.symbol,s,d&&!p?u[t%u.length]:y&&!p?(0,l.ar)((0,l.Z)(e,o.symbol),g):(0,l.Z)(e,o.symbol)||new n.EsriColor([0,0,0,0]),b)})),a.classBreakInfos=o}}else if(!p){u.reverse();const o=a.classBreakInfos.slice();o.forEach(((o,s)=>{(0,l.X)(e,o.symbol,u[s])})),a.classBreakInfos=o}if(p){if(x.length!==u.length&&5===u.length){const e=p.stops.length,o=[];o[0]=p.stops[0],o[1]=p.stops[Math.floor(e/4)],o[2]=p.stops[Math.floor(e/2)],o[3]=p.stops[e-Math.ceil(e/4)],o[4]=p.stops[e-1],p.stops=o}p.stops.forEach(((e,o)=>{e.color=u[o]}));const o=a.classBreakInfos.slice();(0,l.X)(e,o[0].symbol,new n.EsriColor([170,170,170,1])),a.classBreakInfos=o}O?c():P(e,s,t?.autoAdjusted,r?.autoAdjusted,J,o),I=s.clone(),x=p?p.stops.map((e=>e.color)):a.classBreakInfos.map((o=>(0,l.Z)(e,o.symbol)||new n.EsriColor([0,0,0,0]))).reverse()}))),u.addStyler(J),await W,N(e,h.classBreakInfos?.length?h.classBreakInfos[0].symbol:void 0,J,(o=>{f&&L.outline?L.outline.width=o:f||(0,l.a0)(e,L,o),I=L.clone()}))}async function A(e,o){const{mapImageSublayer:s,mapView:r,portal:i,modules:n}=e,{onChange:c,popoverNode:u}=o,m=(0,l.w)(e),b=(0,l.x)(e),f=(0,l.z)(e),h=(0,l.j)(e),k=(0,l.a)(e),w=["type-size","type-size-age"].includes(k),z=(0,l.b)(h,"size","auto"),C=(0,l.b)(h,"size","outline"),E=(0,l.G)(h,"reference-size"),v=h.uniqueValueGroups;let S,j=[];const A=v.length?v[v.length-1]:void 0,O=A?.classes?.length&&(0,l.Z)(e,A.classes[A.classes.length-1].symbol)?.a||1;v.forEach((o=>j=j.concat(o.classes.map((o=>(0,l.Z)(e,o.symbol)||new n.EsriColor([0,0,0,O])))))),j.reverse();let V=0;v.forEach((e=>V+=e.classes.length));const I=n.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.A)(e)||a,numColors:V});let x=h.uniqueValueGroups?.length&&h.uniqueValueGroups[0].classes.length?n.esriLang.clone(h.uniqueValueGroups[0].classes[0].symbol):(0,l.m)(e,k);if(!D(x)){const o=(0,l.$)(e,x)??x.width;x=(0,l.m)(e,k),(0,l.a0)(e,x,o)}const L=(0,l.a9)(x),q="cim"===x.type&&"CIMPointSymbol"===x.data.symbol.type,G=(0,l.ab)(I,Math.min(V,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),T=p(e);let B;if((0,l.X)(e,x,j[j.length-1]),(w||m||b)&&z?(0,l.a0)(e,x,(0,t.g)(z,r.scale)):f&&C&&x.outline&&(x.outline.width=(0,t.g)(C,r.scale)),"simple-fill"===x.type){const e=x;B=e.outline?{color:e.outline.color?e.outline.color:new n.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!C}:{color:new n.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!C}}else if("simple-marker"===x.type){const e=x;B=e.outline?{color:e.outline.color?e.outline.color:new n.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new n.EsriColor([0,0,0,.5]),size:1}}else if("cim"===x.type)B=X(e,x),b&&(B.size=z?(0,t.g)(z,r.scale):B.size,B.autoAdjusted=!!z,z&&(0,l.a0)(e,x,B.size));else if("simple-line"===x.type){const e=x;B={color:j[j.length-1],size:z?(0,t.g)(z,r.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!z}}else B={color:new n.EsriColor([255,255,255,.5]),size:1};const F=await d(e,u);let R;return E&&(F.mode="minimal"),S=x.clone(),R=y(F,n.esriLang.clone(x),b?{portal:i,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:G,extraParts:{style:"cim"!==x.type,arrow:"cim"!==x.type,autoStrokeAdjust:!s&&!w&&"editable",width:!w},parts:{extra:!w||"cim"!==x.type}}},stroke:{...B,color:j}}:{portal:i,symbolFilter:f&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:q||["simple-marker","picture-marker"].includes(x.type)?{open:(0,l.al)(x),parts:{size:!w&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!w,markerType:(0,l.ad)(e)?["simple","cim:vector"]:["simple"]}:E?{parts:{preview:!1,size:!1}}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.al)(x),colorRampsOpen:!(0,l.al)(x),colorRamps:G},stroke:{type:"color",optional:!0,open:!1,suggestedColors:T,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(x.type),width:!0,autoStrokeAdjust:!(s||!f||"cim"===x.type||w)&&"editable"}}},fill:{color:j},marker:w||m?{size:z?(0,t.g)(z,r.scale):(0,l.$)(e,x),autoAdjusted:!!z}:void 0,stroke:B,strokeEnabled:L}),F.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r,fill:i}}})=>{const a=n.esriLang.clone((i||r).color),p=j[0],u=j.length!==a.length||j.some(((e,o)=>e.r!==a[o].r||e.g!==a[o].g||e.b!==a[o].b))||p.r!==a[0].r||p.g!==a[0].g||p.b!==a[0].b,m=p.a!==a[0].a,d=a[0].a;a.reverse();const y=(0,l.j)(e),g=(0,l.ap)(e,s,S);if(u&&!g.any&&(g.any=!0,g.color=!0),g.any){const o=y.uniqueValueGroups.slice();let t=0;o.forEach((o=>{o.classes.forEach(((o,r)=>{"picture-marker"===o.symbol.type&&(u||m)&&(o.symbol=n.esriLang.clone(s),(0,l.X)(e,o.symbol,a[(t+r)%a.length])),o.symbol=(0,l.aq)(e,o.symbol,s,u?a[(t+r)%a.length]:m?(0,l.ar)((0,l.Z)(e,o.symbol),d):(0,l.Z)(e,o.symbol)||new n.EsriColor([0,0,0,0]),g)})),t+=o.classes.length})),y.uniqueValueGroups=o}w?c():P(e,s,t?.autoAdjusted,r?.autoAdjusted,F,o),S=s.clone(),u&&(j=[],y.uniqueValueGroups.forEach((o=>j=j.concat(o.classes.map((o=>(0,l.Z)(e,o.symbol)||new n.EsriColor([0,0,0,0])))))),j.reverse(),j.length>10&&(j=j.slice(0,10)))}))),u.addStyler(F),await R,N(e,h.uniqueValueGroups?.length&&h.uniqueValueGroups[0].classes.length?h.uniqueValueGroups[0].classes[0].symbol:void 0,F,(o=>{f&&x.outline?x.outline.width=o:f||(0,l.a0)(e,x,o),S=x.clone()}))}async function O(e,o){const{mapView:s,portal:t,modules:r}=e,{groupIdx:i,onChange:n,popoverNode:c}=o,p=(0,l.j)(e).uniqueValueGroups[i],u=(0,l.Z)(e,p.classes[p.classes.length-1].symbol)?.a||1;let m=p.classes.map((o=>(0,l.Z)(e,o.symbol)||new r.EsriColor([0,0,0,u])));m.reverse();const b=p.classes.length,f=await r.colorUtils.getBackgroundColorTheme(s),h=r.typeSchemes.getSchemes({basemapTheme:f,geometryType:(0,l.A)(e)||a,numColors:b}),k=r.colorSchemes.getSchemes({basemapTheme:f,geometryType:(0,l.A)(e)||a,theme:"high-to-low"});k.primaryScheme.colors=k.primaryScheme.colorsForClassBreaks[9].colors,k.primaryScheme.colorsForClassBreaks=void 0,k.secondarySchemes=k.secondarySchemes.filter((e=>e.colorsForClassBreaks?.length>=10)),k.secondarySchemes.forEach((e=>{e.colors=e.colorsForClassBreaks[9].colors,e.colorsForClassBreaks=void 0})),h.secondarySchemes.push(k.primaryScheme),h.secondarySchemes=h.secondarySchemes.concat(k.secondarySchemes);const w=(0,l.ab)(h,Math.min(b,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),z=await d(e,c),C=y(z,new r.SimpleFillSymbol,{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:w,parts:{transparency:!1}}},fill:{color:m}});z.addEventListener("arcgisEdit",g.bind(null,(({detail:{info:{fill:o}}})=>{const s=r.esriLang.clone(o.color).reverse(),t=(0,l.j)(e),a=(0,l.a)(e),c=t.uniqueValueGroups.slice();c[i].classes.forEach(((o,t)=>{"picture-marker"===o.symbol.type&&(o.symbol=(0,l.m)(e,a)),(0,l.X)(e,o.symbol,s[t%s.length])})),t.uniqueValueGroups=c,n(),m=t.uniqueValueGroups[i].classes.map((o=>(0,l.Z)(e,o.symbol))),m.reverse(),m.length>10&&(m=m.slice(0,10))}))),c.addStyler(z),await C}async function V(e,o){const{mapImageSublayer:s,mapView:r,lastDefault:i,portal:c,modules:u}=e,{onChange:m,popoverNode:b,selectedValue:f}=o,h=(0,l.i)(e),[k,w]=!h&&f.split("/").map((e=>Number.parseInt(e))),z=(0,l.w)(e),C=(0,l.x)(e),E=(0,l.z)(e),v=(0,l.j)(e),S=(0,l.a)(e),j=["type-size","type-size-age"].includes(S),A=(0,l.b)(v,"size","auto"),O=(0,l.b)(v,"size","outline"),V=(0,l.G)(v,"reference-size");let I;I=!h&&-1===k||h&&-1===f?v.defaultSymbol||i.defaultSymbol:h?v.uniqueValueInfos[f].symbol:v.uniqueValueGroups[k].classes[w].symbol,_(I)||(I=h?(0,l.am)(e):(0,l.m)(e,S),(!h&&-1===k||h&&-1===f)&&!v.defaultSymbol&&(i.defaultSymbol=I));const x="picture-marker"!==I.type&&!!I.color,L=(0,l.a9)(I),q="cim"===I.type&&"CIMPointSymbol"===I.data.symbol.type;let G;if(!h&&-1===k||h&&-1===f)G=n(e);else{const o=u.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.A)(e)||a});G=(0,l.ac)(o).slice(0,16)}const T=p(e);let B;if((j||z||C)&&A?(0,l.a0)(e,I,(0,t.g)(A,r.scale)):E&&O&&I.outline&&(I.outline.width=(0,t.g)(O,r.scale)),"simple-fill"===I.type){const e=I;B=e.outline?{color:e.outline.color?e.outline.color:new u.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!O}:{color:new u.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!O}}else if("simple-marker"===I.type){const e=I;B=e.outline?{color:e.outline.color?e.outline.color:new u.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.EsriColor([0,0,0,.5]),size:1}}else if("cim"===I.type)B=X(e,I),C&&(B.size=A?(0,t.g)(A,r.scale):B.size,B.autoAdjusted=!!A,A&&(0,l.a0)(e,I,B.size));else if("simple-line"===I.type){const e=I;B={size:A?(0,t.g)(A,r.scale):e.width,style:e.style,marker:e.marker,color:e.color,autoAdjusted:!!A}}else B={color:new u.EsriColor([255,255,255,.5]),size:1};const F=await d(e,b);let R;return V&&(F.mode="minimal"),R=y(F,u.esriLang.clone(I),C?{portal:c,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:G,extraParts:{style:"cim"!==I.type,arrow:"cim"!==I.type,autoStrokeAdjust:!s&&!j&&"editable",width:!j},parts:{extra:!j||"cim"!==I.type}}},stroke:B}:h?{portal:c,symbolFilter:"simple",sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:G,parts:{transparency:!1}}},fill:{color:(0,l.Z)(e,I)||(-1===f?(0,l.am)(e).color:M(G[f%G.length],.85))},stroke:B,fillEnabled:x}:{portal:c,symbolFilter:E&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:q||["simple-marker","picture-marker"].includes(I.type)?{open:!0,parts:{size:!j&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!j,markerType:(0,l.ad)(e)?"all":["simple","picture"]}:V?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.aa)(e,I),suggestedColors:G},stroke:{type:"color",optional:!0,suggestedColors:T,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(I.type),width:!0,autoStrokeAdjust:!(s||!E||"cim"===I.type||j)&&"editable"}}},fill:{color:(0,l.Z)(e,I)||M(G[w%G.length],.85)},marker:j||z?{size:A?(0,t.g)(A,r.scale):(0,l.$)(e,I),autoAdjusted:!!A}:void 0,stroke:B,fillEnabled:x,strokeEnabled:L}),F.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{const i=(0,l.j)(e);if(!h&&-1===k||h&&-1===f)i.defaultSymbol=s;else if(h){const e=i.uniqueValueInfos.slice();e[f].symbol=s,i.uniqueValueInfos=e}else{const e=i.uniqueValueGroups.slice();e[k].classes[w].symbol=s,i.uniqueValueGroups=e}j?m():P(e,s,t?.autoAdjusted,r?.autoAdjusted,F,o)}))),b.addStyler(F),await R,N(e,h?v.uniqueValueInfos?.length?v.uniqueValueInfos[0].symbol:void 0:v.uniqueValueGroups?.length&&v.uniqueValueGroups[0].classes.length?v.uniqueValueGroups[0].classes[0].symbol:void 0,F)}async function I(e,o){const{mapImageSublayer:s,mapView:r,portal:i,modules:a}=e,{onChange:n,popoverNode:c}=o,u=(0,l.w)(e),m=(0,l.x)(e),b=(0,l.z)(e),f=(0,l.j)(e),h=(0,l.a)(e),k="relationship-size"===h,w=(0,l.G)(f,"reference-size"),z=(0,l.b)(f,"size","auto"),C=(0,l.b)(f,"size","outline"),E=f.uniqueValueGroups[0].classes,v=E.map((o=>(0,l.Z)(e,o.symbol)||new a.EsriColor([0,0,0,0]))),S=a.relationshipSchemes.getSchemes({basemap:r.map.basemap||"topo",geometryType:(0,l.A)(e)});let j=f.uniqueValueGroups[0].classes?.length?a.esriLang.clone(f.uniqueValueGroups[0].classes[0].symbol):(0,l.m)(e,h);if(!D(j)){const o=(0,l.$)(e,j)??j.width;j=(0,l.m)(e,h),(0,l.a0)(e,j,o)}const A=(0,l.a9)(j),O="cim"===j.type&&"CIMPointSymbol"===j.data.symbol.type,V=(0,l.ab)(S,Math.sqrt(E.length)).map((({colors:e,scheme:{tags:o,name:s}})=>({stops:a.relationshipSchemes.flatten2DArray(e),tags:o,name:s}))),I=p(e);let x;if("simple-fill"===j.type){const e=j;x=e.outline?{color:e.outline.color?e.outline.color:new a.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!C}:{color:new a.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!C}}else if("simple-marker"===j.type){const e=j;x=e.outline?{color:e.outline.color?e.outline.color:new a.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new a.EsriColor([0,0,0,.5]),size:1}}else if("cim"===j.type)x=X(e,j),m&&(x.size=z?(0,t.g)(z,r.scale):x.size,x.autoAdjusted=!!z,z&&(0,l.a0)(e,j,x.size));else if("simple-line"===j.type){const e=j;x={color:new a.EsriColor([255,255,255,.5]),size:z?(0,t.g)(z,r.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!z}}else x={color:new a.EsriColor([255,255,255,.5]),size:1};const L=await d(e,c);let q;return w&&(L.mode="minimal"),q=y(L,a.esriLang.clone(j),m?{portal:i,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"2d",open:!0,colorRampsOpen:!0,colorRamps:V,extraParts:{style:"cim"!==j.type,arrow:"cim"!==j.type,autoStrokeAdjust:!s&&!k&&"editable",width:!k},parts:{extra:!k||"cim"!==j.type}}},stroke:{...x,color:v}}:{portal:i,symbolFilter:b&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:O||["simple-marker","picture-marker"].includes(j.type)?{open:(0,l.al)(j),parts:{size:!k&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!k,markerType:(0,l.ad)(e)?["simple","cim:vector"]:["simple"]}:w?{parts:{preview:!1,size:!1,rotation:!1}}:void 0,fill:{type:"color-ramp",style:"2d",open:!(0,l.al)(j),colorRampsOpen:!(0,l.al)(j),colorRamps:V},stroke:{type:"color",optional:!0,open:!1,suggestedColors:I,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(j.type),width:!0,autoStrokeAdjust:!(s||!b||"cim"===j.type||k)&&"editable"}}},fill:{color:v},marker:k||u?{size:z?(0,t.g)(z,r.scale):(0,l.$)(e,j),autoAdjusted:!!z}:void 0,stroke:x,strokeEnabled:A}),L.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r,fill:i}}})=>{const c=a.esriLang.clone((i||r).color),p=(0,l.j)(e),u=p.uniqueValueGroups[0].classes.slice();u.forEach(((o,t)=>{o.symbol=s.clone(),(0,l.X)(e,o.symbol,c[t%c.length])})),p.uniqueValueGroups[0].classes=u,k?n():P(e,s,t?.autoAdjusted,r?.autoAdjusted,L,o)}))),c.addStyler(L),await q,N(e,f.uniqueValueGroups[0].classes?.length?f.uniqueValueGroups[0].classes[0].symbol:void 0,L)}async function x(e,o){const{mapImageSublayer:s,mapView:r,portal:i,modules:a}=e,{onChange:n,popoverNode:c}=o,u=(0,l.w)(e),m=(0,l.x)(e),b=(0,l.z)(e),f=(0,l.j)(e),h=(0,l.a)(e),k="predominance-size"===h,w=(0,l.b)(f,"size","auto"),z=(0,l.b)(f,"size","outline"),C=f.uniqueValueGroups[0].classes;let E;const v=C.length&&(0,l.Z)(e,C[C.length-1].symbol)?.a||1;let S=C.map((o=>(0,l.Z)(e,o.symbol)||new a.EsriColor([0,0,0,v])));S.reverse();const j=a.predominanceSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.A)(e),numColors:C.length});let A=f.uniqueValueGroups[0].classes?.length?a.esriLang.clone(f.uniqueValueGroups[0].classes[0].symbol):(0,l.m)(e,h);if(!D(A)){const o=(0,l.$)(e,A)??A.width;A=(0,l.m)(e,h),(0,l.a0)(e,A,o)}const O=(0,l.a9)(A),V="cim"===A.type&&"CIMPointSymbol"===A.data.symbol.type,I=(0,l.ab)(j,C.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),x=p(e);let L;if((0,l.X)(e,A,S[S.length-1]),(k||u||m)&&w?(0,l.a0)(e,A,(0,t.g)(w,r.scale)):b&&z&&A.outline&&(A.outline.width=(0,t.g)(z,r.scale)),"simple-fill"===A.type){const e=A;L=e.outline?{color:e.outline.color?e.outline.color:new a.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!z}:{color:new a.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!z}}else if("simple-marker"===A.type){const e=A;L=e.outline?{color:e.outline.color?e.outline.color:new a.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new a.EsriColor([0,0,0,.5]),size:1}}else if("cim"===A.type)L=X(e,A),m&&(L.size=w?(0,t.g)(w,r.scale):L.size,L.autoAdjusted=!!w,w&&(0,l.a0)(e,A,L.size));else if("simple-line"===A.type){const e=A;L={color:new a.EsriColor([255,255,255,.5]),size:w?(0,t.g)(w,r.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!w}}else L={color:new a.EsriColor([255,255,255,.5]),size:1};const q=await d(e,c);let G;return E=A.clone(),G=y(q,a.esriLang.clone(A),m?{portal:i,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:I,parts:{transparency:!0,extra:!k||"cim"!==A.type},extraParts:{style:"cim"!==A.type,arrow:"cim"!==A.type,autoStrokeAdjust:!s&&!k&&"editable",width:!k}}},stroke:{...L,color:S}}:{portal:i,symbolFilter:b&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:V||["simple-marker","picture-marker"].includes(A.type)?{open:(0,l.al)(A),parts:{size:!k&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!k,markerType:(0,l.ad)(e)?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.al)(A),colorRampsOpen:!(0,l.al)(A),colorRamps:I},stroke:{type:"color",optional:!0,open:!1,suggestedColors:x,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(A.type),width:!0,autoStrokeAdjust:!(s||!b||"cim"===A.type||k)&&"editable"}}},fill:{color:S},marker:k||u?{size:w?(0,t.g)(w,r.scale):(0,l.$)(e,A),autoAdjusted:!!w}:void 0,stroke:L,strokeEnabled:O}),q.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r,fill:i}}})=>{const c=a.esriLang.clone((i||r).color),p=S[0],u=S.length!==c.length||S.some(((e,o)=>e.r!==c[o].r||e.g!==c[o].g||e.b!==c[o].b))||p.r!==c[0].r||p.g!==c[0].g||p.b!==c[0].b,m=p.a!==c[0].a,d=c[0].a;c.reverse();const y=(0,l.j)(e),g=(0,l.ap)(e,s,E);if(u&&!g.any&&(g.any=!0,g.color=!0),g.any){const o=y.uniqueValueGroups[0].classes.slice();o.forEach(((o,t)=>{"picture-marker"===o.symbol.type&&(u||m)&&(o.symbol=a.esriLang.clone(s),(0,l.X)(e,o.symbol,c[t%c.length])),o.symbol=(0,l.aq)(e,o.symbol,s,u?c[t%c.length]:m?(0,l.ar)((0,l.Z)(e,o.symbol),d):(0,l.Z)(e,o.symbol)||new a.EsriColor([0,0,0,0]),g)})),y.uniqueValueGroups[0].classes=o}k?n():P(e,s,t?.autoAdjusted,r?.autoAdjusted,q,o),E=s.clone(),u&&(S=y.uniqueValueGroups[0].classes.map((o=>(0,l.Z)(e,o.symbol)||new a.EsriColor([0,0,0,.5]))),S.reverse())}))),c.addStyler(q),await G,N(e,f.uniqueValueGroups[0].classes?.length?f.uniqueValueGroups[0].classes[0].symbol:void 0,q,(o=>{b&&A.outline?A.outline.width=o:b||(0,l.a0)(e,A,o),E=A.clone()}))}async function L(e,o){const{mapImageSublayer:s,mapView:r,selectedValue:i,lastDefault:a,portal:c,modules:u}=e,{onChange:m,popoverNode:b}=o,f=(0,l.w)(e),h=(0,l.x)(e),k=(0,l.z)(e),w=(0,l.j)(e),z=(0,l.a)(e),C="predominance-size"===z,E=(0,l.b)(w,"size","auto"),v=(0,l.b)(w,"size","outline");let S;S=-1===i?w.defaultSymbol||a.defaultSymbol:w.uniqueValueGroups[0].classes[i].symbol,_(S)||(S=(0,l.m)(e,z),-1!==i||w.defaultSymbol||(a.defaultSymbol=S));const j="picture-marker"!==S.type&&!!S.color,A=(0,l.a9)(S),O="cim"===S.type&&"CIMPointSymbol"===S.data.symbol.type;let V;if(-1===i)V=n(e);else{const o=u.predominanceSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.A)(e),numColors:10});V=(0,l.ac)(o).slice(0,16)}const I=p(e);let x;if((C||f||h)&&E?(0,l.a0)(e,S,(0,t.g)(E,r.scale)):k&&v&&S.outline&&(S.outline.width=(0,t.g)(v,r.scale)),"simple-fill"===S.type){const e=S;x=e.outline?{color:e.outline.color?e.outline.color:new u.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!v}:{color:new u.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!v}}else if("simple-marker"===S.type){const e=S;x=e.outline?{color:e.outline.color?e.outline.color:new u.EsriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.EsriColor([0,0,0,.5]),size:1}}else if("cim"===S.type)x=X(e,S);else if("simple-line"===S.type){const e=S;x={size:e.width,style:e.style,marker:e.marker,color:e.color}}else x={color:new u.EsriColor([255,255,255,.5]),size:1};const L=await d(e,b);let q;return q=y(L,u.esriLang.clone(S),h?{portal:c,symbolFilter:(0,l.ad)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:V,extraParts:{style:"cim"!==S.type,arrow:"cim"!==S.type,autoStrokeAdjust:!s&&!C&&"editable",width:!C},parts:{extra:!C||"cim"!==S.type}}},stroke:x}:{portal:c,symbolFilter:k&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:O||["simple-marker","picture-marker"].includes(S.type)?{open:!0,parts:{size:!C&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!C,markerType:(0,l.ad)(e)?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.aa)(e,S),suggestedColors:V},stroke:{type:"color",optional:!0,suggestedColors:I,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(S.type),width:!0,autoStrokeAdjust:!(s||!k||"cim"===S.type||C)&&"editable"}}},fill:{color:(0,l.Z)(e,S)||M(V[i],.85)},marker:C||f?{size:E?(0,t.g)(E,r.scale):(0,l.$)(e,S),autoAdjusted:!!E}:void 0,stroke:x,fillEnabled:j,strokeEnabled:A}),L.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{const a=(0,l.j)(e);if(-1===i)a.defaultSymbol=s;else{const e=a.uniqueValueGroups[0].classes.slice();e[i].symbol=s,a.uniqueValueGroups[0].classes=e}C?m():P(e,s,t?.autoAdjusted,r?.autoAdjusted,L,o)}))),b.addStyler(L),await q,N(e,w.uniqueValueGroups[0].classes?.length?w.uniqueValueGroups[0].classes[0].symbol:void 0,L)}async function q(e,o){const{mapView:s,portal:t,strings:r,modules:i}=e,{onChange:c,popoverNode:p}=o,u=(0,l.j)(e),m=u.attributes,b=m.map((e=>e.color)),f=i.pieChartSchemes.getSchemes({basemap:s.map.basemap,geometryType:(0,l.A)(e)||a,numColors:m.length}),h=n(e),k=(0,l.ab)(f,m.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),w=(0,l.m)(e);let z;if(w.outline=u.outline,"simple-fill"===w.type)if(w.outline){const e=w.outline;z={color:e.color?e.color:new i.EsriColor([0,0,0,.5]),size:e.width,style:e.style}}else z={color:new i.EsriColor([0,0,0,.5]),size:1,style:"solid"};else if("simple-marker"===w.type&&w.outline){const e=w.outline;z={color:e.color?e.color:new i.EsriColor([0,0,0,.5]),size:e.width,style:e.style}}const C=await d(e,p),E=y(C,w,{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:k},stroke:{type:"color",optional:!0,suggestedColors:h,extraParts:{style:!1,width:!0,autoStrokeAdjust:!1}}},fill:{color:b.reverse()},stroke:z});C.stringOverrides={fillColor:r.styler.color,fillTransparency:r.styler.transparency},C.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:o,info:{fill:s}}})=>{const t=i.esriLang.clone(s.color);t.reverse(),(0,l.j)(e).attributes.forEach(((e,o)=>e.color=t[o])),(0,l.j)(e).outline=o.outline.clone(),c()}))),p.addStyler(C),await E}async function G(e,o){const{mapView:s,selectedAttribute:t,lastDefault:r,portal:i,strings:n,modules:c}=e,{onChange:p,popoverNode:u}=o,m=(0,l.j)(e),b=m.attributes;let f;f=-1===t?m.othersCategory?.color||r?.otherColor||new c.EsriColor([170,170,170,1]):-2===t?m.defaultColor||r?.defaultColor||new c.EsriColor([170,170,170,1]):b[t].color;const h=c.pieChartSchemes.getSchemes({basemap:s.map.basemap,geometryType:(0,l.A)(e)||a,numColors:b.length}),k=(0,l.ac)(h).slice(0,16),w=(0,l.m)(e);w.outline=void 0,(0,l.X)(e,w,f);const z=await d(e,u),C=y(z,w,{portal:i,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:k}},fill:{color:f}});z.stringOverrides={fillColor:n.styler.color,fillTransparency:n.styler.transparency},z.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:o}})=>{-1===t?(0,l.j)(e).othersCategory?(0,l.j)(e).othersCategory.color=(0,l.Z)(e,o):(0,l.j)(e).othersCategory={color:(0,l.Z)(e,o),label:r?.otherLabel||n.styler.other,threshold:r?.threshold??0}:-2===t?(0,l.j)(e).defaultColor=(0,l.Z)(e,o):(0,l.j)(e).attributes[t].color=(0,l.Z)(e,o),p()}))),u.addStyler(z),await C}async function T(e,o){const{mapView:s,portal:t,strings:r,modules:i}=e,{onChange:a,popoverNode:n}=o,c=(0,l.j)(e).attributes,p=c.map((e=>e.color)),u=i.dotDensitySchemes.getSchemes({basemap:s.map.basemap,numColors:c.length}),m=(0,l.ab)(u,c.length).map((e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name}))),b=await d(e,n),f=y(b,(0,l.m)(e),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:m}},fill:{color:p}});b.stringOverrides={fillColor:r.styler.dotColor,fillTransparency:r.styler.dotTransparency},b.addEventListener("arcgisEdit",g.bind(null,(({detail:{info:{fill:o}}})=>{(0,l.j)(e).attributes.forEach(((e,s)=>e.color=o.color[s])),a()}))),n.addStyler(b),await f}async function B(e,o){const{mapView:s,portal:t,strings:r,modules:i}=e,{onChange:a,popoverNode:n,selectedAttribute:c}=o,p=(0,l.j)(e).attributes,u=i.dotDensitySchemes.getSchemes({basemap:s.map.basemap,numColors:p.length}),m=(0,l.ac)(u).slice(0,16),b=await d(e,n),f=y(b,(0,l.m)(e),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:m}},fill:{color:p[c].color}});b.stringOverrides={fillColor:r.styler.dotColor,fillTransparency:r.styler.dotTransparency},b.addEventListener("arcgisEdit",g.bind(null,(({detail:{symbol:o}})=>{(0,l.j)(e).attributes[c].color=(0,l.Z)(e,o),a()}))),n.addStyler(b),await f}async function F(e,o){const{mapView:s,portal:t,strings:r,modules:i}=e,{onChange:a,popoverNode:n}=o,c=(0,l.j)(e).colorStops,p=c.filter(((e,o)=>o>=3)).map((e=>e.color)),u=await i.colorUtils.getBackgroundColorTheme(s),m=i.heatmapSchemes.getSchemes({basemapTheme:u}),b=(0,l.ab)(m,c.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),f=await d(e,n),h=y(f,(0,l.m)(e),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRampsOpen:!0,colorRamps:b,parts:{transparency:!1}}},fill:{color:p.reverse()}});f.stringOverrides={fillTransparency:r.styler.transparency},f.addEventListener("arcgisEdit",g.bind(null,(({detail:{info:{fill:o}}})=>{const s=i.esriLang.clone(o.color);s.reverse();const t=Math.max(c.length-s.length,0);(0,l.j)(e).colorStops.forEach(((e,o)=>{const l=e.color.a;e.color=o<=t-2||o<=t?i.esriLang.clone(s[0]):i.esriLang.clone(s[o-t]),e.color.a=l})),a()}))),n.addStyler(f),await h}function P(e,o,s,i,a,n){const{modules:c}=e,p=(0,l.w)(e),u=(0,l.x)(e);p?R(e,s,(0,l.$)(e,o),o,a,n):u?R(e,i,(0,l.$)(e,o),o,a,n):function(e,o,s,i,a,n){const{mapView:c}=e,{onChange:p}=n,u=(0,l.j)(e),m=(0,l.b)(u,"size","outline");o&&!m?(0,r.d)(e).then((o=>{if(o){const s=(0,l.j)(e);s.visualVariables=s.visualVariables||[],s.visualVariables.push(o),$(o,c.scale,i,a)}p()})):!o&&m?(u.visualVariables=u.visualVariables.filter((e=>!("size"===e.type&&"outline"===e.target))),u.visualVariables&&!u.visualVariables.length&&(u.visualVariables=void 0),p()):(o&&function(e,o,s){const{mapView:i}=e,{onChange:a}=s,n=i.scale,c=(0,l.j)(e),p=(0,l.b)(c,"size","outline"),u=p.stops;if(0!==o&&0===u[u.length-2].size)(0,r.d)(e).then((s=>{if(s){const r=(0,t.g)(s,n);Z(s,(0===o?Math.max(.5,o):o)/(0===r?Math.max(.5,r):r));const i=(0,l.V)((0,l.j)(e),"size","outline")||[];i.push(s),(0,l.j)(e).visualVariables=i,a(),setTimeout((()=>{}),2e3)}}));else{const e=(0,t.g)(p,n),s=(0===o?Math.max(.5,o):o)/(0===e?Math.max(.5,e):e);Z(p,s),0!==o&&0!==e||(!function(e,o,s){const l=e.stops,t=l.length-1,r=l[0].value,i=l[t].value;if(o<=r){for(let e=0;e<=t;e++)l[e].size=s;return}if(o>=i)return void(l[t].size=s);for(let e=0;e<t;e++){const r=l[e],i=l[e+1];if(o>=r.value&&o<i.value){for(let o=e+1;o<=t;o++)l[o].size=s;break}}}(p,n,o),p.stops.forEach(((e,o)=>{o>0&&e.size===p.stops[o-1].size&&(o===p.stops.length-1?o>1&&(p.stops[o-1].size=(p.stops[o-2].size+e.size)/2):e.size=(p.stops[o+1].size+p.stops[o-1].size)/2)})))}}(e,s,n),p())}(e,i,"cim"===o.type?(0,l.as)(o):(0,l.$)(e,o.outline||new c.SimpleLineSymbol),o,a,n)}function R(e,o,s,i,a,n){const{mapView:c}=e,{onChange:p}=n,u=(0,l.j)(e);s=Math.max(s,.1);const m=(0,l.b)(u,"size","auto");if(o&&!m)(0,r.b)(e).then((o=>{if(o){const s=(0,l.j)(e);if(s.visualVariables=s.visualVariables||[],s.visualVariables.push(o),(0,l.an)(i)){Z(o,(0,l.$)(e,i)/(0,t.g)(o,c.scale))}$(o,c.scale,i,a)}p()}));else if(!o&&m){const e=(0,l.V)(u,"size","auto");u.visualVariables=e?.length?e:void 0,p()}else o&&function(e,o){const{mapView:s}=e,r=s.scale,i=(0,l.j)(e),a=(0,l.b)(i,"size","auto"),n=(0,t.g)(a,r),c=o/n;Z(a,c)}(e,s),p()}function Z(e,o){e.stops?.forEach((e=>{e.size*=o}))}function N(e,o,s,t){const{mapView:r,modules:i}=e;let a;return i.reactiveUtils.when((()=>r.stationary),(()=>{const i=r.scale;if(a!==i){const r=(0,l.j)(e),n=(0,l.b)(r,"size","simple-fill"===o.type?"outline":"auto");n&&$(n,i,o,s,t),a=i}}))}function $(e,o,s,r,i){const a=(0,t.g)(e,o),n=["simple-line","simple-fill"].includes(s.type)||(0,l.an)(s)?"stroke":"marker";r.setSize(n,a),i?.(a)}function M(e,o){return e&&(e.a=o),e}function X(e,o){const{modules:s}=e;if((0,l.an)(o))return{color:(0,l.Z)(e,o)?.clone()||new s.EsriColor([255,255,255,.5]),size:(0,l.$)(e,o)??1};{const e=(0,l.ao)(o);return{color:e?.color?new s.EsriColor(e?.color):new s.EsriColor([255,255,255,.5]),size:e?.width??1}}}function _(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].includes(e?.type)}function D(e){return["simple-fill","simple-marker","simple-line","cim"].includes(e.type)}}}]);