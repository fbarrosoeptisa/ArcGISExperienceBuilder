/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-859891.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-859891"],{183:(e,t,i)=>{i.r(t),i.d(t,{arcgis_table_column_info:()=>r,arcgis_table_editing_popover:()=>c,arcgis_table_field_selection:()=>d});var s=i(28614),a=i(97127),l=i(68180),n=i(71480),o=i(38967);const r=class{constructor(e){(0,s.r)(this,e),this.arcgisClose=(0,s.c)(this,"arcgisClose",7),this.arcgisSetupComplete=(0,s.c)(this,"arcgisSetupComplete",7),this.manager=(0,a.u)(this),this.props=void 0,this.fieldName=void 0,this.popoverReferenceElement=void 0,this.strings=void 0}async reposition(){this.popoverNode?.reposition()}async componentWillLoad(){const{layer:e}=this.props;this.fieldsMap=await(0,l.g)(e)}componentDidLoad(){this.closeButtonNode?.setFocus()}render(){const{strings:e,fieldName:t,fieldsMap:i,popoverReferenceElement:l}=this,n=i.get(t),o=(0,a.a)(this.el);return(0,s.h)(s.H,{key:"9064868dfcd9720fff64898e2bc9a478de45777f",class:"js-app-flyout"},(0,s.h)("calcite-popover",{key:"c0f75ae5a6a4cdb4e1eee484c52cd86ecc7f210a",dir:o,placement:"leading",referenceElement:l,offsetDistance:-48,offsetSkidding:0,open:!0,pointerDisabled:!0,overlayPositioning:"fixed",class:"popover",label:e.fieldInfo,ref:e=>this.popoverNode=e},(0,s.h)("calcite-panel",{key:"5b8e37aeaa6e85eb096cf5be40e671ffc26a8394",heading:n.alias||n.name,description:t,class:"panel"},this.renderCloseButton(),this.renderInfo())))}renderCloseButton(){const{strings:e}=this;return(0,s.h)("calcite-action",{slot:"header-actions-end",scale:"s",text:e.close,icon:"x",onClick:()=>this.arcgisClose.emit(),ref:e=>this.closeButtonNode=e})}renderInfo(){const{layer:e,view:t}=this.props,{fieldName:i}=this;return(0,s.h)("arcgis-field-info",{fieldName:i,layer:e,view:t,class:"info",ref:e=>{e?.addEventListener("arcgisFieldInfoComplete",(()=>{this.reposition(),this.arcgisSetupComplete.emit()}))}})}get el(){return(0,s.g)(this)}};r.style=".popover{--calcite-popover-z-index:100}.panel{max-height:400px;max-width:420px}.info{background-color:var(--calcite-color-foreground-1);max-height:400px;max-width:420px;min-width:240px;overflow-x:hidden}";const c=class{constructor(e){(0,s.r)(this,e),this.arcgisClose=(0,s.c)(this,"arcgisClose",7),this.manager=(0,a.u)(this),this.referenceElement=void 0,this.strings=void 0}async reposition(){this.popoverNode?.reposition()}async setFocus(){this.panelNode?.setFocus()}componentDidLoad(){this.panelNode?.setFocus()}render(){const{referenceElement:e,strings:t}=this;return(0,s.h)(s.H,{key:"4f6b8a21ef4cf2ecc1320f102e92f017f839ef6d",class:"js-app-flyout arcgis-table-editing-popover"},(0,s.h)("calcite-popover",{key:"2ca8d3e8fefbee312132c753052631a07beff405",referenceElement:e,placement:"auto",open:!0,offsetSkidding:0,offsetDistance:-10,overlayPositioning:"fixed",label:"",class:"info-popover",ref:e=>this.popoverNode=e},(0,s.h)("calcite-panel",{key:"55450cd361f004f0e702b65aaa4d3f8db47eb345",heading:t.layerEditing,closable:!0,ref:e=>this.panelNode=e,onCalcitePanelClose:()=>{this.arcgisClose.emit(),setTimeout((()=>e.parentElement.focus()),300)}},(0,s.h)("div",{key:"b79c9b3bacf4fca95a56ae1a6d2402c3e61cba3a",class:"info"},(0,s.h)("div",{key:"09caa3e6830db4b0a53038f455ae6633f138ae24"},t.layerEditingMsg)))))}get el(){return(0,s.g)(this)}};c.style=".info{padding:10px 10px 15px 10px;background-color:var(--calcite-color-foreground-1)}.info-popover{max-width:250px}";const d=class{constructor(e){(0,s.r)(this,e),this.arcgisClose=(0,s.c)(this,"arcgisClose",7),this.arcgisSortByChange=(0,s.c)(this,"arcgisSortByChange",7),this.arcgisFieldColumnTemplatesVisibilityChange=(0,s.c)(this,"arcgisFieldColumnTemplatesVisibilityChange",7),this.arcgisAttachmentColumnTemplateVisibilityChange=(0,s.c)(this,"arcgisAttachmentColumnTemplateVisibilityChange",7),this.arcgisRelationshipsColumnTemplateVisibilityChange=(0,s.c)(this,"arcgisRelationshipsColumnTemplateVisibilityChange",7),this.manager=(0,a.u)(this),this.filterFields=void 0,this.changedFieldNames=[],this.listItemChangeHandle=void 0,this.strings=void 0,this.props=void 0,this.popoverReferenceElement=void 0,this.columnTemplates=void 0,this.fieldColumnOrder=void 0,this.sortBy=void 0,this.attachmentsEnabled=!1,this.relationshipsEnabled=!1,this.lastSortBy="display"}async reposition(){this.popoverNode?.reposition()}async componentWillLoad(){const{layer:e}=this.props;this.fieldsMap=await(0,l.g)(e),this.totalCounts=this.getTotalFieldTypeCount(),this.lastSortBy=this.sortBy||"default",this.FieldColumnTemplate=await(0,n.b6)()}render(){const{strings:e,popoverReferenceElement:t}=this,i=(0,a.a)(this.el);return(0,s.h)(s.H,{key:"fbe4551a5cabb4064c5da1465cb574d0bf707c5e",class:"js-app-flyout"},(0,s.h)("calcite-popover",{key:"ecd2ed28e5faa3a35123780b67e76c8322b7b3a6",dir:i,placement:"leading",referenceElement:t,open:!0,pointerDisabled:!0,offsetDistance:-48,offsetSkidding:0,overlayPositioning:"fixed",label:"",class:"popover",ref:e=>this.popoverNode=e},(0,s.h)("calcite-flow",{key:"4999338de784d3e09deab2ffcaaa3886baf194b6",class:"flow",ref:e=>this.flowNode=e},(0,s.h)("calcite-flow-item",{key:"7a7e08beab4e09add5f1341414a38eec1eaeb6f7",heading:e.fieldVisibility,ref:e=>this.flowItemNode=e,closable:!0,onCalciteFlowItemClose:()=>this.arcgisClose.emit()},this.renderList(),this.renderDoneButton()))))}renderList(){const{strings:e}=this;return(0,s.h)("calcite-list",{label:e.selectFields,class:"content","drag-enabled":!1,selectionMode:"multiple",filterEnabled:!0,filterPlaceholder:e.filterFields,onCalciteListFilter:e=>{const t=e.currentTarget;this.filterFields=t.filteredItems,(0,s.f)(this.el)},ref:e=>this.listNode=e},this.renderSort(),this.renderSelection(),this.renderFieldColumnTemplateListItems(),this.renderAttachmentListItem(),this.renderRelationshipsListItem())}renderSort(){const{lastSortBy:e,totalCounts:t,strings:i}=this,a=t.number>0,l=t.string>0,n=t.date>0,o=!(!a||!l&&!n)||!(!l||!n);return(0,s.h)("calcite-dropdown",{slot:"filter-actions-end",placement:"bottom-end",overlayPositioning:"fixed"},(0,s.h)("calcite-action",{slot:"trigger",text:i.sortFields,title:i.sortFields},(0,s.h)("calcite-icon",{scale:"s",icon:"sortDescending"})),(0,s.h)("calcite-dropdown-group",{groupTitle:i.sortBy},(0,s.h)("calcite-dropdown-item",{selected:"default"===e,onClick:()=>{this.lastSortBy="default",this.arcgisSortByChange.emit(this.lastSortBy)},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||(this.lastSortBy="default",this.arcgisSortByChange.emit(this.lastSortBy))}},i.default),(0,s.h)("calcite-dropdown-item",{selected:"display"===e,onClick:()=>{this.lastSortBy="display",this.arcgisSortByChange.emit(this.lastSortBy)},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||(this.lastSortBy="display",this.arcgisSortByChange.emit(this.lastSortBy))}},i.sortByDisplayName),o?(0,s.h)("calcite-dropdown-item",{selected:"type"===e,onClick:()=>{this.lastSortBy="type",this.arcgisSortByChange.emit(this.lastSortBy)},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||(this.lastSortBy="type",this.arcgisSortByChange.emit(this.lastSortBy))}},i.sortByType):null,(0,s.h)("calcite-dropdown-item",{selected:"field"===e,onClick:()=>{this.lastSortBy="field",this.arcgisSortByChange.emit(this.lastSortBy)},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||(this.lastSortBy="field",this.arcgisSortByChange.emit(this.lastSortBy))}},i.sortByFieldName)))}renderSelection(){const{filterFields:e,strings:t}=this,i=this.filterContainsAll();return(0,s.h)("calcite-button",{key:`${e}`,class:"select-button",appearance:"transparent",scale:"s",width:"full",onClick:()=>this.handleSelectionAllClick(i),label:i?t.deselectAll:t.selectAll},i?t.deselectAll:t.selectAll)}renderFieldColumnTemplateListItems(){const{fieldColumnOrder:e,lastSortBy:t}=this;let i=this.cloneFieldTemplates();return e&&(i=i.sort(((t,i)=>e.indexOf(t.fieldName)-e.indexOf(i.fieldName)))),"display"===t?i=this.sortFieldsAlphabetically(i):"type"===t?i=this.sortFieldsByType(this.sortFieldsAlphabetically(i)):"field"===t&&i.sort(((e,t)=>e.fieldName.localeCompare(t.fieldName))),i.map((e=>this.renderFieldColumnTemplateListItem(e)))}renderFieldColumnTemplateListItem(e){const{strings:t}=this;return(0,s.h)("calcite-list-item",{key:e.fieldName,label:e.label,value:e.fieldName,selected:e.visible,onCalciteListItemSelect:e=>{const t=e.currentTarget;this.handleFieldColumnTemplateListItemChange(t)}},(0,s.h)("calcite-action",{slot:"actions-end",text:t.info,onClick:t=>{t.stopPropagation(),this.handleInfoClick(e,t.target)}},(0,s.h)("calcite-icon",{scale:"s",icon:"information"})))}renderAttachmentListItem(){const{strings:e,props:t}=this,{layer:i}=t;if(!(0,o.e)(i))return(0,s.h)(s.F,null);const a=this.columnTemplates.find((e=>"attachment"===e.type));return(0,s.h)("calcite-list-item",{key:"attachments",label:e.photosAndFiles,description:e.attachments,value:"__attachments",selected:a?.visible,hidden:!1,onCalciteListItemSelect:e=>{const t=e.currentTarget;this.handleAttachmentsItemChange(t)}})}renderRelationshipsListItem(){const{layer:e}=this.props,{strings:t}=this;if(!("relationships"in e)||!e.relationships?.length)return(0,s.h)(s.F,null);const i=this.columnTemplates.find((e=>"relationship"===e.type));return(0,s.h)("calcite-list-item",{key:"relationships",label:t.relatedRecords,value:"__relationships",selected:i?.visible,hidden:!1,onCalciteListItemSelect:e=>{const t=e.currentTarget;this.handleRelationshipsItemChange(t)}})}renderDoneButton(){const{strings:e}=this;return(0,s.h)("calcite-button",{appearance:"outline-fill",slot:"footer",width:"full",onClick:()=>this.arcgisClose.emit(),label:e.done},e.done)}getTotalFieldTypeCount(){const{columnTemplates:e,fieldsMap:t}=this,i={string:0,number:0,date:0};return e.forEach((e=>{if("field"===e.type){switch(t.get(e.fieldName).type){case"small-integer":case"big-integer":case"integer":case"single":case"double":case"long":case"oid":case"guid":i.number++;break;case"string":i.string++;break;case"date":case"date-only":case"time-only":case"timestamp-offset":i.date++}}})),i}cloneFieldTemplates(){return(this.columnTemplates.filter((e=>"field"===e.type))??[]).map((e=>new this.FieldColumnTemplate({fieldName:e.fieldName,label:e.label,visible:e.visible,menuConfig:e.menuConfig,format:e.format})))}handleSelectionAllClick(e){const{columnTemplates:t,filterFields:i}=this;t.forEach((t=>{i&&!i.some((e=>e.value===t.fieldName))||(t.visible=!e)})),this.listNode.querySelectorAll("calcite-list-item").forEach((t=>{i&&!i.some((e=>e.value===t.value))||t.selected!==e||(t.selected=!e,this.changedFieldNames.push(t.value),this.handleListItemChange(t))})),(0,s.f)(this.el)}filterContainsAll(){const{props:e,columnTemplates:t,filterFields:i,attachmentsEnabled:s,relationshipsEnabled:a}=this,{layer:l}=e;if(i){const e=i.filter((e=>"__attachments"!==e.value&&"__relationships"!==e.value)).map((e=>({value:e.value,selected:e.selected}))),l=t.filter((t=>e.some((e=>t.fieldName===e.value)))),n=!!i.find((e=>"__attachments"===e.value)),o=!!i.find((e=>"__relationships"===e.value));return e.every((e=>!l.some((t=>t.fieldName===e.value&&!t.visible))))&&(n&&s&&(o&&a||!o)||o&&a&&!n||!n&&!o)}{const e=(0,o.e)(l),i="relationships"in l&&l.relationships?.length;return t.every((e=>e.visible))&&(e&&s&&(i&&a||!i)||i&&a&&!e||!e&&!i)}}handleListItemChange(e){"__attachments"===e.value?this.handleAttachmentsItemChange(e):"__relationships"===e.value?this.handleRelationshipsItemChange(e):this.handleFieldColumnTemplateListItemChange(e)}handleFieldColumnTemplateListItemChange(e){const{columnTemplates:t}=this;t.forEach((t=>{t.fieldName===e.value&&t.visible!==e.selected&&(t.visible=e.selected,this.changedFieldNames.push(t.fieldName))})),this.listItemChangeHandle&&clearTimeout(this.listItemChangeHandle),this.listItemChangeHandle=setTimeout((()=>{this.listItemChangeHandle=void 0,this.arcgisFieldColumnTemplatesVisibilityChange.emit(new Set([...this.changedFieldNames])),this.changedFieldNames=[],(0,s.f)(this.el)}),100)}handleAttachmentsItemChange(e){const t=e.selected;this.arcgisAttachmentColumnTemplateVisibilityChange.emit(t),this.attachmentsEnabled=t,(0,s.f)(this.el)}handleRelationshipsItemChange(e){const t=e.selected;this.arcgisRelationshipsColumnTemplateVisibilityChange.emit(t),this.relationshipsEnabled=t,(0,s.f)(this.el)}handleInfoClick(e,t){const{layer:i,view:s}=this.props,{flowNode:a,flowItemNode:l}=this,n=l.getBoundingClientRect(),o=document.createElement("arcgis-field-info");o.fieldName=e.fieldName,o.layer=i,o.view=s,o.className="info";const r=document.createElement("calcite-flow-item");r.heading=e.label??e.fieldName,r.description=e.fieldName,r.style.height=`${n.height}px`,r.style.width=`${n.width}px`,r.appendChild(o),r.addEventListener("calciteFlowItemBack",(()=>{a.removeChild(r),this.flowItemNode.selected=!0,requestAnimationFrame((()=>t.setFocus()))})),a.appendChild(r),r.selected=!0,this.flowItemNode.selected=!1,setTimeout((()=>{r.setFocus(),this.reposition()}),200)}sortFieldsAlphabetically(e){return e.sort(((e,t)=>e.label.startsWith("_")?1:t.label.startsWith("_")?-1:e.label.localeCompare(t.label)))}sortFieldsByType(e){const{fieldsMap:t}=this;return e.filter((e=>["small-integer","big-integer","integer","single","double","long"].includes(t.get(e.fieldName).type))).map((e=>e)).concat(e.filter((e=>"string"===t.get(e.fieldName).type)).map((e=>e))).concat(e.filter((e=>["date","date-only","time-only","timestamp-offset"].includes(t.get(e.fieldName).type))).map((e=>e))).concat(e.filter((e=>"oid"===t.get(e.fieldName).type)).map((e=>e))).concat(e.filter((e=>"guid"===t.get(e.fieldName).type)).map((e=>e))).concat(e.filter((e=>!["small-integer","big-integer","integer","single","double","long","string","date","date-only","time-only","timestamp-offset","oid","guid"].includes(t.get(e.fieldName).type))).map((e=>e)))}get el(){return(0,s.g)(this)}};d.style=".popover{--calcite-popover-z-index:100}.flow{height:400px;width:280px}.content{max-height:80vh}.select-button{margin:4px 0}.info{background-color:var(--calcite-color-foreground-1)}"},68180:(e,t,i)=>{i.d(t,{a:()=>s,b:()=>y,c:()=>w,d:()=>h,e:()=>p,f:()=>n,g:()=>d,h:()=>N,i:()=>r,j:()=>c,k:()=>f,l:()=>a,m:()=>m,n:()=>g,o:()=>b,p:()=>F,q:()=>C,s:()=>l,t:()=>u});var s,a,l,n,o=i(71480);function r(e){return null!=e}function c(e,t){const i=e.fieldName;if(i.includes(s.expression)){const e=t.get(i);return e?.title?e.title:i}return e.label?e.label:i}async function d(e){return new Map((await async function(e){return await new Promise(((t,i)=>{switch(h(e)){case l.feature:case l.ogcFeature:case l.stream:t(e.fields);break;case l.mapImage:{const s=e,a=s?.layer;a?.portalItem&&a.url.includes("https://demographics")&&a.url.includes(".arcgis.com")?a.portalItem?.fetchData().then((e=>{if(e?.thematicGroup){const i=new Map(s.fields.map((e=>[e.name,e]))),a=e.thematicGroup.fieldNames,l=[];a.forEach((e=>{i.has(e)&&l.push(i.get(e))})),t(l)}else t(s.fields)})).catch((e=>{i(new Error(e))})):t(s.fields);break}case l.imagery:{const i=e;t((i.fields||[]).concat(i.rasterFields||[]));break}case l.imageryTile:case l.wcs:t(e.rasterFields);break;default:t("fields"in e?e.fields??[]:[])}}))}(e)).filter((e=>e.visible)).map((e=>[e.name,e])))}function p(e){const t=new Map;return e?.expressionInfos&&e.expressionInfos.forEach((e=>{const i=`${s.expression}${e.name}`;t.set(i,e)})),t}function h(e){return"map-image"===e?.layer?.type?l.mapImage:"subtype-sublayer"===e?.type?l.subtype:"tile"===e?.layer?.type?l.tile:"scene"===e?.type?l.scene:"ogc-feature"===e?.type?l.ogcFeature:"imagery"===e?.type?l.imagery:"imagery-tile"===e?.type?l.imageryTile:"wfs"===e?.type?l.wfs:"wcs"===e?.type?l.wcs:"wms"===e?.layer?.type?l.wms:"csv"===e?.type?l.csv:"geojson"===e?.type?l.geojson:"stream"===e?.type?l.stream:"oriented-imagery"===e?.type?l.orientedImagery:"catalog"===e?.type?l.catalog:"catalog-footprint"===e?.type?l.catalogFootprint:"knowledge-graph-sublayer"===e?.type?l.knowledgeGraphSublayer:"voxel"===e?.type?l.voxel:l.feature}function m(e){if(e)switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return e.extent?.center;default:return}}function f(e){return Number((100*(1-e)).toFixed(1))}function u(e){return Number((1-e/100).toFixed(3))}!function(e){e.expression="expression/",e.raster="Raster.",e.relationship="relationships/"}(s||(s={})),function(e){e.cluster="cluster",e.feature="feature",e.mapNotes="mapNotes"}(a||(a={})),function(e){e.catalog="catalog",e.catalogFootprint="catalog-footprint",e.csv="csv",e.feature="feature",e.geojson="geojson",e.imagery="imagery",e.imageryTile="imagery-tile",e.knowledgeGraphSublayer="knowledge-graph-sublayer",e.mapImage="map-image",e.ogcFeature="ogc-feature",e.orientedImagery="oriented-imagery",e.scene="scene",e.stream="stream",e.subtype="subtype",e.tile="tile",e.voxel="voxel",e.wcs="wcs",e.wfs="wfs",e.wms="wms"}(l||(l={})),function(e){e.bigInteger="big-integer",e.date="date",e.dateOnly="date-only",e.double="double",e.globalId="global-id",e.guid="guid",e.integer="integer",e.long="long",e.number="number",e.oid="oid",e.single="single",e.smallInteger="small-integer",e.string="string",e.timeOnly="time-only",e.timestampOffset="timestamp-offset"}(n||(n={}));const g=(e,t)=>{const i=[];return e?.fieldInfos?.forEach((e=>{e.fieldName?.includes(s.expression)?t&&i.push({name:e.fieldName.slice(s.expression.length),alias:e.fieldName.slice(s.expression.length),type:"string"}):i.push({name:e.fieldName,alias:e.label,type:"string"})})),i},y=async(e,t)=>{const[i,s]=await Promise.all([(0,o.g)(),(0,o.h)()]),a=new s;a.geometry=t.extent,a.mapExtent=t.extent,a.returnGeometry=!0,a.tolerance=6,a.layerOption="popup",a.width=t.width,a.height=t.height,a.layerIds=[e.id];const l=(await i.identify(e.layer.url,a))?.results,n=l?.[0]?.feature;return n},b=async(e,t,i)=>{const s=await e.whenLayerView(t),a=await s.queryAggregates();return await v(i,a.features?.[0])},v=async(e,t)=>{const i=await(0,o.j)(),s=await(0,o.k)();let a;if(t)a=t.clone();else{a=new i;const t=g(e,!1);if(t?.length){const e={};t.forEach((t=>{e[t.name]=""})),a.attributes=e}const l=new s;a.geometry=l}return a};function C(e,t){const i=t.startsWith("#"),s=t.startsWith(".");for((s||i)&&(t=t.slice(1));e;){if(i){if(e.id===t)return e}else if(s){if(e.classList.contains(t))return e}else if(e.tagName.toLowerCase()===t.toLowerCase())return e;e=e.parentElement??e.getRootNode()?.host??void 0}}async function w(e){if(h(e)===l.stream)return await Promise.resolve("point");if(e.geometryType)return await Promise.resolve(e.geometryType);if(h(e)===l.mapImage&&e?.layer?.sourceJSON?.layers){const t=e.layer?.sourceJSON.layers.find((t=>{if(t.id===e.id)return t}))?.geometryType?.toLowerCase();if(t)return t.indexOf("point")>-1?await Promise.resolve("point"):t.indexOf("line")>-1?await Promise.resolve("polyline"):t.indexOf("polygon")>-1?await Promise.resolve("polygon"):await Promise.resolve(t);{const t=e?.layer?.findSublayerById(e.id);if(t){const e=await(t?.createFeatureLayer());return e?(await e.load(),await Promise.resolve(e?.geometryType)):void await Promise.resolve()}return void await Promise.resolve()}}await Promise.resolve()}function N(e,t,i){let s="";if(/^raster.(?:item|service)pixelvalue/iu.test(e))s="number";else if(t.has(e)){const i=t.get(e);s=i.type?i.type.toLowerCase():""}else if(i.has(e)){const t=i.get(e);s=t.returnType?t.returnType.toLowerCase():""}else s="number";return s}async function F(e,t){return"feature"!==e.type||e.url?"feature"===e.type||"csv"===e.type||"scene"===e.type||"wfs"===e.type||"geojson"===e.type||"oriented-imagery"===e.type||"subtype-group"===e.type||"subtype-sublayer"===e.type||"catalog"===e.type||"catalog-footprint"===e.type?await e.queryFeatureCount():!t||"stream"!==e.type&&"ogc-feature"!==e.type?await Promise.reject(new Error(`Can't get feature count for layer of type ${e.type}.`)):await async function(e,t){const i=await t.whenLayerView(e);return await i.queryFeatureCount()}(e,t):await async function(e){const t=e.createQuery();t.outFields=["*"];const i=await e.queryFeatures(t);if(i.features?.length)return i.features.length;throw new Error("could not get feature count")}(e)}},38967:(e,t,i)=>{var s;i.d(t,{S:()=>s,a:()=>o,e:()=>d,g:()=>c,i:()=>n,r:()=>r,s:()=>l}),function(e){e.SMALL="s",e.MEDIUM="m",e.LARGE="l"}(s||(s={}));const a=["feature","oriented-imagery","map-image"],l=["feature","scene","geojson","csv","subtype-sublayer","oriented-imagery","catalog-footprint"];function n(e,t){for(;e;){if(e.nodeName===t.toUpperCase())return!0;e=e.parentElement}return!1}function o(e,t){const i=document.createElement("calcite-tooltip");i.className="table-tooltip",i.referenceElement=e,i.placement="trailing-start",i.open=!0;const s=document.createElement("div");s.className="tooltip",s.innerHTML=t,i.append(s),document.body.append(i)}function r(){document.querySelectorAll(".table-tooltip").forEach((e=>e.parentNode?.removeChild(e)))}function c(e){return[..."templates"in e&&Array.isArray(e.templates)?e.templates:[],..."types"in e&&Array.isArray(e.types)?e.types.flatMap((e=>e.templates)):[]]}function d(e){return(a.includes(e.type)||"sublayer"===e.type&&a.includes(e.layer.type))&&function(e){if(!e?.capabilities)return!1;const{capabilities:{data:{supportsAttachment:t},operations:{supportsQueryAttachments:i}}}=e;return t&&i}(e)}}}]);