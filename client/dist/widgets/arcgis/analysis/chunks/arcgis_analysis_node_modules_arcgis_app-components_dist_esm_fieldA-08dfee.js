/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_fieldA-08dfee.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_fieldA-08dfee"],{4948:(e,r,i)=>{i.d(r,{c:()=>t,o:()=>o});const n=(0,i(18991).c)({portal:null,user:null,api:4,scale:"m"}),t=n.state,o=n.onChange},72300:(e,r,i)=>{i.d(r,{F:()=>u,a:()=>d,c:()=>c});var n=i(19564),t=i(12350),o=i(67336),s=i(26408),l=i(98034),a=i(44508);const u=({fieldType:e})=>e===t.a.oid||e===t.a.guid||e===t.a.globalId?(0,n.h)("calcite-icon",{scale:"s",icon:"key"}):e===t.a.integer||e===t.a.smallInteger||e===t.a.bigInteger?(0,n.h)("calcite-icon",{scale:"s",icon:"integer"}):e===t.a.single||e===t.a.double||e===t.a.long||e===t.a.number?(0,n.h)("calcite-icon",{scale:"s",icon:"number"}):e===t.a.string?(0,n.h)("calcite-icon",{scale:"s",icon:"string"}):e===t.a.date?(0,n.h)("calcite-icon",{scale:"s",icon:"date-time"}):e===t.a.dateOnly?(0,n.h)("calcite-icon",{scale:"s",icon:"calendar"}):e===t.a.timestampOffset?(0,n.h)("calcite-icon",{scale:"s",icon:"time-zone"}):e===t.a.timeOnly?(0,n.h)("calcite-icon",{scale:"s",icon:"clock"}):(0,n.h)("calcite-icon",{scale:"s",icon:"string"});async function c(e){var r,i,n;const t="feature"===e.type||"oriented-imagery"===e.type,s=null==e?void 0:e.portalItem,l=e.sourceJSON;if(!t||!s)return Promise.resolve(!1);const a=s.portal;if(!(null==a?void 0:a.user))return Promise.resolve(!1);if((0,o.f)(s))return Promise.resolve(!1);if(!(0,o.h)(s))return Promise.resolve(!1);if((0,o.l)(s))return Promise.resolve(!1);if((0,o.p)(l))return Promise.resolve(!1);const u=(0,o.u)(s,a.user),c=null!==(r=await(0,o.j)(e))&&void 0!==r?r:[],d=null!==(i=await(0,o.k)(e))&&void 0!==i?i:[],v=(0,o.m)(c,d);if(!u&&!v)return Promise.resolve(!1);const f=await(0,o.n)(s.id,a,{relationshipType:"Service2Service"});if(null===(n=null==f?void 0:f.data)||void 0===n?void 0:n.relatedItems){if(f.data.relatedItems.some((e=>["WMTS","Map Service","Vector Tile Service"].includes(e.type))))return Promise.resolve(!1)}return Promise.resolve(!0)}async function d(e,r,i){var n,t,u,c,d;if(!i)return Promise.resolve(!1);const f="feature"===r.type||"oriented-imagery"===r.type,m=r.portalItem,p=r.sourceJSON;if(!f||!m)return Promise.resolve(!1);if(!m.portal.user)return Promise.resolve(!1);if(!(0,o.h)(m))return Promise.resolve(!1);if((0,o.f)(m))return Promise.resolve(!1);if((0,o.l)(m))return Promise.resolve(!1);if((0,o.p)(p))return Promise.resolve(!1);if(m.portal.isPortal&&(0,o.o)(m))return Promise.resolve(!1);if(["oid","global-id","geometry"].indexOf(i.type)>-1)return Promise.resolve(!1);const g=r.sourceJSON.geometryProperties;if([null==g?void 0:g.shapeLengthFieldName,null==g?void 0:g.shapeAreaFieldName].includes(i.name))return Promise.resolve(!1);const h=r.editFieldsInfo;if(h&&(h.creationDateField===i.name||h.creatorField===i.name||h.editDateField===i.name||h.editorField===i.name))return Promise.resolve(!1);if(r.objectIdField===i.name||r.displayField===i.name)return Promise.resolve(!1);if(r.typeIdField===i.name)return Promise.resolve(!1);if(r.subtypeField===i.name)return Promise.resolve(!1);if(r.timeInfo&&(r.timeInfo.startField===i.name||r.timeInfo.endField===i.name||r.timeInfo.trackIdField===i.name))return Promise.resolve(!1);if(r.featureReduction){const[e]=await(0,l.l)(["esri/layers/support/fieldUtils"]),n=new Set;if(await e.collectFeatureReductionFields(n,r,r.featureReduction),n.has(i.name))return Promise.resolve(!1)}const[y]=await(0,l.l)(["esri/layers/support/fieldUtils"]),w=await y.getRendererFields(r.renderer,r.fieldsIndex);if(null==w?void 0:w.includes(i.name))return Promise.resolve(!1);const P=null===(n=r.labelingInfo)||void 0===n?void 0:n.map((e=>{var r;return null===(r=e.labelExpressionInfo)||void 0===r?void 0:r.expression}));if(P){const e=await y.getExpressionFields(r,P);if(null==e?void 0:e.includes(i.name))return Promise.resolve(!1);const n=await async function(e,r){var i;const[n]=await(0,l.l)(["esri/core/sql"]),t=null===(i=e.labelingInfo)||void 0===i?void 0:i.filter((e=>(0,s.e)(e.where)));if(!(null==t?void 0:t.length))return Promise.resolve(!1);const o=[...await Promise.all(t.map((async r=>{if(r.where)return await n.parseWhereClause(r.where,e.fieldsIndex)})))];let a=!1;for(let e=0;e<o.length;e++){const i=o[e].fieldNames;if(!a&&(null==i?void 0:i.includes(r.name))){a=!0;break}}return Promise.resolve(a)}(r,i);if(n)return Promise.resolve(!1)}if(r.definitionExpression){const[e]=await(0,l.l)(["esri/core/sql"]);if(null===(t=(await e.parseWhereClause(r.definitionExpression,r.fieldsIndex)).fieldNames)||void 0===t?void 0:t.includes(i.name))return Promise.resolve(!1)}const S=await async function(e,r){var i;const n=e.portalItem;if(!n)return Promise.resolve(!1);const t=`${(0,a.g)(n.portal)}content/items/${n.id}/data`,[o]=await(0,l.l)(["esri/request"]);return await o(t,{query:{f:"json"},method:"get",responseType:"json",token:null===(i=n.portal.credential)||void 0===i?void 0:i.token}).then((async i=>{var n,t,o,s,a;const u=i.data;if(!u)return Promise.resolve(!1);if(null==u?void 0:u.layers){const[i,c]=await(0,l.l)(["esri/layers/support/fieldUtils","esri/renderers/support/jsonUtils"]),d=u.layers.find((r=>r.id===e.layerId)),f=null===(t=null===(n=null==d?void 0:d.layerDefinition)||void 0===n?void 0:n.drawingInfo)||void 0===t?void 0:t.renderer,m=null===(o=null==d?void 0:d.layerDefinition)||void 0===o?void 0:o.featureReduction;if(!f&&!m)return Promise.resolve(!1);if(f){const n=c.fromJSON(f),t=await i.getRendererFields(n,e.fieldsIndex);if(null==t?void 0:t.includes(r.name))return Promise.resolve(!0);const o=null===(s=null==d?void 0:d.layerDefinition)||void 0===s?void 0:s.definitionExpression;if(o){const[i]=await(0,l.l)(["esri/core/sql"]);if(null===(a=(await i.parseWhereClause(o,e.fieldsIndex)).fieldNames)||void 0===a?void 0:a.includes(r.name))return Promise.resolve(!0)}}if(m){if(await v(e,r,m))return Promise.resolve(!0)}}return Promise.resolve(!1)}),(()=>Promise.resolve(!1)))}(r,i);if(S)return Promise.resolve(!1);const b=await async function(e,r){var i;const n=e.sourceJSON,t=null===(i=null==n?void 0:n.drawingInfo)||void 0===i?void 0:i.renderer,o=null==n?void 0:n.featureReduction;if(!t&&!o)return Promise.resolve(!1);const[s,a]=await(0,l.l)(["esri/layers/support/fieldUtils","esri/renderers/support/jsonUtils"]);if(t){const i=a.fromJSON(t),n=await s.getRendererFields(i,e.fieldsIndex);if(null==n?void 0:n.includes(r.name))return Promise.resolve(!0)}if(o){if(await v(e,r,o))return Promise.resolve(!0)}return Promise.resolve(!1)}(r,i);if(b)return Promise.resolve(!1);const I=function(e,r,i){var n,t,o,s,l;const a=null===(o=null===(t=null===(n=e.map)||void 0===n?void 0:n.applicationProperties)||void 0===t?void 0:t.viewing)||void 0===o?void 0:o.search;if(a){const e=null===(s=a.layers)||void 0===s?void 0:s.find((e=>e.id===r.id));if(e){const r=null===(l=null==e?void 0:e.field)||void 0===l?void 0:l.name;if(r)return r===i.name}}return!1}(e,r,i);if(I)return Promise.resolve(!1);const k=r.relationships,F=null==k?void 0:k.map((e=>e.keyField));if(null==F?void 0:F.includes(i.name))return Promise.resolve(!1);const T=(0,o.u)(m,m.portal.user),$=null!==(u=await(0,o.j)(r))&&void 0!==u?u:[],x=null!==(c=await(0,o.k)(r))&&void 0!==c?c:[],O=(0,o.m)($,x);if(!T&&!O)return Promise.resolve(!1);const j=await(0,o.n)(m.id,m.portal,{relationshipType:"Service2Service"});if(null===(d=null==j?void 0:j.data)||void 0===d?void 0:d.relatedItems){if(j.data.relatedItems.some((e=>["WMTS","Map Service","Vector Tile Service"].includes(e.type))))return Promise.resolve(!1)}return Promise.resolve(!0)}async function v(e,r,i){const[n,t,o]=await(0,l.l)(["esri/layers/support/FeatureReductionBinning","esri/layers/support/FeatureReductionCluster","esri/layers/support/fieldUtils"]),s="binning"===i.type?n.fromJSON(i):t.fromJSON(i),a=new Set;return await o.collectFeatureReductionFields(a,e,s),a.has(r.name)?Promise.resolve(!0):Promise.resolve(!1)}},26408:(e,r,i)=>{i.d(r,{a:()=>u,b:()=>v,c:()=>t,d:()=>n,e:()=>s,f:()=>o,g:()=>c,h:()=>f,i:()=>m,m:()=>l,t:()=>a,u:()=>d});const n=(e,r)=>{let i,n="idle";const t=(...t)=>new Promise((o=>{switch(n){case"flushed":n="idle",i?(clearTimeout(i),o(e(...t))):o(null);break;case"invoked":clearTimeout(i),n="idle",o(e(...t));break;case"cancelled":clearTimeout(i),n="idle",o(null);break;default:i&&clearTimeout(i),n="pending",i=setTimeout((()=>(n="idle",o(e(...t)))),r)}}));return t.flush=function(...e){return n="flushed",t(...e)},t.invoke=function(...e){return n="invoked",t(...e)},t.cancel=function(...e){return n="cancelled",t(...e)},t.getStatus=function(){return n},t},t=(e,r)=>{let i;return(...n)=>new Promise((t=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,t(e(...n))}),r))}))};function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){return null!=e}async function l(e,r){return await Promise.all([e,a(r)]),e}function a(e){return new Promise((r=>setTimeout(r,e)))}const u=(e,r)=>Object.fromEntries((e||[]).map((e=>{const{key:i,data:n}=r(e);return[i,n]}))),c=(e,r)=>e.length===r.length&&e.reduce(((e,i)=>e&&r.indexOf(i)>-1),!0);function d(e,r){const i=[],n={};return e.forEach((e=>{const t=r(e);null==n[t]&&(n[t]=e,i.push(e))})),i}function v(e){const r={boolean:{},number:{},string:{}},i=[];return e.filter((e=>{let n=typeof e;return n in r?!r[n].hasOwnProperty(e)&&(r[n][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)}))}const f=(e,r)=>[...Array(Math.ceil(e.length/r))].map(((i,n)=>e.slice(r*n,r+r*n))),m=(e,r)=>e.includes(r)},18991:(e,r,i)=>{i.d(r,{c:()=>a});var n=i(19564);const t=e=>!("isConnected"in e)||e.isConnected,o=((e,r)=>{let i;return(...n)=>{i&&clearTimeout(i),i=setTimeout((()=>{i=0,e(...n)}),r)}})((e=>{for(let r of e.keys())e.set(r,e.get(r).filter(t))}),2e3),s=e=>"function"==typeof e?e():e,l=(e,r)=>{const i=e.indexOf(r);i>=0&&(e[i]=e[e.length-1],e.length--)},a=(e,r)=>{const i=((e,r=(e,r)=>e!==r)=>{const i=s(e);let n=new Map(Object.entries(null!=i?i:{}));const t={dispose:[],get:[],set:[],reset:[]},o=()=>{var r;n=new Map(Object.entries(null!==(r=s(e))&&void 0!==r?r:{})),t.reset.forEach((e=>e()))},a=e=>(t.get.forEach((r=>r(e))),n.get(e)),u=(e,i)=>{const o=n.get(e);r(i,o,e)&&(n.set(e,i),t.set.forEach((r=>r(e,i,o))))},c="undefined"==typeof Proxy?{}:new Proxy(i,{get:(e,r)=>a(r),ownKeys:e=>Array.from(n.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,r)=>n.has(r),set:(e,r,i)=>(u(r,i),!0)}),d=(e,r)=>(t[e].push(r),()=>{l(t[e],r)});return{state:c,get:a,set:u,on:d,onChange:(r,i)=>{const n=d("set",((e,n)=>{e===r&&i(n)})),t=d("reset",(()=>i(s(e)[r])));return()=>{n(),t()}},use:(...e)=>{const r=e.reduce(((e,r)=>(r.set&&e.push(d("set",r.set)),r.get&&e.push(d("get",r.get)),r.reset&&e.push(d("reset",r.reset)),r.dispose&&e.push(d("dispose",r.dispose)),e)),[]);return()=>r.forEach((e=>e()))},dispose:()=>{t.dispose.forEach((e=>e())),o()},reset:o,forceUpdate:e=>{const r=n.get(e);t.set.forEach((i=>i(e,r,r)))}}})(e,r);return i.use((()=>{if("function"!=typeof n.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:r=>{const i=(0,n.g)();i&&((e,r,i)=>{const n=e.get(r);n?n.includes(i)||n.push(i):e.set(r,[i])})(e,r,i)},set:r=>{const i=e.get(r);i&&e.set(r,i.filter(n.f)),o(e)},reset:()=>{e.forEach((e=>e.forEach(n.f))),o(e)}}})()),i}},67336:(e,r,i)=>{i.d(r,{a:()=>l,b:()=>s,c:()=>c,d:()=>d,e:()=>v,f:()=>p,g:()=>I,h:()=>g,i:()=>a,j:()=>w,k:()=>P,l:()=>h,m:()=>b,n:()=>S,o:()=>m,p:()=>y,q:()=>f,u:()=>u});var n=i(98034),t=i(44508);function o(e){var r;return!!(null===(r=e.owner)||void 0===r?void 0:r.toLowerCase().includes("esri"))}function s(e){var r;return o(e)&&!!(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Requires Credits"))}function l(e){var r;return o(e)&&!!(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Requires Subscription"))}function a(e,r){return e.owner===r.username}function u(e,r){return a(e,r)||function(e,r){var i;if(null!=e.isAdmin)return!!e.isAdmin;const n=e.owner,t="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(i=e.portal)||void 0===i?void 0:i.isPortal)&&!a(e,r)&&t&&n.includes("esri_")&&!o.includes(n))return!1;return t}(e,r)}const c=(e,r)=>!!r.orgId&&e.every((e=>e.isOrgItem)),d=(e,r)=>`${(0,t.a)(r)}item.html?id=${e}`,v=(e,r)=>`${(0,t.g)(r)}/content/users/${e}`,f=e=>e.reduce(((e,r)=>(e[r.owner]=e[r.owner]?[...e[r.owner],r.id]:[r.id],e)),{});function m(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Spatiotemporal")}function p(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("View Service")}function g(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Hosted Service")}function h(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Multi Services View")}function y(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function w(e){var r;const i=null==e?void 0:e.portalItem;if(!i)return Promise.resolve(null);const o=i.portal,[s]=await(0,n.l)(["esri/request"]);if(null==o?void 0:o.user){return s(`${(0,t.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(r=i.portal.credential)||void 0===r?void 0:r.token},responseType:"json"}).then((e=>{var r,i;const n=null!==(i=null===(r=e.data)||void 0===r?void 0:r.groups)&&void 0!==i?i:[];return Promise.resolve(n)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function P(e){var r;const i=null==e?void 0:e.portalItem;if(!i)return Promise.resolve(null);const o=i.portal,[s]=await(0,n.l)(["esri/request"]);return s(`${(0,t.g)(o)}content/items/${i.id}/groups`,{query:{f:"json",token:null===(r=i.portal.credential)||void 0===r?void 0:r.token},responseType:"json"}).then((e=>{var r,i,n,t,o,s;const l=[...null!==(i=null===(r=e.data)||void 0===r?void 0:r.admin)&&void 0!==i?i:[],...null!==(t=null===(n=e.data)||void 0===n?void 0:n.member)&&void 0!==t?t:[],...null!==(s=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==s?s:[]];return Promise.resolve(l)}),(()=>Promise.reject()))}async function S(e,r,{relationshipType:i,direction:o}){const s=`${(0,t.g)(r)}content/items/${e}/relatedItems`,[l]=await(0,n.l)(["esri/request"]);return await l(s,{query:{f:"json",relationshipType:i,direction:o},method:"get",responseType:"json"})}function b(e,r){return null==e?void 0:e.some((e=>null==r?void 0:r.some((r=>e.id===r.id&&e.capabilities.includes("updateitemcontrol")))))}const I=(e,r)=>`${(0,t.a)(r)}content/items/${e}`},44508:(e,r,i)=>{i.d(r,{a:()=>p,b:()=>v,c:()=>P,d:()=>h,e:()=>S,f:()=>o,g:()=>w,h:()=>s,i:()=>y,j:()=>f,k:()=>m,p:()=>d,r:()=>a,s:()=>t,t:()=>g,v:()=>u});var n=i(4948);const t=/\+|\?|\/|\(|\)|\\|\!|\#|\"|\||\*|\:|<|>|\%|\$|\@|\'|\^|\[|\]|\,|\=|\;/gi,o=/(\.|outputFormat=)json|geojson$/i,s=/\/ags\//gi,l="MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer|WorkspaceServer|GeoenrichmentServer|VideoServer|KnowledgeGraphServer",a=new RegExp(`http.+/(${l})`),u="/arcgis/rest/services|/rest/services|/arcgis/services|/arcgis/rest",c=new RegExp(`(?<server>http.+(?:${u})(?:/?.*/(?<name>.*)/(?<type>${l})))(?!.*/${l})/?(?<soe>\\d+)?.*`,"i"),d=e=>{const r=e.match(c);if(!r){return e.match(s)?{baseServerUrl:e,serverName:null,serverType:"MapServer",index:null}:null}const[,i,n,t,o]=r,l=parseInt(o);return{baseServerUrl:i,serverName:n,serverType:t,index:isNaN(l)?null:l}},v=e=>{if(!e)return null;if(!e.match(u))return null;const r=e.split("/rest");return r.length<2?null:`${r[0]}/rest/`};function f(e){return new URLSearchParams(e).toString()}function m(e,r){return(null==e?void 0:e.includes("?"))?new URLSearchParams(e.substring(e.indexOf("?"))).get(r):""}const p=e=>e&&"/"!==e.charAt(e.length-1)?`${e}/`:e,g=({path:e,url:r})=>{const i=r.split("/"),n=e.split("/");return i.slice(0,i.length-n.length).join("/")};function h(e){const{customBaseUrl:r,portalHostname:i,urlKey:n}=e,{protocol:t}=window.location;return`${t}//${n?`${n}.${r}`:i}`}function y(e){var r,i;return null!==(r=null==e?void 0:e.isWebTierAuth)&&void 0!==r?r:null===(i=e.sourceJSON)||void 0===i?void 0:i.isWebTierAuth}function w(e){var r;const{portal:i,config:t}=n.c||{};return null!==(r=p(null==t?void 0:t.restBaseUrl))&&void 0!==r?r:P(e||i)}function P(e){var r;return p(null!==(r=e.restUrl)&&void 0!==r?r:e.portalUrl)}function S(e){var r,i,n;return(null===(i=null===(r=null==e?void 0:e.user)||void 0===r?void 0:r.sourceJSON)||void 0===i?void 0:i.culture)||(null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.culture)||navigator.language||"en-US"}}}]);