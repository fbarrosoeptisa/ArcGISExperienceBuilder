/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-82332c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-82332c"],{80763:(e,i,n)=>{n.d(i,{a:()=>t,b:()=>v,c:()=>r,d:()=>p,e:()=>g,f:()=>d,g:()=>I,h:()=>u,i:()=>S,j:()=>h,k:()=>f,l:()=>z,m:()=>m,n:()=>b,s:()=>c});n(12350),n(98034);var s=n(52437),l=n(67115),o=n(9421),a=n(95597);function r(e){var i,n;const{layer:l,useFeatureReduction:a,mapImageSublayer:r,mapView:t,supportsArcade:d,modules:u}=s.s,f=l;if(r&&!d)return function(e){var i,n;const{layer:l,useFeatureReduction:a,mapImageSublayer:r,mapView:t,modules:d}=s.s,u=l;e=e||{};const f=(0,s.o)((0,s.b)()),c=null===(i=e.fieldInfos)||void 0===i?void 0:i[0];return d.SizeCreator.createClassBreaksRenderer({layer:u,view:t,field:null==c?void 0:c.field,valueExpression:null==c?void 0:c.expression,valueExpressionTitle:null==c?void 0:c.expressionTitle,normalizationField:void 0,classificationMethod:e.classificationMethod?e.classificationMethod:"natural-breaks",standardDeviationInterval:"standard-deviation"===e.classificationMethod?e.standardDeviationInterval?e.standardDeviationInterval:1:void 0,numClasses:e.numClasses?e.numClasses:4,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.C)()),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=u.featureReduction)||void 0===n?void 0:n.type)&&a}).then((e=>((0,s.n)(f,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}(e);const m=(0,s.b)(),b=m.authoringInfo,z=(0,s.J)(m,"reference-size"),v=(0,s.a)();e=e||{};const p=(0,s.o)((0,s.b)()),g=null===(i=e.fieldInfos)||void 0===i?void 0:i[0],I=e.theme?e.theme:z?"reference-size":void 0,h={layer:f,view:t,field:null==g?void 0:g.field,theme:I,valueExpression:null==g?void 0:g.expression,valueExpressionTitle:null==g?void 0:g.expressionTitle,normalizationField:e.normalizationField,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.C)()),sizeOptimizationEnabled:!r&&(!(0,o.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=f.featureReduction)||void 0===n?void 0:n.type)&&a,referenceSizeOptions:e.theme&&"reference-size"!==e.theme||!(null==g?void 0:g.field)?void 0:(0,o.i)(e.referenceSizeOptions)?e.referenceSizeOptions:z?{symbolStyle:z.referenceSizeSymbolStyle}:void 0};return u.SizeCreator.createContinuousRenderer(h).then((i=>{const n=(0,s.J)(i.renderer,"reference-size");if(!e.noReuse&&c(e)&&["size","color-size","type-size","relationship-size"].indexOf(v)>-1&&b&&"above-and-below"!==b.univariateTheme&&!(0,o.i)(n)&&!(0,o.i)(z)){const e=(0,s.b)().clone(),n=(0,s.d)(e,"size"),l=(0,s.J)(e,"size"),o=(0,s.d)(e,"size","outline");i.renderer.visualVariables=[n],o&&i.renderer.visualVariables.push(o),i.renderer.authoringInfo.visualVariables=[l],(0,s.T)(i.renderer)}return(0,s.n)(p,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function t(e){var i;const{layer:n,mapImageSublayer:l,mapView:a,modules:r}=s.s,t=n,d=(0,s.b)().authoringInfo,u=(0,s.a)();e=e||{};const f=(0,s.o)((0,s.b)()),m=null===(i=e.fieldInfos)||void 0===i?void 0:i[0],b=e.theme?e.theme:"high-to-low",z={layer:t,view:a,startTime:null==m?void 0:m.field,endTime:new Date,theme:b,unit:void 0,outlineOptimizationEnabled:!l&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.C)()),sizeOptimizationEnabled:!0,legendOptions:e.legendOptions,defaultSymbolEnabled:!1};return r.SizeCreator.createAgeRenderer(z).then((i=>{if(c(e)&&["size-age","color-size-age","type-size-age"].indexOf(u)>-1&&d&&"above-and-below"!==(null==d?void 0:d.univariateTheme)){const e=(0,s.b)().clone(),n=(0,s.d)(e,"size"),l=(0,s.J)(e,"size"),o=(0,s.d)(e,"size","outline");i.renderer.visualVariables=[n],o&&i.renderer.visualVariables.push(o),i.renderer.authoringInfo.visualVariables=[l],(0,s.T)(i.renderer)}return(0,s.n)(f,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function d(e){var i,n,l,a;const{layer:r,useFeatureReduction:t,mapImageSublayer:d,mapView:u,supportsArcade:c,modules:m}=s.s,b=r;if(d&&!c)return f(e);e=e||{};const z=(0,s.b)(),v=z.authoringInfo||{},p=(0,s.a)(),g=(0,s.d)(z,"size"),I=(0,s.J)(z,"size"),h=(0,s.J)(z,"reference-size"),S=(0,s.o)(z);let y;if(["type-size","relationship-size"].indexOf(p)>-1){const e=(0,s.b)();y=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.p)(p)}else y=z.classBreakInfos&&z.classBreakInfos.length?z.classBreakInfos[z.classBreakInfos.length-1].symbol:(0,s.p)(p);const x=z.defaultSymbol,O=z.defaultLabel,V=z.backgroundFillSymbol,E=(0,o.i)(e.referenceSizeOptions)?"reference-size":e.theme?e.theme:I&&!h?I.theme:h?"reference-size":"high-to-low";let k=!1;if(g)E===g.theme&&(k=g.minSize.stops?g.minSize.stops[0].size>g.maxSize.stops[0].size:g.minSize>g.maxSize);else if(!h){const e=z.classBreakInfos[0].symbol,i=z.classBreakInfos[z.classBreakInfos.length-1].symbol,n=(0,s.Y)(e),l=(0,s.Y)(i);k=n>l}if(e.fieldInfos&&e.fieldInfos[0]&&g&&e.fieldInfos[0].field===g.field&&e.fieldInfos[0].expression===g.valueExpression&&e.normalizationField===g.normalizationField&&(delete e.fieldInfos,(0,s.W)(e))){const e=z.clone();return e.visualVariables=(0,s.U)(z,"color"),Promise.resolve({renderer:e})}const B=e.fieldInfos&&e.fieldInfos[0]?e.fieldInfos[0]:g?{field:g.field,expression:g.valueExpression,expressionTitle:g.valueExpressionTitle,simpleFieldType:s.v.NUMBER}:h?{field:h.field,simpleFieldType:s.v.NUMBER}:{field:z.field,expression:z.valueExpression,expressionTitle:z.valueExpressionTitle,simpleFieldType:s.v.NUMBER},j=null===e.normalizationField?void 0:e.normalizationField?e.normalizationField:g?g.normalizationField:h?h.normalizationField:z.normalizationField;let F=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfos&&e.fieldInfos[0]||"manual"===v.classificationMethod&&!e.theme||"equal-interval"===v.classificationMethod)&&(F=!0);const P=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:F?void 0:g?null==I?void 0:I.minSliderValue:h?h.minSliderValue:z.classBreakInfos[0].minValue,T=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:F?void 0:g?null==I?void 0:I.maxSliderValue:h?h.maxSliderValue:z.classBreakInfos[z.classBreakInfos.length-1].maxValue,w={layer:b,view:u,theme:E,field:B.field,valueExpression:B.expression,valueExpressionTitle:B.expressionTitle,normalizationField:j,minValue:P,maxValue:T,outlineOptimizationEnabled:!d&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!S.sizeOutlineVisVar),sizeOptimizationEnabled:!d&&(!g||((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:"object"==typeof(null==g?void 0:g.minSize))),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==g?void 0:g.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(l=z.legendOptions)||void 0===l?void 0:l.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!z.defaultSymbol,forBinning:"binning"===(null===(a=b.featureReduction)||void 0===a?void 0:a.type)&&t,referenceSizeOptions:e.theme&&"reference-size"!==e.theme?void 0:(0,o.i)(e.referenceSizeOptions)?e.referenceSizeOptions:h?{symbolStyle:h.referenceSizeSymbolStyle}:void 0};return m.SizeCreator.createContinuousRenderer(w).then((i=>{var n,l;const o=(0,s.J)(i.renderer,"reference-size");if(o){const e=o.sizeStops.map((e=>e.size));if(e[1]<e[0]||1===Math.round(e[1])){const{strings:e}=s.s;return Promise.reject({message:e.themeButton.errors.invalidReferenceSizeStops,type:"warning"})}}const a=(null==h?void 0:h.referenceSizeSymbolStyle)!==(null==o?void 0:o.referenceSizeSymbolStyle);if(e.referenceSizeOptions||h||(i.renderer.authoringInfo.visualVariables=(0,s.V)(i.renderer,"reference-size")||[]),e.discardMinMax&&!h&&!o){const e=(0,s.d)(z,"size"),n=(0,s.d)(i.renderer,"size");e.minDataValue=n.minDataValue,e.maxDataValue=n.maxDataValue}if(!e.fieldInfos&&void 0===e.normalizationField&&g&&!o&&E===(null==g?void 0:g.theme)){const e=(0,s.d)(i.renderer,"size");e.minDataValue=g.minDataValue,e.maxDataValue=g.maxDataValue}if(!h&&o&&(i.renderer.defaultLabel=void 0,i.renderer.defaultSymbol=void 0,i.renderer.backgroundFillSymbol=void 0),["color-size","color-age-size","color-size-age","type-size","type-size-age","relationship-size","predominance-size"].indexOf(p)>-1){if(a)return Promise.resolve(i);z.visualVariables=(0,s.U)(z,"size")||[],z.visualVariables=(0,s.U)(z,"size","outline")||[],z.authoringInfo.visualVariables=(0,s.V)(z,"size")||[],z.authoringInfo.visualVariables=(0,s.V)(z,"reference-size")||[];const e=(0,s.d)(i.renderer,"size");e&&z.visualVariables.push(e);const n=(0,s.d)(i.renderer,"size","outline");n&&z.visualVariables.push(n);const l=(0,s.J)(i.renderer,"size");return l&&z.authoringInfo.visualVariables.push(l),(0,s.T)(z),i.renderer=z.clone(),Promise.resolve(i)}if((0,s.n)(S,i.renderer),!a&&y&&(null===(n=i.renderer.classBreakInfos)||void 0===n?void 0:n.length)&&(i.renderer.classBreakInfos[0].symbol=y),a&&y&&(null===(l=i.renderer.classBreakInfos)||void 0===l?void 0:l.length)){const e=(0,s.R)(y);(0,s.X)(i.renderer.classBreakInfos[0].symbol,e)}if(!x||o&&!h||(i.renderer.defaultSymbol=x,i.renderer.defaultLabel=O),!V||o&&!h||(i.renderer.backgroundFillSymbol=V),k){const e=(0,s.d)(i.renderer,"size");if(e){const i=e.minSize;e.minSize=e.maxSize,e.maxSize=i}}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function u(e){var i,n,l;const{layer:a,mapImageSublayer:r,mapView:t,modules:d}=s.s,u=a;e=e||{};const f=(0,s.b)(),c=(0,s.a)(),m=(0,s.d)(f,"size"),b=(0,s.J)(f,"size"),z=(0,s.o)(f),v=e.startTime?e.startTime:b.startTime,p=e.endTime?e.endTime:b.endTime;let g;if(["type-size-age"].indexOf(c)>-1){const e=(0,s.b)();g=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.p)(c)}else g=f.classBreakInfos&&f.classBreakInfos.length?f.classBreakInfos[0].symbol:(0,s.p)(c);const I=f.defaultSymbol,h=f.defaultLabel,S=f.backgroundFillSymbol;let y=!1;if(m)y=m.minSize.stops?m.minSize.stops[0].size>m.maxSize.stops[0].size:m.minSize>m.maxSize,"below"===b.theme&&(y=!y);else{const e=f.classBreakInfos[0].symbol,i=f.classBreakInfos[f.classBreakInfos.length-1].symbol,n=(0,s.Y)(e),l=(0,s.Y)(i);y=n>l}if(e.fieldInfos&&e.fieldInfos[0]&&m&&e.fieldInfos[0].field===m.field&&(delete e.fieldInfos,(0,s.W)(e))){const e=f.clone();return e.visualVariables=(0,s.U)(f,"color"),Promise.resolve({renderer:e})}let x=!1;(e.startTime||e.endTime||e.units||e.fieldInfo||e.theme)&&(x=!0);const O=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:x?void 0:b?b.minSliderValue:f.classBreakInfos[0].minValue,V=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:x?void 0:b?b.maxSliderValue:f.classBreakInfos[f.classBreakInfos.length-1].maxValue,E={layer:u,view:t,theme:e.theme?e.theme:b?b.theme:"high-to-low",startTime:v,endTime:p,unit:e.units?e.units:b.units,minValue:O,maxValue:V,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!z.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&(!m||((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:"object"==typeof m.minSize)),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==m?void 0:m.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(l=f.legendOptions)||void 0===l?void 0:l.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!f.defaultSymbol};return d.SizeCreator.createAgeRenderer(E).then((i=>{var n;if(e.discardMinMax){const e=(0,s.d)(f,"size"),n=(0,s.d)(i.renderer,"size");e.minDataValue=n.minDataValue,e.maxDataValue=n.maxDataValue}if((0,s.J)(i.renderer,"size").field=b.field,!x){const e=(0,s.d)(i.renderer,"size");e.minDataValue=m.minDataValue,e.maxDataValue=m.maxDataValue}if(["color-size-age"].indexOf(c)>-1){f.visualVariables=(0,s.U)(f,"size")||[],f.visualVariables=(0,s.U)(f,"size","outline")||[],f.authoringInfo.visualVariables=(0,s.V)(f,"size")||[];const e=(0,s.d)(i.renderer,"size");f.visualVariables.push(e);const n=(0,s.J)(i.renderer,"size");f.authoringInfo.visualVariables.push(n);const l=(0,s.d)(i.renderer,"size","outline");return l&&f.visualVariables.push(l),(0,s.T)(f),i.renderer=f.clone(),Promise.resolve(i)}if((0,s.n)(z,i.renderer),g&&(null===(n=i.renderer.classBreakInfos)||void 0===n?void 0:n.length)&&(i.renderer.classBreakInfos[0].symbol=g),I&&(i.renderer.defaultSymbol=I,i.renderer.defaultLabel=h),S&&(i.renderer.backgroundFillSymbol=S),y){const e=(0,s.d)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function f(e){var i;const{layer:n,useFeatureReduction:l,mapImageSublayer:a,mapView:r,modules:t}=s.s,d=n;e=e||{};const u=(0,s.b)(),f=(0,s.a)(),c=u.authoringInfo,m=(0,s.d)(u,"size"),b=(0,s.J)(u,"size"),z=(0,s.o)(u),v={field:u.field,expression:u.valueExpression,expressionTitle:u.valueExpressionTitle,simpleFieldType:s.v.NUMBER};let p=e.fieldInfos?e.fieldInfos[0]:m?{field:m.field,expression:m.valueExpression,expressionTitle:m.valueExpressionTitle,simpleFieldType:s.v.NUMBER}:v;const g=void 0!==e.normalizationField?e.normalizationField:m?m.normalizationField:u.normalizationField;let I;if(["type-size"].indexOf(f)>-1){const e=(0,s.b)();I=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.p)(f)}else I=u.classBreakInfos&&u.classBreakInfos.length?u.classBreakInfos[0].symbol:(0,s.p)(f);const h=u.defaultSymbol,S=u.defaultLabel,y=u.backgroundFillSymbol;let x=!1;if(u.classBreakInfos.length>1){const e=u.classBreakInfos[0].symbol,i=u.classBreakInfos[1].symbol,n=(0,s.Y)(e)||0,l=(0,s.Y)(i)||0;x=n>l}if(!m&&c&&(0,s.w)(p,v)&&g===u.normalizationField&&(delete e.fieldInfos,(0,s.W)(e))){const e=u.clone();return e.visualVariables=(0,s.U)(u,"color"),Promise.resolve({renderer:e})}const O=e.classificationMethod?e.classificationMethod:(null==c?void 0:c.classificationMethod)&&"manual"!==c.classificationMethod?c.classificationMethod:"equal-interval",V="standard-deviation"===O?e.standardDeviationInterval?e.standardDeviationInterval:c.standardDeviationInterval?c.standardDeviationInterval:1:void 0;let E=!0;!e.classificationMethod||e.classificationMethod===(null==c?void 0:c.classificationMethod)||"standard-deviation"!==e.classificationMethod&&"standard-deviation"!==(null==c?void 0:c.classificationMethod)||(E=!1);let k=!1;(void 0!==e.normalizationField||!(0,s.w)(p,v)||"equal-interval"!==O||(null==b?void 0:b.minSliderValue)||(null==b?void 0:b.maxSliderValue))&&(k=!0);const B=(0,o.i)(e.min)?e.min:k?void 0:b?b.minSliderValue:u.classBreakInfos[0].minValue,j=(0,o.i)(e.max)?e.max:k?void 0:b?b.maxSliderValue:u.classBreakInfos[u.classBreakInfos.length-1].maxValue;return t.SizeCreator.createClassBreaksRenderer({layer:d,view:r,field:p.field,valueExpression:p.expression,valueExpressionTitle:p.expressionTitle,normalizationField:g,classificationMethod:O,standardDeviationInterval:V,numClasses:(0,o.i)(e.numClasses)?e.numClasses:m||!E?4:u.classBreakInfos.length,minValue:B,maxValue:j,outlineOptimizationEnabled:!a&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!z.sizeOutlineVisVar),legendOptions:e.legendOptions||u.legendOptions,defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!u.defaultSymbol,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&l}).then((e=>{if((0,s.n)(z,e.renderer),I&&e.renderer.classBreakInfos&&e.renderer.classBreakInfos.map((e=>{const i=I.clone();(0,s.Z)(i,(0,s.Y)(e.symbol)),e.symbol=i})),h&&(e.renderer.defaultSymbol=h,e.renderer.defaultLabel=S),y&&(e.renderer.backgroundFillSymbol=y),x){const i=(0,s.d)(e.renderer,"size"),n=i.minSize;i.minSize=i.maxSize,i.maxSize=n}return Promise.resolve(e)}),(e=>Promise.reject(e)))}function c(e){var i;const n=(0,s.b)().clone(),l=(0,s.a)();if(["size","size-age","color-size","color-size-age","color-age-size","type-size","type-size-age","relationship-size"].indexOf(l)>-1&&void 0===e.normalizationField){let o;const a=(0,s.d)(n,"size");if(a)if(["size-age","color-size-age","type-size-age"].indexOf(l)>-1){o={field:(0,s.J)(n,"size").field}}else o={field:a.field,expression:a.valueExpression,expressionTitle:a.valueExpressionTitle};else o={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle};if((0,s.w)(null===(i=e.fieldInfos)||void 0===i?void 0:i[0],o))return!0}return!1}function m(){const{mapView:e,modules:i}=s.s,n=(0,s.b)(),l=(0,s.d)(n,"size"),o=(0,s.J)(n,"reference-size"),r=e.scale;let t;if(null==l?void 0:l.stops)t=i.esriLang.clone(l.stops);else if(null==o?void 0:o.sizeStops)o.referenceSizeScale&&(0,a.s)(),t=i.esriLang.clone(o.sizeStops);else{const{minSize:e,maxSize:n,minDataValue:s,maxDataValue:o}=l;let a,d;if("number"==typeof e)a=e,d=n;else{const i=e.stops.length-1;r>e.stops[i].value?(a=e.stops[i].size,d=n.stops[i].size):e.stops.forEach(((e,i)=>{r<=e.value&&(a=e.size,d=n.stops[i].size)}))}t=[new i.SizeStop({value:s,size:a}),new i.SizeStop({value:o,size:d})]}return t}function b(){return(0,s.b)().classBreakInfos.map((e=>{const i=e.symbol;return{min:e.minValue,max:e.maxValue,size:(0,s.Y)(i)}}))}async function z(e){var i,n,l;const{layer:a,modules:r,useFeatureReduction:t,mapView:d}=s.s,u=(0,s.b)(),f=(0,s.J)(u,"reference-size");e=e||{};const c={layer:a,view:d,renderer:u.clone(),field:f.field,normalizationField:f.normalizationField,sizeStops:null!==(i=e.sizeStops)&&void 0!==i?i:r.esriLang.clone(f.sizeStops),forBinning:"binning"===(null===(n=a.featureReduction)||void 0===n?void 0:n.type)&&t,sizeOptimizationEnabled:(0,o.i)(f.referenceSizeScale),referenceSizeOptions:null!==(l=e.referenceSizeOptions)&&void 0!==l?l:{symbolStyle:f.referenceSizeSymbolStyle}};return await r.SizeCreator.updateRendererWithReferenceSize(c).then((e=>e),(e=>Promise.reject(e)))}function v(e){const i=(0,s.b)().authoringInfo,n=(0,s.a)(),l=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];if(c({fieldInfos:[l]})&&["color-size","color-age-size","type-size"].indexOf(n)>-1&&i&&"above-and-below"!==(null==i?void 0:i.univariateTheme)){if((0,s.d)((0,s.b)(),"size"))return y((0,s.b)(),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}return r(Object.assign(Object.assign({},e),{fieldInfos:[l]})).then((i=>y(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function p(e){const i=(0,s.b)().authoringInfo,n=(0,s.a)(),l=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];if(c({fieldInfos:[l]})&&["color-size","color-age-size","type-size"].indexOf(n)>-1&&i&&"above-and-below"!==(null==i?void 0:i.univariateTheme)){if((0,s.d)((0,s.b)(),"size"))return x((0,s.b)(),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}return r(Object.assign(Object.assign({},e),{fieldInfos:[l]})).then((i=>x(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function g(e){const i=(0,s.b)().authoringInfo,n=(0,s.a)(),l=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];if(c({fieldInfos:[l]})&&["color-size-age","type-size-age"].indexOf(n)>-1&&i&&"above-and-below"!==(null==i?void 0:i.univariateTheme)){if((0,s.d)((0,s.b)(),"size"))return y((0,s.b)(),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}return t(Object.assign(Object.assign({},e),{fieldInfos:[l]})).then((i=>y(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function I(e,i){return e=e||{},d(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((n=>(0,l.b)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(O(e.renderer,n.renderer),e.backgroundFillSymbol=(0,s.b)().backgroundFillSymbol,"size"===i&&(e.statistics=n.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function h(e,i){return e=e||{},d(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((n=>(0,l.d)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(O(e.renderer,n.renderer),e.backgroundFillSymbol=(0,s.b)().backgroundFillSymbol,"size"===i&&(e.statistics=n.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function S(e,i){return e=e||{},u(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((n=>(0,l.b)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(O(e.renderer,n.renderer),e.backgroundFillSymbol=(0,s.b)().backgroundFillSymbol,"size"===i&&(e.statistics=n.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function y(e,i){const n=(0,s.b)(),o=n.authoringInfo,a=(0,s.a)(),r=(0,s.J)(n,"color");if((0,s.d)(n,"color")&&(0,l.s)(i)&&["color","color-size","color-size-age"].indexOf(a)>-1&&o&&"above-and-below"!==(null==o?void 0:o.univariateTheme)&&-1===["centered-on","extremes"].indexOf(null==r?void 0:r.theme)){const n=(0,s.b)().clone();if(O(n,e),2===i.fieldInfos.length){const e=n.authoringInfo;e.type=null,e.univariateTheme=null,e.univariateSymbolStyle=null}return Promise.resolve({renderer:n})}return(0,l.c)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(O(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function x(e,i){const n=(0,s.b)().authoringInfo,o=(0,s.a)();if((0,l.s)(i)&&["color-age","color-age-size"].indexOf(o)>-1&&n&&"above-and-below"!==(null==n?void 0:n.univariateTheme)){const i=(0,s.b)().clone();return O(i,e),Promise.resolve({renderer:i})}return(0,l.a)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(O(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function O(e,i){var n;if(!e.authoringInfo)return;e.visualVariables=(0,s.U)(e,"size")||[],e.visualVariables=(0,s.U)(e,"size","auto")||[];const l=(0,s.d)(i,"size");(0,s.J)(i,"reference-size")||e.visualVariables.push(l),e.authoringInfo.visualVariables=(0,s.V)(e,"size")||[];const o=(0,s.J)(i,"size");e.authoringInfo.visualVariables.push(o);const a=(null===(n=i.classBreakInfos)||void 0===n?void 0:n.length)?i.classBreakInfos:i.uniqueValueInfos;let r=(null==a?void 0:a.length)?a[0].symbol:(0,s.p)("color-size");if("picture-marker"===r.type&&(r=(0,s.p)("color-size")),(0,s.C)()){e.classBreakInfos.map((e=>{const i=(0,s.R)(e.symbol);e.symbol=r.clone(),(0,s.X)(e.symbol,i)})),e.backgroundFillSymbol=i.backgroundFillSymbol;const n=(0,s.d)(i,"size","outline");n&&e.visualVariables.push(n)}!function(e){const{modules:i}=s.s;"simple-line"===e.type?(e.color=[0,0,0,.5],e.width=1):"cim"===e.type?((0,s.X)(e,new i.esriColor([0,0,0,.5])),(0,s.Z)(e,4)):(e.color=null,e.outline.color=[0,0,0,.5],(0,s.Z)(e,4))}(r)}}}]);