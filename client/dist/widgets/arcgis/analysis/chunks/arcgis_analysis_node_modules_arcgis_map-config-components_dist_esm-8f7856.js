/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-8f7856.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-8f7856"],{97671:(e,i,a)=>{a.r(i),a.d(i,{arcgis_smart_mapping:()=>m});var s=a(28614),r=a(62200),t=a(48122),n=(a(68180),a(99592)),l=a(71480),o=a(97127),p=a(33101),c=a(80216),g=a(50063);const m=class{constructor(e){(0,s.r)(this,e),this.smartMappingCompleteClose=(0,s.c)(this,"smartMappingCompleteClose",7),this.arcgisClose=(0,s.c)(this,"arcgisClose",7),this.arcgisSmartMappingClose=(0,s.c)(this,"arcgisSmartMappingClose",7),this.arcgisBeforeBack=(0,s.c)(this,"arcgisBeforeBack",7),this.arcgisSmartMappingBeforeBack=(0,s.c)(this,"arcgisSmartMappingBeforeBack",7),this.arcgisError=(0,s.c)(this,"arcgisError",7),this.arcgisSmartMappingError=(0,s.c)(this,"arcgisSmartMappingError",7),this.arcgisClusterRequiresUpdate=(0,s.c)(this,"arcgisClusterRequiresUpdate",7),this.arcgisSmartMappingClusterRequiresUpdate=(0,s.c)(this,"arcgisSmartMappingClusterRequiresUpdate",7),this.arcgisLoaded=(0,s.c)(this,"arcgisLoaded",7),this.arcgisSmartMappingLoaded=(0,s.c)(this,"arcgisSmartMappingLoaded",7),this.manager=(0,o.u)(this),this.closedViaEvent=!1,this.allFlowItemComponents="arcgis-smart-mapping,\n      arcgis-smart-mapping-panels-gallery,\n      arcgis-smart-mapping-panels-assist,\n      arcgis-smart-mapping-panels-simple,\n      arcgis-smart-mapping-panels-heatmap,\n      arcgis-smart-mapping-panels-predominance,\n      arcgis-smart-mapping-panels-predominance-size,\n      arcgis-smart-mapping-panels-relationship,\n      arcgis-smart-mapping-panels-relationship-size,\n      arcgis-smart-mapping-panels-size,\n      arcgis-smart-mapping-panels-chart,\n      arcgis-smart-mapping-panels-chart-size,\n      arcgis-smart-mapping-panels-color,\n      arcgis-smart-mapping-panels-color-size,\n      arcgis-smart-mapping-panels-color-size-univariate,\n      arcgis-smart-mapping-panels-compare,\n      arcgis-smart-mapping-panels-dot-density,\n      arcgis-smart-mapping-panels-type,\n      arcgis-smart-mapping-panels-type-size,\n      arcgis-smart-mapping-panels-raster-gallery,\n      arcgis-smart-mapping-panels-raster-flow,\n      arcgis-smart-mapping-panels-raster-vector-field,\n      arcgis-smart-mapping-panels-raster-stretch,\n      arcgis-smart-mapping-panels-raster-rgb,\n      arcgis-smart-mapping-panels-raster-shaded-relief,\n      arcgis-smart-mapping-panels-raster-class-breaks,\n      arcgis-smart-mapping-panels-raster-colormap,\n      arcgis-smart-mapping-panels-raster-unique-value",this.strings=(0,g.u)({blocking:!0}),this.smartMappingState=(0,p.u)(),this.portal=void 0,this.config=void 0,this.mapView=void 0,this.layer=void 0,this.useFeatureReduction=!1,this.skipGallery=!1,this.stylePart=void 0,this.hideLayerTitle=!1,this.hideSvgUploadSymbols=!1,this.hideAddStyles=!1,this.selected=!1,this.store=(0,r.c)({selectedFields:[],hideLayerTitle:!1,supportsArcade:!1,stringFieldsCount:-1,dateFieldsCount:-1,numberFieldsCount:-1,isRTL:!1,containsFlow:!0,oneFeatureResponseStatus:n.s.MISSING,hideSvgUploadSymbols:!1,hideAddStyles:!1,modules:{}})}arcgisCloseHandler(){this.closedViaEvent=!0}smartMappingCompleteCloseHandler(e){this.arcgisClose.emit(e.detail),this.arcgisSmartMappingClose.emit(e.detail)}async setFocus(){await(this.flowNode?.setFocus())}async componentWillLoad(){const{mapView:e,layer:i,smartMappingState:a}=this;if(!i||!e)return;if(a.layer=i,a.mapView=e,a.hideSvgUploadSymbols=this.hideSvgUploadSymbols??!1,a.hideAddStyles=this.hideAddStyles??!1,await async function(e){if((0,n.i)(e)){const[i,a,s,r,t,n,o,p,c,g,m,d,h,S,u,C,M,y,E,f,z,A,b,P,R,w,v,F,U]=await Promise.all([(0,l.T)(),(0,l.U)(),(0,l.V)(),(0,l.W)(),(0,l.X)(),(0,l.Y)(),(0,l.Z)(),(0,l._)(),(0,l.$)(),(0,l.a0)(),(0,l.a1)(),(0,l.a2)(),(0,l.a3)(),(0,l.G)(),(0,l.a4)(),(0,l.a5)(),(0,l.s)(),(0,l.a6)(),(0,l.a7)(),(0,l.a8)(),(0,l.a9)(),(0,l.aa)(),(0,l.ab)(),(0,l.e)(),(0,l.i)(),(0,l.n)(),(0,l.M)(),(0,l.ac)(),(0,l.z)()]);e.modules={Field:i,SimpleMarkerSymbol:a,SimpleLineSymbol:s,SimpleFillSymbol:r,RasterFlowCreator:t,RasterVectorFieldCreator:n,RasterStretchCreator:o,RasterRGBCreator:p,RasterShadedReliefCreator:c,RasterClassBreaksCreator:g,RasterColormapCreator:m,RasterUniqueValueCreator:d,rasterColorRampUtils:h,EsriColor:S,typeSchemes:u,colorSchemes:C,colorUtils:M,flowSchemes:y,MultipartColorRamp:E,AlgorithmicColorRamp:f,ColorSlider:z,ClassedColorSlider:A,Slider:b,esriLang:P,esriConfig:R,fieldUtils:w,previewSymbol2D:v,smartMappingRasterUtils:F,symbolUtils:U}}else{const[i,a,s,r,t,n,o,p,c,g,m,d,h,S,u,C,M,y,E,f,z,A,b,P,R,w,v,F,U,k,L,V,O,T,B,I,q,G,x,_,D,N,H,j,J,W,$,K,Q,X,Y,Z,ee,ie,ae,se,re,te,ne,le,oe,pe,ce,ge,me,de,he]=await Promise.all([(0,l.ad)(),(0,l.ae)(),(0,l.af)(),(0,l.k)(),(0,l.ag)(),(0,l.ah)(),(0,l.j)(),(0,l.ai)(),(0,l.U)(),(0,l.V)(),(0,l.W)(),(0,l.aj)(),(0,l.ak)(),(0,l.T)(),(0,l.al)(),(0,l.am)(),(0,l.an)(),(0,l.ao)(),(0,l.ap)(),(0,l.aq)(),(0,l.ar)(),(0,l.as)(),(0,l.at)(),(0,l.au)(),(0,l.av)(),(0,l.aw)(),(0,l.G)(),(0,l.a4)(),(0,l.ax)(),(0,l.ay)(),(0,l.az)(),(0,l.aA)(),(0,l.a5)(),(0,l.aB)(),(0,l.s)(),(0,l.aC)(),(0,l.aD)(),(0,l.aE)(),(0,l.aF)(),(0,l.aG)(),(0,l.aH)(),(0,l.aI)(),(0,l.aJ)(),(0,l.aK)(),(0,l.aL)(),(0,l.aM)(),(0,l.aN)(),(0,l.aO)(),(0,l.a9)(),(0,l.aa)(),(0,l.aP)(),(0,l.aQ)(),(0,l.aR)(),(0,l.aS)(),(0,l.ab)(),(0,l.e)(),(0,l.i)(),(0,l.L)(),(0,l.f)(),(0,l.n)(),(0,l.aT)(),(0,l.R)(),(0,l.M)(),(0,l.b)(),(0,l.p)(),(0,l.aU)(),(0,l.z)()]);e.modules={AuthoringInfo:i,SimpleRenderer:a,AttributeColorInfo:s,Point:r,Polyline:t,Polygon:n,Graphic:o,SpatialReference:p,SimpleMarkerSymbol:c,SimpleLineSymbol:g,SimpleFillSymbol:m,Query:d,FeatureSet:h,Field:S,intl:u,OpacityVariableCreator:C,PieChartCreator:M,ColorCreator:y,UnivariateColorSizeCreator:E,DotDensityCreator:f,HeatmapCreator:z,LocationCreator:A,PredominanceCreator:b,RelationshipCreator:P,SizeCreator:R,TypeCreator:w,EsriColor:v,typeSchemes:F,heatmapSchemes:U,relationshipSchemes:k,predominanceSchemes:L,pieChartSchemes:V,colorSchemes:O,dotDensitySchemes:T,colorUtils:B,heatmapStatistics:I,summaryStatistics:q,histogram:G,predominantCategories:x,SizeStop:_,RotationVariable:D,SizeVariable:N,HeatmapColorStop:H,UniqueValue:j,UniqueValueClass:J,UniqueValueGroup:W,OpacitySlider:$,HeatmapSlider:K,ColorSlider:Q,ClassedColorSlider:X,SizeSlider:Y,ClassedSizeSlider:Z,ColorSizeSlider:ee,BinaryColorSizeSlider:ie,Slider:ae,esriLang:se,esriConfig:re,urlUtils:te,esriRequest:ne,fieldUtils:le,smartMappingUtils:oe,cimSymbolUtils:pe,previewSymbol2D:ce,reactiveUtils:ge,rendererJsonUtils:me,rendererSupportUtils:de,symbolUtils:he}}}(a),"esri.layers.support.Sublayer"===i.declaredClass){let s=!1;const r=i.layer.sourceJSON?.cimVersion;if(r){const e=r.split("."),a=Number.parseFloat(1===e.length?r:`${e[0]}.${e[1]}`);s=i.layer.version>=10.51&&a>=1.4}a.mapImageSublayer=i,delete a.layer,await a.modules.reactiveUtils.whenOnce((()=>!e.updating)).then((async()=>{await a.mapImageSublayer.createFeatureLayer().then((async e=>{this.layer=e,await e.load().then((async()=>{await this.loadStore(),a.supportsArcade=s,await this.processLayer()}))}))}))}else"knowledge-graph-sublayer"===i.type&&(a.supportsArcade=!1),a.mapImageSublayer=void 0,await this.loadStore(),await this.processLayer();const s=(0,t.f)(this.el,"calcite-flow");s&&(a.containsFlow=!1,this.flowNode=s)}async componentDidLoad(){if(!this.smartMappingState?.containsFlow&&this.selected){const e=Array.from(this.el.childNodes);e[e.length-1].selected=!0}this.arcgisLoaded.emit(),this.arcgisSmartMappingLoaded.emit()}disconnectedCallback(){this.closedViaEvent||(this.arcgisClose.emit("save"),this.arcgisSmartMappingClose.emit("save"))}async loadStore(){const{smartMappingState:e}=this;(0,p.c)(e);const{portal:i,config:a,mapView:s,layer:r,hideLayerTitle:t,useFeatureReduction:n,hideSvgUploadSymbols:l,hideAddStyles:c}=this;e.portal=i,e.config=a,e.mapView=s,e.layer=r,e.hideLayerTitle=!!t,e.strings=this.strings,e.locale=this.strings._t9nLocale,e.fullLocale=this.strings._lang,e.isRTL="rtl"===(0,o.a)(this.el),e.useFeatureReduction=n,e.hideSvgUploadSymbols=l,e.hideAddStyles=c}render(){const{smartMappingState:e}=this,{containsFlow:i}=e;return(0,s.h)(s.H,{key:"cb390ce7adcfc28bbd444ba45ce52ca694c8b370",class:"calcite-match-height"},i?(0,s.h)("calcite-flow",{class:"flow",ref:e=>this.flowNode=e,customItemSelectors:this.allFlowItemComponents},this.renderContent()):this.renderContent())}renderContent(){const{skipGallery:e,smartMappingState:i}=this,{layer:a,containsFlow:r}=i;return e?this.renderSkipGallery():"geo-rss"===a.type?(0,s.h)("arcgis-smart-mapping-panels-simple",{selected:this.selected,onArcgisSmartMappingPanelsSimpleClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsSimpleBackClick:()=>{this.arcgisClose.emit("save"),this.arcgisSmartMappingClose.emit("save")}}):(0,n.i)(i)?(0,s.h)("arcgis-smart-mapping-panels-raster-gallery",{selected:this.selected,onArcgisSmartMappingPanelsRasterGalleryClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRasterGalleryError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):(0,s.h)("arcgis-smart-mapping-panels-gallery",{showBackButton:!r,selected:this.selected,beforeBack:async()=>{r||(this.arcgisBeforeBack.emit("save"),this.arcgisSmartMappingBeforeBack.emit("save"))},onArcgisSmartMappingPanelsGalleryClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsGalleryError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)},onArcgisSmartMappingPanelsGalleryClusterRequiresUpdate:()=>{this.arcgisClusterRequiresUpdate.emit(),this.arcgisSmartMappingClusterRequiresUpdate.emit()}})}renderSkipGallery(){const{originalRendererJSON:e,originalFeatureReduction:i,stylePart:a,smartMappingState:r}=this;switch((0,n.i)(r)?(0,n.g)(r):(0,n.a)(r)){case"simple":return(0,s.h)("arcgis-smart-mapping-panels-simple",{selected:this.selected,onArcgisSmartMappingPanelsSimpleClose:({detail:a})=>{"cancel"===a&&e&&(0,n.h)(r,e,i),this.arcgisClose.emit(a),this.arcgisSmartMappingClose.emit(a)},onArcgisSmartMappingPanelsSimpleError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"heatmap":return(0,s.h)("arcgis-smart-mapping-panels-heatmap",{selected:this.selected,onArcgisSmartMappingPanelsHeatmapClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsHeatmapError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"color":case"color-age":return(0,s.h)("arcgis-smart-mapping-panels-color",{selected:this.selected,onArcgisSmartMappingPanelsColorClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsColorError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"size":case"size-age":return(0,s.h)("arcgis-smart-mapping-panels-size",{selected:this.selected,onArcgisSmartMappingPanelsSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"color-size":case"color-age-size":case"color-size-age":{const e=(0,n.j)(r),i=(0,n.b)(e,"color"),t=(0,n.b)(e,"size");return i.field===t.field&&i.valueExpression===t.valueExpression&&i.valueExpressionTitle===t.valueExpressionTitle?(0,s.h)("arcgis-smart-mapping-panels-color-size-univariate",{selected:this.selected,onArcgisSmartMappingPanelsColorSizeUnivariateClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsColorSizeUnivariateError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):"color"===a?(0,s.h)("arcgis-smart-mapping-panels-color",{selected:this.selected,onArcgisSmartMappingPanelsColorClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsColorError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):"size"===a?(0,s.h)("arcgis-smart-mapping-panels-size",{selected:this.selected,onArcgisSmartMappingPanelsSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):(0,s.h)("arcgis-smart-mapping-panels-color-size",{selected:this.selected,onArcgisSmartMappingPanelsColorSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsColorSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}})}case"compare":return(0,s.h)("arcgis-smart-mapping-panels-compare",{selected:this.selected,onArcgisSmartMappingPanelsCompareClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsCompareError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"dot-density":return(0,s.h)("arcgis-smart-mapping-panels-dot-density",{selected:this.selected,onArcgisSmartMappingPanelsDotDensityClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)}});case"relationship":return(0,s.h)("arcgis-smart-mapping-panels-relationship",{selected:this.selected,onArcgisSmartMappingPanelsRelationshipClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRelationshipError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"relationship-size":return"color"===a?(0,s.h)("arcgis-smart-mapping-panels-relationship",{selected:this.selected,onArcgisSmartMappingPanelsRelationshipClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRelationshipError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):"size"===a?(0,s.h)("arcgis-smart-mapping-panels-size",{selected:this.selected,onArcgisSmartMappingPanelsSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):(0,s.h)("arcgis-smart-mapping-panels-relationship-size",{selected:this.selected,onArcgisSmartMappingPanelsRelationshipSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRelationshipSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"predominance":return(0,s.h)("arcgis-smart-mapping-panels-predominance",{selected:this.selected,onArcgisSmartMappingPanelsPredominanceClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsPredominanceError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"predominance-size":return"color"===a?(0,s.h)("arcgis-smart-mapping-panels-predominance",{selected:this.selected,onArcgisSmartMappingPanelsPredominanceClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsPredominanceError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):"size"===a?(0,s.h)("arcgis-smart-mapping-panels-size",{selected:this.selected,onArcgisSmartMappingPanelsSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):(0,s.h)("arcgis-smart-mapping-panels-predominance-size",{selected:this.selected,onArcgisSmartMappingPanelsPredominanceSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsPredominanceSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"chart":return(0,s.h)("arcgis-smart-mapping-panels-chart",{selected:this.selected,onArcgisSmartMappingPanelsChartClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsChartError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"chart-size":return"color"===a?(0,s.h)("arcgis-smart-mapping-panels-chart",{selected:this.selected,onArcgisSmartMappingPanelsChartClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsChartError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):"size"===a?(0,s.h)("arcgis-smart-mapping-panels-size",{selected:this.selected,onArcgisSmartMappingPanelsSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):(0,s.h)("arcgis-smart-mapping-panels-chart-size",{selected:this.selected,onArcgisSmartMappingPanelsChartSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsChartSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"type":return(0,s.h)("arcgis-smart-mapping-panels-type",{selected:this.selected,onArcgisSmartMappingPanelsTypeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsTypeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"type-size":return"color"===a?(0,s.h)("arcgis-smart-mapping-panels-type",{selected:this.selected,onArcgisSmartMappingPanelsTypeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsTypeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):"size"===a?(0,s.h)("arcgis-smart-mapping-panels-size",{selected:this.selected,onArcgisSmartMappingPanelsSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}}):(0,s.h)("arcgis-smart-mapping-panels-type-size",{selected:this.selected,onArcgisSmartMappingPanelsTypeSizeClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsTypeSizeError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"raster-flow":return(0,s.h)("arcgis-smart-mapping-panels-raster-flow",{selected:this.selected,onArcgisSmartMappingPanelsRasterFlowClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRasterFlowError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"raster-vector-field":return(0,s.h)("arcgis-smart-mapping-panels-raster-vector-field",{selected:this.selected,onArcgisSmartMappingPanelsRasterVectorFieldClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRasterVectorFieldError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"raster-stretch":return(0,s.h)("arcgis-smart-mapping-panels-raster-stretch",{selected:this.selected,onArcgisSmartMappingPanelsRasterStretchClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRasterStretchError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"raster-rgb":return(0,s.h)("arcgis-smart-mapping-panels-raster-rgb",{selected:this.selected,onArcgisSmartMappingPanelsRasterRgbClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRasterRgbError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"raster-shaded-relief":return(0,s.h)("arcgis-smart-mapping-panels-raster-shaded-relief",{selected:this.selected,onArcgisSmartMappingPanelsRasterShadedReliefClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRasterShadedReliefError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"raster-class-breaks":return(0,s.h)("arcgis-smart-mapping-panels-raster-class-breaks",{selected:this.selected,onArcgisSmartMappingPanelsRasterClassBreaksClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRasterClassBreaksError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});case"raster-colormap":return(0,s.h)("arcgis-smart-mapping-panels-raster-colormap",{selected:this.selected,onArcgisSmartMappingPanelsRasterColormapClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)}});case"raster-unique-value":return(0,s.h)("arcgis-smart-mapping-panels-raster-unique-value",{selected:this.selected,onArcgisSmartMappingPanelsRasterUniqueValueClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsRasterUniqueValueError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}});default:return(0,s.h)("arcgis-smart-mapping-panels-simple",{selected:this.selected,onArcgisSmartMappingPanelsSimpleClose:({detail:e})=>{this.arcgisClose.emit(e),this.arcgisSmartMappingClose.emit(e)},onArcgisSmartMappingPanelsSimpleError:({detail:e})=>{this.arcgisError.emit(e),this.arcgisSmartMappingError.emit(e)}})}}async processLayer(){const{smartMappingState:e}=this,{layer:i,strings:a,modules:s}=e;let r=(0,n.j)(e);if(i&&(0,n.i)(e)&&(e.rasterInfo=await(0,n.c)(i)),!r&&(0,n.i)(e)&&(r=await(0,n.d)(e)),"geo-rss"===i.type)return;const t=(0,n.i)(e)?(0,n.g)(e):(0,n.a)(e);e.oneFeatureResponseStatus=n.s.MISSING,"color"!==t||r.authoringInfo||(0,n.b)(r,"color")?"size"!==t||r.authoringInfo||(0,n.b)(r,"size")||(r.authoringInfo={classificationMethod:"manual",type:"class-breaks-size"}):r.authoringInfo={classificationMethod:"manual",type:"class-breaks-color"},await(0,n.e)(e).then((async()=>{if("unknown"===t)console.log("unsupported renderer",r),this.switchToSimpleRenderer(r);else{const i=await s.fieldUtils.getRendererFields(r),t=i?.some((i=>!e.layerFields?.some((e=>e.name.toLowerCase()===i.toLowerCase()))));!(0,n.i)(e)&&t?this.switchToSimpleRenderer(r):(e.selectedFields=(0,n.f)(e),e.selectedFields.forEach((e=>{e.expression&&!e.expressionTitle&&(e.expressionTitle=a.expression)})))}}))}switchToSimpleRenderer(e){const{smartMappingState:i}=this,{layer:a,modules:s}=i;this.originalRendererJSON=e.toJSON(),this.originalFeatureReduction="featureReduction"in a&&a.featureReduction?s.esriLang.clone(a.featureReduction):void 0,(0,c.c)(i).then((e=>{(0,n.u)(i,e.renderer),i.selectedFields=[]})).catch((e=>console.log(e)))}static get assetsDirs(){return["assets"]}get el(){return(0,s.g)(this)}};m.style=".sc-arcgis-smart-mapping-h{height:100%;width:100%}.flow.sc-arcgis-smart-mapping{height:100%}"},62200:(e,i,a)=>{a.d(i,{c:()=>o});var s=a(28614);const r=e=>!("isConnected"in e)||e.isConnected,t=((e,i)=>{let a;return(...s)=>{a&&clearTimeout(a),a=setTimeout((()=>{a=0,e(...s)}),i)}})((e=>{for(let i of e.keys())e.set(i,e.get(i).filter(r))}),2e3),n=e=>"function"==typeof e?e():e,l=(e,i)=>{const a=e.indexOf(i);a>=0&&(e[a]=e[e.length-1],e.length--)},o=(e,i)=>{const a=((e,i=(e,i)=>e!==i)=>{const a=n(e);let s=new Map(Object.entries(null!=a?a:{}));const r={dispose:[],get:[],set:[],reset:[]},t=()=>{var i;s=new Map(Object.entries(null!==(i=n(e))&&void 0!==i?i:{})),r.reset.forEach((e=>e()))},o=e=>(r.get.forEach((i=>i(e))),s.get(e)),p=(e,a)=>{const t=s.get(e);i(a,t,e)&&(s.set(e,a),r.set.forEach((i=>i(e,a,t))))},c="undefined"==typeof Proxy?{}:new Proxy(a,{get:(e,i)=>o(i),ownKeys:e=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,i)=>s.has(i),set:(e,i,a)=>(p(i,a),!0)}),g=(e,i)=>(r[e].push(i),()=>{l(r[e],i)});return{state:c,get:o,set:p,on:g,onChange:(i,a)=>{const s=g("set",((e,s)=>{e===i&&a(s)})),r=g("reset",(()=>a(n(e)[i])));return()=>{s(),r()}},use:(...e)=>{const i=e.reduce(((e,i)=>(i.set&&e.push(g("set",i.set)),i.get&&e.push(g("get",i.get)),i.reset&&e.push(g("reset",i.reset)),i.dispose&&e.push(g("dispose",i.dispose)),e)),[]);return()=>i.forEach((e=>e()))},dispose:()=>{r.dispose.forEach((e=>e())),t()},reset:t,forceUpdate:e=>{const i=s.get(e);r.set.forEach((a=>a(e,i,i)))}}})(e,i);return a.use((()=>{if("function"!=typeof s.d)return{};const e=new Map;return{dispose:()=>e.clear(),get:i=>{const a=(0,s.d)();a&&((e,i,a)=>{const s=e.get(i);s?s.includes(a)||s.push(a):e.set(i,[a])})(e,i,a)},set:i=>{const a=e.get(i);a&&e.set(i,a.filter(s.f)),t(e)},reset:()=>{e.forEach((e=>e.forEach(s.f))),t(e)}}})()),a}},80216:(e,i,a)=>{a.d(i,{a:()=>n,b:()=>o,c:()=>t,d:()=>l});var s=a(68180),r=a(99592);a(97127);async function t(e,i){const{layer:a,useFeatureReduction:t,mapImageSublayer:n,mapView:l,modules:o}=e,p=a;i=i||{};const c=(0,r.k)((0,r.j)(e));return await o.LocationCreator.createRenderer({layer:p,view:l,outlineOptimizationEnabled:!n&&(!(0,s.i)(i.outlineOptimizationEnabled)||i.outlineOptimizationEnabled),sizeOptimizationEnabled:!n&&(!(0,s.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled),forBinning:"binning"===p.featureReduction?.type&&t}).then((e=>((0,r.l)(c,e.renderer),e)))}async function n(e,i){const{layer:a,useFeatureReduction:t,mapImageSublayer:n,mapView:l,modules:o}=e,p=a;i=i||{};const c=(0,r.j)(e),g=(0,r.a)(e),m=(0,r.k)(c),d=c.symbol?c.symbol:(0,r.m)(e,g),h={layer:p,view:l,outlineOptimizationEnabled:!n&&((0,s.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!m.sizeOutlineVisVar),sizeOptimizationEnabled:!n&&((0,s.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!m.sizeAutoVisVar),forBinning:"binning"===p.featureReduction?.type&&t};return await o.LocationCreator.createRenderer(h).then((e=>((0,r.l)(m,e.renderer),d&&(e.renderer.symbol=d),e)))}async function l(e){const{layer:i,useFeatureReduction:a,mapView:s,modules:t}=e,n=i;return await t.LocationCreator.createRenderer({layer:n,view:s,outlineOptimizationEnabled:!0,forBinning:"binning"===n.featureReduction?.type&&a}).then((e=>(0,r.b)(e.renderer,"size","outline")))}async function o(e){const{layer:i,useFeatureReduction:a,mapView:s,modules:t}=e,n=i;return await t.LocationCreator.createRenderer({layer:n,view:s,outlineOptimizationEnabled:!1,sizeOptimizationEnabled:!0,forBinning:"binning"===n.featureReduction?.type&&a}).then((e=>(0,r.b)(e.renderer,"size","auto")))}},33101:(e,i,a)=>{a.d(i,{c:()=>t,u:()=>n});var s=a(97127),r=(a(68180),a(99592));function t(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=r.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.hideSvgUploadSymbols=!1,e.hideAddStyles=!1,e.rasterInfo=void 0}function n(){const e=(0,s.r)(),i=e;e.manager.onLoad((()=>{i.smartMappingState=function(e,i){const a=l.get(e);if(a)return a;const r=(0,s.c)(e,i);if(r&&"store"in r)return l.set(e,r.store),r.store;return null}(e.el,"arcgis-smart-mapping").state}))}const l=new WeakMap},50063:(e,i,a)=>{a.d(i,{u:()=>t});var s=a(97127),r=a(28614);const t=(0,s.m)(r.a)}}]);