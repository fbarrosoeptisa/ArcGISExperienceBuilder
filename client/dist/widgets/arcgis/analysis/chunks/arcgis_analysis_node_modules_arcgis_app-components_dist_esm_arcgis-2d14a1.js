/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-2d14a1.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-2d14a1"],{99004:(e,t,i)=>{i.d(t,{c:()=>o,g:()=>n});var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},73897:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_append_select:()=>h});var o=i(19564),n=i(17233),a=i(4948),r=i(26408),s=i(18409),d=i(68334),c=i(78537),l=i(61191),p=i(33861),u=i(44069),m=i(29143);i(57159),i(98034),i(99004),i(44508),i(65174),i(67336),i(18991),i(86868),i(32084),i(91102),i(73807),i(98821),i(90079),i(32198),i(62913),i(87382),i(82297),i(76246),i(748),i(97018),i(56288),i(93863),i(80015),i(24211),i(66484),i(11163),i(11560),i(63330);const h=class{constructor(e){(0,o.r)(this,e),this.newItemUpdatePage=(0,o.c)(this,"newItemUpdatePage",7),this.newItemToggleNavigationEnabled=(0,o.c)(this,"newItemToggleNavigationEnabled",7),this.workflowComplete=(0,o.c)(this,"workflowComplete",7),this.isCloudItem=!1,this.isUrlItem=!1,this.options={add:{icon:"add-features",updateType:"add",hidden:!1,disabled:!1},update:{icon:"update-features",updateType:"update",hidden:!1,disabled:!1},upsert:{icon:"add-and-update-features",updateType:"upsert",hidden:!1,disabled:!1},overwrite:{icon:"overwrite-features",updateType:"overwrite",hidden:!1,disabled:!1}},this.disabledOptionsExist=!1,this.syncAppendOptions=()=>{if(!l.a.appendOptions&&this.item){const e=this.item;l.a.appendOptions={serviceInfo:e.serviceInfo,adminServiceInfo:e.adminServiceInfo,cloudProviderInfo:e.cloudProviderInfo,sourceData:e.sourceData,layers:e.layers,isSDS:e.isSDS,itemData:e.itemData,publishParameters:e.publishParameters}}},this.selected="add",this.error=void 0,this.loading=!1,this.loaderType="indeterminate",this.loaderMessage=void 0}handleNext(){let e;const{item:t,selected:i,layer:o,layerId:n,appendLayerEntry:a}=this;l.a.addAppendSelectOption=i;const{layers:r,cloudProviderInfo:s}=l.a.appendOptions;if(!a&&"overwrite"!==i&&r.length>1)e="appendSelectLayer";else{if(s&&"overwrite"===i){if(l.a.newItemMode="file",s){const{id:e,mimeType:i,zipItemType:o,cloudProvider:n}=s;return this.assignCloudItemStore(s),void this.handleOverwriteURL(t,e,i,o,n)}return void this.handleOverwriteURL(t)}if(a){let e=null!=o?o:r[n];e||(e=r[0]),l.a.sourceDataLayer=e}else l.a.sourceDataLayer=r[0];e="appendUpload"}this.newItemUpdatePage.emit(e)}determineHeader(e){const{i18n:t}=this,{insertOnly:i,isSharedMemberViewing:o}=e;switch(!0){case i:this.header=t.insertOnlyEnabled;break;case o:this.header=t.overwriteDisabledForSharedGroupView;break;default:this.header=t.chooseUpdate}}createOptions(){const{item:e}=this,{user:t}=a.c,{serviceInfo:i,sourceData:o,cloudProviderInfo:n,isSDS:r,adminServiceInfo:s}=l.a.appendOptions;let d=!1;const c=e.owner!==t.username&&e.itemControl.includes("update"),p=!1===i.sourceSchemaChangesAllowed,u=(!o||o.inRecycleBin)&&!n,m="GeoPackage"===(null==o?void 0:o.type)&&a.c.portal.isPortal;(-1!==(a.c.portal.isPortal&&!r?i.capabilities:s.capabilities).indexOf("ChangeTracking")||i.syncEnabled)&&(d=!0,this.options.overwrite.disabled=!0,this.options.update.disabled=!0,this.options.upsert.disabled=!0,this.disabledOptionsExist=!0),(this.appendLayerEntry||m||u||p||c)&&(this.options.overwrite.disabled=!0,this.disabledOptionsExist=!0),this.determineHeader({insertOnly:d,isSharedMemberViewing:c})}createOverwriteNextText(){switch(!0){case this.isCloudItem:return"signInAndOverwrite";case this.isUrlItem:return"overwriteAndComplete";default:return"next"}}async componentWillLoad(){var e,t,i,o,n,a,r,s;this.selected=l.a.addAppendSelectOption||"add",this.i18n=p.u.i18n.appendSelect,this.item=l.a.existingItem,this.appendLayerEntry=void 0!==l.a.layerId||!!l.a.sublayer,this.layerId=l.a.layerId,this.layer=l.a.sublayer,this.syncAppendOptions(),this.item&&(l.a.id=null,l.a.dateFieldsTimeReference=null!==(n=null!==(t=null===(e=l.a.appendOptions.publishParameters)||void 0===e?void 0:e.dateFieldsTimeReference)&&void 0!==t?t:null===(o=null===(i=l.a.appendOptions.publishParameters)||void 0===i?void 0:i.layers)||void 0===o?void 0:o[0].dateFieldsTimeReference)&&void 0!==n?n:null===(a=l.a.appendOptions.layers)||void 0===a?void 0:a[0].dateFieldsTimeReference,this.isUrlItem=!!(null===(r=l.a.appendOptions.cloudProviderInfo)||void 0===r?void 0:r.url),this.isCloudItem=!!(null===(s=l.a.appendOptions.cloudProviderInfo)||void 0===s?void 0:s.cloudProvider),this.createOptions())}assignCloudItemStore(e){const{cloudProvider:t,id:i,mimeType:o,cloudDriveFileName:n,cloudFileType:a,zipItemType:r}=e;l.a.cloudProvider=(0,m.d)(t),l.a.cloudProviderResource={cloudProvider:t,id:i,mimeType:o,cloudDriveFileName:n,cloudFileType:a,zipItemType:r}}async setUpCloud(e){const t=(0,m.e)(e),{result:i,error:o}=await(0,d.g)(t);return o?(this.handleError(),null):i}async handleOverwriteURL(e,t,i,o,h){var f,v,g,w,y,b,x;let T,k,I;this.loading=!0,this.loaderMessage=p.u.i18n.append.appendLoadingMessages.overwriting;const O=l.a.appendOptions.cloudProviderInfo;if(l.a.fileName=e.title,l.a.title=e.title,O.cloudProvider){k="zip"===i?o:u.b[i],I=[l.a.type];const e=await this.setUpCloud(h);switch(await(0,r.t)(200),h){case"googleConnect":T=(0,m.f)(t,i,e);break;case"dropBoxConnect":T=(0,m.i)(t,e);break;case"oneDriveConnect":T=(0,m.h)(t,e)}}else{"geojson"===O.mimeType?l.a.geoJSONResource={fileName:O.fileName,url:O.url,mimeType:O.mimeType}:l.a.csvResource={fileName:O.fileName,url:O.url,mimeType:O.mimeType};const e=null!==(f=l.a.csvResource)&&void 0!==f?f:l.a.geoJSONResource;k=u.b[e.mimeType],T=e.url,I=[k]}l.a.dataUrl=T,l.a.type=k,l.a.typeKeywords=I,l.a.overwrite=!0;try{this.newItemToggleNavigationEnabled.emit(!1),await(0,s.C)();const{appendOptions:t}=l.a,i=await(0,d.c)(e,a.c.portal,a.c.user,t,l.a.id),o=await(0,c.p)({itemId:null!==(g=null===(v=t.sourceData)||void 0===v?void 0:v.id)&&void 0!==g?g:e.id,portal:a.c.portal,user:a.c.user,title:(null==e?void 0:e.title)||"",itemOwnerUrl:(0,n.g)(await(0,n.f)(this.item.owner,a.c.portal),a.c.portal)},i);await(0,d.d)(i.publishParameters,e,null===(y=null===(w=o.result)||void 0===w?void 0:w.services)||void 0===y?void 0:y[0].serviceItemId),await this.checkStatus({itemId:e.id,jobId:null===(x=null===(b=o.result)||void 0===b?void 0:b.services)||void 0===x?void 0:x[0].jobId},null==o?void 0:o.result)}catch(e){this.handleError()}}async checkStatus(e,t){var i;this.loaderMessage=p.u.i18n.append.appendLoadingMessages.overwriting,this.newItemToggleNavigationEnabled.emit(!0);const o=await(0,s.g)(e.itemId,{jobId:e.jobId}),n=null==o?void 0:o.status,a=Object.assign({id:null===(i=null==t?void 0:t.services)||void 0===i?void 0:i[0].serviceItemId,item:Object.assign({},l.a),overwriteStatus:n,appendType:l.a.addAppendSelectOption},t);return"completed"===(null==o?void 0:o.status.toLowerCase())?(a.overwriteStatus=null==o?void 0:o.status,this.workflowComplete.emit(a),null):("failed"===(null==o?void 0:o.status.toLowerCase())&&this.handleError(),o)}handleError(){p.u.nextText="next",this.newItemToggleNavigationEnabled.emit(!0),this.loading=!1,this.error={title:p.u.i18n.error,description:p.u.i18n.appendUpload.errors.errorWhileUpload}}render(){const{i18n:e,options:t,error:i,loaderType:n,loading:r,loaderMessage:s,header:d,disabledOptionsExist:c}=this,l=`${a.c.config.helpBase}${a.c.config.helpMap[120005034]}`;return(0,o.h)(o.H,{key:"82d028422d06b766a7b1dc54d514b90930cdcd9f",class:{"overflow-hidden":r}},(0,o.h)("arcgis-new-item-loader",{key:"ea2d8d4898cc0b99d1db9fd9be020773079cba51",type:n,active:r,text:s}),(0,o.h)("div",{key:"43e870a2b9accd47043c424c74672c29402d25ac",class:"header"},d),(0,o.h)("div",{key:"8c0c689996dac489d552ba60f93ba266344dbd18",class:"w-full"},(0,o.h)("div",{key:"c4510daa3ad80b2e169130a1ee4527238914cdd4",class:"w-full"},(0,o.h)("calcite-tile-group",{key:"94de2c48be5334a700b3678ea67a1dc94e3fe8a4",label:d,selectionMode:"single-persist",selectionAppearance:"icon",layout:"vertical"},Object.keys(t).map((i=>{const{disabled:n,icon:a}=t[i];return(0,o.h)("calcite-tile",{key:i,selected:this.selected===i,heading:e.updateOptions[i].title,"data-value":i,disabled:n,onCalciteTileSelect:e=>{this.selected=e.target.dataset.value,p.u.nextText="overwrite"===this.selected?this.createOverwriteNextText():"next"}},(0,o.h)("calcite-icon",{icon:a,slot:"content-top"}))}))))),c&&(0,o.h)("calcite-notice",{key:"a3cc15fcf3da2f8d145fe7bbbbcb053ca049b51b",class:"disabled-options-notice",open:!0,icon:"exclamation-mark-triangle",kind:"warning"},(0,o.h)("calcite-link",{key:"57f9d7bb9214c49a0ae50c488661553d816ec92d",slot:"link",title:e.whyDisabled,href:l,target:"blank"},e.whyDisabledLink)),(0,o.h)("arcgis-new-item-alert",{key:"9dd3359551fce596c1bbda701577285e648e07c4",heading:null==i?void 0:i.title,description:null==i?void 0:i.description,active:!!i,onAlertDismiss:()=>this.error=null}))}get el(){return(0,o.d)(this)}};h.style=".header{margin-bottom:1rem;font-size:1rem;font-weight:500}calcite-tile-group{inline-size:100%}calcite-tile{max-inline-size:100%;min-inline-size:100%}.disabled-options-notice{margin-top:0.75rem}"},91102:(e,t,i)=>{i.d(t,{a:()=>d,c:()=>n,d:()=>c,g:()=>a,i:()=>r,s:()=>s});var o=i(73807);function n(e,t){return function e(i){return i?i.closest(t)||e(function(e){return e.getRootNode()}(i).host||null):null}(e)}function a(e){const t=n(e,".calcite-mode-dark, .calcite-mode-light");return(null==t?void 0:t.classList.contains("calcite-mode-dark"))?"dark":"light"}function r(e){let t=e;for(;null==t?void 0:t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function s(e){return(new o.S).sanitize(e)}function d(e){const t=s(e),i=document.createElement("div");return i.innerHTML=t,i.textContent||i.innerText||""}function c(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}},29143:(e,t,i)=>{i.d(t,{a:()=>T,b:()=>c,c:()=>d,d:()=>I,e:()=>k,f:()=>g,g:()=>x,h:()=>y,i:()=>m});var o=i(4948),n=i(44508);function a(e,t,i,o,n){return new Promise(((a,r)=>{const s=new XMLHttpRequest;s.open(e,t,!1),o&&s.setRequestHeader("Authorization",o),n&&s.setRequestHeader("Content-type",n),i?s.send(i):s.send();const d=JSON.parse(s.responseText);s.status>=400&&r(JSON.parse(s.responseText)),a(d)}))}function r(e,t){return new Promise(((i,o)=>{t=t.replace(/[[]/,"[").replace(/[]]/,"]");const n=new RegExp(`[?&#]${t}=([^&#]*)`).exec(e);null==n?o("InvalidToken"):i(n[1])}))}function s(e,t){return new Promise(((i,o)=>{const n=`${window.location.protocol}//${window.location.hostname}`,a=`https://${t}/home/cloudDriveOauth-callback.html${`?cloudUrl=${e}&currentSourceUrl=${n}&portalHostName=${t}`}`,r=document.createElement("iframe");r.src=a,r.className="hide",document.body.appendChild(r);const s=window.addEventListener?"addEventListener":"attachEvent";(0,window[s])("attachEvent"===s?"onmessage":"message",(e=>{e.origin===`https://${t}`&&("popupBlocked"!==e.data&&"windowClosed"!==e.data||o(e.data),i(e.data))}),!1)}))}const d={csv:"file-csv",excel:"file-excel",zip:"file-zip",geojson:"file-code",sheet:"file-report",cad:"file-cad",gpx:"file-gpx",png:"file-image",jpg:"file-image",jpeg:"file-image",tiff:"file-image",gif:"file-image",pdf:"file-pdf",docx:"file-word"},c={csv:"CSV",excel:"Excel",zip:"Zip File",geojson:"GeoJSON",googlesheets:"Google Sheets",cad:"CAD",gpx:"GPX",png:"Image",jpg:"Image",jpeg:"Image",tiff:"Image",gif:"Image",pdf:"PDF",docx:"Microsoft Word",pptx:"Microsoft PowerPoint"},l={csv:".csv",excel:".xls",zip:".zip",geojson:".geojson",googlesheets:""};function p(e){const t=e.split("."),i=t[t.length-1].toLowerCase();return{xls:"excel",xlsx:"excel",csv:"csv",zip:"zip",geojson:"geojson",json:"geojson"}[i]||i}function u(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function m(e,t){return`https://content.dropboxapi.com/2/files/download?httpHeaders={"Authorization":"Bearer&#32;${t}","Dropbox-API-Arg":"{\\"path\\":\\"${e}\\"}"}`}class h{constructor(){this.nextStart=0}async connect(){const{config:e,portal:t}=o.c,i=`dropbox${Math.floor(Date.now()/1e3)}`,a=document.documentElement.lang||"en-US",d=function(){const e=new Uint8Array(128),t=crypto.getRandomValues(e);return u(btoa(t)).substring(0,128)}(),c=await async function(e){const t=(new TextEncoder).encode(e),i=await crypto.subtle.digest("SHA-256",t);return u(btoa(String.fromCharCode(...new Uint8Array(i))))}(d),l=`https://${t.portalHostname}/home/cloudDriveOauth-callback2.html`,p=`https://www.dropbox.com/oauth2/authorize?${(0,n.j)({redirect_uri:l,response_type:"code",code_challenge:c,code_challenge_method:"S256",client_id:e.dropboxClientId,locale:a,state:i})}`;return new Promise((async(e,a)=>{try{const c=await s(p,t.portalHostname),u=(0,n.k)(c,"code"),m=await async function(e,t,i){const{config:n}=o.c,a=new URLSearchParams({grant_type:"authorization_code",code:e,client_id:`${n.dropboxClientId}`,redirect_uri:i,code_verifier:t}).toString();return(await fetch(`https://api.dropboxapi.com/oauth2/token?${a}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json()}(u,d,l),h=await r(c,"state");i!==h&&a("invalidState"),this.token=m.access_token,e(m.access_token)}catch(e){a(e)}}))}search(e={}){const{token:t}=this;return new Promise((async i=>{const{searchText:o,dropdownFilter:n,next:r}=e,s=`Bearer ${t}`,d=o?` ${o}`:"",c=r?this.nextStart:0;let u=l[n];"excel"===n&&(u="xls");const m=`{"path":"","query":"${d} ${u}","mode": "filename","max_results":10,"start":${c}}`,h=await a("POST","https://api.dropboxapi.com/2/files/search",m,s,"application/json");this.nextStart=h.start;i({files:h.matches.filter((e=>{var t;return"file"===(null===(t=e.metadata)||void 0===t?void 0:t[".tag"])})).map((({metadata:{id:e,name:i,size:o}})=>({id:e,name:i,mimeType:p(i),downloadUrl:`https://content.dropboxapi.com/2/files/download?httpHeaders={"Authorization":"Bearer&#32;${t}","Dropbox-API-Arg":"{\\"path\\":\\"${e}\\"}"}`,size:o}))),next:!!h.more})}))}}function f(e){return e.indexOf("spreadsheetml.sheet")>-1||e.indexOf("ms-excel")>-1?"excel":e.indexOf("application/zip")>-1?"zip":e.indexOf("application/octet-stream")>-1||e.indexOf("application/json")>-1?"geojson":e.indexOf("google-apps.spreadsheet")>-1?"googlesheets":e.indexOf("text/csv")>-1?"csv":"zip"}const v={csv:'(mimeType="text/csv")',excel:'(mimeType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"ormimeType="application/vnd.ms-excel")',zip:'(mimeType="application/x-zip-compressed"ormimeType="application/zip")',geojson:'(name contains "json" or name contains "geojson")and(mimeType="application/octet-stream"ormimeType="application/json")',googlesheets:'(mimeType="application/vnd.google-apps.spreadsheet")'};function g(e,t,i){const o=`https://www.googleapis.com/drive/v3/files/${e}`,n=`&httpHeaders={"Authorization":"Bearer&#32;${i}"}`,a=`${o}/export?mimeType=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet${n}`,r=`${o}?alt=media${n}`;return t.indexOf("google-apps")>-1||t.indexOf("googlesheets")>-1?a:r}class w{async connect(){return new Promise((async(e,t)=>{const{config:i,portal:n}=o.c,a=n.portalHostname,d=document.documentElement.lang||"en-US",c=`google${Math.floor(Date.now()/1e3)}`,l=`https://accounts.google.com/o/oauth2/v2/auth?scope=https://www.googleapis.com/auth/drive.readonly&redirect_uri=${`https://${a}/home/cloudDriveOauth-callback2.html`}&response_type=token&client_id=${i.googleClientId}&hl=${d}&state=${c}`;try{const i=await s(l,a);c!==await r(i,"state")&&t("invalidState"),this.token=await r(i,"access_token"),e(this.token)}catch(e){t(e)}}))}async search(e={}){return new Promise((async t=>{const{searchText:i,next:o,dropdownFilter:n}=e,r=`${`https://www.googleapis.com/drive/v3/files?access_token=${this.token}&pageSize=10&fields=incompleteSearch,nextPageToken,files(id,kind,mimeType,name)`}&q=${i?`name contains '${i}' and trashed = false and`:"trashed = false and"}${v[n]}${o?`&pageToken=${this.nextToken}`:""}`,s=await a("GET",r,null,null,"application/json");this.nextToken=s.nextPageToken;t({files:s.files.map((({id:e,name:t,mimeType:i})=>({id:e,name:t,mimeType:f(i),downloadUrl:g(e,i,this.token)}))),next:!!s.nextPageToken})}))}}function y(e,t){return`https://graph.microsoft.com/v1.0/me/drive/items/${e}/content?httpHeaders={"Authorization":"Bearer&#32;${t}"}`}class b{async connect(){return new Promise((async(e,t)=>{const{config:i,portal:n}=o.c,a=n.portalHostname,d=document.documentElement.lang||"en-US",c=`onedrive${Math.floor(Date.now()/1e3)}`,l=`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?scope=files.read&redirect_uri=${`https://${a}/home/cloudDriveOauth-callback2.html`}&response_type=token&client_id=${i.oneDriveClientId}&locale=${d}&state=${c}`;try{const i=await s(l,a);c!==await r(i,"state")&&t("invalidState"),this.token=await r(i,"access_token"),e(this.token)}catch(e){t(e)}}))}search(e={}){return new Promise((async t=>{const{searchText:i,dropdownFilter:o,next:n}=e,r=`Bearer ${this.token}`,s=`https://graph.microsoft.com/v1.0/me/drive/root/search(q='${i||""} ${l[o]||""}')?select=name,id,file,size&top=10`,d=n?this.nextLink:s,c=await a("GET",d,null,r,"application/json");this.nextLink=c["@odata.nextLink"];t({files:c.value.map((({size:e,id:t,name:i})=>({size:e,id:t,name:i,mimeType:p(i),downloadUrl:`https://graph.microsoft.com/v1.0/me/drive/items/${t}/content?httpHeaders={"Authorization":"Bearer ${this.token}"}`}))),next:!!c["@odata.nextLink"]})}))}}function x(e){return new{dropbox:h,"google drive":w,onedrive:b}[e]}function T(e){return{dropbox:"dropBoxConnect","google drive":"googleConnect",onedrive:"oneDriveConnect"}[e]}function k(e){return new{dropBoxConnect:h,googleConnect:w,oneDriveConnect:b}[e]}function I(e){return{dropBoxConnect:"dropbox",googleConnect:"google drive",oneDriveConnect:"onedrive"}[e]}},98034:(e,t,i)=>{i.d(t,{e:()=>a,l:()=>r});var o,n=i(99004),a={exports:{}};o=a.exports,n.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",o="next";function n(e){if(e.toLowerCase()===o)return o;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function a(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function r(e){void 0===e&&(e=i);var t=a(e),r=n(e);if(r!==o&&3===r.major){var s=r.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function d(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}function c(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function l(e){return!e||n(e)?r(e):e}function p(e,t){var i=l(e),o=c(i);return o||d(o=s(i),t),o}var u={};function m(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function h(e,t,i){var o;i&&(o=f(e,i));var n=function(){t(e),e.removeEventListener("load",n,!1),o&&e.removeEventListener("error",o,!1)};e.addEventListener("load",n,!1)}function f(e,t){var i=function(o){t(o.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}function v(e){void 0===e&&(e={}),u=e}function g(){return document.querySelector("script[data-esri-loader]")}function w(){var e=window.require;return e&&e.on}function y(e){void 0===e&&(e={});var i={};[u,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}));var o=i.version,n=i.url||a(o);return new t.Promise((function(e,t){var a=g();if(a){var r=a.getAttribute("src");r!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(r,")."))):w()?e(a):h(a,e,t)}else if(w())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=i.css;s&&p(!0===s?o:s,i.insertCssBefore),h(a=m(n),(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),t),document.body.appendChild(a)}}))}function b(e){return new t.Promise((function(t,i){var o=window.require.on("error",i);window.require(e,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o.remove(),t(e)}))}))}function x(e,t){if(void 0===t&&(t={}),w())return b(e);var i=g(),o=i&&i.getAttribute("src");return!t.url&&o&&(t.url=o),y(t).then((function(){return b(e)}))}e.utils=t,e.loadModules=x,e.getScript=g,e.isLoaded=w,e.loadScript=y,e.setDefaultOptions=v,e.loadCss=p,Object.defineProperty(e,"__esModule",{value:!0})}(o);const r=async(e,t)=>(await a.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);