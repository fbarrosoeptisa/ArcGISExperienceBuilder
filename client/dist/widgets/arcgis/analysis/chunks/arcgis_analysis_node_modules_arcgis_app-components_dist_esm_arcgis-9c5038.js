/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-9c5038.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-9c5038"],{61191:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>o,c:()=>i,d:()=>r});const r=(0,n(18991).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=r.state,i=r.state,o=r.state},27968:(e,t,n)=>{n.r(t),n.d(t,{arcgis_new_item_pages_data_upload:()=>c});var r=n(19564),s=n(4948),i=n(97018),o=n(61191),a=n(33861),l=n(51834);n(18991),n(87382);const c=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.newItemSetButtonState=(0,r.c)(this,"newItemSetButtonState",7),this.workflowComplete=(0,r.c)(this,"workflowComplete",7),this.allowedExtensions=null,this.loading=!1,this.loaderMessage=void 0,this.loaderType="indeterminate",this.error=void 0}componentWillLoad(){const{existingItem:e,fileName:t}=o.a,n=e.type;this.i18n=a.u.i18n.appendUpload,this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!0}}),this.header=this.i18n.updatePackages.replace("${type}",n.toLowerCase()).replace("${hostedLayerName}",t)}async fileSelectHandler(e){var t;this.sourceName=(null===(t=o.a.existingItem.sourceData)||void 0===t?void 0:t.name)||o.a.existingItem.name;const n=e.detail.file,r=o.a.existingItem.type,{title:s,fileName:a,extension:c}=(0,i.s)(n);if("Vector Tile Service"===r){if("json"!==c)return void this.handleError({code:"invalidExtension"})}else if(0!==a.localeCompare(this.sourceName))return void this.handleError({code:"useSameFileName"});o.a.initialTitle=s,o.a.file=n,o.a.fileName=a,o.a.newItemMode="file",o.a.extension=c;const d=(0,l.f)(c);if(1===d.length){const e=d[0].type;o.a.type=e}this.newItemUpdatePage.emit("appendSelectUpdate")}async handleError(e){let t=this.i18n.errors.errorWhileUpload;switch(this.loading=!1,e.code){case"invalidExtension":t=this.i18n.errors.invalidStyleFileExtension;case"useSameFileName":t=this.i18n.errors.sameFileName.replace("${x}",this.sourceName);break;case"unhandledError":t=this.i18n.errors.errorUpdate}this.error={title:a.u.i18n.error,description:t}}render(){const{header:e,loaderType:t,loading:n,loaderMessage:i,error:o,allowedExtensions:a}=this,{portal:l,config:c,user:d}=s.c;return(0,r.h)(r.H,{key:"2992da25fb94ea81cd943a69533969525935b0c0"},(0,r.h)("arcgis-new-item-loader",{key:"f0eb535521bd9e34ac065b7e94a561c511958481",type:t,active:n,text:i}),(0,r.h)("arcgis-new-item-description",{key:"53d776d58892ffd01122a201b97bfac59f5694ca",header:e}),(0,r.h)("arcgis-file-browser",{key:"3e706c9e5597deed290700ec1dbb57a42c2b63c9",class:"arcgis-file-browser",cloud:!1,insideModal:!0,fullHeight:!0,portal:l,config:c,user:d,allowedExtensions:a}),(0,r.h)("arcgis-new-item-alert",{key:"b0ef726669119e68bb25ccf5303f019d4ddea214",heading:null==o?void 0:o.title,description:null==o?void 0:o.description,link:{href:null==o?void 0:o.link,title:null==o?void 0:o.linkText},active:!!o,onAlertDismiss:()=>this.error=null}))}};c.style=".arcgis-file-browser{display:block;height:95%}"},4948:(e,t,n)=>{n.d(t,{c:()=>s,o:()=>i});const r=(0,n(18991).c)({portal:null,user:null,api:4,scale:"m"}),s=r.state,i=r.onChange},97018:(e,t,n)=>{n.d(t,{a:()=>i,f:()=>c,g:()=>l,s:()=>o,v:()=>a});var r=n(87382),s=n(46227);function i(e,t){const n=/(?:\.([^.]+))?$/;let r=null==e?void 0:e.replace(/^.*(\\|\/|:)/,""),i=r&&n.exec(r)[1]?n.exec(r)[1].toLowerCase():"",o="";if((null==r?void 0:r.indexOf(".rft."))>-1){const[e,t]=r.split(".rft.");i=`rft.${t}`,o=e}return r&&!o&&(o=-1===r.lastIndexOf(".")?r:r.substring(0,r.lastIndexOf("."))),o=o.replace(/\.|-/g,"_"),t&&(o=function(e){return`${e}_${(0,s.g)()}`}(o),r=`${o}.${i}`),{title:o,fileName:r,extension:i}}function o(e,t){return i(e.name,!!t)}function a(e,t){let n=e;const r=e.lastIndexOf("\\");return r>-1&&(n=n.substring(r+1,n.length)),n.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function l(e){return r.a[e]?r.a[e]:r.a[Object.keys(r.a).find((t=>r.a[t].type===e))]}function c(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},26408:(e,t,n)=>{n.d(t,{a:()=>c,b:()=>f,c:()=>s,d:()=>r,e:()=>o,f:()=>i,g:()=>d,h:()=>h,i:()=>p,m:()=>a,t:()=>l,u:()=>u});const r=(e,t)=>{let n,r="idle";const s=(...s)=>new Promise((i=>{switch(r){case"flushed":r="idle",n?(clearTimeout(n),i(e(...s))):i(null);break;case"invoked":clearTimeout(n),r="idle",i(e(...s));break;case"cancelled":clearTimeout(n),r="idle",i(null);break;default:n&&clearTimeout(n),r="pending",n=setTimeout((()=>(r="idle",i(e(...s)))),t)}}));return s.flush=function(...e){return r="flushed",s(...e)},s.invoke=function(...e){return r="invoked",s(...e)},s.cancel=function(...e){return r="cancelled",s(...e)},s.getStatus=function(){return r},s},s=(e,t)=>{let n;return(...r)=>new Promise((s=>{n||(n=setTimeout((()=>{clearTimeout(n),n=void 0,s(e(...r))}),t))}))};function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function a(e,t){return await Promise.all([e,l(t)]),e}function l(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:r}=t(e);return[n,r]}))),d=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function u(e,t){const n=[],r={};return e.forEach((e=>{const s=t(e);null==r[s]&&(r[s]=e,n.push(e))})),n}function f(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,r)=>e.slice(t*r,t+t*r))),p=(e,t)=>e.includes(t)},46227:(e,t,n)=>{n.d(t,{g:()=>r});const r=()=>[2,1,1,1,3].map((e=>{let t="";for(let n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},18991:(e,t,n)=>{n.d(t,{c:()=>l});var r=n(19564);const s=e=>!("isConnected"in e)||e.isConnected,i=((e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout((()=>{n=0,e(...r)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(s))}),2e3),o=e=>"function"==typeof e?e():e,a=(e,t)=>{const n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.length--)},l=(e,t)=>{const n=((e,t=(e,t)=>e!==t)=>{const n=o(e);let r=new Map(Object.entries(null!=n?n:{}));const s={dispose:[],get:[],set:[],reset:[]},i=()=>{var t;r=new Map(Object.entries(null!==(t=o(e))&&void 0!==t?t:{})),s.reset.forEach((e=>e()))},l=e=>(s.get.forEach((t=>t(e))),r.get(e)),c=(e,n)=>{const i=r.get(e);t(n,i,e)&&(r.set(e,n),s.set.forEach((t=>t(e,n,i))))},d="undefined"==typeof Proxy?{}:new Proxy(n,{get:(e,t)=>l(t),ownKeys:e=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>r.has(t),set:(e,t,n)=>(c(t,n),!0)}),u=(e,t)=>(s[e].push(t),()=>{a(s[e],t)});return{state:d,get:l,set:c,on:u,onChange:(t,n)=>{const r=u("set",((e,r)=>{e===t&&n(r)})),s=u("reset",(()=>n(o(e)[t])));return()=>{r(),s()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(u("set",t.set)),t.get&&e.push(u("get",t.get)),t.reset&&e.push(u("reset",t.reset)),t.dispose&&e.push(u("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{s.dispose.forEach((e=>e())),i()},reset:i,forceUpdate:e=>{const t=r.get(e);s.set.forEach((n=>n(e,t,t)))}}})(e,t);return n.use((()=>{if("function"!=typeof r.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const n=(0,r.g)();n&&((e,t,n)=>{const r=e.get(t);r?r.includes(n)||r.push(n):e.set(t,[n])})(e,t,n)},set:t=>{const n=e.get(t);n&&e.set(t,n.filter(r.f)),i(e)},reset:()=>{e.forEach((e=>e.forEach(r.f))),i(e)}}})()),n}},51834:(e,t,n)=>{n.d(t,{a:()=>l,f:()=>i,i:()=>a,m:()=>o});var r=n(26408),s=n(87382);function i(e,t){let n;n=t?t.map((e=>e.type)):Object.keys(s.a);let r=[];return n.forEach((t=>{var n;(null===(n=s.a[t].fileExt)||void 0===n?void 0:n.indexOf(e))>=0&&r.push(s.a[t])})),r}function o(e){return e?(0,r.b)(e.flatMap((e=>{var t;return null===(t=s.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const a=e=>e/1024/1024>50,l=e=>e/1024/1024>20},33861:(e,t,n)=>{n.d(t,{a:()=>r,u:()=>s});const r=(0,n(18991).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),s=r.state}}]);