/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-dcb4fd.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-dcb4fd"],{13498:(e,t,i)=>{i.r(t),i.d(t,{arcgis_item_palette:()=>p,arcgis_symbol_picker_file_upload:()=>g,arcgis_symbol_styler_inline_input:()=>f});var n=i(28614),s=i(71480),a=i(97127),o=i(50063);const l="palette",r="item",c="item--active",d="item--selected",h=(e,t,i)=>e+i*t;const p=class{constructor(e){(0,n.r)(this,e),this.arcgisItemSelect=(0,n.c)(this,"arcgisItemSelect",7),this.handleFocus=()=>{const{items:e,selected:t}=this,i=e.findIndex((e=>"function"==typeof t?t(e):e===t));this.selectedItemIndex=i,this.activeItemIndex=i<0?0:i},this.handleKeyDown=e=>{const{key:t}=e,{el:i,itemsPerRow:n,items:s}=this;if([" ","Enter","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(t))return;"ArrowLeft"===t?this.activeItemIndex=this.moveItemIndex("left",n):"ArrowRight"===t?this.activeItemIndex=this.moveItemIndex("right",n):"ArrowUp"===t?this.activeItemIndex=this.moveItemIndex("up",n):"ArrowDown"===t?this.activeItemIndex=this.moveItemIndex("down",n):"Enter"!==t&&" "!==t||this.selectItem(s[this.activeItemIndex]);const a=i.querySelectorAll(`.${r}`)[this.activeItemIndex];!function(e,t){if(!e)return;const i=e?.getBoundingClientRect(),n=t.getBoundingClientRect(),s=n.top+n.height,a=i.top+i.height;if(s>a){const t=Math.abs(a-s);return void(e.scrollTop+=t)}if(n.top<i.top){const t=Math.abs(n.top-i.top);e.scrollTop-=t}}(i.parentElement,a),e.preventDefault(),e.stopPropagation()},this.moveItemIndex=(e,t)=>{const i=this.activeItemIndex,n=this.items.length;let{x:s,y:a}={x:(o=i)%(l=t),y:Math.floor(o/l)};var o,l;const r=s,c=a;"left"===e?s-=1:"right"===e&&(s+=1),s<0?s=0:s>t-1?s=t-1:"up"===e?a-=1:"down"===e&&(a+=1);const d=Math.ceil(n/t);a<0?a=0:a>d-1&&(a=d-1);return s+t*a>n-1?h(r,c,t):h(s,a,t)},this.handleClick=e=>{const t=e.currentTarget,i=Number(t.getAttribute("data-index"));this.selectItem(this.items[i])},this.selectItem=e=>{const{items:t,arcgisItemSelect:i}=this,n=t.indexOf(e);this.selectedItemIndex=n,this.activeItemIndex=n,i.emit(e)},this.extraItemProps=void 0,this.ItemRenderer=void 0,this.items=void 0,this.itemsPerRow=5,this.itemProperty=void 0,this.selected=void 0,this.activeItemIndex=0,this.selectedItemIndex=0}async setFocus(){this.handleFocus();const e=this.el.querySelector(`.${d}`);"DIV"===e?.tagName&&e.focus()}render(){const{items:e,ItemRenderer:t,extraItemProps:i,itemProperty:s,selected:a,itemsPerRow:o}=this,p=[],g=Math.ceil(e.length/o),m=Array(o).fill("auto").join(" ");for(let l=0;l<g;l++)for(let g=0,m=h(g,l,o);g<o;g++,m=h(g,l,o)){const o=e[m];if(m>=e.length)break;p.push((0,n.h)("div",{class:{[r]:!0,[c]:m===this.activeItemIndex,[d]:"function"==typeof a?a(o):o===a},"data-index":m,key:m,onClick:this.handleClick,tabIndex:-1,"aria-label":o.item?.data?o.item.data.title||o.item.data.name:o.name},(0,n.h)(t,{...s?{[s]:o}:o,...i})))}return(0,n.h)("div",{key:"4c051daf2c8febd4d5263c365de887940103ce73",class:l,"data-row-size":o,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,tabIndex:0,style:{gridTemplateColumns:m}},p)}get el(){return(0,n.g)(this)}};p.style=".sc-arcgis-item-palette-h {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n}\n\n.palette.sc-arcgis-item-palette {\n  \n  display: grid;\n  justify-content: space-between;\n  column-gap: 4px;\n  row-gap: 4px;\n  width: 100%;\n\n  &:focus-within {\n    .item--active:not(.item--selected) {\n      border-color: #ccc;\n    }\n  }\n}\n\n.item.sc-arcgis-item-palette {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border: 2px solid transparent;\n  outline: none;\n}\n\n.item--selected.sc-arcgis-item-palette {\n  border-color: #0079c1;\n  font-weight: bolder;\n}\n\n.marker-item.sc-arcgis-item-palette > div.sc-arcgis-item-palette > img.sc-arcgis-item-palette {\n  width: 100%;\n}";const g=class{constructor(e){(0,n.r)(this,e),this.arcgisSymbolPickerFileUploadChange=(0,n.c)(this,"arcgisSymbolPickerFileUploadChange",7),this.arcgisSymbolPickerFileUploadInvalidFile=(0,n.c)(this,"arcgisSymbolPickerFileUploadInvalidFile",7),this.arcgisSymbolPickerFileUploadError=(0,n.c)(this,"arcgisSymbolPickerFileUploadError",7),this.manager=(0,a.u)(this),this.strings=(0,o.u)({blocking:!0,name:"symbol-picker"}),this.handleDragOver=e=>{e.preventDefault()},this.handleDrop=async e=>{e.preventDefault(),e.dataTransfer?.files[0]&&await this.processFile(e.dataTransfer?.files[0])},this.handleFileInputChange=async e=>{const t=e.target;t.files?.length&&await this.processFile(t.files[0])},this.portal=void 0,this.hideSvgUploadSymbols=!1}render(){const e=this.hideSvgUploadSymbols?this.strings.fileUpload.dragDropNoSvg:this.strings.fileUpload.dragDrop;return(0,n.h)("div",{key:"433b864eb4e0a05b1ff9e8410471efba62f5563e",class:"file-step","aria-label":e,onDragOver:this.handleDragOver,onDragEnter:this.handleDragOver,onDrop:this.handleDrop},(0,n.h)("div",{key:"8f686f7609dca39e5ff4bd0f8d01b6af9c30d462"},(0,n.h)("div",{key:"42b8f49f2b3ff741498bb0d8efeded30756bb961",class:"file-step__drag-text","aria-label":e},e),(0,n.h)("calcite-button",{key:"f0a940374d8620ed709486ed2afc6e7dfaad7555",class:"file-step__browse-button",appearance:"transparent",iconStart:"image",onClick:()=>this.fileInput?.click()},this.strings.fileUpload.browse),(0,n.h)("input",{key:"8f2d097e7f03989868e6672afa8f7d4f1214ae52",ref:e=>{this.fileInput=e},onChange:this.handleFileInputChange,class:"file-step__file-input",type:"file",accept:".jpg,.gif,.png,.svg,image/jpg,image/gif,image/png,image/svg+xml"})))}async processFile(e){const{portal:t}=this;if(e&&e){if(!this.isValidFile(e))return void this.arcgisSymbolPickerFileUploadInvalidFile.emit();if(this.isSVGFile(e)){const i=await(0,s.be)(),n=t.helperServices.symbols.url,a=new FileReader;a.onload=async t=>{const s={svgImage:t.target?.result};i.generateSymbol(n,s).then((t=>{this.arcgisSymbolPickerFileUploadChange.emit({cim:t.symbol,fileName:e.name||"",width:t.symbol.width,height:t.symbol.height})}))},a.readAsText(e)}else{const t=new FileReader;t.onload=async t=>{const i=new Image;i.src=t.target?.result,i.onload=()=>{this.arcgisSymbolPickerFileUploadChange.emit({dataURL:t.target?.result,fileName:e.name||"",width:i.width,height:i.height})},i.onerror=()=>{this.arcgisSymbolPickerFileUploadError.emit()}},t.readAsDataURL(e)}}}isValidFile(e){const t=this.hideSvgUploadSymbols?/\.(gif|jpg|jpeg|png)$/iu:/\.(gif|jpg|jpeg|png|svg)$/iu;return e?.name&&t.test(e.name)}isSVGFile(e){return e?.name&&/\.(svg)$/iu.test(e.name)}get el(){return(0,n.g)(this)}};g.style=":host{display:inline-block;background-color:white;width:100%;padding:20px 5px 15px 5px;border-color:var(--calcite-color-border-1);border-width:2px;border-style:dashed;box-sizing:border-box}.file-step{text-align:center}.file-step__upload-icon{margin-bottom:0.5rem;margin-top:0.25rem;color:var(--calcite-color-text-3)}.file-step__upload-icon calcite-icon{width:4rem;height:4rem}.file-step__drag-text{font-size:0.9rem;margin-bottom:0.25rem}.file-step__browse-button{margin-top:1rem}.file-step__file-input{display:none}";const m="preview",f=class{constructor(e){(0,n.r)(this,e),this.arcgisSymbolStylerInlineInputClose=(0,n.c)(this,"arcgisSymbolStylerInlineInputClose",7),this.arcgisSymbolStylerInlineInputOpen=(0,n.c)(this,"arcgisSymbolStylerInlineInputOpen",7),this.manager=(0,a.u)(this),this.handlePanelDismissedChange=e=>{e.currentTarget.closed&&this.close(),e.stopPropagation()},this.handleTriggerClick=()=>{this.open=!this.open,this.open&&setTimeout((()=>{this.panelElement?.setFocus()}),300)},this.handleDone=()=>{this.close()},this.handlePopoverOpen=e=>{this.panelElement.closed=!1,this.arcgisSymbolStylerInlineInputOpen.emit(),e.stopPropagation()},this.handlePopoverClose=e=>{this.arcgisSymbolStylerInlineInputClose.emit(),e.stopPropagation()},this.handlePopoverKeyUp=({key:e})=>{"Escape"===e&&this.close()},this.setTriggerRef=e=>{this.triggerEl=e},this.setPreviewContainerRef=e=>{this.previewContainerEl=e},this.disabled=!1,this.heading=void 0,this.iconEnd="pencil",this.intlDone=void 0,this.label=void 0,this.popoverProps=void 0,this.open=!1}disabledChanged(e){e&&this.open&&this.close()}onInlineInputOpen(e){this.open&&(e.composedPath().includes(this.el)||(this.open=!1))}async setFocus(){this.triggerEl?.focus()}async close(){this.open=!1,this.arcgisSymbolStylerInlineInputClose.emit(),await this.setFocus()}render(){const{popoverProps:e}=this;return(0,n.h)(n.H,{key:"ab53420ca81d709fb774acf11ffbec2c8b091c50"},(0,n.h)("calcite-popover",{key:"500ae38d5a619e18074486f1f142dd711b1ca5f4",pointerDisabled:!0,onKeyUp:this.handlePopoverKeyUp,label:this.label,offsetDistance:e?.offsetDistance||0,offsetSkidding:e?.offsetSkidding||0,flipDisabled:e?.flipDisabled||!1,open:this.open,overlayPositioning:e?.overlayPositioning||"fixed",referenceElement:e?.refElement||this.previewContainerEl,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,placement:e?.placement||"bottom",triggerDisabled:!0},(0,n.h)("calcite-panel",{key:"b68eaa5eb151aaf6379b23d70132e8d98c6bfe4c",closable:!0,onCalcitePanelClose:this.handlePanelDismissedChange,heading:this.heading,style:e?.maxHeight?{maxHeight:e.maxHeight}:void 0,ref:e=>this.panelElement=e},(0,n.h)("slot",{key:"0bfc847cc3773acb4513efe047528d6b72b12333",name:"content"}),(0,n.h)("calcite-button",{key:"3525317039584c9ad3a2599552c76e2d12ae1728",appearance:"solid",scale:"m",slot:"footer",width:"full",label:this.intlDone,onClick:this.handleDone},this.intlDone))),(0,n.h)("div",{key:"98251690cc143c14c7d8b988c0ca48ee225a4414",class:"container"},(0,n.h)("div",{key:"4afa5c5c48a89e8178e0c0ec2dcfbb1ca6618e83",class:m,ref:this.setPreviewContainerRef},(0,n.h)("button",{key:"3f965830c63461a18fa7c56dfc185b244fd04330",disabled:this.disabled,onClick:this.handleTriggerClick,ref:this.setTriggerRef,type:"button","aria-label":this.label},(0,n.h)("slot",{key:"44ff2f571d5fcaf42e26cb2f6611e03bcb548762",name:"preview"}),this.iconEnd?(0,n.h)("calcite-icon",{icon:this.iconEnd,scale:"s"}):null)),(0,n.h)("slot",{key:"e6f148358f9c3d12e935b5a822b5889df9adc789",name:"content-end"})))}get el(){return(0,n.g)(this)}static get watchers(){return{disabled:["disabledChanged"]}}};f.style=':host {\n  --arcgis-symbol-styler-inline-input-trigger-background-color: var(--calcite-color-foreground-1);\n  display: flex;\n}\n\n:host([disabled]) {\n  opacity: var(--calcite-opacity-disabled);\n  pointer-events: none;\n}\n\nbutton {\n  overflow: hidden;\n  background-color: var(--arcgis-symbol-styler-inline-input-trigger-background-color);\n  align-items: center;\n  border: none;\n  border-radius: 0;\n  box-sizing: border-box;\n  cursor: pointer;\n  display: flex;\n  font-family: inherit;\n  gap: 8px;\n  height: 100%;\n  justify-content: center;\n  outline-color: transparent;\n  outline-offset: 0;\n  padding: 3px 0;\n  padding-inline: 3px 8px;\n  position: relative;\n  text-decoration: none;\n  user-select: none;\n  text-align: center;\n  -webkit-appearance: none;\n  width: 100%;\n  &:focus {\n    outline: 2px solid var(--calcite-color-brand);\n    outline-offset: 2px;\n  }\n  &:hover {\n    text-decoration: none;\n  }\n}\n\n/* TODO: rename preview to container */\n.preview {\n  border: 1px solid var(--calcite-color-border-input);\n  display: flex;\n  align-items: center;\n  flex-grow: 1;\n}\n\n.container {\n  display: flex;\n  gap: 16px;\n  width: 100%;\n}\n\n::slotted([slot="preview"]) {\n  flex-grow: 1;\n  display: flex;\n}\n\ncalcite-icon {\n  color: var(--calcite-color-text-3);\n}\n'},50063:(e,t,i)=>{i.d(t,{u:()=>a});var n=i(97127),s=i(28614);const a=(0,n.m)(s.a)}}]);