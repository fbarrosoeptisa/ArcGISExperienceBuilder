/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-fa38a6.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-fa38a6"],{64328:(e,t,i)=>{i.r(t),i.d(t,{arcgis_dependency_check:()=>G,arcgis_group_badge:()=>P,arcgis_group_badges:()=>O,arcgis_group_card:()=>B,arcgis_group_thumbnail_stack:()=>U,arcgis_item_actions:()=>T,arcgis_item_card:()=>z,arcgis_item_share:()=>q,arcgis_item_share_group:()=>X,arcgis_item_share_group_card:()=>ee,arcgis_item_share_summary_editable:()=>te,arcgis_sublayer_type:()=>ie});var r=i(19564),a=i(5011),o=i(57159),s=i(26408),n=i(67336),l=i(66507),c=i(80619),d=i(46738),p=i(80015),h=i(4948),u=i(89261),g=i(50544),m=i(18991),v=i(5157),b=i(84017),f=i(76381),w=i(96487),y=i(24211),_=i(68616),x=i(76741),k=i(5076),S=i(17233),C=i(44508),I=i(21769),D=i(36891);i(98034),i(99004),i(82297),i(65174),i(91102),i(73807),i(62913),i(86868),i(32084),i(61191),i(33861),i(87382),i(39489),i(91066),i(74597),i(97945),i(63330);const G=class{constructor(e){(0,r.r)(this,e),this.workflowCancel=(0,r.c)(this,"workflowCancel",7),this.workflowComplete=(0,r.c)(this,"workflowComplete",7),this.analyzeSharingDetail=async()=>{let e,{preProcessedSharingDetail:t,items:i,portal:r,i18n:a,api:n}=this;if(this.loadingText="loadingInfo",!this.preProcessedSharingDetail){const a=await Promise.all(i.map((({item:e,overrideLayers:t})=>(0,d.a)(e,r,t,{clearDataCacheOnDone:!1,apiVersion:n}))));d.d.forEach((e=>(0,o.c)(e))),t=a.reduce(((t,{error:i,result:r})=>(e=null==i?void 0:i.code,r&&Object.keys(r).forEach((e=>{t[e]=[...t[e],...r[e]]})),t)),{needEditableLayers:[],needPubliclyEditableLayers:[],needDataCollectionLayers:[],needsShareLevelUpdateLayers:[],premiumLayers:[],notEditableLayers:[],needAuthentication:[]})}return Object.keys(t).forEach((e=>{t[e]=(0,s.u)(t[e],(({sourceItem:e})=>e.id))})),this.sharingDetail=t,this.sharingDetail&&"dataNotAvailable"!==e?this.filterAndGetSharingDetails():(this.errorMessage=a.unableToGetItem,[])},this.filterAndGetSharingDetails=()=>{const{sharingDetail:e}=this;if(Object.keys(e).every((t=>{var i;return!(null===(i=e[t])||void 0===i?void 0:i.length)})))return;const{needEditableLayers:t,needsShareLevelUpdateLayers:i}=e;this.needsShareLevelUpdateLayers=i,this.needEditableLayers=t;this.updatableItems=["needEditableLayers","needsShareLevelUpdateLayers"].flatMap((t=>e[t].map((e=>({item:e.sourceItem,state:t})))));return this.nonUpdatableItems=["needPubliclyEditableLayers","needDataCollectionLayers","premiumLayers","notEditableLayers","needAuthentication"].flatMap((t=>e[t].map((e=>({item:e.sourceItem,state:t}))))),[...this.updatableItems,...this.nonUpdatableItems]},this.closeDialog=()=>{this.workflowCancel.emit()},this.updateSharing=async()=>{const{needsShareLevelUpdateLayers:e,needEditableLayers:t,portal:i,items:r}=this;this.isLoading=!0,this.loadingText="updatingSharing";const a=[...e,...t],o=a.map((({sourceItem:e})=>e)),s=a.some((({detail:e})=>e.needsShareLevelUpdate)),n=s?r[0].item.access:null,l=a.some((({detail:e})=>e.needsGroupUpdate));s||l?await(0,d.s)(o,r.map((({item:e})=>e)),n,i,l):console.warn("Unexpected state: no need to update share level or group"),this.isLoading=!1,this.workflowComplete.emit({updatedSourceItems:o,oldSharingDetail:this.sharingDetail})},this.getStatusInfoForLayerState=e=>{const{helpBase:t,helpMap:i}=this.config;switch(e){case"needEditableLayers":return{i18nKey:"sharingPDCEnabled",kind:"info"};case"needPubliclyEditableLayers":case"needDataCollectionLayers":return{i18nKey:"pdc",kind:"danger",link:`${t}${null==i?void 0:i[120004130]}`};case"premiumLayers":return{i18nKey:"premium",kind:"info",link:`${t}${null==i?void 0:i[120001307]}`};case"notEditableLayers":return{i18nKey:"noPermission",kind:"danger"};case"needAuthentication":return{i18nKey:"needsAuthentication",kind:"danger"};default:return null}},this.renderPreviewItemNotice=()=>{const{previewItemState:e,getStatusInfoForLayerState:t,i18n:i}=this,a=e?t(e):null;if(!a)return null;const{i18nKey:o,kind:s,link:n}=a,l=i.needShare;return(0,r.h)("calcite-notice",{open:!0,closable:!1,scale:"m",kind:s,slot:"preview-summary-top",class:"preview-notice"},(0,r.h)("div",{slot:"message"},l[o].panel),n&&"noPermission"!==o&&"sharingPDCEnabled"!==o&&"needsAuthentication"!==o&&(0,r.h)("calcite-link",{slot:"link",href:n,target:"_blank",rel:"noopener"},l[o].learnMore))},this.renderPostShareDialog=()=>{const{showPostShare:e,i18n:t,updatableItems:i}=this;return(0,r.h)("calcite-dialog",{kind:"brand",scale:"m",open:e&&i.length>0,onCalciteDialogClose:e=>e.stopPropagation(),width:"s",modal:!0,heading:t.postShareDialog.title},(0,r.h)("div",null,t.postShareDialog.description),(0,r.h)("calcite-button",{slot:"footer-end",onClick:()=>this.showPostShare=!1},t.postShareDialog.confirm))},this.renderItemCard=({item:e,state:t})=>{const{getStatusInfoForLayerState:i,i18n:a,user:o,portal:s,config:l}=this,c=a.needShare,d=i(t),p="info"===(null==d?void 0:d.kind);return(0,r.h)("arcgis-item-card",{key:e.id,item:e,portal:s,user:o,baseUrl:l.baseUrl,preview:"top",showOwner:!0,showDateUpdated:!0,showItemType:!0,showSummary:!0,showBadges:!0},d&&(0,r.h)("div",{slot:"content-top",class:{"status-banner":!0,"status-banner--info":p}},(0,r.h)("calcite-icon",{icon:p?"information":"exclamationMarkTriangle",scale:"s"}),(0,r.h)("span",null,c[d.i18nKey].notice)),(0,r.h)("div",{slot:"actions-end",class:"open-item"},(0,r.h)("calcite-button",{scale:"s",appearance:"transparent",kind:"neutral",onClick:t=>{t.stopPropagation(),window.open((0,n.d)(e.id,l.baseUrl),"_blank","noopener")}},a.goToItem)))},this.user=void 0,this.portal=void 0,this.config=void 0,this.api=4,this.isActive=!0,this.autoOpen=!1,this.items=void 0,this.preProcessedSharingDetail=void 0,this.showPostShare=!1,this.isLoading=void 0,this.sharingDetail=void 0,this.sections=[],this.needsShareLevelUpdateLayers=[],this.needEditableLayers=[],this.updatableItems=[],this.nonUpdatableItems=[],this.previewItemState=null,this.loadingText="loadingInfo",this.errorMessage=null}async componentWillLoad(){const e=this.items.map((({item:e})=>e.id)),{result:t,error:i}=await(0,a.c)(e,this.portal);this.items=t&&!i?t.map(((e,t)=>({item:e,overrideLayers:this.items[t].overrideLayers}))):this.items.map((e=>{var t;return Object.assign(Object.assign({},e),{item:null!==(t=e.item.sourceJSON)&&void 0!==t?t:e.item})}));const{el:r}=this,o=await(0,l.g)(r);if(this.i18n=o[0],this.autoOpen){this.isActive=!1;const e=await this.analyzeSharingDetail();this.isActive=!!(null==e?void 0:e.length),this.isActive||this.workflowCancel.emit()}}handleNewPreProcessedSharingDetail(){var e;null===(e=this.itemBrowserRef)||void 0===e||e.refresh()}componentDidLoad(){}render(){const{updateSharing:e,isActive:t,api:i,closeDialog:a,i18n:o,isLoading:s,loadingText:n,errorMessage:l,portal:d,user:p,config:h,analyzeSharingDetail:u,renderPreviewItemNotice:g,updatableItems:m,nonUpdatableItems:v,renderItemCard:b,renderPostShareDialog:f}=this,w=m.length,y=v.length,_=w>0,x=!!l;return(0,r.h)(r.F,{key:"c8eb0d02a7f5bfb1d4c44ab84a5f6af779f309e3"},(0,r.h)("calcite-dialog",{key:"47cbeffdd8074e95f62857c2588cefead35670d7",class:"rls-dialog",onCalciteDialogClose:a,open:t,modal:!0,outsideCloseDisabled:!0,escapeDisabled:!0,heading:o.updateSharing,width:"l"},(0,r.h)("div",{key:"30657af73a45fe001cc4b7f9b309cbacc084d5b5",class:"stage"},(0,r.h)("calcite-alert",{key:"2334cd27e68cef6a054a0e969db9c1b659105eab",icon:!0,open:x,label:l,kind:"danger",onCalciteAlertClose:()=>this.errorMessage=null},(0,r.h)("div",{key:"0d675752f2ee09180ce8a90f8ddc26c29b7eddcd",slot:"message"},l)),(0,r.h)("arcgis-new-item-loader",{key:"15f8265da875f6f8f316c2cb9fc9adfddba98517",active:s,text:o[n]}),(0,r.h)("arcgis-item-browser",{key:"3f523afe4c851cd842a38f1314eb54b125536668",fetch:async()=>{var e;const t=null!==(e=await u())&&void 0!==e?e:[];return{total:t.length,nextStart:0,num:t.length,start:0,results:t.map((({item:e})=>e))}},onArcgisItemBrowserPreview:({detail:e})=>{var t,i;e||(this.previewItemState=null),this.previewItemState=null!==(i=null===(t=[...m,...v].find((({item:t})=>t.id===e.id)))||void 0===t?void 0:t.state)&&void 0!==i?i:null},hideContentTop:!0,contentPaddedBottom:!0,hidePreviewFooters:!0,portal:d,user:p,config:h,selection:"none",api:i,num:c.a,ref:e=>this.itemBrowserRef=e},(0,r.h)("arcgis-item-browser-content",{key:"51a3a0a42b4ee4a200655f847c54c3f5b541ca87",class:"compact-grid-content",slot:"content"},(0,r.h)("div",{key:"93883b6e0dee03c8e4dd53a1ea48bdaa63cbed64",class:"top-bar",innerHTML:o[d.isPortal?"noticeEnterprise":"notice"]}),w>0&&(0,r.h)("div",{key:"2e550940c64f2be4236034b74a139956e3270cbf",class:"section"},(0,r.h)("p",{key:"042cf4a1495bce0f93850be516ea48aad1f37019",class:"item-count"},o.canBeUpdated.replace("${count}",w.toString())),(0,r.h)("div",{key:"f68c2d570cb08b451185da6d2b0d805f2209569c",class:"item-container"},m.map(b))),y>0&&(0,r.h)("div",{key:"30fbfc2f43f712f4078f422aacb4c5c765d1ad54",class:"section"},(0,r.h)("p",{key:"a243771825cd73b3fa7813a989cc8c788ca73e35",class:"item-count"},o.cantBeUpdated.replace("${count}",v.length.toString())),(0,r.h)("div",{key:"cb6832392ffb289991e66ecfd8c567a872b732d3",class:"item-container"},v.map(b)))),g())),(0,r.h)("calcite-button",{key:"ef8490b6546d49af50600a48bc78d4aa2160686a",slot:"footer-end",appearance:_?"outline":"solid",kind:_?"danger":"brand","data-id":"cancelButton",onClick:()=>this.isActive=!1},o[_?"cancel":"ok"]),_&&(0,r.h)("calcite-button",{key:"6f1f0cbd47e3a156accf9033fedba0dd7cee2c5a",slot:"footer-end",appearance:"solid",kind:"brand","data-id":"nextButton",onClick:e,disabled:s},o.update)),f())}get el(){return(0,r.d)(this)}static get watchers(){return{preProcessedSharingDetail:["handleNewPreProcessedSharingDetail"]}}};G.style=".stage{height:100%;overflow:hidden;transform:translate(0, 0)}.rls-dialog{--calcite-dialog-content-space:0;--calcite-dialog-size-x:1080px;--calcite-dialog-size-y:min(922px, 75vh)}.top-bar{padding-left:1rem;padding-right:1rem;padding-bottom:1rem;font-size:0.875rem;border-bottom:1px solid var(--calcite-color-border-1)}@media screen and (min-width: 1080px){.top-bar{padding-left:0px;padding-right:0px}}.section{margin-top:1rem}.item-count{font-size:1rem;font-weight:500;margin-bottom:1rem;margin-top:0.75rem}.item-container>*:not(:last-child){margin-bottom:1rem}.open-item{margin-inline-start:0.25rem;padding-inline-start:0.25rem;border-inline-start:1px solid var(--calcite-color-border-1)}.status-banner{display:flex;align-items:center;padding-left:1rem;padding-right:1rem;padding-top:0.25rem;padding-bottom:0.25rem;font-size:0.75rem;border-bottom:1px solid var(--calcite-color-border-2)}.status-banner>calcite-icon{margin-inline-end:0.5rem;color:var(--calcite-color-status-danger)}.status-banner>span{margin-top:0.125rem}.status-banner--info>calcite-icon{color:var(--calcite-color-status-info)}.compact-grid-content{--arcgis-item-browser-content-spacing:0.5rem}.preview-notice{margin-bottom:1rem}";const L={Collaboration:{icon:"collaboration"},FeaturedContent:{icon:"home"},Gallery:{icon:"images"},OpenData:{image:function(){return(0,r.h)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.h)("path",{d:"M13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.936 11.936 0 0 0 5 .984.5.5 0 0 0 0-1A10.147 10.147 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5zM8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.63 8.63 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2c2.861 0 5 1.056 5 2s-2.139 2-5 2z",fill:"currentColor"}))}},SharedUpdate:{icon:"configure-editing"},Partnered:{image:function(){return(0,r.h)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.h)("path",{d:"M13.89,6.11a5.47,5.47,0,0,0-2.56-1.45A5.39,5.39,0,0,0,9.89,2.11,5.5,5.5,0,0,0,2.11,9.89a5.47,5.47,0,0,0,2.56,1.45,5.39,5.39,0,0,0,1.44,2.55,5.5,5.5,0,0,0,7.78-7.78Zm-.71,7.07A4.5,4.5,0,1,1,6.82,6.82l-.71-.71A5.46,5.46,0,0,0,4.5,10a2.09,2.09,0,0,0,0,.25A4.51,4.51,0,1,1,9.18,9.18l.71.71A5.46,5.46,0,0,0,11.5,6a2.09,2.09,0,0,0,0-.25,4.5,4.5,0,0,1,1.69,7.43Z",fill:"currentColor"}))}},AnyOrg:{icon:"zoom-to-object"}},P=class{constructor(e){(0,r.r)(this,e),this.openTooltip=()=>{this.tooltipOpen=!0},this.closeTooltip=async()=>{await(0,s.t)(200),this.tooltipOpen=!1,this.tooltip=null},this.width="full",this.scale="m",this.badgeType=void 0,this.appearance=void 0,this.showTooltip=!0,this.tooltipText="",this.tooltipOpen=void 0}async componentWillLoad(){const{el:e}=this,t=await(0,l.g)(e);this.i18n=t[0]}renderImage(e){return(0,r.h)("span",{slot:"image",class:"image"},e())}render(){const{badgeType:e,width:t,scale:i,showTooltip:a,appearance:o}=this,s=this.i18n[e],{icon:n,image:l}=L[this.badgeType],c="narrow"===t,d={badge:!0,"badge--red":"SharedUpdate"===e,narrow:c,[`narrow--${i}`]:c};return(0,r.h)(r.H,{key:"50c1ed7f0dc0c05456c886768c43d1ce708b3151"},(0,r.h)("div",Object.assign({key:"4ad3ea7094d30f5fd56c888294322c4de8744de8",class:"wrapper"},a?{onMouseLeave:this.closeTooltip,onMouseEnter:this.openTooltip,onFocusout:this.closeTooltip,onFocusin:this.openTooltip}:{}),c?(0,r.h)("calcite-chip",Object.assign({label:s.title,class:d,value:e,ref:e=>this.chip=e,tabIndex:0,scale:i,appearance:o},n?{icon:n}:{}),!n&&this.renderImage(l)):(0,r.h)("calcite-chip",{label:s.title,class:d,value:e,icon:n,ref:e=>this.chip=e,tabIndex:0,scale:i,appearance:o},l&&this.renderImage(l),s.title),this.tooltipOpen&&(0,r.h)("arcgis-tunnel",{key:"99d6b0653ee39b20ced8635f387259dfec75a5f8",reference:this.el},(0,r.h)("calcite-tooltip",{key:"4c4ee1d1b955adbba4e375c54b60e15e27c50cf9",ref:e=>{e&&(e.referenceElement=this.chip,this.tooltip||(this.tooltip=e,this.tooltip.open=!0))},closeOnClick:!0,label:s.title,placement:"bottom-start",offsetDistance:6,offsetSkidding:0,style:{pointerEvents:"none",zIndex:"calc(var(--calcite-z-index-modal) + 1)"}},c&&(0,r.h)("h3",{key:"20d4b220b31ced280333c0c660683c29bee5357f",class:"tooltip__title",style:{fontSize:"var(--calcite-font-size--1)",color:"var(--calcite-color-text-1)",margin:"0 0 .25rem 0",padding:"0"}},s.title),(0,r.h)("p",{key:"abf6f4f762c295992c20a0f3c8a6fefe459c6d97",class:"tooltip__text",style:{fontSize:"var(--calcite-font-size--2)",color:"var(--calcite-color-text-1)",margin:"0",padding:"0"}},s.tooltip)))))}get el(){return(0,r.d)(this)}};P.style=".badge{--calcite-ui-icon-color:var(--calcite-color-brand);display:inline-block;border-width:0px}.badge--red{--calcite-ui-icon-color:var(--calcite-color-status-danger)}.narrow{box-sizing:border-box;width:2rem;--calcite-chip-spacing-unit-l:0}.icon{margin-top:0.25rem;margin-inline-start:0.375rem}.image{align-items:center;justify-content:center;border-radius:0;margin-inline-start:0.5rem}.image svg{color:var(--calcite-ui-icon-color)}.narrow--s{width:1.5rem}.narrow--s .icon{margin:0.25rem}.narrow--s .image{margin-inline-start:0px}.narrow--m .icon{margin:0.3125rem 0.5rem}.narrow--m .image{margin-inline-start:0px}.narrow--l{width:2.75rem}.narrow--l .icon{margin:0.5rem 0.8rem}.narrow--l .image{margin-inline-start:0.25rem}";const O=class{constructor(e){(0,r.r)(this,e),this.group=void 0,this.portal=void 0,this.width="full",this.appearance=void 0,this.empty=!1,this.showTooltips=!1,this.scale="m",this.badges=[]}componentWillLoad(){this.group&&this.updateBadges(this.group)}updateBadges(e){var t;this.badges=function(e,t){const i=[];return t.id&&(e.capabilities&&e.capabilities.includes("updateitemcontrol")&&i.push("SharedUpdate"),e.isOpenData&&e.orgId===t.id&&i.push("OpenData"),t.featuredItemsGroupQuery&&t.featuredItemsGroupQuery===`id:${e.id}`&&i.push("Gallery")),(e.collaborationInfo&&e.collaborationInfo.collaborationId||e.capabilities&&(0,p.i)(e))&&i.push("Collaboration"),e.membershipAccess||t.isPortal||"none"===e.orgId||i.push("AnyOrg"),"collaboration"===e.membershipAccess&&i.push("Partnered"),i.includes("SharedUpdate")&&!i.includes("Partnered")&&e.orgId!==t.id&&i.splice(i.indexOf("SharedUpdate"),1),i}(e,this.portal),(null===(t=this.badges)||void 0===t?void 0:t.length)||(this.empty=!0)}render(){const{width:e,scale:t,badges:i,showTooltips:a,appearance:o}=this;return(0,r.h)(r.H,{key:"4ad6bf335defebeb971147c5132f709f8c1c48f5"},i.map((i=>(0,r.h)("arcgis-group-badge",{appearance:o,key:i,class:"badge",badgeType:i,width:e,scale:t,showTooltip:a}))))}get el(){return(0,r.d)(this)}static get watchers(){return{group:["updateBadges"]}}};O.style=":host{display:flex;flex-wrap:wrap}.badge{display:inline-block;margin-inline-end:0.25rem}";const B=class{constructor(e){var t;(0,r.r)(this,e),this.arcgisGroupCardSelect=(0,r.c)(this,"arcgisGroupCardSelect",7),this.arcgisGroupBrowserCardPreview=(0,r.c)(this,"arcgisGroupBrowserCardPreview",7),this.arcgisGroupBrowserInternalUIAction=(0,r.c)(this,"arcgisGroupBrowserInternalUIAction",7),this.handleResizeEvent=({detail:e})=>{this.resize(e.width)},this.handleCardClick=()=>{const{group:e,preview:t}=this;this.link||("top"!==t?this.radioButton?(this.radioButton.checked=!0,this.arcgisGroupCardSelect.emit({group:e,selected:!0})):this.checkbox&&(this.selected=!this.selected,this.arcgisGroupCardSelect.emit({group:e,selected:this.selected})):this.arcgisGroupBrowserCardPreview.emit(e))},this.group=void 0,this.user=void 0,this.portal=void 0,this.api=4,this.baseUrl=null===(t=null===h.c||void 0===h.c?void 0:h.c.config)||void 0===t?void 0:t.baseUrl,this.selected=void 0,this.indeterminate=void 0,this.view="list",this.selection="none",this.preview=void 0,this.name=void 0,this.showOwner=!0,this.showDateUpdated=!0,this.showDateCreated=!1,this.showViewableBy=!0,this.showSummary=!1,this.showBadges=!0,this.link=void 0,this.newTab=void 0,this.hover=void 0,this.formFactor=void 0,this.updatedText="",this.createdText="",this.loaded=void 0,this.width=void 0}async restoreFocus(){this.link&&this.linkEl?this.linkEl.focus():"top"===this.preview&&this.sectionEl&&this.sectionEl.focus()}async componentWillLoad(){var e,t;const{el:i}=this,r=await(0,l.g)(i);this.i18n=r[0],this.store=(0,g.g)(this.el)||(0,m.c)({filters:{},type:"group-browser"}),null!==(e=this.formFactor)&&void 0!==e||(this.formFactor=(null===(t=this.store)||void 0===t?void 0:t.state.panel)?"xs":"lg"),(0,v.s)(this.store).observe(this.el),this.el.addEventListener("arcgisBrowserResize",this.handleResizeEvent),this.updatedText=this.i18n.lastUpdated.replace("${date}",(0,u.b)(this.group.modified)),this.createdText=this.i18n.created.replace("${date}",(0,u.b)(this.group.created))}async componentDidLoad(){await(0,s.t)(100),this.loaded=!0}disconnectedCallback(){var e,t,i,r;null===(i=null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.resizeObserver)||void 0===i||i.unobserve(this.el),null===(r=this.el)||void 0===r||r.removeEventListener("arcgisBrowserResize",this.handleResizeEvent)}resize(e){switch(!0){case e>v.b.md:this.formFactor="lg";break;case e>v.b.sm:this.formFactor="md";break;case e>v.b.xs:this.formFactor="sm";break;case e>v.b.xxs:this.formFactor="xs";break;default:this.formFactor="xxs"}this.width=e}getAccessInfo(e){const t={public:{text:this.i18n.everyone,icon:"globe"},private:{text:this.i18n.groupMembers,icon:"lock"},org:{text:this.i18n.organization,icon:"organization"}};return t[e]||t.private}renderCompactView(){const{group:e,portal:t,selection:i,selected:a,formFactor:o,i18n:s,link:n,loaded:l,newTab:c,showBadges:d}=this,p=this.link?"a":"div",h=Object.assign({href:n},c?{target:"_blank",rel:"noopener noreferrer"}:{});return(0,r.h)("section",Object.assign({class:{"group-card":!0,"group-card--hoverable":"none"!==i,[`group-card--${o}`]:!0,"group-card--loaded":l},onMouseOver:()=>this.hover=!0,onMouseOut:()=>this.hover=!1},n?{}:{onClick:this.handleCardClick},{ref:e=>this.sectionEl=e}),(0,r.h)(p,Object.assign({class:{"group-card__upper":!0,"group-card__upper--link":!!n,"group-card__upper--compact":!0}},n?h:{},{ref:e=>this.linkEl=e}),"single"===i&&(0,r.h)("calcite-radio-button",{class:"group-card__input",checked:a,value:e.title,name:this.name,ref:e=>this.radioButton=e,onClick:e=>{e.stopPropagation()},onCalciteRadioButtonChange:()=>{this.arcgisGroupCardSelect.emit({group:e,selected:!a})}},(0,r.h)("span",{class:"screen-readers-only"},s.select.replace("${title}",e.title))),"multiple"===i&&(0,r.h)("calcite-checkbox",{class:"group-card__input",checked:a,indeterminate:this.indeterminate,onClick:e=>{e.stopPropagation()},onCalciteCheckboxChange:()=>{this.arcgisGroupCardSelect.emit({group:e,selected:!this.selected})},value:e.id,ref:e=>this.checkbox=e},(0,r.h)("span",{class:"screen-readers-only"},e.title)),(0,r.h)("div",{class:"flex-0 group-card__thumbnail group-card__thumbnail--compact"},(0,r.h)("arcgis-group-thumbnail",{group:e,portal:t,scale:"l"})),(0,r.h)("div",{class:"group-card-flex-1"},(0,r.h)("h3",{class:"group-card__title group-card__title--compact"},(0,r.h)("span",{class:"group-card__title__span"},e.title))),d&&(0,r.h)("arcgis-group-badges",{group:e,portal:t,class:"group-card__badges--compact",scale:"s",showTooltips:!0,width:"narrow"}),(0,r.h)("slot",{name:"content-end"})))}render(){var e,t;const{group:i,portal:a,selection:o,selected:s,formFactor:n,api:l,i18n:c,link:d,loaded:p,newTab:u,showDateCreated:m,showDateUpdated:b,showOwner:f,showBadges:w,showSummary:y}=this,_=null!==(e=this.baseUrl)&&void 0!==e?e:null===(t=h.c.config)||void 0===t?void 0:t.baseUrl,x=g.a.preview===this.group.id,k="top"===this.preview,S=this.link?"a":"div",C=Object.assign({href:d},u?{target:"_blank",rel:"noopener noreferrer"}:{}),I={tabIndex:0,role:"button","aria-haspopup":"dialog","aria-labelledby":"open-details",onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||(e.preventDefault(),this.handleCardClick())}},D=this.getAccessInfo(i.access);return(0,r.h)(r.H,{key:"cfc40f176ed3644880d8865d7a1c82855013e83c"},"compact"===this.view?this.renderCompactView():(0,r.h)("section",Object.assign({class:{"group-card":!0,"group-card--hoverable":"none"!==o,[`group-card--${n}`]:!0,"group-card--loaded":p}},d?{}:{onClick:this.handleCardClick},k&&!d?I:{},{ref:e=>this.sectionEl=e}),(0,r.h)("slot",{name:"content-top"}),(0,r.h)(S,Object.assign({class:{"group-card__upper":!0,"group-card__upper--link":!!d}},d?C:{},{onMouseOver:()=>this.hover=!0,onMouseOut:()=>this.hover=!1}),(0,r.h)("div",{class:"group-card-flex group-card__top"},"single"===o&&(0,r.h)("calcite-radio-button",{class:"group-card__input",checked:s,value:i.title,name:this.name,ref:e=>this.radioButton=e,onClick:e=>{e.stopPropagation()},onCalciteRadioButtonChange:()=>{this.arcgisGroupCardSelect.emit({group:i,selected:!s})}},(0,r.h)("span",{class:"screen-readers-only"},c.select.replace("${title}",i.title))),"multiple"===o&&(0,r.h)("calcite-checkbox",{class:"group-card__input",checked:s,indeterminate:this.indeterminate,onClick:e=>{e.stopPropagation()},onCalciteCheckboxChange:()=>{this.arcgisGroupCardSelect.emit({group:i,selected:!this.selected})},value:i.id,ref:e=>this.checkbox=e},(0,r.h)("span",{class:"screen-readers-only"},i.title)),(0,r.h)("div",{class:"flex-0 group-card__thumbnail"},(0,r.h)("arcgis-group-thumbnail",{group:i,portal:a,scale:"xl"})),(0,r.h)("div",{class:"group-card-flex-1"},(0,r.h)("div",{class:"group-card-flex"},(0,r.h)("div",{class:"group-card__content"},(0,r.h)("h3",{class:{"group-card__title":!0,"group-card__title--padded":y&&!!i.snippet}},(0,r.h)("span",{class:"group-card__title__span"},i.title)),y&&i.snippet&&(0,r.h)("p",{class:"group-card__summary"},i.snippet.length>250?`${i.snippet.substring(0,250)}\u2026`:i.snippet),(0,r.h)("div",{class:{"group-card__details":!0,"group-card__details--stacked":this.width<580}},m&&(0,r.h)("span",{class:"group-card__detail group-card__divider"},this.createdText),b&&(0,r.h)("span",{class:"group-card__detail group-card__divider"},this.updatedText),this.showViewableBy&&(0,r.h)("span",{class:"group-card__detail group-card__divider"},(0,r.h)("calcite-icon",{icon:D.icon,scale:"s",class:"group-card__detail__icon"})," ",c.viewableBy.replace("${level}",D.text)),w&&this.width>=v.b.sm&&(0,r.h)("arcgis-group-badges",{appearance:this.hover?"outline-fill":"solid",group:i,portal:a,width:this.width<840?"narrow":"full",class:"group-card__badges group-card__detail group-card__divider",scale:"s",showTooltips:!0})),w&&this.width<v.b.sm&&(0,r.h)("arcgis-group-badges",{appearance:this.hover?"outline-fill":"solid",group:i,portal:a,width:this.width<v.b.xxs?"narrow":"full",class:"group-card__badges",scale:"s",showTooltips:!0}))),(0,r.h)("slot",{name:"content-end"})))),(0,r.h)("div",{class:"group-card__footer",onClick:e=>{e.stopPropagation()}},(0,r.h)("div",{class:"group-card__footer__start"},(0,r.h)("slot",{name:"actions-start"}),f&&(0,r.h)("div",{class:"group-card__profile-wrap",onClick:e=>{e.preventDefault(),e.stopPropagation()}},(0,r.h)("arcgis-user-popup",{underline:!0,username:i.owner,api:l,portal:a,baseUrl:_,class:"group-card__owner",onArcgisUserPopupInternalUIAction:e=>{e.stopPropagation(),this.arcgisGroupBrowserInternalUIAction.emit(e.detail)}}))),"action"===this.preview&&(0,r.h)("calcite-button",{scale:"s",appearance:x?"solid":"outline-fill",kind:"neutral",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.arcgisGroupBrowserCardPreview.emit(this.group)}},x?c.hidePreview:c.preview),(0,r.h)("slot",{name:"actions-end"}))))}get el(){return(0,r.d)(this)}};B.style=':host{display:block;min-width:0px}.group-card{position:relative;display:flex;height:100%;flex-direction:column;color:var(--calcite-color-text-1);opacity:0;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-duration:150ms;outline-color:transparent;background-color:var(--calcite-color-foreground-1);transition-property:background-color, outline, outline-offset, opacity;border:1px solid var(--calcite-color-border-3)}.group-card:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.group-card--loaded{opacity:1}.group-card--selected{border-color:var(--calcite-color-brand)}.group-card--hoverable{cursor:pointer}.group-card__top{padding:1rem}.group-card__hover-text{position:absolute;inset:0px;display:flex;align-items:center;justify-content:center;text-align:center;font-size:1rem;font-weight:500;opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:rgba(21, 21, 21, 0.7);color:white}.group-card__upper{flex:1 1 0%;background-color:var(--calcite-color-foreground-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.group-card__upper:hover{background-color:var(--calcite-color-background)}.group-card__upper:hover .group-card__hover-text,.group-card:focus .group-card__hover-text{opacity:1}.group-card__upper--compact{display:flex;align-items:center;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.75rem;padding-right:0.75rem}.group-card__upper--link{color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent}.group-card__upper--link:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:2px}.group-card__title__span{position:relative;display:inline;border-style:none;background-color:transparent;padding:0px;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-image:linear-gradient(transparent, transparent);background-position-x:0%, 100%;background-position-y:min(1.25em, 100%);background-repeat:no-repeat, no-repeat;background-size:100% 1px, 100% 1px}.group-card--previewed .group-card__title__span{background-image:linear-gradient(var(--calcite-color-text-3), var(--calcite-color-text-3))}.group-card__content{display:flex;min-width:0px;flex:1 1 0%;flex-direction:column}.group-card__details{display:flex;flex-direction:row;flex-wrap:wrap}.group-card__details--stacked{flex-direction:column}.group-card__detail{font-size:0.875rem;color:var(--calcite-color-text-2)}.group-card__detail__icon{margin-inline-end:0.5rem}.group-card__calendar-icon{color:var(--calcite-color-text-3);margin-inline-end:0.5rem}.group-card__footer{margin-top:auto;display:flex;align-items:center;background-color:var(--calcite-color-foreground-1);padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;border-top:1px solid var(--calcite-color-border-3)}.group-card__footer__start{display:flex;min-width:0px;flex:1 1 0%;flex-direction:row;align-items:center;overflow:hidden;margin-inline-end:0.75rem}.group-card__footer__start--selectable{margin-inline-start:1.5rem}.group-card__profile-wrap{max-width:100%;padding:0.25rem}.group-card__updated{font-size:0.875rem;color:var(--calcite-color-text-2)}.group-card__updated--xs{margin-top:0.5rem}.group-card__divider{display:flex;align-items:center;flex:0 0 auto}.group-card__divider:not([empty]):before{content:"";height:1.25rem;width:1px;background-color:var(--calcite-color-border-1);margin-inline:0.75rem}.group-card__details--stacked .group-card__divider:before{display:none}.group-card__divider:first-child:before{display:none}.group-card-flex{display:flex}.group-card-flex-1{min-width:0px;flex:1 1 0%}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.group-card__input{margin-inline-end:1rem;margin-top:0.125rem}.group-card__title{margin-top:0px;margin-bottom:0px;overflow-wrap:break-word;padding-top:0px;padding-bottom:0px;font-size:1rem;font-weight:500;line-height:1.375}.group-card__title--compact{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-inline-end:1rem}.group-card__summary{margin:0px;margin-top:0.25rem;margin-bottom:0.25rem;flex:1 1 0%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;font-size:0.875rem;line-height:1.25}.group-card__thumbnail{margin-inline-end:1rem}.group-card__thumbnail--compact{width:2.75rem;height:2.75rem}.group-card__badges{margin-top:0.25rem}.group-card__owner{min-width:0px}.group-card--panel{margin-bottom:0px;cursor:pointer;border-bottom:1px solid var(--calcite-color-border-1);outline:1px solid rgba(0, 0, 0, 0)}.group-card--panel:hover{background-color:var(--calcite-color-foreground-2)}.group-card--border-top{border-top:1px solid var(--calcite-color-border-1)}.group-card--border-top:hover{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.group-card--xs .group-card__top,.group-card--xxs .group-card__top{padding:0.75rem}.group-card--xs .group-card__title--padded,.group-card--xxs .group-card__title--padded{margin-bottom:0.25rem}.group-card--xs .group-card__footer,.group-card--xxs .group-card__footer{padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.75rem;padding-right:0.75rem}.group-card--xs .group-card__detail,.group-card--xxs .group-card__detail{margin-top:0.25rem;margin-bottom:0.25rem;font-size:0.75rem;line-height:1.35}.group-card--xs .group-card__title,.group-card--xxs .group-card__title{font-size:0.875rem}.group-card--xxs .group-card__thumbnail{padding-inline-start:0.75rem;width:4.25rem}.group-card--xs .group-card__thumbnail{padding-inline-start:0.5rem;width:5rem}';const U=class{constructor(e){(0,r.r)(this,e),this.groups=void 0,this.portal=void 0,this.scale="m",this.tooltip=!1,this.maxGroups=3,this.total=void 0}render(){const{groups:e,portal:t,maxGroups:i,scale:a,total:o,tooltip:s}=this,n=(null!=o?o:e.length)-i;return(0,r.h)(r.H,{key:"e23d45fdb3053a99e54c7bbc2705e23c995a3f37"},e.slice(0,i).map((e=>(0,r.h)("arcgis-group-thumbnail",{scale:a,group:e,portal:t,tooltip:s,class:"thumbnail"}))),n>0&&(0,r.h)("calcite-chip",{key:"fcbda0cbaaec7453912f668f225f8eebb77386ee",value:n,scale:a,label:`+${n}`},"+",n))}get el(){return(0,r.d)(this)}};U.style=":host{display:flex}.thumbnail{margin-inline-end:0.25rem}";const T=class{constructor(e){(0,r.r)(this,e),this.arcgisItemActionClick=(0,r.c)(this,"arcgisItemActionClick",7),this.arcgisItemActionsOpen=(0,r.c)(this,"arcgisItemActionsOpen",7),this.arcgisItemFavoriteUpdate=(0,r.c)(this,"arcgisItemFavoriteUpdate",7),this.arcgisItemActions=(0,r.c)(this,"arcgisItemActions",7),this.toggleFavorite=async()=>{const{user:e,portal:t,item:i,isFavorite:r}=this,a={user:e,portal:t,item:i};await(r?(0,b.r)(a):(0,b.a)(a)),await(0,s.t)(300),this.isFavorite=!r,this.arcgisItemFavoriteUpdate.emit({id:i.id,favorite:this.isFavorite})},this.handleActionClick=({id:e,text:t,action:i})=>async r=>{this.arcgisItemActionClick.emit(e||t),i&&(r.preventDefault(),i())},this.item=void 0,this.portal=void 0,this.user=void 0,this.actions=void 0,this.keyHandler=void 0,this.label=void 0,this.showFavorite=void 0,this.tabIndexOverride=void 0,this.isFavorite=void 0}async setFocus(){var e;null===(e=this.ellipsis)||void 0===e||e.setFocus()}updateFavorite(e){const{id:t,favorite:i}=e.detail;t===this.item.id&&(this.isFavorite=i)}async componentWillLoad(){var e,t;const{el:i,item:r,portal:a,user:o}=this,s=await(0,l.g)(i,"arcgis-item-favorite");this.i18n=s[0],r&&o&&a&&(this.isFavorite=await(0,b.i)(r.id,a,o)),this.portal=null!==(e=this.portal)&&void 0!==e?e:h.c.portal,this.user=null!==(t=this.user)&&void 0!==t?t:h.c.user}render(){const{label:e,actions:t,i18n:i,isFavorite:a}=this;return t||this.showFavorite?(0,r.h)(r.H,null,(0,r.h)("calcite-dropdown",{placement:"bottom-end",closeOnSelectDisabled:!0,ref:e=>{this.dropdown=e}},(0,r.h)("calcite-action",Object.assign({ref:e=>this.ellipsis=e,scale:"s",slot:"trigger",alignment:"center",appearance:"solid",text:e,textEnabled:!1,icon:"ellipsis",onClick:e=>{this.arcgisItemActionsOpen.emit({el:e.target})}},this.keyHandler?{onKeyDown:e=>{var t;return this.keyHandler(e,null===(t=this.dropdown)||void 0===t?void 0:t.open)}}:{})),(0,r.h)("calcite-dropdown-group",{selectionMode:"none",onKeyDown:e=>{e.stopPropagation()}},null==t?void 0:t.map((e=>(0,r.h)("calcite-dropdown-item",Object.assign({onCalciteDropdownItemSelect:this.handleActionClick(e),onClick:this.handleActionClick(e),key:e.text},!e.action&&e.link?Object.assign(Object.assign({},e.newTab?{target:"_blank",rel:"noopener noreferrer"}:{}),{href:e.link}):{}),e.text))),Boolean(this.showFavorite&&this.user)&&(0,r.h)("calcite-dropdown-item",{onCalciteDropdownItemSelect:this.toggleFavorite,key:"favorites",onClick:e=>{e.preventDefault(),e.stopPropagation()}},a?i.remove:i.add)))):null}get el(){return(0,r.d)(this)}},z=class{constructor(e){var t;(0,r.r)(this,e),this.arcgisItemCardInternalUIAction=(0,r.c)(this,"arcgisItemCardInternalUIAction",7),this.arcgisItemCardActionsOpen=(0,r.c)(this,"arcgisItemCardActionsOpen",7),this.arcgisItemCardSelect=(0,r.c)(this,"arcgisItemCardSelect",7),this.arcgisItemBrowserCardPreview=(0,r.c)(this,"arcgisItemBrowserCardPreview",7),this.handleResizeEvent=e=>{e.forEach((e=>{e.contentRect.width>0&&this.resize(e.contentRect.width)}))},this.handleCardClick=e=>{if(this.link)return;const t="top"===this.preview,{item:i,selection:r}=this,a=null==e?void 0:e.target;(null==a?void 0:a.closest(".item-browser-card__footer__start"))||(null==a?void 0:a.closest(".item-browser-card__footer"))||"actions-end"===(null==a?void 0:a.getAttribute("slot"))||(!t||this.recycleBin?"single"===r?this.arcgisItemCardSelect.emit({item:i,selected:!0}):"multiple"===r&&this.arcgisItemCardSelect.emit({item:i,selected:!(0,f.l)({item:i,selectedItems:this.selectedItems})}):this.arcgisItemBrowserCardPreview.emit(i))},this.item=void 0,this.portal=void 0,this.user=void 0,this.api=4,this.baseUrl=null===(t=null===h.c||void 0===h.c?void 0:h.c.config)||void 0===t?void 0:t.baseUrl,this.link=void 0,this.newTab=void 0,this.selected=void 0,this.selection=void 0,this.name=void 0,this.preview=void 0,this.previewActive=void 0,this.showOwner=!0,this.showDateUpdated=!0,this.showItemType=!0,this.showItemTypeHosted=!1,this.showSummary=!1,this.showBadges=!0,this.showAccess=void 0,this.showFavorite=void 0,this.showThumbnail=!0,this.disableSelection=void 0,this.useProduction=void 0,this.actions=[],this.recycleBin=void 0,this.selectedItems=void 0,this.panel=void 0,this.view=void 0,this.width=void 0,this.watchResize=!0,this.groups=void 0,this.userGroups=void 0,this.allowSharingEdit=void 0,this.messageOverrides={},this.showFavoriteInActionsMenu=void 0,this.hideActionsStart=void 0,this.hover=void 0,this.formFactor=void 0,this.loaded=void 0,this.noSpaceForDate=!0}get updatedText(){const e=(0,u.b)(this.item.modified);return this.i18n.lastUpdated.replace("${date}",e)}get shortUpdatedText(){return(0,u.b)(this.item.modified)}async restoreFocus(){this.link&&this.linkEl?this.linkEl.focus():"top"===this.preview&&this.sectionEl&&this.sectionEl.focus()}resize(e){switch(!0){case e>v.b.md:this.formFactor="lg";break;case e>v.b.sm:this.formFactor="md";break;case e>v.b.xs:this.formFactor="sm";break;case e>v.b.xxs:this.formFactor="xs";break;default:this.formFactor="xxs"}}async updateI18n(e){const t=await(0,l.g)(this.el);this.i18n=Object.assign(Object.assign({},t[0]),e)}async componentWillLoad(){var e,t,i,r,a;const o=await(0,l.g)(this.el);this.i18n=Object.assign(Object.assign({},o[0]),this.messageOverrides),null!==(e=this.formFactor)&&void 0!==e||(this.formFactor="lg"),this.watchResize&&(null!==(t=this.resizeObserver)&&void 0!==t||(this.resizeObserver=new ResizeObserver(this.handleResizeEvent)),this.resizeObserver.observe(this.el)),this.portal=null!==(i=this.portal)&&void 0!==i?i:h.c.portal,this.user=null!==(r=this.user)&&void 0!==r?r:h.c.user,this.api=null!==(a=this.api)&&void 0!==a?a:h.c.api}async componentDidLoad(){await(0,s.t)(100),this.loaded=!0}disconnectedCallback(){var e;null===(e=this.resizeObserver)||void 0===e||e.unobserve(this.el)}renderSelection(e){const{i18n:t,item:i}=this,a=this.selection,o={"item-browser-card__input":!0,"item-browser-card__input--end":"grid"===this.view};return"single"===a?(0,r.h)("calcite-radio-button",{class:o,checked:e,value:i.title,name:this.name,disabled:this.disableSelection,onClick:e=>{e.stopPropagation()},onCalciteRadioButtonChange:()=>{this.arcgisItemCardSelect.emit({item:i,selected:!0})}},(0,r.h)("span",{class:"screen-readers-only"},t.select.replace("${title}",i.title))):"multiple"===a?(0,r.h)("calcite-checkbox",{class:o,checked:e,disabled:this.disableSelection,onClick:e=>{e.stopPropagation(),e.preventDefault()},onCalciteCheckboxChange:()=>{this.arcgisItemCardSelect.emit({item:i,selected:!e})},value:i.id},(0,r.h)("span",{class:"screen-readers-only"},i.title)):null}renderOwner(){var e,t;const{item:i,api:a,portal:o,formFactor:s,useProduction:n}=this,l=n?"https://www.arcgis.com/home/":null!==(e=this.baseUrl)&&void 0!==e?e:null===(t=h.c.config)||void 0===t?void 0:t.baseUrl;return this.showOwner?(0,r.h)("div",{class:"item-browser-card__profile-wrap"},(0,r.h)("arcgis-user-popup",{underline:!0,item:i,api:a,portal:o,baseUrl:l,showName:"grid"!==this.view,checkOnline:n,class:"item-browser-card__owner",scale:"xxs"===s?"s":"m",onArcgisUserPopupInternalUIAction:e=>{e.stopPropagation(),this.arcgisItemCardInternalUIAction.emit(e.detail)}})):null}renderItemType(){const{item:e,portal:t,showItemType:i,formFactor:a}=this;return i?(0,r.h)("arcgis-item-type",{class:{"item-browser-card__divider item-browser-card__divider--unset item-browser-card-item-type":!this.panel},ellipsis:!0,user:this.user,showHosted:this.showItemTypeHosted,scale:["xxs","xs"].includes(a)?"s":"m",item:e,portal:t}):null}render(){var e;const{item:t,user:i,portal:a,formFactor:o,i18n:s,loaded:n,showDateUpdated:l,showItemType:c,showOwner:d,showBadges:p,showSummary:u,showThumbnail:g,link:m,newTab:v,showAccess:b,actions:w,previewActive:y}=this,_="grid"===this.view,x="top"===this.preview,k={tabIndex:0,role:"button","aria-haspopup":"dialog","aria-labelledby":"open-details",onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||(e.preventDefault(),this.handleCardClick())}},S=this.selection,C=["single","multiple"].includes(S)&&(0,f.l)({item:this.item,selectedItems:this.selectedItems}),I=this.link?"a":"div",D=Object.assign({href:m},v?{target:"_blank",rel:"noopener noreferrer"}:{}),G=["xxs","xs"].includes(o);return(0,r.h)(r.H,{key:"a5c19e58b53fda8cf45d1148f4ae07a1da1b128c"},(0,r.h)("section",Object.assign({key:"c38bd343d2d8526ce601c9fe8d56fdce353fd4b9",class:{"item-browser-card":!0,"item-browser-card--hoverable":!0,[`item-browser-card--${o}`]:!0,"item-browser-card--panel":this.panel,"item-browser-card--loaded":n,"item-browser-card--previewed":this.previewActive&&"top"===this.preview,"item-browser-card--selected":C},onMouseOver:()=>this.hover=!0,onMouseOut:()=>this.hover=!1},m?{}:{onClick:this.handleCardClick},x&&!m?k:{},{ref:e=>this.sectionEl=e}),(0,r.h)("slot",{key:"a157265c213f1dbcb60f4e87852d6cc67529a449",name:"content-top"}),(0,r.h)(I,Object.assign({key:"f62354eadb23fa4ca41952b27a43e997ed749f5a",class:{"item-browser-card__upper":!0,"item-browser-card__upper--link":!!m}},m?D:{},{ref:e=>this.linkEl=e}),_&&g&&(0,r.h)("figure",{key:"cc8bdf080622511bd1c84394bb3045cd02f845ab",class:"item-browser-card__thumbnail--grid"},(0,r.h)("arcgis-item-thumbnail",{key:"24c5887864498107c6b6da05e98cf59d0421c21c",item:t,user:i,portal:a,useProduction:this.useProduction}),x&&!m&&(0,r.h)("div",{key:"4626df6a6c2d1965fc0b48f95f2050369dc6e692",class:"item-browser-card__hover-text",id:"open-details"},this.previewActive?s.closePreview:s.preview),(null==m?void 0:m.includes(`item.html?id=${null==t?void 0:t.id}`))&&(0,r.h)("div",{key:"10149dbc9f36b2729b33b3bf54517cfedafcf554",class:"item-browser-card__hover-text",id:"open-details"},s.viewItemDetails)),(0,r.h)("div",{key:"7c0567e8358b5d4273c0f8d8ea97404311ebfee2",class:"item-browser-card-flex item-browser-card__top"},!_&&this.renderSelection(C),(0,r.h)("div",{key:"28d777b46bf0f47883c21f9eb8264f32bf68ae86",class:"item-browser-card-flex-1"},(0,r.h)("div",{key:"9dd7b46c148bea44835283132b6c8d380922ae74",class:"item-browser-card-flex"},(0,r.h)("div",{key:"65025a21f465913dfad809a8466ca92f0071ea96",class:"item-browser-card__content"},(0,r.h)("div",{key:"31c92133c0b77ab23dff519d3a76ef438219c753",class:"item-browser-card-flex"},(0,r.h)("h3",{key:"b51eba118783d311df3f60d0182c45920a4e70d0",class:{"item-browser-card__title":!0,"item-browser-card__title--padded":c||u&&!!t.snippet,"item-browser-card__title--grid":_,"item-browser-card-flex-1":!0}},(0,r.h)("span",{key:"d2783255c073473f696aa6ef7dc958b316933ec4",class:"item-browser-card__title__span"},t.title)),_&&this.renderSelection(C)),u&&t.snippet&&!G&&(0,r.h)("p",{key:"b878e676e8d2189facddeea43a0737e77f53b683",class:"item-browser-card__summary"},t.snippet.length>250?`${t.snippet.substring(0,250)}\u2026`:t.snippet),this.panel&&this.renderItemType(),(0,r.h)("div",{key:"d1b0a517b865d219a0039e2eacb3b2a657e6e308",class:"item-browser-card__details"},!this.panel&&this.renderItemType(),l&&"xxs"!==o&&(0,r.h)("span",{key:"bc107e3339dfcb395e7d916b90cd7b257e60780f",class:{"item-browser-card__detail":!0,"item-browser-card__divider":!0}},["xxs","xs","sm"].includes(o)||_?this.shortUpdatedText:this.updatedText),p&&(0,r.h)("arcgis-item-badges",{key:"ca3d6689c02635b763b28961e7a04d97ec2996f3",item:t,user:i,portal:a,width:"lg"!==o||_?"narrow":"full",showTooltips:!0,class:{"item-browser-card__badges":!0,"item-browser-card__divider":!0},scale:"s"}))),!_&&g&&(0,r.h)("figure",{key:"4d4a49ccc6989867b146c5695a7ad181c0a8c46f",class:"item-browser-card__thumbnail"},(0,r.h)("arcgis-item-thumbnail",{key:"1035bd3755b2e4fa942cf75a2012916319b0517f",item:t,user:i,portal:a,useProduction:this.useProduction}))),(0,r.h)("slot",{key:"5348750ab3035e3a408dda4dc3b7c8ec2d353ab6",name:"content-end"})))),(0,r.h)("div",{key:"310bed87f9d4a407c22c8c8df4be53c6319cf836",class:"item-browser-card__footer",onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||e.stopPropagation()}},(0,r.h)("div",{key:"21c7004d64e78ec0a4c48268adc6a75f39750c29",class:{"item-browser-card__footer__start":!0,"item-browser-card__footer__start--owner":d}},!this.hideActionsStart&&(0,r.h)("slot",{key:"36f93e446b0634ed7145f9f1c85204f60e254b5b",name:"actions-start"}),this.renderOwner()),b&&(0,r.h)("div",{key:"41af475b6e5efa3cdb67e07b4fbe586f882778c2",class:"item-browser-card__access-wrap",onClick:e=>{e.preventDefault(),e.stopPropagation()}},(0,r.h)("slot",{key:"56ae75a15c229412a302cae07e519ed6096d3f92",name:"share-summary"},(0,r.h)("arcgis-item-share-summary",{key:"6a66f3dc885bf4442c27c3c97431bd0fb72db829",item:t,class:"item-browser-card__access",scale:"xxs"===o?"s":"m",showText:!_&&"lg"===o,user:i,groups:this.groups}))),(b||_&&d)&&(null===(e=this.actions)||void 0===e?void 0:e.length)>0&&(0,r.h)("span",{key:"2bce013a31a8924e3278bd2bcb605b16b24f7372",class:{"item-browser-card__footer-divider":!0,"item-browser-card__footer-divider--list":!_}}),this.showFavorite&&(0,r.h)("arcgis-item-favorite",{key:"65f76c5d6c67ca4c4b80d9c40b9e1b950fc9b4ea",item:t,portal:a,user:i||(null===h.c||void 0===h.c?void 0:h.c.user),iconOnly:!0}),"action"===this.preview&&!this.recycleBin&&(0,r.h)("calcite-button",{key:"9d66ee9e23b18ca4b21d997d8327e4209e2f22d8",scale:"s",class:"item-card__preview-button",appearance:y?"solid":"outline",kind:"neutral",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.arcgisItemBrowserCardPreview.emit(this.item)}},s.preview),(null==S?void 0:S.includes("sublayer"))&&(0,r.h)("arcgis-item-browser-card-sublayer-select",{key:"f9bb86edec193b0fb39d2b4b6e0b7338efe93a87",item:t,user:i,portal:a,selection:"multiple-sublayer"===S?"multiple":"single"}),(0,r.h)("slot",{key:"0d17e37eb33b1b60e75ce6b634b9233155d15b12",name:"actions-end"}),(w.length>0||this.showFavoriteInActionsMenu)&&(0,r.h)("arcgis-item-actions",{key:"7614a805d9954fb19e0a27c7aba94cd22298fb29",item:t,portal:a,user:i,actions:w,showFavorite:this.showFavoriteInActionsMenu,onArcgisItemActionsOpen:e=>{this.arcgisItemCardActionsOpen.emit({el:e.detail.el,actions:w})},onArcgisItemActionClick:e=>{this.arcgisItemCardInternalUIAction.emit({category:"card action",action:"more options",attribute:e.detail})}}))))}get el(){return(0,r.d)(this)}static get watchers(){return{width:["resize"],messageOverrides:["updateI18n"]}}};z.style=':host{display:block;min-width:0px}.item-browser-card{position:relative;box-sizing:border-box;display:flex;height:100%;flex-direction:column;color:var(--calcite-color-text-1);opacity:0;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-duration:150ms;outline-color:transparent;background-color:var(--calcite-color-foreground-1);transition-property:background-color, outline, outline-offset, opacity;border:1px solid var(--calcite-color-border-3)}.item-browser-card:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.item-browser-card--loaded{opacity:1}.item-browser-card--selected{border-color:var(--calcite-color-brand)}.item-browser-card--hoverable{cursor:pointer}.item-browser-card__top{padding:1rem}.item-browser-card__hover-text{position:absolute;inset:0px;display:flex;align-items:center;justify-content:center;text-align:center;font-size:1rem;font-weight:500;opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:rgba(21, 21, 21, 0.7);color:white}.item-browser-card__upper{flex:1 1 0%;background-color:var(--calcite-color-foreground-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.item-browser-card__upper:hover{background-color:var(--calcite-color-background)}.item-browser-card__upper:hover .item-browser-card__hover-text,.item-browser-card:focus .item-browser-card__hover-text{opacity:1}.item-browser-card__upper--link{color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent}.item-browser-card__upper--link:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:2px}.item-browser-card__title__span{position:relative;display:inline;border-style:none;background-color:transparent;padding:0px;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-image:linear-gradient(transparent, transparent);background-position-x:0%, 100%;background-position-y:min(1.25em, 100%);background-repeat:no-repeat, no-repeat;background-size:100% 1px, 100% 1px}.item-browser-card--previewed .item-browser-card__title__span,.item-browser-card__upper--link:hover .item-browser-card__title__span{background-image:linear-gradient(var(--calcite-color-text-3), var(--calcite-color-text-3))}.item-browser-card--previewed{outline:1px solid var(--calcite-color-brand);outline-offset:-2px}.item-card__preview-button{margin-inline-end:0.5rem}.item-browser-card--previewed .item-browser-card__top{background-color:var(--calcite-color-background)}.item-browser-card__content{display:flex;min-width:0px;flex:1 1 0%;flex-direction:column}.item-browser-card__details{margin-top:0.25rem;display:flex;flex-direction:row}.item-browser-card__detail{font-size:0.875rem;color:var(--calcite-color-text-2)}.item-browser-card__calendar-icon{color:var(--calcite-color-text-3);margin-inline-end:0.5rem}.item-browser-card__footer{margin-top:auto;display:flex;align-items:center;background-color:var(--calcite-color-foreground-1);padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;border-top:1px solid var(--calcite-color-border-3)}.item-browser-card__footer__start{display:flex;min-width:0px;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-between;overflow:hidden;margin-inline-end:0.75rem}.item-browser-card__footer__start--owner{margin-inline-start:-0.25rem}.item-browser-card__footer-divider{border-right:1px solid var(--calcite-color-border-input);margin-inline-start:0.75rem;margin-inline-end:0.5rem;display:inline-block;height:1.5rem;width:0px}.item-browser-card__footer-divider--list{margin-left:1rem;margin-right:1rem}.item-browser-card__profile-wrap{box-sizing:border-box;max-width:100%;padding:0.25rem}.item-browser-card__summary{margin:0px;padding:0px;font-size:0.875rem;color:var(--calcite-color-text-2);word-wrap:break-word;word-break:break-word}.item-browser-card__divider{display:flex;align-items:center;flex:0 0 auto}.item-browser-card__divider:not([empty]):before{content:"";height:1.25rem;width:1px;background-color:var(--calcite-color-border-1);margin-inline:0.75rem}.item-browser-card-item-type{min-width:0px;flex:unset}.item-browser-card__divider:first-child:before{display:none}.item-browser-card-flex{display:flex}.item-browser-card-flex-1{min-width:0px;flex:1 1 0%}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.item-browser-card__input{margin-inline-end:1rem;margin-top:0.125rem}.item-browser-card__input--end{margin-inline-end:0px;margin-inline-start:1rem}.item-browser-card__title{margin-top:0px;margin-bottom:0px;overflow-wrap:break-word;padding-top:0px;padding-bottom:0px;font-size:1.125rem;font-weight:500;line-height:1.375}.item-browser-card__title--grid{font-size:1rem}.item-browser-card__title--padded{margin-bottom:0.5rem}.item-browser-card__snippet{margin:0px;margin-bottom:0.75rem;flex:1 1 0%;padding:0px;font-size:0.875rem}.item-browser-card__badges--stacked{margin-top:0.5rem}.item-browser-card__thumbnail{margin:0px;box-sizing:content-box;width:8rem;padding:0px;padding-inline-start:2rem;flex:0 0 auto}.item-browser-card__thumbnail--grid{position:relative;margin:0px;width:100%;padding:0px;border-bottom:1px solid var(--calcite-color-foreground-2)}.item-browser-card__owner{min-width:0px}.item-browser-card__access-wrap{display:flex;align-items:center}.item-browser-card--panel{margin-bottom:0px;cursor:pointer;display:block;width:100%}.item-browser-card--xs .item-browser-card__top,.item-browser-card--xxs .item-browser-card__top{padding:0.75rem}.item-browser-card--xs .item-browser-card__title--padded,.item-browser-card--xxs .item-browser-card__title--padded{margin-bottom:0.25rem}.item-browser-card--xs .item-browser-card__footer,.item-browser-card--xxs .item-browser-card__footer{padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.75rem;padding-right:0.75rem}.item-browser-card--xs .item-browser-card__detail,.item-browser-card--xxs .item-browser-card__detail{font-size:0.75rem}.item-browser-card--xs .item-browser-card__title,.item-browser-card--xxs .item-browser-card__title{font-size:0.875rem}.item-browser-card--xxs .item-browser-card__title{font-size:0.75rem}.item-browser-card--xxs .item-browser-card__thumbnail{padding-inline-start:0.75rem;width:55px}.item-browser-card--xxs .item-browser-card__footer__start{margin-inline-end:0.5rem}.item-browser-card--xs .item-browser-card__thumbnail{width:5rem;padding-inline-start:0.5rem}';const A=({portal:e,selectedGroupData:t,user:i})=>!E(e)||function(e){return(e.privileges||[]).includes("portal:user:shareToGroup")}(i)||(0,y.s)(i)&&((e,t)=>{const{username:i,orgId:r}=e;return t.every((({group:e})=>{const t=i===(null==e?void 0:e.owner),a=r===e.orgId;return t||a}))})(i,t),E=e=>!(!e.urlKey||!e.customBaseUrl)||e.isPortal;const F=({item:e,groupData:t})=>t.reduce(((t,i)=>t||!!i.selectedByItemIds&&i.selectedByItemIds.includes(e.id)),!1),$=(e,t,i,r)=>!E(r)&&!(0,y.r)(e)&&(({items:e,groupData:t})=>e.filter((e=>{const t=e.access;return"private"===t||"shared"===t})).reduce(((e,i)=>e||F({item:i,groupData:t})),!1))({items:t,groupData:i}),j=({shareMode:e,currentUsername:t,user:i,userGroupLookup:r,isPrivate:a})=>{var o;let s,n=[];if(r){let s=[];"admin"===e&&(null===(o=r[t])||void 0===o?void 0:o.length)&&t!==i.username&&(s=[...r[t]]),"admin"===e&&a||r[i.username].forEach((e=>{s.some((t=>t.id===e.id))||s.push(e)})),null==s||s.forEach((e=>{var t;const i=null===(t=e.userMembership)||void 0===t?void 0:t.memberType;!e.isViewOnly||"owner"!==i&&"admin"!==i||n.push(e.id)}))}n.length&&(s=`(isviewonly:false OR id:(${n.join(" OR ")}))`);const l=n.length?` OR id:(${n.join(" OR ")})`:"";switch(e){case"default":return s||`(owner:${t} OR isviewonly:false)`;case"group":return`owner:${t} -capabilities:updateitemcontrol`;case"admin":return i.username===t?`(isviewonly:false${l} OR owner:${i.username}) -capabilities:updateitemcontrol`:`(owner:${t} OR isviewonly:false${l})`;default:return""}},M={needEditableLayers:[],needPubliclyEditableLayers:[],needDataCollectionLayers:[],needsShareLevelUpdateLayers:[],premiumLayers:[],notEditableLayers:[],needAuthentication:[]},R=["private","org","public"],N="share-confirmation-header",H=({items:e,portal:t,shareLevel:i,user:r,subscriptionInfo:a})=>{var o;if("private"===i)return!0;const s=W(r,e),n=K(r,e),l=(0,y.e)(r)&&!(0,y.g)(r)&&n,c=(0,y.e)(r)&&(0,y.g)(r)&&n,p=(0,y.b)(r);if("org"===i)return!p&&((0,y.r)(r)&&(s||l)||(0,y.t)(r)&&(l||c));if("public"===i){if((0,y.u)(a)||(0,y.v)(a)&&e.some((e=>(0,_.i)(e.typeKeywords,e.type))))return!1;const i=(0,y.z)((null==t?void 0:t.subscriptionInfo)||(null===(o=null==t?void 0:t.sourceJSON)||void 0===o?void 0:o.subscriptionInfo));if(1===e.length&&((0,d.b)(e[0],t.isPortal)||i&&(0,d.c)(e[0])))return!1;const n=t.canSharePublic;return p||(0,y.w)(r)&&(s&&n||l)||(0,y.x)(r)&&(l||c)}},W=(e,t)=>t.every((t=>(0,n.i)(t,e))),K=(e,t)=>{const i=null==e?void 0:e.orgId;return t.every((t=>{var r,a;return(0,n.i)(t,e)||t.orgId===i||(null===(r=t.sourceJSON)||void 0===r?void 0:r.orgId)===i||(null===(a=t.portal)||void 0===a?void 0:a.id)===i||t.isOrgItem}))},V=(e,t)=>e.length!==t.length||t.some((t=>{const i=e.find((e=>e.group.id===t.group.id));return!i||!(0,s.g)(i.selectedByItemIds,t.selectedByItemIds)})),q=class{constructor(e){(0,r.r)(this,e),this.workflowCancel=(0,r.c)(this,"workflowCancel",7),this.workflowComplete=(0,r.c)(this,"workflowComplete",7),this.initialShareLevels=[],this.initialSelectedGroupData=[],this.initialSelectedGroupDataLookup={},this.showOptions=!1,this.shareLevelOptions=["private","org","public"],this.possibleShareLevelOptions=["private","org","public"],this.shareLevelIcon={private:"user",org:"organization",public:"globe"},this.isPublicUser=!1,this.hasItemBlockedFromPublicOrPublicDev=!1,this.hasItemBlockedFromPublic=!1,this.hasPrivateItem=!1,this.shareMode="default",this.hasIndoorsSpaces=!1,this.sharingDetailToEmit=null,this.didUpdateSharingDetail=!1,this.shareItemResult=null,this.handleNewShareResult=async()=>{const{portal:e,shareItemResult:{newItems:t},api:i}=this,r=(await Promise.all(t.map((t=>(0,d.a)(t,e,void 0,{clearDataCacheOnDone:!0,apiVersion:i}))))).reduce(((e,{result:t})=>(t&&Object.keys(t).forEach((i=>{e[i]=[...e[i],...t[i]]})),e)),Object.assign({},M));this.sharingDetail=r},this.updateSharing=async()=>{var e,t;this.loadingText=this.i18n.updatingInfo,this.isLoading=!0;const{items:i,selectedShareLevels:r,initialSelectedGroupData:a,selectedGroupData:o,portal:n,user:l,isShareLevelDirty:c,checkItemPDCIssue:p,confirmedPDC:h}=this,{shareGroupIds:u,unshareGroupIds:g}=((e,t)=>{const i=e.filter((e=>!t.some((t=>t.group.id===e.group.id)))),r=t.filter((t=>{const i=e.find((e=>e.group.id===t.group.id));return!i||i.selectedByItemIds.length<t.selectedByItemIds.length}));return{unshareGroupIds:i.map((e=>e.group.id)),shareGroupIds:r.map((e=>e.group.id))}})(a,o);if(!h&&!await p())return;const m=c||1===i.length?r[0]:null,v=g.length?(0,d.u)(i.map((e=>e.id)),g,{portal:n,user:l}):void 0,b=u.length||c?(0,d.e)(i,m,u,{portal:n,user:l}):void 0,[f]=await Promise.all([b,v]),w=u.filter((e=>!(null==f?void 0:f.result.some((({notSharedWith:t})=>t.includes(e))))));let y=[...i];null!=m&&(y=i.map((e=>{if("private"!==m)return Object.assign(Object.assign({},e),{access:m});const t=null==o?void 0:o.some((({selectedByItemIds:t})=>t.includes(e.id)));return Object.assign(Object.assign({},e),{access:t?"shared":"private"})}))),(null==o?void 0:o.length)||(y=y.map((e=>"shared"===e.access?Object.assign(Object.assign({},e),{access:"private"}):e))),w.length&&(y=y.map((e=>"private"===e.access?Object.assign(Object.assign({},e),{access:"shared"}):e)));const _={newGroupShared:w,newGroupUnshared:g,newShareLevel:m,newItems:y,shareErrors:(null==f?void 0:f.error)?[{item:i[0],code:"unhandledError"}]:null!==(t=null===(e=null==f?void 0:f.result)||void 0===e?void 0:e.filter((({error:e})=>e)).map((({itemId:e})=>({item:i.find((t=>t.id===e)),code:"notSharedWith"}))))&&void 0!==t?t:[]};this.shareItemResult=_,this.items=y,await(0,s.t)(500),this.handleNewShareResult()},this.checkItemPDCIssue=async()=>{const{items:e,portal:t,isShareLevelDirty:i,selectedShareLevels:r}=this,a=e.filter((e=>(0,_.i)(e.typeKeywords,e.type))),o=i&&"public"===r[0];if(a.length>0&&o){this.isLoading=!0;const e=await Promise.all(a.map((e=>(0,x.i)(e,t))));this.isLoading=!1;const i=a.filter(((t,i)=>e[i]));if(i.length){const e=!i.every((e=>e.typeKeywords.includes("Public Data Collection")));return this.confirmationDialogType=e?"publicDataCollectionDisabled":"publicDataCollectionEnabled",!1}}return!0},this.handleNewPendingSelectedGroups=(e,t=!1)=>{const{items:i,pendingGroupBrowserData:r,selectedGroupData:a}=this,o=(0,s.a)(t?a:r.groupData,(e=>({key:e.group.id,data:e}))),n=i.map((e=>e.id)),l=e.map((e=>{const t=o[e.id];return t||{group:e,selectedByItemIds:n}}));this.pendingGroupBrowserData={groupData:l,groupDataLookup:(0,s.a)(l,(e=>({key:e.group.id,data:!0}))),groupCount:l.reduce(((e,t)=>(e[t.group.id]=t.selectedByItemIds.length,e)),{}),isDirty:V(l,a)}},this.revertShareLevel=()=>{this.selectedShareLevels=[...this.initialShareLevels]},this.setShareLevel=e=>{this.selectedShareLevels=this.selectedShareLevels.map((()=>e))},this.revertGroupData=()=>{this.selectedGroupData=[...this.initialSelectedGroupData]},this.revertPendingGroupData=e=>{const{initialSelectedGroupData:t,pendingGroupBrowserData:i,handleNewPendingSelectedGroups:r}=this,a=t.find((({group:t})=>t.id===e)),o=i.groupData,s=o.find((({group:t})=>t.id===e));let n=[];n=a?s?o.map((t=>t.group.id!==e?t:a)):[...o,a]:o.filter((({group:t})=>t.id!==e)),r(n.map((({group:e})=>e)),!0)},this.applyPendingGroupData=()=>{this.selectedGroupData=[...this.pendingGroupBrowserData.groupData],this.unBrowseGroups()},this.closeDialog=e=>{var t,i;null==e||e.stopPropagation();const{workflowCancel:r,currentStep:a}=this;"finish"!==a&&r.emit({newShareLevel:null!==(i=null===(t=this.shareItemResult)||void 0===t?void 0:t.newShareLevel)&&void 0!==i?i:null,cancelAtStep:a})},this.unBrowseGroups=()=>{this.isBrowsingGroups=!1},this.setGroupBrowserSearchUsername=e=>{this.groupBrowserSearchUsername=e},this.renderGroupBrowser=()=>{const{api:e,i18n:t,user:i,portal:a,config:o,pendingGroupBrowserData:s,browserPagination:n,browserGroups:l,handleNewPendingSelectedGroups:c,isBrowsingGroups:d,isPublicUser:p,items:h,shareMode:u,groupBrowserQ:g,initialSelectedGroupDataLookup:m,revertPendingGroupData:v,hasIndoorsSpaces:b,groupBrowserAllUsers:f,groupBrowserSearchUsername:w,hasPrivateItem:y}=this,_=h.length,x="admin"===u&&!y&&f.length>1;return(0,r.h)("arcgis-group-browser",{view:"compact",class:{hidden:!d},config:o,user:i,api:e,portal:a,selection:"multiple",searchUser:w,selectedGroups:s.groupData.map((e=>e.group)),hasIndoorsSpaces:b,q:g,onArcgisGroupBrowserUpdate:e=>{const{results:t,num:i,start:r,total:a}=e.detail;this.browserGroups=t,this.browserPagination={start:r,num:i,total:a}},onArcgisGroupBrowserLoading:()=>{this.browserGroups=[]},onArcgisGroupBrowserSelect:e=>c(e.detail)},(0,r.h)("arcgis-group-browser-top-bar",{slot:"top-bar","filter-toggle":!0},(0,r.h)("arcgis-group-browser-search",{slot:"search",term:""})),(0,r.h)("arcgis-group-browser-sort",{slot:"sort"}),(0,r.h)("arcgis-group-browser-filters",{slot:"filters"},x&&(0,r.h)("arcgis-group-browser-filter-groups-by-user",{searchUsernames:f.map((e=>e.username)),searchUsername:w,onArcgisGroupBrowserUsernamesFilter:e=>{this.setGroupBrowserSearchUsername(e.detail)}}),(0,r.h)("arcgis-group-browser-filter-owner",{searchUsername:w}),!p&&(0,r.h)(r.F,null,(0,r.h)("arcgis-group-browser-filter-membership",null),(0,r.h)("arcgis-group-browser-filter-member-org",null),(0,r.h)("arcgis-group-browser-filter-special-groups",null)),(0,r.h)("arcgis-group-browser-filter-date",{property:"modified"}),(0,r.h)("arcgis-group-browser-filter-date",{property:"created"})),(0,r.h)("arcgis-group-browser-content",{slot:"content",class:"js-content"},(l||[]).map((e=>{const o=e.id;return(0,r.h)("arcgis-item-share-group-card",{key:o,user:i,portal:a,i18n:t,group:e,groupCount:s.groupCount,initialSelectedGroupDataLookup:m,selectedGroupDataLookup:s.groupDataLookup,totalItemCount:_,onRevertClick:()=>{v(o)}})}))),(0,r.h)("arcgis-group-browser-pagination",{slot:"pagination",class:"js-pagination",total:null==n?void 0:n.total,start:null==n?void 0:n.start,num:null==n?void 0:n.num}))},this.renderShareSelectGroup=()=>{const{config:e,hasItemBlockedFromPublicOrPublicDev:t,hasSingleShareLevel:i,i18n:a,initialSelectedGroupData:o,isBrowsingGroups:n,isLoading:l,isPublicUser:c,isShareLevelDirty:d,items:p,loadingText:h,portal:u,possibleShareLevelOptions:g,revertGroupData:m,revertShareLevel:v,selectedGroupData:b,selectedShareLevels:f,setShareLevel:w,shareLevelCount:_,shareLevelIcon:x,shareLevelOptions:k,shareMode:S,showOptions:C,user:I,hasPrivateItem:D}=this,G=p.length,L=G.toString(),P=t?a.sharingLimitedItemDisclaimer:a.cannotShareToLevelDisclaimer;return(0,r.h)("div",{class:{hidden:n}},l&&(0,r.h)("arcgis-new-item-loader",{active:l,text:h}),(0,r.h)("div",{class:"section"},(0,r.h)("arcgis-new-item-description",{header:a.shareLevel.title,headerSideContent:d&&(0,r.h)("calcite-button",{appearance:"transparent",iconStart:"reset",disabled:l,onClick:()=>{$(I,p,b,u)?this.confirmationDialogType="publicAccountRevertShareLevel":v()}},a.revert)}),(0,r.h)("div",{class:"content-container"},(0,r.h)("calcite-tile-select-group",{layout:"vertical",class:"tile-select"},C&&R.map((e=>{const t=!g.includes(e);if(t&&c)return null;const o=_[e]+("private"===e?_.shared:0),s=o>0,n=o.toString(),d=a.shareLevel.level[e].title,p=`share-level-${e}`;return(0,r.h)("div",{class:"tile-select-wrapper",key:e},t&&(0,r.h)("calcite-tooltip",{referenceElement:p},(0,r.h)("span",{class:"tooltip-container"},P)),(0,r.h)("calcite-tile-select",{id:p,checked:i&&s,heading:d,"aria-label":t?P:void 0,description:a.shareLevel.level[e][c&&"public"===e?"descriptionPublicUser":"description"],name:"dev-cred-create-mode",inputEnabled:!0,width:"full",type:"radio",value:e,icon:x[e],disabled:l||t,class:{"active-but-not-selected":s&&!i},onCalciteTileSelectChange:e=>{const t=e.currentTarget.value;u.isPortal||!((e,t,i,r)=>!E(r)&&!(0,y.r)(e)&&"private"===t&&Object.keys(i).length>0)(I,t,b,u)?w(t):this.confirmationDialogType="publicAccountSetShareToPrivate"}}),!i&&s&&(0,r.h)("div",{class:"share-hint"},(0,r.h)("arcgis-information",{label:a.shareCountLabel,paddedContent:!0,placement:"bottom-end",overlayPositioning:"fixed"},a.shareCountTooltip.replace("${shareLevel}",d).replace("${numItem}",n).replace("${totalItem}",L)),(0,r.h)("p",null,a.shareCountHint.replace("${numItem}",n).replace("${totalItem}",L))))}))),C&&g.length<k.length&&!this.hasItemBlockedFromPublic&&!c&&(0,r.h)("p",{class:"information-text"},a.sharingLimitedDisclaimer),(!C||!g.length)&&(0,r.h)("p",{class:"information-text"},a.noShareDisclaimer))),(0,r.h)("div",{class:"section"},(0,r.h)("arcgis-item-share-group",{items:p,user:I,portal:u,config:e,shareMode:S,i18n:a.shareGroup,isLoading:l,onEditGroupClick:()=>{((e,t,i)=>!E(i)&&!(0,y.q)(e)&&t.some((e=>"private"===e)))(I,f,u)?this.confirmationDialogType="publicAccountOpenGroupBrowser":this.isBrowsingGroups=!0},onAnalyzeUserGroupComplete:e=>{const{initialSelectedGroups:t,userGroupLookup:i,allUsers:r,searchUsername:a}=e.detail;this.initialSelectedGroupData=t,this.selectedGroupData=t,this.initialSelectedGroupDataLookup=(0,s.a)(t,(({group:e,selectedByItemIds:t})=>({key:e.id,data:0===t.length?"none":t.length===G?"all":"indeterminate"}))),this.setGroupBrowserSearchUsername(a),this.groupBrowserAllUsers=r,this.groupBrowserQ=j({shareMode:S,currentUsername:a,user:I,userGroupLookup:i,isPrivate:D})},onDirtyChange:e=>this.isSelectedGroupsDirty=e.detail,onRemoveClick:()=>this.selectedGroupData=[],onRevertClick:()=>{((e,t,i)=>(0,y.b)(e)&&t.some((e=>"private"===e))&&i.length>0)(I,f,o)?this.confirmationDialogType="publicAccountRevertGroup":m()},selectedGroupData:b})))},this.renderShareModal=()=>{const{closeDialog:e,i18n:t,isLoading:i,updateSharing:a,isShareLevelDirty:o,isSelectedGroupsDirty:s,isBrowsingGroups:n,applyPendingGroupData:l,unBrowseGroups:c,renderShareSelectGroup:d,renderGroupBrowser:p,currentStep:h,hasSharingIssue:u,pendingGroupBrowserData:g}=this,m=o||s;return("share"===h||null===u)&&(0,r.h)("calcite-dialog",{onCalciteDialogClose:e,modal:!0,open:!0,width:n?"m":"s",class:{"group-browser-dialog":n},outsideCloseDisabled:!0,heading:t[n?"titleGroup":"title"]},(0,r.h)("div",{class:"stage"},p(),d()),n?(0,r.h)(r.F,null,(0,r.h)("calcite-button",{slot:"footer-end",appearance:"outline",kind:"brand","data-id":"cancelButton",onClick:c},t.cancel),g.isDirty&&(0,r.h)("calcite-button",{slot:"footer-end",appearance:"solid",kind:"brand",onClick:l},t.apply)):(0,r.h)(r.F,null,(0,r.h)("calcite-button",{slot:"footer-end",appearance:"outline",kind:"brand","data-id":"cancelButton",onClick:()=>e()},t.cancel),m&&(0,r.h)("calcite-button",{slot:"footer-end",appearance:"solid",kind:"brand","data-id":"nextButton",onClick:a,disabled:i},t.save)))},this.renderDepCheckModal=()=>{const{api:e,config:t,portal:i,user:a,items:o,closeDialog:s,hasSharingIssue:n,sharingDetail:l}=this;return n&&(0,r.h)("arcgis-dependency-check",{api:e,items:o.map((e=>({item:e}))),portal:i,user:a,config:t,isActive:!0,preProcessedSharingDetail:l,showPostShare:!0,onWorkflowCancel:s,onWorkflowComplete:e=>{e.stopPropagation(),this.didUpdateSharingDetail=!0,this.sharingDetailToEmit=Object.assign({},l),this.sharingDetail=Object.assign({},M)}})},this.renderConfirmationDialog=()=>{const{confirmationDialogType:e}=this;if(!e)return null;const{i18n:t,isLoading:i,revertShareLevel:a,setShareLevel:o,revertGroupData:s}=this,{title:n,description:l}=t.shareWarning[e],c="publicDataCollectionDisabled"===e;return(0,r.h)("calcite-dialog",{onCalciteDialogClose:e=>{e.stopPropagation(),this.confirmationDialogType=null},open:!!this.confirmationDialogType,width:"s",outsideCloseDisabled:!0,escapeDisabled:!0,modal:!0,heading:n,"data-testid":N},(0,r.h)("div",null,l),(0,r.h)("calcite-button",{slot:"footer-end",appearance:c?"solid":"outline",kind:"brand","data-id":"cancelButton",onClick:()=>this.confirmationDialogType=null},t[c?"ok":"cancel"]),!c&&(0,r.h)("calcite-button",{slot:"footer-end",appearance:"solid",kind:"brand","data-id":"nextButton",onClick:()=>{switch(e){case"publicAccountOpenGroupBrowser":o("public"),this.isBrowsingGroups=!0;break;case"publicAccountSetShareToPrivate":o("private"),this.selectedGroupData=[];break;case"publicAccountRevertShareLevel":a(),this.selectedGroupData=[];break;case"publicAccountRevertGroup":o("public"),s();break;case"publicDataCollectionEnabled":this.confirmedPDC=!0,this.updateSharing()}this.confirmationDialogType=null},disabled:i},t.update))},this.api=4,this.user=void 0,this.portal=void 0,this.config=void 0,this.items=void 0,this.hasTrustedOrgs=!1,this.isLoading=void 0,this.selectedShareLevels=[],this.isShareLevelDirty=!1,this.shareLevelCount={private:0,shared:0,org:0,public:0},this.hasSingleShareLevel=!1,this.selectedGroupData=[],this.isSelectedGroupsDirty=!1,this.loadingText=null,this.isBrowsingGroups=!1,this.confirmationDialogType=null,this.confirmedPDC=!1,this.browserPagination=void 0,this.browserGroups=[],this.pendingGroupBrowserData={groupData:[],groupDataLookup:{},groupCount:{},isDirty:!1},this.groupBrowserQ="",this.groupBrowserSearchUsername="",this.groupBrowserAllUsers=[],this.currentStep="share",this.sharingDetail=null,this.hasSharingIssue=null}handleIsBrowsingGroupsChange(){this.isBrowsingGroups&&this.handleNewPendingSelectedGroups(this.selectedGroupData.map((({group:e})=>e)),!0)}handleShareLevelChange(){const{selectedShareLevels:e,initialShareLevels:t,selectedGroupData:i,items:r}=this;this.isShareLevelDirty=((e,t,i,r)=>e.some(((e,a)=>{const o=t[a];if("shared"===o&&"private"===e){const e=i[a];return!r.some((t=>t.selectedByItemIds.includes(e.id)))}return o!==e})))(e,t,r,i),this.shareLevelCount=e.reduce(((e,t)=>(e[t]++,e)),{private:0,shared:0,org:0,public:0}),this.hasSingleShareLevel=e.every((t=>t===e[0]))}async componentWillLoad(){const{portal:e,user:t,el:i}=this,r=await(0,l.g)(i);this.i18n=r[0],this.loadingText=this.i18n.retrievingInfo;const o=this.items.map((e=>e.id)),{result:s,error:c}=await(0,a.c)(o,this.portal);this.items=s&&!c?s:this.items.map((e=>{var t;return null!==(t=e.sourceJSON)&&void 0!==t?t:e})),h.c.api=this.api,this.isPublicUser=(0,y.b)(t);const{items:p}=this;this.initialShareLevels=this.items.map((e=>e.access)),this.selectedShareLevels=[...this.initialShareLevels];const{result:u}=await(0,w.g)(e,t);this.possibleShareLevelOptions=(({items:e,portal:t,subscriptionInfo:i,user:r})=>{const a=(0,y.b)(r);let o=R;return a?o=["private","public"]:t.canSharePublic||(0,y.e)(r)||(o=["private","org"]),o=o.filter((a=>H({shareLevel:a,items:e,user:r,portal:t,subscriptionInfo:i}))),o})({user:t,items:p,portal:e,subscriptionInfo:u});const g=((e,t,i)=>{var r;const a=e[0];if((0,n.i)(a,t))return"default";const o=!a.orgId&&!(null===(r=a.sourceJSON)||void 0===r?void 0:r.orgId)||K(t,[a]);return(0,y.y)({items:e,user:t,portal:i})&&o?"admin":"group"})(p,t,e);this.showOptions="group"!==g,this.shareMode=g,this.hasPrivateItem=p.some((e=>"private"===e.access)),this.hasItemBlockedFromPublic=p.some((t=>(0,d.b)(t,e.isPortal))),this.hasItemBlockedFromPublicOrPublicDev=(0,y.f)(u)||this.hasItemBlockedFromPublic||(0,y.i)(u)&&p.some(d.c),this.hasIndoorsSpaces=p.some((e=>{var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("EditExtensionIndoorsSpaces")}))}handleSharingDetailChange(){const{sharingDetail:e}=this;this.hasSharingIssue=null!==e?Object.keys(e).some((t=>e[t].length>0)):null}handleHasSharingIssueChange(){const{hasSharingIssue:e}=this;e?this.currentStep="review-sharing":!1===e&&(this.currentStep="finish")}handleCurrentStepChange(){var e,t,i,r,a;const{currentStep:o,didUpdateSharingDetail:s,workflowComplete:n,sharingDetailToEmit:l,shareItemResult:c}=this;if("finish"!==o)return;const d=s;n.emit({dependentLayersWithSourceItems:d&&l?Object.values(l).reduce(((e,t)=>(e.push(...t.map((({layer:e,sourceItem:t})=>({layer:e,sourceItem:t})))),e)),[]):[],newShareLevel:null!==(e=null==c?void 0:c.newShareLevel)&&void 0!==e?e:null,newGroupShared:null!==(t=null==c?void 0:c.newGroupShared)&&void 0!==t?t:[],newGroupUnshared:null!==(i=null==c?void 0:c.newGroupUnshared)&&void 0!==i?i:[],newItems:null!==(r=null==c?void 0:c.newItems)&&void 0!==r?r:[],didUpdateDependentLayersSharing:d,shareErrors:null!==(a=null==c?void 0:c.shareErrors)&&void 0!==a?a:[]})}render(){const{renderShareModal:e,renderDepCheckModal:t,renderConfirmationDialog:i}=this;return(0,r.h)(r.F,{key:"a5d92a49ab02c2c8ca42c1d18d0fce83cd7eb714"},e(),t(),i())}get el(){return(0,r.d)(this)}static get watchers(){return{isBrowsingGroups:["handleIsBrowsingGroupsChange"],selectedShareLevels:["handleShareLevelChange"],sharingDetail:["handleSharingDetailChange"],hasSharingIssue:["handleHasSharingIssueChange"],currentStep:["handleCurrentStepChange"]}}};q.style=".stage{height:100%}.group-browser-dialog{--calcite-dialog-size-y:min(800px, 80vh);--calcite-dialog-size-x:1080px;--calcite-dialog-content-space:0}.hidden{display:none}.section:not(:last-child){margin-bottom:2rem}calcite-flow{height:100%}.content-container{margin-top:0.5rem}.active-but-not-selected{position:relative;z-index:2}.tile-select-wrapper{position:relative}.share-hint{display:flex;align-items:center;position:absolute;font-size:0.875rem;inset-inline-end:0.5rem;top:0.5rem;z-index:3}.share-hint>p{margin-bottom:0px;margin-inline-start:0.5rem;margin-top:2px}.information-text{margin-top:0px;margin-bottom:0px;margin-top:0.5rem;font-size:0.875rem}.group-item-counter{font-size:0.875rem;margin-top:0px;margin-bottom:0px}.revert-single-group-cta:first-child,.group-item-counter:first-child{margin-inline-start:0.5rem}";const J=async({user:e,portalUser:t,portal:i,shareMode:r,userGroupLookup:a,items:o})=>{var s;const n={q:j({shareMode:r,currentUsername:t.username,user:e,userGroupLookup:a,isPrivate:"private"===(null===(s=o[0])||void 0===s?void 0:s.access)}),num:100,searchUserAccess:"groupMember",searchUserName:e.username};try{const e=await Q(i,n);if(-1===e.nextStart)return{result:e.results};const t=Math.ceil(e.total/100)-1,r=[];for(let e=0;e<t;e++)r.push(new Promise((async t=>{const r=100*(e+1)+1;t((await Q(i,Object.assign(Object.assign({},n),{start:r}))).results)})));const a=(await Promise.all(r)).flat();return{result:[...e.results,...a]}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},Q=(e,t)=>(0,k.r)(`${(0,C.c)(e)}community/groups`,e,{body:t,usePost:!0}),Z=async({user:e,items:t,portal:i})=>{var r;if((0,n.c)(t,e)&&(0,y.y)({items:t,user:e,portal:i})&&(0,y.A)(e)){const e=t[0];return null!==(r=e.itemOwner)&&void 0!==r?r:await(0,S.f)(e.owner,i)}return e},Y=async({user:e,portal:t,shareMode:i,itemOwner:r})=>{const a=await Promise.all([(0,S.f)(e.username,t),"admin"===i&&r.username!==e.username?(0,S.f)(r.username,t):null]);return Object.assign({[e.username]:a[0].groups},!!a[1]&&{[r.username]:a[1].groups})},X=class{constructor(e){(0,r.r)(this,e),this.editGroupClick=(0,r.c)(this,"editGroupClick",7),this.dirtyChange=(0,r.c)(this,"dirtyChange",7),this.analyzeUserGroupComplete=(0,r.c)(this,"analyzeUserGroupComplete",7),this.removeClick=(0,r.c)(this,"removeClick",7),this.revertClick=(0,r.c)(this,"revertClick",7),this.hasGroups=!1,this.user=void 0,this.portal=void 0,this.config=void 0,this.items=void 0,this.shareMode=void 0,this.isLoading=void 0,this.i18n=void 0,this.selectedGroupData=[],this.initialSelectedGroups=[],this.canShareItemToGroup=!1,this.isDirty=!1,this.isSharingMixed=!1}handleSelectedGroupsChange(e){const{user:t,initialSelectedGroups:i,items:r,portal:a}=this;this.canShareItemToGroup=A({selectedGroupData:e,user:t,portal:a})&&!0,this.isDirty=V(e,i),this.isSharingMixed=((e,t)=>t.some((({selectedByItemIds:t})=>t.length!==e.length)))(r,e),this.dirtyChange.emit(this.isDirty)}async componentDidLoad(){const{user:e,portal:t,items:i,shareMode:r}=this;this.isLoading=!0;const{result:a}=await(async({items:e,portal:t,shareMode:i,user:r})=>{try{const a=await Z({user:r,items:e,portal:t}),o=r.username===a.username?[r]:[r,a],s=await Y({portal:t,user:r,shareMode:i,itemOwner:a}),n=(await Promise.all(o.map((a=>J({user:a,portalUser:r,portal:t,shareMode:i,userGroupLookup:s,items:e}))))).flatMap((e=>e.result)),l=n.map((({id:e})=>e));return{result:{uniqueGroups:n.filter(((e,t)=>l.indexOf(e.id)===t)),userGroupLookup:s,allUsers:o,searchUsername:r.username===a.username?r.username:a.username}}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})({user:e,portal:t,items:i,shareMode:r}),{uniqueGroups:n,userGroupLookup:l,searchUsername:c,allUsers:d}=a,{result:p}=await(async(e,t,i)=>{try{const r=await Promise.all((0,s.h)(t,100).map((async t=>(0,o.r)(`${(0,C.g)(i)}/content/itemsgroups`,{items:e.join(","),groups:t.join(",")})))),a={};return r.forEach((e=>{Object.keys(e).forEach((t=>{const i=e[t];a[t]?a[t].items=[...a[t].items,...i.items]:a[t]=i}))})),{result:a}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(i.map((e=>e.id)),n.map((e=>e.id)),t),h=n.filter((({id:e})=>!!p[e])).map((e=>({group:e,selectedByItemIds:i.filter((({id:t})=>!!p[e.id].items.find((e=>e.itemId===t)))).map((e=>e.id))})));this.hasGroups=n.length>0,this.canShareItemToGroup=A({selectedGroupData:h,user:e,portal:t}),this.initialSelectedGroups=h,this.isLoading=!1,this.analyzeUserGroupComplete.emit({allUsers:d,initialSelectedGroups:h,userGroupLookup:l,searchUsername:c})}render(){const{i18n:e,isLoading:t,canShareItemToGroup:i,removeClick:a,revertClick:o,selectedGroupData:s,hasGroups:n,isDirty:l,isSharingMixed:c}=this;return(0,r.h)(r.H,{key:"3276ef8d4b8dcaa56969dc81f667569b5786eb30"},(0,r.h)("arcgis-new-item-description",{key:"e09a0262d7a02dc0fe60070a8ae996c6ba4ebe97",header:e.title,headerSideContent:l?(0,r.h)("calcite-button",{appearance:"transparent",iconStart:"reset",disabled:t,onClick:()=>o.emit()},e.revert):s.length>0&&(0,r.h)("calcite-button",{appearance:"transparent",iconStart:"x",disabled:t,onClick:()=>a.emit()},e.remove)}),(0,r.h)("div",{key:"fd79c21771d6e1a4552c4c62eb313cea3e64e213",class:"content"},(0,r.h)("div",{key:"9c96382fcdf50fb09304e699e0dab209e587349c",class:"group-container"},s.length>0?(0,r.h)("arcgis-group-thumbnail-stack",{groups:s.map((({group:e})=>e))}):(0,r.h)("p",{class:"information-text"},e[n?"noneYet":"noGroup"])),n&&i&&(0,r.h)("calcite-button",{key:"a8599b7aaa2711d745cd5f5fac0e97347cff2828",iconStart:"group",appearance:"outline-fill",disabled:t,onClick:()=>this.editGroupClick.emit()},e.edit)),!t&&c&&(0,r.h)("p",{key:"8e57eb2cde71eb7be9f673019e15dbf60779797e",class:"information-text text-padding"},e.mixedGroupSharing))}get el(){return(0,r.d)(this)}static get watchers(){return{selectedGroupData:["handleSelectedGroupsChange"]}}};X.style=".content{display:flex;align-items:center;justify-content:space-between;margin-top:1rem}.information-text{font-size:0.875rem;margin-top:0px;margin-bottom:0px}.text-padding{margin-top:0.5rem}";const ee=class{constructor(e){(0,r.r)(this,e),this.revertClick=(0,r.c)(this,"revertClick",7),this.user=void 0,this.portal=void 0,this.group=void 0,this.groupCount=void 0,this.initialSelectedGroupDataLookup=void 0,this.selectedGroupDataLookup=void 0,this.totalItemCount=void 0,this.i18n=void 0}render(){const{group:e,groupCount:t,totalItemCount:i,initialSelectedGroupDataLookup:a,selectedGroupDataLookup:o,revertClick:s,portal:n,user:l,i18n:c}=this,d=i.toString(),p=e.id,h=t[e.id];let u="none";switch(!0){case h<i:u="indeterminate";break;case h===i:u="all"}const g=a[p],m=(!!g||"none"!==u)&&g!==u;return(0,r.h)("arcgis-group-card",{group:e,portal:n,user:l,name:e.title,selected:!!o[p],indeterminate:"indeterminate"===u,selection:"multiple",preview:"action",view:"compact",showOwner:!0,showDateUpdated:!0,showSummary:!0,key:p},(0,r.h)("span",{key:"760857156f4063712422834c5ab3314d7712451b",slot:"content-end"},h&&h>0&&(0,r.h)("span",{key:"2f3456489153664fff4f35e620b8a95e176517fe",class:"group-item-counter"},c[m?"willShareCountHint":"sharedCountHint"].replace("${numItem}",h.toLocaleString()).replace("${totalItem}",d)),m&&(0,r.h)("calcite-button",{key:"17aeebf679d67f385b1db54169f1f537ef0af915",class:"revert-single-group-cta",appearance:"transparent",onClick:e=>{e.stopPropagation(),s.emit()}},c.revert)))}get el(){return(0,r.d)(this)}};ee.style=":host{display:contents}";const te=class{constructor(e){(0,r.r)(this,e),this.arcgisItemShareSummaryUpdate=(0,r.c)(this,"arcgisItemShareSummaryUpdate",7),this.loadGroupData=async()=>{var e;const t=await async function(e,t,i){var r,a,s;const n=`${(0,C.g)(t)}content/items/${e.id}`,l=`${(0,C.g)(t)}content/users/${e.owner}/${e.ownerFolder?`${e.ownerFolder}/`:""}items/${e.id}`;try{const c=await(0,o.r)(n);if("admin"!==c.itemControl&&"update"!==c.itemControl){const o=await(0,f.f)(t,i,[e]);return o.error?{result:[]}:{result:null!==(a=null===(r=null==o?void 0:o.result)||void 0===r?void 0:r[e.id])&&void 0!==a?a:[]}}const d=await(0,o.r)(l);return{result:((null===(s=null==d?void 0:d.sharing)||void 0===s?void 0:s.groups)||[]).filter((e=>i.some((t=>t.id===e))))}}catch(e){return{result:[]}}}(this.item,this.portal,this.userGroups),i=await async function(e,t){if(!(null==e?void 0:e.length))return{result:[]};try{const i=[],r=100,a=`${(0,C.g)(t)}community/groups`;return(0,s.h)(e,f.M).forEach((e=>{i.push((0,I.f)(a,{q:`id:(${e.join(" OR ")})`,num:r}))})),{result:(await Promise.all(i)).reduce(((e,t)=>[...e,...t]),[]).sort(((e,t)=>{var i;return null===(i=e.title)||void 0===i?void 0:i.localeCompare(t.title)}))}}catch(e){return{result:[]}}}((null===(e=null==t?void 0:t.result)||void 0===e?void 0:e.length)?t.result:this.groups,this.portal);this.groupData=i.result},this.handleShareComplete=async e=>{await(0,s.t)(300);const t=e.detail.newGroupUnshared,i=e.detail.newGroupShared,r=(this.groups||[]).concat((null==i?void 0:i.length)?i:[]).filter((e=>!(null==t?void 0:t.includes(e))));this.isSharing=!1;const{result:o}=await(0,a.l)(this.item.id,this.portal);o&&(this.item=o),this.groups=r,this.arcgisItemShareSummaryUpdate.emit({itemId:this.item.id,itemTitle:this.item.title,access:e.detail.newShareLevel,groups:r})},this.updateTooltipRef=()=>{this.tooltip&&(this.tooltip.referenceElement=this.wrapper)},this.item=void 0,this.portal=void 0,this.config=void 0,this.groups=void 0,this.userGroups=void 0,this.showText=!0,this.showHoverText=void 0,this.user=void 0,this.allowEdit=void 0,this.scale="m",this.isSharing=!1,this.sharingActive=!1,this.groupData=void 0}async setFocus(){var e;null===(e=this.wrapper)||void 0===e||e.focus()}async componentWillLoad(){const{el:e}=this,t=await(0,l.g)(e,"arcgis-item-share-summary");this.i18n=t[0];const i=await(0,l.g)(e,"arcgis-group-card");this.groupCardStrings=i[0]}getIcon(e){return{private:"user",shared:"user",org:"organization",public:"globe"}[e]||"globe"}getFormattedStrings(){const{item:e,i18n:t,groups:i}=this;if(!(null==i?void 0:i.length))return{tooltip:t[e.access],tooltipNoCount:t[e.access],access:t[e.access],groups:"shared"===e.access?t.shared:""};const r=`${(null==i?void 0:i.length)||0}`;return{access:"shared"===e.access?t.private:t[e.access],tooltipNoCount:t[`${e.access}Groups`].replace("(${num})",""),tooltip:t[`${e.access}Groups`].replace("${num}",r),groups:t.groups.replace("${num}",r)}}renderIcons(e,t){const{item:i,showText:a}=this;return(0,r.h)(r.F,null,(0,r.h)("calcite-icon",{class:"icon",icon:this.getIcon(i.access),scale:"s",key:"access"}),a&&(0,r.h)("span",{class:"text"},e),t&&(0,r.h)(r.F,null,(0,r.h)("calcite-icon",{class:"icon",icon:"plus",scale:"s"}),(0,r.h)("calcite-icon",{class:"icon",icon:"group",scale:"s"}),a&&(0,r.h)("span",{class:"text"},t)))}getAccessInfo(e){const t={public:this.groupCardStrings.everyone,private:this.groupCardStrings.groupMembers,org:this.groupCardStrings.organization};return t[e]||t.private}renderGroupData(){var e,t;const i=(null===(e=this.groupData)||void 0===e?void 0:e.length)||(null===(t=this.groups)||void 0===t?void 0:t.length)||0;return(0,r.h)(r.F,null,(0,r.h)("h4",{class:"tooltip__section-header"},this.i18n.groups.replace("${num}",`${i}`)),(0,r.h)("div",{class:"tooltip__section"},(0,r.h)("ul",{class:"tooltip__groups "},this.groupData.map((e=>(0,r.h)("li",{class:"tooltip__group"},(0,r.h)("arcgis-group-thumbnail",{group:e,key:e.id,class:"tooltip__group__avatar"}),(0,r.h)("div",{class:"tooltip__group__text"},(0,r.h)("h5",{class:"tooltip__group__title"},e.title),(0,r.h)("p",{class:"tooltip__group__description"},this.groupCardStrings.viewableBy.replace("${level}",this.getAccessInfo(e.access))))))))))}renderTooltip(){var e,t;const i=this.getFormattedStrings(),a=(null===(e=this.groupData)||void 0===e?void 0:e.length)?i.tooltipNoCount:i.tooltip;return(0,r.h)(r.F,null,(0,r.h)("h4",{class:"tooltip__section-header"},this.i18n.sharing),(0,r.h)("div",{class:"tooltip__section"},(0,r.h)("p",{class:"tooltip_status"},a)),(null===(t=this.groupData)||void 0===t?void 0:t.length)?this.renderGroupData():null)}render(){const{showText:e,showHoverText:t,allowEdit:i,isSharing:a,item:o,user:n,portal:l,config:c}=this,{access:d,groups:p}=this.getFormattedStrings();return(0,r.h)(r.H,{key:"3aba077db8cc4633f9ece42e009a75d5312d07d0"},i?(0,r.h)("button",{class:"wrapper wrapper--button",ref:e=>{this.wrapper=e,this.updateTooltipRef()},onClick:()=>{this.isSharing=!0}},this.renderIcons(d,p)):(0,r.h)("div",{class:"wrapper",ref:e=>{this.wrapper=e,this.updateTooltipRef()}},this.renderIcons(d,p)),(null!=t?t:!e)&&(0,r.h)("calcite-tooltip",{key:"c113cb66e9ffe7c61d23f846f5f74748ab10efb9",ref:e=>{this.tooltip=e,this.wrapper&&(e.referenceElement=this.wrapper)},closeOnClick:!0,placement:"bottom-start",offsetDistance:6,offsetSkidding:0,onCalciteTooltipBeforeOpen:()=>{var e,t;const i=null===(t=null===(e=this.tooltip)||void 0===e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector("div");i&&i.style.setProperty("--calcite-color-foreground-1","var(--calcite-color-background)"),this.loadGroupData()},style:{"--calcite-tooltip-z-index":"calc(var(--calcite-z-index-overlay) + 1)"}},(0,r.h)("div",{key:"a76bd094ff3411c6a97025572a1d7705d2fb74c4",class:"tooltip"},this.groupData?this.renderTooltip():(0,r.h)("calcite-loader",{label:"",scale:"s",style:{"--calcite-loader-padding":"2rem"}}))),a&&(0,r.h)("arcgis-tunnel",{key:"ade8601a194bad9f00932cfdaa0528e9f581eee0",reference:this.el},(0,r.h)("arcgis-item-share",{key:"13724930ab54fd6bf029b404333d0095bcbdd57c",items:[o],portal:l||h.c.portal,user:n,api:4,config:c||h.c.config,onWorkflowCancel:async e=>{var t;"share"!==(null===(t=e.detail)||void 0===t?void 0:t.cancelAtStep)&&this.handleShareComplete(e),await(0,s.t)(300),this.isSharing=!1},onWorkflowComplete:this.handleShareComplete})))}get el(){return(0,r.d)(this)}};te.style=":host{display:inline-flex;align-items:center;justify-content:center;min-width:var(--arcgis-item-share-summary-spacing)}:host([scale=s]){--arcgis-item-share-summary-text-size:0.75rem;--arcgis-item-share-summary-spacing:1rem;--arcgis-item-share-summary-padding:3px}:host([scale=s][show-text]){--arcgis-item-share-summary-padding:3px 8px}:host([scale=m]){--arcgis-item-share-summary-text-size:0.875rem;--arcgis-item-share-summary-spacing:1rem;--arcgis-item-share-summary-padding:7px}:host([scale=m][show-text]){--arcgis-item-share-summary-padding:7px 12px}:host([scale=l]){--arcgis-item-share-summary-text-size:1rem;--arcgis-item-share-summary-spacing:1rem;--arcgis-item-share-summary-padding:9px}:host([scale=l][show-text]){--arcgis-item-share-summary-padding:9px 16px}.wrapper{display:flex;align-items:center;background-color:var(--calcite-color-foreground-1);padding:var(--arcgis-item-share-summary-padding);border:1px solid var(--calcite-color-border-1);border-radius:calc(var(--arcgis-item-share-summary-spacing) + 0.5rem);font-size:var(--arcgis-item-share-summary-text-size)}.wrapper--button{cursor:pointer;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;font-family:inherit;line-height:1}.wrapper--button:hover{background-color:var(--calcite-color-foreground-2)}.wrapper--button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.icon{display:block;flex-shrink:0;flex-grow:0;width:var(--arcgis-item-share-summary-spacing);height:var(--arcgis-item-share-summary-spacing)}.text{font-weight:400;color:var(--calcite-color-text-1);font-size:var(--arcgis-item-share-summary-text-size);line-height:1;margin-inline-start:calc(var(--arcgis-item-share-summary-spacing) / 4)}.tooltip{margin:-1rem;width:18rem;padding-top:0.25rem;--calcite-color-foreground-1:var(--calcite-color-border-white)}.tooltip__section-header{margin:0px;background-color:var(--calcite-color-background);padding:0.75rem;font-size:0.875rem;font-weight:700;color:var(--calcite-color-text-2)}.tooltip__section{box-sizing:border-box;max-height:10rem;overflow:auto;background-color:var(--calcite-color-foreground-1);padding:0.75rem}.tooltip_status{margin:0px;padding:0px;font-size:0.875rem;color:var(--calcite-color-text-1)}.tooltip__groups{margin:0px;padding:0px}.tooltip__group{margin:0px;display:flex;align-items:center;padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0px;padding-right:0px}.tooltip__group__avatar{flex-shrink:0}.tooltip__group__text{margin-inline-start:0.75rem;min-width:0px;flex:1 1 auto}.tooltip__group__title{margin:0px;display:block;overflow-wrap:break-word;padding:0px;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-1);line-height:1.35}.tooltip__group__description{margin:0px;display:block;padding:0px;font-size:0.75rem;font-weight:400;color:var(--calcite-color-text-3);line-height:1.35}";const ie=class{constructor(e){(0,r.r)(this,e),this.geometry=void 0,this.type=void 0,this.scale=void 0,this.name=void 0,this.showName=!0,this.showIcon=!0,this.showType=!0,this.renderer=void 0}async componentWillLoad(){const e=await(0,l.g)(this.el);this.i18n=e[0]}render(){const{geometry:e,name:t,type:i,showName:a,showIcon:o,showType:s,renderer:n,i18n:l}=this,c=(0,D.g)({type:i,geometry:e});return n?n(Object.assign(Object.assign({},c),{name:t})):(0,r.h)(r.H,null,o&&(0,r.h)("calcite-icon",{icon:c.icon,class:"icon",scale:this.scale}),(s||a)&&(0,r.h)("div",{class:"text"},a&&(0,r.h)("div",{class:"name"},t),s&&(0,r.h)("div",{class:"type"},l[c.type])))}get el(){return(0,r.d)(this)}};ie.style=":host{display:flex;align-items:center;line-height:1.35;--sublayer-type-font-size:var(--calcite-font-size--1)}.text{flex:1 1 0%;margin-inline-start:0.5rem;color:inherit}.name{font-weight:500;word-wrap:break-word;word-break:break-word;font-size:var(--sublayer-type-font-size)}.type{font-weight:400;font-size:var(--sublayer-type-font-size)}"},63330:(e,t,i)=>{i.d(t,{A:()=>S,B:()=>A,a:()=>B,b:()=>f,c:()=>O,d:()=>h,e:()=>u,f:()=>_,g:()=>w,h:()=>g,i:()=>b,j:()=>x,k:()=>k,l:()=>D,m:()=>d,n:()=>G,o:()=>L,p:()=>p,q:()=>F,r:()=>U,s:()=>E,t:()=>P,u:()=>T,v:()=>j,w:()=>z,x:()=>$,y:()=>l,z:()=>C});var r=i(82297),a=i(44508),o=i(24211),s=i(4948),n=i(57159);async function l(){return new Promise((async e=>{const{portal:t}=s.c;if(null==t?void 0:t.isPortal){const i=t.helperServices.geocode,r=await function(e){const{config:t,portal:i}=s.c;return new Promise((async(r,a)=>{const o=e.filter((e=>c(e.url,i))).filter((e=>e.isEsriBatchGeocoder))[0];if(o){const e=o.url.split("/servers/")[1].split("/rest/services/")[0],i=`${t.restBaseUrl}/content/items/${e}`;try{r((await(0,n.r)(i)).url)}catch(e){a(e)}}else a("No world geocoder configured")}))}(i);e(r)}else{const i=function(e){const t=null==e?void 0:e.portalHostname;if(-1!==t.indexOf("dev"))return"dev";if(-1!==t.indexOf("qa"))return"qa";return""}(t);e(`https://geocode${i}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function c(e="",t){var i;const r=t.isPortal,a=e.toLowerCase(),o=a.indexOf("/geocodeserver")>-1&&a.indexOf("/rest/services/")>-1,s=r&&a.indexOf(null===(i=t.portalHostname)||void 0===i?void 0:i.toLowerCase())>-1,n=!r&&a.indexOf("utility")&&a.indexOf(".arcgis.com")>-1;return o&&(s||n)}function d(e){return(0,o.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function p(e){return(0,o.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function h(e,t){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,r.i)(t,e)}const u=e=>!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishServerServices"));async function g(e,t){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,r.i)(t,e)}const m=async(e,t)=>{var i;return await g(e,t)&&(!t.isPortal||!!t.supports3DTilesServices||!!(null===(i=t.sourceJSON)||void 0===i?void 0:i.supports3DTilesServices))};function v(e){return!(0,o.b)(e)&&!0}function b(e){var t;return!(0,o.b)(e)&&(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:publishScenes"))}const f=e=>!(0,o.b)(e);function w(e,t,i){var r,a;const o=!!(null===(a=null===(r=t.helperServices)||void 0===r?void 0:r.rasterAnalytics)||void 0===a?void 0:a.url),s=function(e,t,i){var r;return(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishDynamicImagery"))&&(t.isPortal||y(i))}(e,t,i),n=t.isPortal?s:s||function(e,t,i){var r;return(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishTiledImagery"))&&!t.isPortal&&y(i)}(e,t,i);return o&&n}function y(e){return null==e?void 0:e.some((e=>{var t;return null===(t=e.entitlements)||void 0===t?void 0:t.some((e=>"image"===e.toLowerCase()))}))}async function _(e){var t;const{userLicensedItems:i}=await(0,n.r)(`${null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl}/community/self?returnUserLicensedItems=true`);return i}function x(e,t){var i,r;const s=null===(i=t.helperServices)||void 0===i?void 0:i.geocode.some((({url:e})=>c(e,t))),n=null!==(r=null==e?void 0:e.privileges)&&void 0!==r?r:[];return!(0,o.b)(e)&&s&&(!t.isPortal||!(0,a.i)(t)&&n.includes("portal:user:viewOrgItems")&&n.includes("portal:user:createItem"))}const k=e=>!(0,o.b)(e);function S(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function C(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function I(e){return["portal:publisher:createDataPipelines","portal:user:createItem","portal:publisher:publishFeatures"].every((t=>{var i;return null===(i=e.privileges)||void 0===i?void 0:i.includes(t)}))}function D(e,t){var i,r,a;return t.isPortal?!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:registerDataStores")):I(e)&&("1"===(null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.level)||"2"===(null===(a=null==e?void 0:e.sourceJSON)||void 0===a?void 0:a.level))}const G=(e,t)=>!t.isPortal&&!(0,o.b)(e)&&I(e);function L(e){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const P=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function O(e,t,i){return!t.isPortal&&await h(e,t)&&await async function(e,t,i){return!(0,o.b)(e)&&!!t.supportsHostedServices&&d(e)&&(await g(e,t)||await h(e,t)||b(e)||v(e)||w(e,t,i))}(e,t,i)}async function B(e,t,i){switch(t){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return h(e,i);case"Tile Package":return g(e,i);case"3DTiles Package":return m(e,i);case"Vector Tile Package":return v(e);case"Scene Package":return b(e);case"Service Definition":return async function(e,t){return await h(e,t)&&await g(e,t)}(e,i);default:return!0}}function U(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageCredits"))}function T(e,t){var i,r,a;return(0,o.e)(e)||U(e)||!!((null!==(i=null==e?void 0:e.assignedCredits)&&void 0!==i?i:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.assignedCredits)>-1&&(null===(a=null==t?void 0:t.portalProperties)||void 0===a?void 0:a.showCreditsOnProfile))}const z=e=>!1;function A(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewGroups"))}function E(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewUsers"))}function F(e){return(0,o.d)(e)||E(e)&&function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewItems"))}(e)&&(function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:reassignItems"))}(e))}function $(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const j=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")},50544:(e,t,i)=>{i.d(t,{a:()=>s,g:()=>o});var r=i(18991),a=i(39489);function o(e){return(0,a.g)(e,"arcgis-group-browser")}const s=(0,r.c)({filters:{},type:"group-browser"}).state},96487:(e,t,i)=>{i.d(t,{a:()=>s,g:()=>n});var r=i(57159),a=i(44508),o=i(84873);const s=async e=>{try{return{result:await(0,r.r)(`${(0,a.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},n=async(e,t)=>await(0,r.f)((()=>s(e)),"subscriptionType",(0,o.g)(t))},84017:(e,t,i)=>{i.d(t,{a:()=>p,i:()=>d,r:()=>h});var r=i(26408),a=i(44508),o=i(57159);let s=[],n=[];const l=(0,r.d)((async(e,t)=>{var i;const r=[...s],l=[...n];s=[],n=[];const d=`(group:${c(t)} AND id:(${r.join(" OR ")}))`,p=await(0,o.r)(`${(0,a.g)(e)}search`,{num:100,q:d}),h=null===(i=null==p?void 0:p.results)||void 0===i?void 0:i.map((e=>e.id));l.forEach((({id:e,resolve:t})=>{t(h.includes(e))}))}),300);function c(e){var t,i;return null!==(t=e.favGroupId)&&void 0!==t?t:null===(i=e.sourceJSON)||void 0===i?void 0:i.favGroupId}async function d(e,t,i){if(!i)return!1;const r=new Promise((t=>{n.push({id:e,resolve:t})}));return s.includes(e)||s.push(e),l(t,i),r}function p(e){return u(e,!0)}function h(e){return u(e,!1)}function u({item:e,portal:t,user:i},r){const{access:s,id:n}=e,l=`${(0,a.g)(t)}content/items/${n}/${r?"share":"unshare"}`,d={everyone:"public"===s,org:"org"===s,groups:c(i),items:n};return(0,o.r)(l,d,{},"post")}}}]);