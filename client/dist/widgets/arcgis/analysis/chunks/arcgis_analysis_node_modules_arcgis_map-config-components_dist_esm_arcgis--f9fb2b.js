/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm_arcgis--f9fb2b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm_arcgis--f9fb2b"],{9379:(e,t,s)=>{s.r(t),s.d(t,{arcgis_smart_mapping_assist_feedback:()=>c});var a=s(28614),i=(s(68180),s(99592),s(14471)),n=s(97127);s(71480);const c=class{constructor(e){(0,a.r)(this,e),this.arcgisSmartMappingAssistFeedbackClose=(0,a.c)(this,"arcgisSmartMappingAssistFeedbackClose",7),this.manager=(0,n.u)(this),this.chat=void 0,this.smartMappingState=void 0}render(){const{checkBoxNode:e,textAreaNode:t}=this,{strings:s}=this.smartMappingState;return(0,a.h)(a.H,{key:"e128bfeb1eb9d59be861d754ed0d3c58db92cd5d"},(0,a.h)("calcite-dialog",{key:"11082ddcaf0f39e747a9723f78ede0c45291d09a",class:"modal",open:!0,modal:!0,scale:"l",heading:s.assistFeedback.sendFeedback,escapeDisabled:!0,outsideCloseDisabled:!0,onCalciteDialogClose:()=>this.arcgisSmartMappingAssistFeedbackClose.emit()},(0,a.h)("div",{key:"e49ef6360255fa7ee500404f15e3aae136809ce1"},this.renderContent()),(0,a.h)("calcite-button",{key:"79400406a0b1d2e42348b624627d7b5bef65576e",slot:"footer-end",appearance:"outline-fill",alignment:"end",onClick:()=>this.arcgisSmartMappingAssistFeedbackClose.emit()},s.cancel),(0,a.h)("calcite-button",{key:"5203a449bbe8998c02e5249c4f37c59192c1c007",slot:"footer-end",alignment:"end",appearance:"solid",disabled:!e?.checked||!t?.value,onClick:()=>{this.handleSubmit()}},s.assistFeedback.submit)))}renderContent(){const{config:e,strings:t}=this.smartMappingState,{helpBase:s,helpMap:i}=e,n=(0,a.h)("calcite-link",{target:"_blank",href:`${s}${i[120003249]}`},t.assistFeedback.privacyStatement),c=(0,a.h)("calcite-link",{target:"_blank",href:`${s}${i[120003249]}`},t.assistFeedback.supplement),l=(0,a.h)("calcite-link",{target:"_blank",href:`${s}${i[120003249]}`},t.assistFeedback.privacy),r=t.assistFeedback.iAgree,o=r.substring(0,r.indexOf("${privacyStatement}")),d=r.substring(r.indexOf("${privacyStatement}")+19,r.indexOf("${supplement}")),p=r.substring(r.indexOf("${supplement}")+13),h=t.assistFeedback.learnMore,m=h.substring(0,h.indexOf("${privacy}")),g=h.substring(h.indexOf("${privacy}")+10);return(0,a.h)(a.F,null,(0,a.h)("div",{class:"title"},t.assistFeedback.tellUs),(0,a.h)("div",{class:"sub-title"},t.assistFeedback.dontShare),(0,a.h)("calcite-text-area",{class:"text-input",placeholder:t.panels.assist.placeholder,value:"",scale:"s",rows:10,resize:"vertical",onCalciteTextAreaChange:()=>(0,a.f)(this.el),onClick:()=>(0,a.f)(this.el),ref:e=>this.textAreaNode=e}),(0,a.h)("div",{class:"title email"},t.assistFeedback.email),(0,a.h)("div",{class:"sub-title"},t.assistFeedback.shareEmail),(0,a.h)("calcite-input-text",{class:"email-input",placeholder:t.assistFeedback.enterEmail}),(0,a.h)("div",{class:"disclaimer"},(0,a.h)("calcite-checkbox",{class:"disclaimer-checkbox",onClick:()=>(0,a.f)(this.el),ref:e=>this.checkBoxNode=e}),(0,a.h)("div",null,(0,a.h)("div",null,o,n,d,c,p),(0,a.h)("div",null,m,l,g))))}async handleSubmit(){this.textAreaNode&&(0,i.s)(this.smartMappingState,{text:this.textAreaNode.value}),this.arcgisSmartMappingAssistFeedbackClose.emit()}get el(){return(0,a.g)(this)}};c.style=".modal{top:7.5%;left:7.5%;right:7.5%;--calcite-dialog-size-x:85%;--calcite-dialog-size-y:85%}.text-input{width:100%}.title{font-weight:bold;font-size:16px}.sub-title{font-size:var(--calcite-font-size--1);padding-bottom:10px}.email-input{margin-top:10px;max-width:400px}.email{margin-top:20px}.disclaimer{font-size:var(--calcite-font-size--1);margin-top:30px;display:flex;column-gap:10px}.disclaimer-checkbox{margin-top:5px}"},14471:(e,t,s)=>{s.d(t,{a:()=>i,b:()=>n,s:()=>c});s(68180);var a=s(99592);s(97127);const i={true:"https://ndh-inf-ml-p01.esri.com/dev/mapping",vpn:"https://ndh-inf-ml-p01.esri.com/dev/mapping",aws:"https://devsummitdemowin.webgistesting.net/dev/mapping"};async function n(e,t){const{text:s}=t,{layer:i,modules:n}=e;if(!(0,a.n)(i))throw new Error("layer is not a FeatureLayer");const c={token:"",map_data:{data:i.fields.map((e=>({fieldName:e.name,alias:e.alias,dataType:e.type})))},messages:s,entry_point:"style"},r={method:"post",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}};console.log("request body: ",c);try{const{data:t}=await n.esriRequest(l(e),r);if(t.status_code&&200!==t.status_code)return console.log("*** question/response: ",JSON.stringify({question:s,response:t})),{message:t.botMessage,status:"error",type:"response"};const a=t[0],i=a.botMessage;return{message:i,status:"map_style"===a.actionType?"valid":"invalid",dataObject:a,type:"response"}}catch(e){return{message:e.message,status:"error",type:"response"}}}async function c(e,t){const{text:s}=t,{layer:i,modules:n}=e;if(!(0,a.n)(i))throw new Error("layer is not a FeatureLayer");const c=i.fields.map((e=>({fieldName:e.name,alias:e.alias,dataType:e.type}))),r={method:"post",body:JSON.stringify({token:"",map_data:{data:c},messages:s,entry_point:"style"}),headers:{"Content-Type":"application/json"}};console.log(JSON.stringify(r));try{await n.esriRequest(l(e),r)}catch(e){throw new Error("submit feedback failed")}}function l(e){const{modules:t}=e,s=t.urlUtils.urlToObject(document.URL),a=s.query||{};return s.query?.assistUrl||i[a.assist]}}}]);