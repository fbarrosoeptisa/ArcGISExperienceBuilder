/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c87fee.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c87fee"],{99004:(e,t,a)=>{a.d(t,{c:()=>i,g:()=>r});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==a.g?a.g:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},15968:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_tile_layer_settings:()=>h});var i=a(19564),r=a(4948),n=a(44508),l=a(86868),s=a(18409),o=a(64305),c=a(61191),u=a(33861),d=a(11163);a(18991),a(32084),a(91102),a(73807),a(98821),a(90079),a(32198),a(65174),a(62913),a(17233),a(57159),a(98034),a(99004),a(67336),a(87382),a(82297),a(76246),a(748),a(97018),a(56288),a(93863),a(80015),a(24211);const h=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.publishType="tiles",this.autoCreation=!0,this.basemapUrl="",this.featureLayerInfos=null,this.featureLayerLayers=null,this.serviceInfo=null,this.cacheOnDemandMinScale=d.T,this.calculatedScale={minScale:d.T,maxScale:d.e},this.curLods=[],this.ranges=[{level:0,label:"world"},{level:1,label:"continent"},{level:2,label:"countries"},{level:3,label:"countriesSmall"},{level:4,label:"states"},{level:5,label:"state"},{level:6,label:"counties"},{level:7,label:"county"},{level:8,label:"metropolitan"},{level:9,label:"cities"},{level:10,label:"city"},{level:11,label:"town"},{level:12,label:"neighborhood"},{level:13,label:"streets"},{level:14,label:"street"},{level:15,label:"buildings"},{level:16,label:"building"},{level:17,label:"small"},{level:18,label:"rooms"},{level:19,label:"room"}],this.tileLayerInfo=null,this.handleUrlInputError=e=>{const{error:t}=this.i18n;this.alertInfo={title:"invalidUrl"===e?this.invalidUrlString:t.urlErrorTitle,description:"invalidUrl"===e?void 0:t[e]}},this.getPublishTypeInfo=()=>{const{publishType:e}=this;switch(e){case"tiles":return"mapserver";case"scenes":return"sceneserver";case"features":return"featureserver";case"vectorTiles":return"vectortileserver";case"tiledImagery":case"dynamicImagery":return"imageserver";default:return e}},this.toggleAutoCreation=e=>{this.autoCreation=e.detail},this.handleBasemapChange=e=>{var t;const{tileLayerInfo:a,curLods:i}=this;this.basemapType=e;const r=e=>{e.length===i.length&&e.every(((e,t)=>{const a=i[t];return e.level===a.level&&e.resolution===a.resolution&&e.scale===a.scale&&e.label===a.label}))||(this.curLods=e)},n=null===(t=null==a?void 0:a.info)||void 0===t?void 0:t.lods;"standard"===e?r(d.g):n&&r(n)},this.fetchTileLayerInfo=async e=>{this.isProcessing=!0,this.alertInfo=null,this.tileLayerInfo=null;const{error:t,result:a}=await(0,o.b)(e,!1);return t?this.handleUrlInputError(t.code):a&&(this.tileLayerInfo={url:e,info:a}),this.isProcessing=!1,!t},this.onUrlInputBlur=async()=>{const{tileLayerInfo:e,basemapUrl:t}=this;if(!t)return this.tileLayerInfo=null,void(this.basemapUrl=null);(null==e?void 0:e.url)!==t&&this.fetchTileLayerInfo(t)},this.alertInfo=void 0,this.isProcessing=!1,this.showIncreaseScaleRangeWarning=!1,this.selectedItem=void 0,this.basemapType=void 0}async handleNext(){var e;if("3dTiles"===c.a.tileLayerPublishType)return;const{publishType:t,serviceInfo:a,autoCreation:i,cacheOnDemandMinScale:n,calculatedScale:l,tileLayerInfo:s,selectedItem:u,basemapType:d,basemapUrl:h,inputRef:f,handleUrlInputError:p,fetchTileLayerInfo:v}=this;if("custom"===d){if(!h)return p("invalidUrl"),void f.setFocus();if(!s){if(!await v(h))return void f.setFocus()}}const{publishContent:m}=(0,o.d)({id:u.id,title:u.title},{publishType:t,cacheOnDemand:"vectorTiles"!==t&&i,cacheOnDemandMinScale:n,tileInfo:null==s?void 0:s.info,scale:Object.assign({},l),layers:null===(e=c.a.tileLayerData)||void 0===e?void 0:e.layers},r.c.portal.isPortal);c.a.tileLayerPublishContent=m,c.a.tileAutoCreation=i,c.a.tileLayerBasemapType=d,c.a.tileLayerBasemapUrl=h,c.a.tileLayerPublishType=t,this.newItemUpdatePage.emit("itemProperties")}async componentWillLoad(){var e,t;if("3dTiles"===c.a.tileLayerPublishType)return;this.fromFeatureLayer=c.a.tileLayerFromFeatureLayer,this.publishType=c.a.tileLayerPublishType,this.i18n=u.u.i18n.tileLayerSettings,this.invalidUrlString=u.u.i18n.url.invalidUrl,this.autoCreation=null===(e=c.a.tileAutoCreation)||void 0===e||e,this.basemapUrl=c.a.tileLayerBasemapUrl,this.basemapType=null!==(t=c.a.tileLayerBasemapType)&&void 0!==t?t:"standard",c.a.tileLayerPublishContent=null;let a=c.a.item;a||(a=Object.assign(Object.assign({},c.a.existingItem),{id:c.a.id,title:c.a.sourceTitle,type:c.a.type,tags:l.i.tags}),c.a.item=a);c.a.type={vectorTiles:"Vector Tile Service",tiles:"Tile Layer",scenes:"Scene Service"}[c.a.tileLayerPublishType],c.a.initialTitle=a.title,this.selectedItem=a;(async()=>{var e;if("3dTiles"===c.a.tileLayerPublishType)return;this.isProcessing=!0;const t=a.url;let i=c.a.tileLayerLayers,l=c.a.tileLayerTables,u=c.a.tileLayerServiceInfo;if(!(r.c.portal.isPortal&&c.a.tileLayerFromFeatureLayer||i||l||u)){const e=await(0,s.w)(t,(0,n.g)(r.c.portal),!0);i=e.layers,l=e.tables,u=e.serviceInfo}this.serviceInfo=u,this.featureLayerInfos=[...i||[],...l||[]],this.featureLayerLayers=[...i||[]],await this.handleTileLayerScaleChange({minScale:d.T,maxScale:d.e}),"tiles"===this.publishType&&(0,o.h)(this.featureLayerLayers,null!==(e=r.c.config.tilesOnDemandEnabled)&&void 0!==e&&e),this.isProcessing=!1})()}async handleTileLayerScaleChange(e){var t,a;const{selectedItem:i,featureLayerInfos:r,tileLayerInfo:n,publishType:l}=this;if("tiles"!==l)return;const s=i.url,{cacheOnDemandMinScale:c,calculatedScale:u}=await(0,o.e)(e,null!==(a=null===(t=null==n?void 0:n.info)||void 0===t?void 0:t.lods)&&void 0!==a?a:d.a.lods,r,s);s&&(c&&(this.cacheOnDemandMinScale=c),this.calculatedScale=u)}render(){const{ranges:e,i18n:t,toggleAutoCreation:a,handleBasemapChange:n,onUrlInputBlur:l,isProcessing:s,autoCreation:o,basemapType:c,basemapUrl:u,alertInfo:h,publishType:f,fromFeatureLayer:p}=this;return(0,i.h)(i.H,{key:"03269f9fe15a1b919e19276d4bf205eb8bf55b0f"},(0,i.h)("arcgis-new-item-loader",{key:"03e18f92c6c61dfb37a8c2dae04d28a932616ece",active:s}),(0,i.h)("div",{key:"6b0b40e234a167b5a0b416103877016b1b401858",class:"title"},(0,i.h)("arcgis-new-item-description",{key:"3a3a949b735fb13a4288f64e5cb67e55c0681e8b",header:t.title,scale:"l"})),"tiles"===f&&(!r.c.portal.isPortal||!p)&&(0,i.h)("div",{key:"c062be5fec2a74a0249e2a60cd99769694d81878",class:"section"},(0,i.h)("arcgis-new-item-switch-card",{key:"1dff7ca85622808a90b0906ca43a2341ecdf9086",defaultChecked:o,header:t.autoCreateOption.title,description:t.autoCreateOption.description,onSwitchChange:a})),(0,i.h)("div",{key:"42e0271a1515d05150d890c36d4772378d6e9730",class:"section"},(0,i.h)("p",{key:"7f926f3b82ecbf1bbd47a09f933053d3bbb64877",class:"section-title"},t.basemapOption),(0,i.h)("calcite-tile-select-group",{key:"d62ccf5d7e888a705a71955fa2bed4978bca208b",layout:"vertical"},d.f.map((e=>{const a="custom"===e?"customBasemap":"onlineBasemapOption";return(0,i.h)("calcite-tile-select",{key:e,checked:e===c,onCalciteTileSelectChange:()=>n(e),description:t[a].description,heading:t[a].title,name:e,"input-enabled":!0,"input-alignment":"start",type:"radio",value:e,width:"full",id:`${e}-input-option`})})))),"custom"===c&&(0,i.h)("div",{key:"5cf3ceb81378db9d5e9a8a55c75fe59d733cae51",class:"section"},(0,i.h)("p",{key:"93b27aec2106a0b05f14a3d60641ed17a4e43abe",class:"section-title"},t.customBasemapUrl),(0,i.h)("calcite-input",{key:"7dfabf8d2fdec5c331e80eced065ebf88e2ae8a2",scale:"m",disabled:s,value:u,onCalciteInputInput:e=>{this.basemapUrl=e.currentTarget.value,this.alertInfo=null},onBlur:l,placeholder:"https://webadaptorhost.domain.com/arcgis/rest/services/service/MapServer",ref:e=>this.inputRef=e})),(0,i.h)("arcgis-new-item-alert",{key:"fea4a246e99a6b045cbf48dc3530b55ab06ff34b",heading:null==h?void 0:h.title,description:null==h?void 0:h.description,active:!!h,onAlertDismiss:()=>this.alertInfo=null}))}get el(){return(0,i.d)(this)}};h.style=".title{margin-bottom:1.5rem}.section{margin-bottom:2rem}.section-title{font-size:1rem;font-weight:400;margin-bottom:0.25rem;margin-top:0px}.description{margin-bottom:1rem;margin-top:0px;font-size:0.75rem}"},91102:(e,t,a)=>{a.d(t,{a:()=>o,c:()=>r,d:()=>c,g:()=>n,i:()=>l,s:()=>s});var i=a(73807);function r(e,t){return function e(a){return a?a.closest(t)||e(function(e){return e.getRootNode()}(a).host||null):null}(e)}function n(e){const t=r(e,".calcite-mode-dark, .calcite-mode-light");return(null==t?void 0:t.classList.contains("calcite-mode-dark"))?"dark":"light"}function l(e){let t=e;for(;null==t?void 0:t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function s(e){return(new i.S).sanitize(e)}function o(e){const t=s(e),a=document.createElement("div");return a.innerHTML=t,a.textContent||a.innerText||""}function c(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}},98034:(e,t,a)=>{a.d(t,{e:()=>n,l:()=>l});var i,r=a(99004),n={exports:{}};i=n.exports,r.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},a="4.24",i="next";function r(e){if(e.toLowerCase()===i)return i;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function n(e){return void 0===e&&(e=a),"https://js.arcgis.com/".concat(e,"/")}function l(e){void 0===e&&(e=a);var t=n(e),l=r(e);if(l!==i&&3===l.major){var s=l.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function o(e,t){if(t){var a=document.querySelector(t);a.parentNode.insertBefore(e,a)}else document.head.appendChild(e)}function c(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function u(e){return!e||r(e)?l(e):e}function d(e,t){var a=u(e),i=c(a);return i||o(i=s(a),t),i}var h={};function f(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function p(e,t,a){var i;a&&(i=v(e,a));var r=function(){t(e),e.removeEventListener("load",r,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",r,!1)}function v(e,t){var a=function(i){t(i.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",a,!1)};return e.addEventListener("error",a,!1),a}function m(e){void 0===e&&(e={}),h=e}function b(){return document.querySelector("script[data-esri-loader]")}function y(){var e=window.require;return e&&e.on}function g(e){void 0===e&&(e={});var a={};[h,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}));var i=a.version,r=a.url||n(i);return new t.Promise((function(e,t){var n=b();if(n){var l=n.getAttribute("src");l!==r?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(l,")."))):y()?e(n):p(n,e,t)}else if(y())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=a.css;s&&d(!0===s?i:s,a.insertCssBefore),p(n=f(r),(function(){n.setAttribute("data-esri-loader","loaded"),e(n)}),t),document.body.appendChild(n)}}))}function L(e){return new t.Promise((function(t,a){var i=window.require.on("error",a);window.require(e,(function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];i.remove(),t(e)}))}))}function w(e,t){if(void 0===t&&(t={}),y())return L(e);var a=b(),i=a&&a.getAttribute("src");return!t.url&&i&&(t.url=i),g(t).then((function(){return L(e)}))}e.utils=t,e.loadModules=w,e.getScript=b,e.isLoaded=y,e.loadScript=g,e.setDefaultOptions=m,e.loadCss=d,Object.defineProperty(e,"__esModule",{value:!0})}(i);const l=async(e,t)=>(await n.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);