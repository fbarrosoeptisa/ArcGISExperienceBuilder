/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-b9ba85.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-b9ba85"],{63625:(e,i,n)=>{n.d(i,{a:()=>m,b:()=>f,c:()=>t,d:()=>u,g:()=>b,w:()=>o});var l=n(68180),a=n(99592),r=(n(97127),n(84521));function o(e,i,n){const{layer:l,mapView:r,useFeatureReduction:o}=e;if(!o||!("featureReduction"in l)||"binning"!==l.featureReduction.type)return;const t=e.modules.reactiveUtils.watch((()=>r.scale),(()=>{const o=l.featureReduction;r.scale<=o.maxScale&&!i.disabled?((0,a.B)(),function(e,i,n){const l=document.createElement("arcgis-smart-mapping-scale-alert-popover");l.smartMappingState=e,l.refElement=i,l.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",(()=>{s(),n()})),document.body.append(l)}(e,i,n),(0,a.J)(i,!0)):r.scale>o.maxScale&&i.disabled&&(s(),(0,a.J)(i,!1),i.setFocus())}));return t}function s(){document.querySelectorAll("arcgis-smart-mapping-scale-alert-popover").forEach((e=>{e.parentElement?.removeChild(e)}))}async function t(e,i){const{layer:n,useFeatureReduction:r,mapView:o,selectedFields:s,modules:t}=e,u=n;i=i||{};const c=(0,a.k)((0,a.j)(e)),m=!!(0,l.i)(i.includeSizeVariable)&&i.includeSizeVariable;return await t.PieChartCreator.createRenderer({layer:u,view:o,attributes:d(e,i.fieldInfos),pieChartScheme:i.pieChartScheme||(0,a.U)(e),includeSizeVariable:m,outlineOptimizationEnabled:(0,l.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:(0,a.z)(e)&&m,sizeOptimizationEnabled:!(0,l.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled,legendOptions:i.legendOptions,forBinning:"binning"===u.featureReduction?.type&&r}).then((i=>{(0,a.l)(c,i.renderer,{notOpacity:!0});const n=(0,a.a)(e);if(["chart","chart-size"].includes(n)){const n=(0,a.f)(e),l=s.map((e=>e.field)),r=n.map((e=>e.field)),o=l.toString()===r.toString(),u=t.esriLang.clone(l),d=t.esriLang.clone(r);u.sort(),d.sort();u.toString()===d.toString()&&(i.renderer.attributes=(0,a.j)(e).attributes,o||i.renderer.attributes.sort(((e,i)=>l.indexOf(e.field)-l.indexOf(i.field))),i.renderer.othersCategory=(0,a.j)(e).othersCategory,i.renderer.holePercentage=(0,a.j)(e).holePercentage)}return i}))}async function u(e,i){const{layer:n,useFeatureReduction:r,mapView:o,modules:s}=e,t=n;i=i||{};const u=(0,a.j)(e),c=(0,a.b)(u,"size"),m=(0,a.G)(u,"size"),f=(0,a.k)(u),b=i.fieldInfos?i.fieldInfos:u.attributes.map((e=>({field:e.field,simpleFieldType:a.q.NUMBER})));let p,y=!0;if(i.fieldInfos&&(u.attributes.forEach(((e,n)=>{e.field!==i.fieldInfos[n].field&&(y=!1)})),y&&(delete i.fieldInfos,(0,a.T)(i))))return{renderer:u.clone()};y&&(p=u.attributes.map((e=>e.field)));const z=(0,a.j)(e),h=z.attributes?.length?z.attributes[0].color:null,V=u.backgroundFillSymbol;let g=!1;c&&(g=c.minSize.stops?c.minSize.stops[0].size>c.maxSize.stops[0].size:c.minSize>c.maxSize);const v=b[0];return b[0]=b[1],b[1]=v,await s.PieChartCreator.createRenderer({layer:t,view:o,attributes:d(e,b),pieChartScheme:i.pieChartScheme||(0,a.U)(e),includeSizeVariable:(0,l.i)(i.includeSizeVariable)?i.includeSizeVariable:!!c,outlineOptimizationEnabled:(0,l.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!f.sizeOutlineVisVar,sizeOptimizationEnabled:(0,l.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!f.sizeAutoVisVar,legendOptions:void 0,forBinning:"binning"===t.featureReduction?.type&&r}).then((e=>{if(!i.fieldInfos&&c){const i=(0,a.b)(e.renderer,"size");if(i.minDataValue=c.minDataValue,i.maxDataValue=c.maxDataValue,m){const i=(0,a.G)(e.renderer,"size");i.minSliderValue=m.minSliderValue,i.maxSliderValue=m.maxSliderValue}}if(y&&f.opacityVisVar&&f.authOpacityVisVar&&(e.renderer.visualVariables=(0,a.V)(e.renderer,"opacity"),e.renderer.authoringInfo.visualVariables=(0,a.W)(e.renderer,"opacity"),e.renderer.visualVariables.push(f.opacityVisVar),e.renderer.authoringInfo.visualVariables=e.renderer.authoringInfo.visualVariables||[],e.renderer.authoringInfo.visualVariables.push(f.authOpacityVisVar)),(0,a.l)(f,e.renderer,{notOpacity:!0}),p&&e.renderer.attributes.sort(((e,i)=>{const n=p.indexOf(e.field),l=p.indexOf(i.field);return n>-1&&l>-1&&n<l?-1:n>-1&&l>-1&&n>l?1:n>-1?-1:l>-1?1:0})),y&&e.renderer.attributes.forEach(((e,i)=>{e.label=u.attributes[i].label})),e.renderer.size=u.size,e.renderer.holePercentage=u.holePercentage,e.renderer.othersCategory=u.othersCategory,h&&e.renderer.attributes?.length&&e.renderer.attributes.forEach(((e,i)=>{y&&(e.color=u.attributes[i].color)})),V&&(e.renderer.backgroundFillSymbol=V),g){const i=(0,a.b)(e.renderer,"size"),n=i.minSize;i.minSize=i.maxSize,i.maxSize=n}return e}))}function d(e,i){return i.map((i=>({field:i.field,label:c(e,i.field)})))}function c(e,i){const n=e.fields.filter((e=>e.layerField.name===i));return n.length?n[0].label:""}async function m(e,i){const{layer:n,useFeatureReduction:o,mapImageSublayer:s,mapView:t,modules:u}=e,d=n;i=i||{};const c=(0,a.a)(e),m=(0,a.k)((0,a.j)(e)),f=i.fieldInfos?i.fieldInfos[0]:null,b=i.theme?i.theme:"high-to-low",p={layer:d,view:t,field:f.field,valueExpression:f.expression,valueExpressionTitle:f.expressionTitle,normalizationField:i.normalizationField,theme:b,legendOptions:i.legendOptions,colorOptions:{colorScheme:i.colorScheme||(0,a.Y)(e,b),isContinuous:!!(0,l.i)(i.isContinuous)&&i.isContinuous},symbolOptions:(0,a.x)(e)?void 0:{symbolStyle:i.symbolOptions||"caret"},symbols:i.symbols||void 0,minValue:i.min,maxValue:i.max,sizeOptimizationEnabled:!s&&"above-and-below"!==b&&(!!(0,l.i)(i.sizeOptimizationEnabled)&&i.sizeOptimizationEnabled),defaultSymbolEnabled:!1,forBinning:"binning"===d.featureReduction?.type&&o};return await u.UnivariateColorSizeCreator.createContinuousRenderer(p).then((n=>{if(!i.noReuse&&["color","color-size","color-size-age"].includes(c)&&(0,r.s)(e,i)){const i=(0,a.b)((0,a.j)(e),"color"),l=(0,a.G)((0,a.j)(e),"color");i&&l&&b===l.univariateTheme&&(n.renderer.visualVariables=[i],m.sizeOutlineVisVar&&n.renderer.visualVariables.push(m.sizeOutlineVisVar),n.renderer.authoringInfo.visualVariables=[l],(0,a._)(e,n.renderer))}return(0,a.l)(m,n.renderer),n}))}async function f(e,i){const{layer:n,useFeatureReduction:r,mapImageSublayer:o,mapView:s,modules:t}=e,u=n;i=i||{};const d=(0,a.j)(e),c=(0,a.b)(d,"color");if(c&&i.fieldInfos?.[0]&&i.fieldInfos?.[0].field===c.field&&i.fieldInfos?.[0].expression===c.valueExpression&&i.normalizationField===c.normalizationField&&(delete i.fieldInfos,(0,a.T)(i)))return{renderer:d.clone()};const m=(0,a.k)(d),f=(0,a.b)(d,"size"),b=d.authoringInfo,p=(0,a.G)(d,"size"),y=i.fieldInfos?i.fieldInfos[0]:c?{field:c.field,expression:c.valueExpression,expressionTitle:c.valueExpressionTitle,simpleFieldType:(0,a.o)(e,c.field)?.simpleFieldType||a.q.NUMBER}:{field:d.field,expression:d.valueExpression,expressionTitle:d.valueExpressionTitle,simpleFieldType:(0,a.o)(e,d.field)?.simpleFieldType||a.q.NUMBER},z=null===i.normalizationField?void 0:i.normalizationField?i.normalizationField:c?c.normalizationField:d.normalizationField,h=i.theme?i.theme:b?b.univariateTheme:"high-to-low",V="above-and-below"===b.univariateTheme,g="above-and-below"===h,v="custom"===b.univariateSymbolStyle;"custom"!==i.symbolStyle||i.symbols||(1===d.classBreakInfos.length?i.symbols=[t.esriLang.clone(d.classBreakInfos[0].symbol),t.esriLang.clone(d.classBreakInfos[0].symbol)]:i.symbols=[t.esriLang.clone(d.classBreakInfos[0].symbol),t.esriLang.clone(d.classBreakInfos[1].symbol)]);const I=(0,l.i)(i.isContinuous)?i.isContinuous:!(!V&&g)&&!!c,S="picture-marker"===d.classBreakInfos[0].symbol?.type||"picture-marker"===d.classBreakInfos[2===d.classBreakInfos.length?1:0].symbol?.type,E=!V&&g||S&&I?"caret":g?i.symbolStyle?["single","custom"].includes(i.symbolStyle)?void 0:i.symbolStyle:i.symbols?void 0:"custom"!==b.univariateSymbolStyle?b.univariateSymbolStyle:void 0:void 0,O=!(S&&I)&&("custom"===i.symbolStyle||!i.symbolStyle&&v);let x=g&&!(0,a.x)(e)?{symbolStyle:E,symbols:E?void 0:2===i.symbols?.length?{below:i.symbols[0],above:i.symbols[1]}:1===i.symbols?.length?void 0:O?{below:d.classBreakInfos[0].symbol,above:d.classBreakInfos[2===d.classBreakInfos.length?1:0].symbol}:void 0}:void 0;x?.symbolStyle||x?.symbols||(x=void 0),I&&x?.symbols&&((0,a.X)(e,x?.symbols.below,new t.EsriColor([0,0,0,.5])),(0,a.X)(e,x?.symbols.above,new t.EsriColor([0,0,0,.5])));const k=d.defaultSymbol,B=d.defaultLabel,F=d.backgroundFillSymbol;let w=!1;h===b?.univariateTheme&&(0,l.i)(f.minSize)&&(w=f.minSize.stops?f.minSize.stops[0].size>f.maxSize.stops[0].size:f.minSize>f.maxSize);let q=!1;(null===i.normalizationField||i.normalizationField||i.fieldInfos?.[0])&&(q=!0);const C=g&&!V||!g&&V,T=i.discardMinMax?void 0:(0,l.i)(i.min)?i.min:q?void 0:p?p.minSliderValue:void 0,R=i.discardMinMax?void 0:(0,l.i)(i.max)?i.max:q?void 0:p?p.maxSliderValue:void 0,j="below"===b.univariateTheme,D="below"===h,L=D&&!j||!D&&j,M=i.colorScheme||!C&&(0,a.Y)(e,h),U={layer:u,view:s,field:y.field,valueExpression:y.expression,valueExpressionTitle:y.expressionTitle,theme:h,legendOptions:i.legendOptions||f.legendOptions,colorOptions:{colorScheme:M,isContinuous:I},symbolOptions:x,normalizationField:z,minValue:T,maxValue:R,sizeOptimizationEnabled:!o&&"above-and-below"!==h&&((0,l.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!m.sizeAutoVisVar),defaultSymbolEnabled:(0,l.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!d.defaultSymbol,forBinning:"binning"===u.featureReduction?.type&&r};return await t.UnivariateColorSizeCreator.createContinuousRenderer(U).then((n=>{if(i.discardMinMax){const e=(0,a.b)(d,"color"),i=(0,a.b)(n.renderer,"color");e?.stops.forEach(((e,n)=>e.value=i?.stops[n].value));const l=(0,a.b)(d,"size"),r=(0,a.b)(n.renderer,"size");"above-and-below"===b.univariateTheme?l.stops?.forEach(((e,i)=>{r.stops&&(e.value=r.stops[i].value)})):(l.minDataValue=r.minDataValue,l.maxDataValue=r.maxDataValue)}if((0,a.l)(m,n.renderer),g){const l=(0,a.Z)(e,n.renderer.classBreakInfos[0].symbol),r=n.renderer.classBreakInfos[1]?(0,a.Z)(e,n.renderer.classBreakInfos[1].symbol):l;if(!E)if(1===i.symbols?.length&&1===n.renderer.classBreakInfos.length)n.renderer.classBreakInfos[0].symbol=i.symbols[0];else if(2===i.symbols?.length&&1===n.renderer.classBreakInfos.length){const e=t.esriLang.clone(d.classBreakInfos[0].symbol);n.renderer.classBreakInfos[0].symbol=e}else if("single"===i.symbolStyle&&2===n.renderer.classBreakInfos.length){const i=t.esriLang.clone(d.classBreakInfos[0].symbol);n.renderer.classBreakInfos[0].symbol=i.clone(),(0,a.X)(e,i,(0,a.Z)(e,n.renderer.classBreakInfos[1].symbol)),n.renderer.classBreakInfos[1].symbol=i,n.renderer.authoringInfo.univariateSymbolStyle=void 0}else{let e=t.esriLang.clone(d.classBreakInfos[0].symbol);n.renderer.classBreakInfos[0].symbol=e,n.renderer.classBreakInfos[1]&&(e=d.classBreakInfos[1]?t.esriLang.clone(d.classBreakInfos[1].symbol):t.esriLang.clone(d.classBreakInfos[0].symbol),n.renderer.classBreakInfos[1].symbol=e)}const o=(0,a.b)(n.renderer,"color");if(o){const i=new t.EsriColor([0,0,0,.5]);(0,a.X)(e,n.renderer.classBreakInfos[0].symbol,i),n.renderer.classBreakInfos[1]&&(0,a.X)(e,n.renderer.classBreakInfos[1].symbol,i)}else c||o?((0,a.X)(e,n.renderer.classBreakInfos[0].symbol,l),n.renderer.classBreakInfos[1]&&(0,a.X)(e,n.renderer.classBreakInfos[1].symbol,r)):((0,a.X)(e,n.renderer.classBreakInfos[0].symbol,(0,a.Z)(e,d.classBreakInfos[0].symbol)),(0,a.X)(e,n.renderer.classBreakInfos[1].symbol,(0,a.Z)(e,d.classBreakInfos[1].symbol)))}else g||(1===i.symbols?.length?n.renderer.classBreakInfos[0].symbol=i.symbols[0]:1===d.classBreakInfos?.length&&(n.renderer.classBreakInfos[0].symbol=d.classBreakInfos[0].symbol));if(V&&g&&!q){const e=(0,a.b)(n.renderer,"size"),i=(0,a.b)(n.renderer,"color");e.stops=t.esriLang.clone(f.stops),i&&i.stops.forEach(((e,i)=>{e.value=f.stops[i].value})),2===n.renderer.classBreakInfos.length&&(n.renderer.classBreakInfos[0].maxValue=f.stops[2].value,n.renderer.classBreakInfos[1].minValue=f.stops[2].value)}if(L&&M&&c){const e=(0,a.b)(n.renderer,"color"),i=c.stops.length-1;e.stops.forEach(((e,n)=>{e.color=c.stops[i-n].color}))}if(k&&(n.renderer.defaultSymbol=k,n.renderer.defaultLabel=B),n.renderer.backgroundFillSymbol=F||void 0,w){const e=(0,a.b)(n.renderer,"size"),i=e.minSize;e.minSize=e.maxSize,e.maxSize=i}return n}))}function b(e){const{mapView:i}=e,n=(0,a.j)(e),l=(0,a.b)(n,"color"),r=(0,a.b)(n,"size"),o=i.scale,{minSize:s,maxSize:t}=r;let u;if(r.stops)u=l.stops.map(((e,i)=>{const n=r.stops[i];return{color:e.color,size:n.size,value:n.value}}));else{const e=l.stops.length-1;if("number"==typeof s)u=l.stops.map(((i,n)=>({color:i.color,value:i.value,size:0===n?s:n===e?t:null})));else{let i,n;const a=s.stops.length-1;o>s.stops[a].value?(i=s.stops[a].size,n=t.stops[a].size):s.stops.forEach(((e,l)=>{o<=e.value&&(i=e.size,n=t.stops[l].size)}));const d=r.minDataValue,c=r.maxDataValue,m=(c-d)/4;u=l.stops.map(((l,a)=>({color:l.color,value:0===a?d:a===e?c:d+a*m,size:0===a?i:a===e?n:void 0})))}}return u}},78567:(e,i,n)=>{n.d(i,{a:()=>o,c:()=>r,g:()=>s});var l=n(68180),a=n(99592);n(97127);async function r(e,i){const{layer:n,useFeatureReduction:r,mapImageSublayer:o,mapView:s,selectedFields:u,modules:d}=e,c=n;i=i||{};const m=(0,a.k)((0,a.j)(e));return await d.PredominanceCreator.createRenderer({layer:c,view:s,fields:t(e,i.fieldInfos),predominanceScheme:i.predominanceScheme||(0,a.a2)(e),includeOpacityVariable:!(0,l.i)(i.includeOpacityVariable)||(0,l.i)(i.includeOpacityVariable),includeSizeVariable:!!(0,l.i)(i.includeSizeVariable)&&i.includeSizeVariable,outlineOptimizationEnabled:!o&&((0,l.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:(0,a.z)(e)),sizeOptimizationEnabled:!(0,l.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled,legendOptions:i.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===c.featureReduction?.type&&r}).then((n=>{(0,a.l)(m,n.renderer,{notOpacity:!0});const r=(0,a.a)(e);if(!(0,l.i)(i.includeOpacityVariable)&&["predominance","predominance-size"].includes(r)){const l=(0,a.f)(e),r=u.map((e=>e.field)).sort(),o=l.map((e=>e.field)).sort();if(r.toString()===o.toString()){const l=(0,a.b)((0,a.j)(e),"opacity"),r=(0,a.G)((0,a.j)(e),"opacity");n.renderer.visualVariables=(0,a.V)(n.renderer,"opacity")||[],l&&n.renderer.visualVariables.push(l),n.renderer.authoringInfo.visualVariables=(0,a.W)(n.renderer,"opacity")||[],r&&n.renderer.authoringInfo.visualVariables.push(r);const o=n.renderer.uniqueValueInfos[0].symbol.clone();n.renderer.uniqueValueInfos=(0,a.j)(e).uniqueValueInfos,(0,a.z)(e)&&("predominance-size"===(0,a.a)(e)&&!0!==i.includeSizeVariable?(0,a.a3)(e,n.renderer,o):"predominance"===(0,a.a)(e)&&!0===i.includeSizeVariable&&(0,a.a4)(e,n.renderer,o))}}return n}))}async function o(e,i){const{layer:n,useFeatureReduction:r,mapImageSublayer:o,mapView:s,modules:u}=e,d=n;i=i||{};const c=(0,a.j)(e),m=(0,a.b)(c,"size"),f=(0,a.G)(c,"size"),b=(0,a.k)(c),p=i.fieldInfos?i.fieldInfos:c.uniqueValueGroups[0].classes.map((e=>({field:e.values[0].value,simpleFieldType:a.q.NUMBER})));let y,z=!0;if(i.fieldInfos&&(c.uniqueValueGroups[0].classes.forEach(((e,n)=>{e.values[0].value!==i.fieldInfos[n].field&&(z=!1)})),z&&(delete i.fieldInfos,(0,a.T)(i))))return{renderer:c.clone()};z&&(y=c.uniqueValueInfos.map((e=>e.value)));const h=(0,a.j)(e),V=h.uniqueValueInfos?.length?h.uniqueValueInfos[0].symbol:null,g=c.defaultSymbol,v=c.defaultLabel,I=c.backgroundFillSymbol;let S=!1;m&&(S=m.minSize.stops?m.minSize.stops[0].size>m.maxSize.stops[0].size:m.minSize>m.maxSize);const E=(0,l.i)(i.includeSizeVariable)?i.includeSizeVariable:!!m,O=p[0];return p[0]=p[1],p[1]=O,await u.PredominanceCreator.createRenderer({layer:d,view:s,fields:t(e,p),predominanceScheme:i.predominanceScheme||(0,a.a2)(e),includeOpacityVariable:(0,l.i)(i.includeOpacityVariable)?i.includeOpacityVariable:!!b.opacityVisVar,includeSizeVariable:E,outlineOptimizationEnabled:!o&&((0,l.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!b.sizeOutlineVisVar),sizeOptimizationEnabled:(0,l.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!b.sizeAutoVisVar,legendOptions:void 0,defaultSymbolEnabled:(0,l.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!g,forBinning:"binning"===d.featureReduction?.type&&r}).then((n=>{const r=n.renderer.uniqueValueInfos[0].symbol.clone();if(!i.fieldInfos&&m){const e=(0,a.b)(n.renderer,"size");if(e.minDataValue=m.minDataValue,e.maxDataValue=m.maxDataValue,f){const e=(0,a.G)(n.renderer,"size");e.minSliderValue=f.minSliderValue,e.maxSliderValue=f.maxSliderValue}}if(!(0,l.i)(i.includeOpacityVariable)&&z&&b.opacityVisVar&&b.authOpacityVisVar&&(n.renderer.visualVariables=(0,a.V)(n.renderer,"opacity"),n.renderer.authoringInfo.visualVariables=(0,a.W)(n.renderer,"opacity"),n.renderer.visualVariables.push(b.opacityVisVar),n.renderer.authoringInfo.visualVariables=n.renderer.authoringInfo.visualVariables||[],n.renderer.authoringInfo.visualVariables.push(b.authOpacityVisVar)),(0,a.l)(b,n.renderer,{notOpacity:!0}),y&&n.renderer.uniqueValueInfos.sort(((e,i)=>{const n=y.indexOf(e.value),l=y.indexOf(i.value);return n>-1&&l>-1&&n<l?-1:n>-1&&l>-1&&n>l?1:n>-1?-1:l>-1?1:0})),z&&n.renderer.uniqueValueInfos.forEach(((e,i)=>{e.label=c.uniqueValueInfos[i].label})),V&&n.renderer.uniqueValueInfos?.length){const i=n.renderer.uniqueValueInfos.slice();i.forEach(((i,n)=>{let l;z?l=c.uniqueValueInfos[n].symbol:(l=V.clone(),(0,a.X)(e,l,(0,a.Z)(e,i.symbol))),i.symbol=l})),n.renderer.uniqueValueInfos=i,(0,a.z)(e)&&("predominance-size"!==(0,a.a)(e)||E?"predominance"===(0,a.a)(e)&&E&&(0,a.a4)(e,n.renderer,r):(0,a.a3)(e,n.renderer,r))}if(g&&(n.renderer.defaultSymbol=g,n.renderer.defaultLabel=v),I&&(n.renderer.backgroundFillSymbol=I),S){const e=(0,a.b)(n.renderer,"size"),i=e.minSize;e.minSize=e.maxSize,e.maxSize=i}return n}))}async function s(e,i){const{layer:n,useFeatureReduction:l,mapView:a,modules:r}=e,o=n;return i=i||{},await r.predominantCategories({layer:o,view:a,fields:i.fieldInfos.map((e=>e.field)),forBinning:"binning"===o.featureReduction?.type&&l})}function t(e,i){return i.map((i=>({name:i.field,label:u(e,i.field)})))}function u(e,i){const n=e.fields.filter((e=>e.layerField.name===i));return n.length?n[0].label:""}},372:(e,i,n)=>{n.d(i,{a:()=>o,c:()=>r,u:()=>s});var l=n(68180),a=n(99592);n(97127);async function r(e,i){const{layer:n,useFeatureReduction:r,mapImageSublayer:o,mapView:s,modules:t}=e,u=n,d=(0,a.a)(e);let c=i.relationshipScheme;if(!c&&["relationship","relationship-size"].includes(d)&&(c=(0,a.a7)(e)),i=i||{},"relationship-size"===d){const n=(0,a.j)(e).clone(),l=n.authoringInfo;if(l&&i.fieldInfos?.length>1&&i.fieldInfos[0].field===l.field1.field&&i.fieldInfos[1].field===l.field2.field){if(n.visualVariables=(0,a.V)(n,"size"),n.authoringInfo.visualVariables=(0,a.W)(n,"size"),(0,a.z)(e)){const i=(0,a.m)(e),l=n.uniqueValueInfos.slice();l.forEach((n=>{const l=(0,a.Z)(e,n.symbol);n.symbol=i.clone(),(0,a.X)(e,n.symbol,l)})),n.uniqueValueInfos=l}return{renderer:n}}}const m=(0,a.k)((0,a.j)(e)),f={layer:u,view:s,field1:{field:i.fieldInfos[0].field},field2:{field:i.fieldInfos[1].field},classificationMethod:"quantile",numClasses:3,focus:"HH",relationshipScheme:c,outlineOptimizationEnabled:!o&&(!(0,l.i)(i.outlineOptimizationEnabled)||i.outlineOptimizationEnabled),sizeOptimizationEnabled:!o&&(!(0,l.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled),legendOptions:i.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===u.featureReduction?.type&&r};return await t.RelationshipCreator.createRenderer(f).then((e=>((0,a.l)(m,e.renderer),e)))}async function o(e,i){const{layer:n,useFeatureReduction:r,mapImageSublayer:o,mapView:s,modules:t}=e,u=n;i=i||{};const d=(0,a.j)(e),c=(0,a.a)(e),m=d.authoringInfo,f=(0,a.b)(d,"size");if(i.fieldInfos&&i.fieldInfos.length>1&&i.fieldInfos[0].field===m.field1.field&&i.normalizationField1===m.field1.normalizationField&&i.fieldInfos[1].field===m.field2.field&&i.normalizationField2===m.field2.normalizationField&&(delete i.fieldInfos,delete i.normalizationField1,delete i.normalizationField2,(0,a.T)(i)&&!f))return{renderer:d.clone()};let b=i.relationshipScheme;!b&&["relationship","relationship-size"].includes(c)&&(b=(0,a.a7)(e));const p=(0,a.k)(d),y=i.fieldInfos?i.fieldInfos[0]:{field:m.field1.field,simpleFieldType:a.q.NUMBER},z=i.fieldInfos?i.fieldInfos[1]:{field:m.field2.field,simpleFieldType:a.q.NUMBER},h=void 0!==i.normalizationField1?i.normalizationField1:m.field1.normalizationField,V=void 0!==i.normalizationField2?i.normalizationField2:m.field2.normalizationField,g=d.uniqueValueInfos?.length?d.uniqueValueInfos[0].symbol:null,v=d.defaultSymbol,I=d.defaultLabel,S=i.numClasses?i.numClasses:m.numClasses,E={layer:u,view:s,field1:{field:y?y.field:d.field,normalizationField:h},field2:{field:z?z.field:d.field,normalizationField:V},classificationMethod:i.classificationMethod?i.classificationMethod:"manual"!==m.classificationMethod?m.classificationMethod:"quantile",numClasses:S,focus:i.focus?i.focus:m.focus,relationshipScheme:b,outlineOptimizationEnabled:!o&&((0,l.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!p.sizeOutlineVisVar),sizeOptimizationEnabled:!o&&((0,l.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!p.sizeAutoVisVar),legendOptions:i.legendOptions?i.legendOptions:d.legendOptions,defaultSymbolEnabled:(0,l.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!d.defaultSymbol,forBinning:"binning"===u.featureReduction?.type&&r};return await t.RelationshipCreator.createRenderer(E).then((i=>{if((0,a.l)(p,i.renderer),g){i.renderer.uniqueValueInfos.forEach((i=>{const n=g.clone();(0,a.X)(e,n,(0,a.Z)(e,i.symbol)),i.symbol=n}))}return(0,a.j)(e).uniqueValueInfos.forEach((e=>{const n=i.renderer.uniqueValueInfos.find((i=>e.value===i.value));n&&(n.label=e.label)})),v&&(i.renderer.defaultSymbol=v,i.renderer.defaultLabel=I),i}))}async function s(e,i){const{modules:n}=e;i=i||{};const l=(0,a.j)(e),r=l.authoringInfo;return await n.RelationshipCreator.updateRenderer({field1:r.field1,field2:r.field2,numClasses:i.numClasses?i.numClasses:r.numClasses,focus:i.focus?"none"===i.focus?null:i.focus:r.focus,colors:i.colors,renderer:l})}},67751:(e,i,n)=>{n.d(i,{a:()=>s,b:()=>d,c:()=>o,d:()=>u,e:()=>b,f:()=>m,g:()=>c,m:()=>r,s:()=>f});var l=n(68180),a=n(99592);n(97127);const r=500;async function o(e,i){const{layer:n,useFeatureReduction:o,mapImageSublayer:s,mapView:t,modules:u}=e,d=n;i=i||{};const c=(0,a.k)((0,a.j)(e)),m=i.fieldInfos[0];return await u.TypeCreator.createRenderer({layer:d,view:t,field:m.field,valueExpression:m.expression,valueExpressionTitle:m.expressionTitle,numTypes:i.numTypes||10,sortBy:i.sortBy||"count",typeScheme:i.typeScheme||(0,a.a5)(e,r),returnAllCodedValues:!0,outlineOptimizationEnabled:!s&&(!(0,l.i)(i.outlineOptimizationEnabled)||i.outlineOptimizationEnabled),sizeOptimizationEnabled:!s&&(!(0,l.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled),legendOptions:i.legendOptions,defaultSymbolEnabled:!0,forBinning:"binning"===d.featureReduction?.type&&o}).then((n=>{if(n.excludedUniqueValueInfos.length||(n.renderer.defaultLabel=void 0,n.renderer.defaultSymbol=void 0),f(e,i)){const i=(0,a.j)(e).clone(),l=(0,a.b)(i,"size","auto"),r=(0,a.b)(i,"size","outline");if(n.renderer.visualVariables=[],l&&(n.renderer.visualVariables=n.renderer.visualVariables||[],n.renderer.visualVariables.push(l)),r&&(n.renderer.visualVariables=n.renderer.visualVariables||[],n.renderer.visualVariables.push(r)),n.renderer.uniqueValueInfos=i.uniqueValueInfos,n.renderer.field2=i.field2,n.renderer.field3=i.field3,(0,a.z)(e)&&"type-size"===(0,a.a)(e)){const i=(0,a.m)(e),l=n.renderer.uniqueValueInfos?.slice();l?.forEach((n=>{const l=(0,a.Z)(e,n.symbol);n.symbol=i.clone(),(0,a.X)(e,n.symbol,l)})),n.renderer.uniqueValueInfos=l}}return(0,a.l)(c,n.renderer),n}))}async function s(e,i){const{layer:n,useFeatureReduction:o,mapImageSublayer:s,mapView:t,modules:u}=e,d=n,c=(i=i||[]).fieldInfos?i.fieldInfos[0]:null,m=(0,a.j)(e),f=(0,a.k)(m),b=m.uniqueValueInfos?.length?m.uniqueValueInfos[0].symbol:null,p=m.defaultSymbol,y=m.defaultLabel,z=c&&(c.field!==m.field||c.expression!==m.valueExpression);return i=i||{},await u.TypeCreator.createRenderer({layer:d,view:t,field:c?c.field:m.field,valueExpression:c?c.expression:m.valueExpression,valueExpressionTitle:c?c.expressionTitle:m.valueExpressionTitle,numTypes:i.numTypes||(z?10:m.uniqueValueInfos.length),sortBy:i.sortBy||"count",typeScheme:(0,a.a5)(e,r),outlineOptimizationEnabled:!s&&((0,l.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!f.sizeOutlineVisVar),sizeOptimizationEnabled:!s&&((0,l.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!f.sizeAutoVisVar),legendOptions:i.legendOptions||m.legendOptions,defaultSymbolEnabled:(0,l.i)(i.defaultSymbolEnabled)||!!m.defaultSymbol,forBinning:"binning"===d.featureReduction?.type&&o}).then((i=>{if((0,a.l)(f,i.renderer),b&&i.renderer.uniqueValueInfos?.length){const n=i.renderer.uniqueValueInfos.slice();n.forEach((i=>{const n=b.clone();(0,a.X)(e,n,(0,a.Z)(e,i.symbol)),i.symbol=n})),i.renderer.uniqueValueInfos=n}return p&&(i.renderer.defaultSymbol=p,i.renderer.defaultLabel=y),i}))}const t={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};function u(e,i,n){const{allUniqueValues:l,locale:r,mapView:o,modules:s}=e;if(s.intl.setLocale(r),n?.simpleFieldType===a.q.DATE){let e;l&&(e=s.rendererSupportUtils.calculateDateFormatInterval(l.map((e=>e.value))));const n=new Date(i);if("unknown"===o.timeZone)return s.intl.formatDate(n,{...s.intl.convertDateFormatToIntlOptions(e?t[e]:"long-month-day-year"),timeZone:"utc",timeZoneName:"shortOffset"});{const i=new Date(n.getTime()+6e4*n.getTimezoneOffset());return s.intl.formatDate(i,{...s.intl.convertDateFormatToIntlOptions(e?t[e]:"long-month-day-year"),timeZone:o.timeZone})}}return s.intl.formatDateOnly(i,s.intl.convertDateFormatToIntlOptions("long-month-day-year"))}function d(e){const{allUniqueValues:i,modules:n}=e,r=(0,a.j)(e);if(!i?.length||!(0,l.i)(i[0].count))return[];let o=[];r.uniqueValueGroups.forEach((e=>{const i=[];e.classes.forEach((e=>e.values.forEach((e=>i.push(`${e.value}`))))),o=o.concat(i)}));return i.filter((e=>!o.includes(null===e.value?"<Null>":`${e.value}`))).map((e=>new n.UniqueValueClass({label:e.label,symbol:e.symbol,values:[{value:e.value}]})))}function c(e){const{allUniqueValues:i}=e,n=(0,a.j)(e);if(!i?.length||!(0,l.i)(i[0].count))return[];let r=[];n.uniqueValueGroups.forEach((e=>{const i=[];e.classes.forEach((e=>e.values.forEach((e=>i.push("<Null>"===e.value?"null":`${e.value}`))))),r=r.concat(i)}));return i.filter((e=>!r.includes(`${e.value}`)))}function m(e,i){const{strings:n}=e;let l=1,a=n.panels.type.defaultGroupName.replace("${number}",l.toString());for(;i.find((e=>e.heading===a));)a=n.panels.type.defaultGroupName.replace("${number}",(++l).toString());return a}function f(e,i){if(["type","type-size"].includes((0,a.a)(e))){const n=(0,a.j)(e),l={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle};if((0,a.r)(i.fieldInfos[0],l))return!0}return!1}function b(e,i,n){const{modules:l}=e,r=(0,a.j)(e),o=(0,a.o)(e,r.field),s=o&&["small-integer","integer","big-integer","long"].includes((0,a.v)(e,o.layerField)),t=o?.simpleFieldType===a.q.DATE,d="date-only"===(0,a.v)(e,o?.layerField),c=[],m=(0,a.a5)(e);let f=0;i.classes.forEach(((r,b)=>{if(1===r.values.length||n&&!n.includes(b))c.push(r),f++;else if(!n||n.includes(b)){const n=r.symbol?.type,b=null!=n&&["simple-marker","simple-line","simple-fill","cim"].includes(n)?r.symbol:(0,a.m)(e,(0,a.a)(e));r.values.forEach(((n,r)=>{const p=l.esriLang.clone(b);if(r>0)if(m){const n=m.colors[(i.classes.length+f)%m.colors.length];n&&(0,a.X)(e,p,n)}else{const n=(0,a.a6)(e).colors,r=new l.EsriColor(n[(i.classes.length+f)%10]);r&&(0,a.X)(e,p,r)}const y=o?.layerField?.domain,z=y?y.codedValues?.find((e=>e.code===n.value)):null,h=z?z.name:t||d?u(e,n.value,o):o?.simpleFieldType===a.q.NUMBER?l.intl.formatNumber(s?Number.parseInt(n.value):Number.parseFloat(n.value)):n.value;c.push(new l.UniqueValueClass({values:[new l.UniqueValue({value:n.value})],label:h,symbol:p})),f++}))}})),i.classes=c}}}]);