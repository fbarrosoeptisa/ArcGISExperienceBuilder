/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20cc51.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20cc51"],{99004:(e,t,r)=>{r.d(t,{c:()=>s,g:()=>i});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},40486:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_data_store_select_server_list:()=>l});var s=r(19564),i=r(4948),a=r(5497),n=r(61191),o=r(33861),c=r(78964);r(18991),r(44508),r(5076),r(57159),r(98034),r(99004),r(65174),r(18409),r(86868),r(32084),r(91102),r(73807),r(98821),r(90079),r(32198),r(62913),r(17233),r(67336),r(87382),r(82297),r(76246),r(748),r(97018),r(56288),r(93863),r(80015),r(24211);const l=class{constructor(e){(0,s.r)(this,e),this.newItemUpdatePage=(0,s.c)(this,"newItemUpdatePage",7),this.loading=!0,this.noValidServers=!0,this.serverTypes=[],this.item={allowServicesRestart:!1,publisherFolderPath:n.a.publisherFolderPath,publisherFolderPathHostname:n.a.publisherFolderPathHostname,serverFolderPath:n.a.serverFolderPath,newServerFolderPath:n.a.newServerFolderPath,nfsSharePath:n.a.nfsSharePath,nfsHostName:n.a.nfsHostName},this.serverStatusIcons={success:"check-circle-f",failure:"exclamation-mark-circle-f",error:"exclamation-mark-triangle-f",validating:"information"},this.selectedServers=[],this.serverList=[],this.allBoxesSelected=!1,this.error=null,this.requireRestart=!1,this.openRequireRestartModal=!1}async componentWillLoad(){this.i18n=o.u.i18n.serverSelection,this.dataStoreType=n.a.addDataStoreType,this.serverList=n.a.dataStoreSelectServerList||[],this.serverList=this.filterServers(!1,!1,!1)}async componentDidLoad(){const e=await(0,a.d)({item:n.a,serverList:this.serverList,datastoreType:this.dataStoreType,portal:i.c.portal});this.serverList=[...e];const t=await(0,a.e)(this.serverList);this.openRequireRestartModal=e.some((e=>"RequiresServicesRestart"===(null==e?void 0:e.error))),this.serverList=[...t.servers],this.serverTypes=[...t.serverTypes],this.renderTable(),this.appendServerTypes(),this.loading=!1}filterServers(e,t,r){return(this.serverList||[]).filter((s=>{const i=(s.serverRole||"").toUpperCase(),a=["ARCGIS_NOTEBOOK_SERVER","ARCGIS_MISSION_SERVER","ARCGIS_VIDEO_SERVER"],n=s.serverFunction&&s.serverFunction.replace(/\s+/g,"").split(",")||[],o=["NOTEBOOKSERVER","WORKFLOWMANAGER","MISSIONSERVER","VIDEOSERVER"];let l="HOSTING_SERVER"===i;e&&-1===n.indexOf("KnowledgeServer")&&(a.push(i),l=!1),r&&(0,c.i)()&&(l=!0);let d=-1===a.indexOf(i);return t&&(d=!1),l||d&&(!n.length||n.some((function(e){return-1===o.indexOf(e.toUpperCase())})))}))}renderTable(){const e=this.dataStoreType,t="nosql"===e,r="nfsHostAndPath"===n.a.serverFolderPath&&"folder"===e,s=this.checkDatabaseClient();this.serverList=this.filterServers(t,s,r),r||["folder","fileshare"].includes(e)&&(this.serverList=this.filterServersByServerPath())}checkDatabaseClient(){const e=this.dataStoreType,t=n.a.publisherConnectionString;let r=!1;if("database"===e&&t){t.split(";").forEach((function(e){e.indexOf("DBCLIENT")>-1&&["bigquery","snowflake","redshift"].indexOf(e.split("=")[1])>-1&&(r=!0)}))}return r}filterServersByServerPath(){const e=n.a.addDataStoreType,t=("folder"===e?n.a.newServerFolderPath||n.a.publisherFolderPath:n.a.publisherFileShareFolderPath)[0].indexOf("/")>-1?"Linux":"Windows",r="nfsHostAndPath"===n.a.serverFolderPath&&"folder"===e;return this.serverList.filter((e=>!!this.serverTypes.find((s=>(s.name===e.adminUrl||s.name===`${e.adminUrl}/admin`)&&(r?e.isHosted:s.type===t)))))}appendServerTypes(){const{serverList:e,i18n:t}=this;e.map((e=>{const r=e.serverFunction&&e.serverFunction.replace(/\s+/g,"").split(",")||[];let s="";"HOSTING_SERVER"===e.serverRole&&(s+=t.types.hostedSetting),r.indexOf("NotebookServer")>-1&&(s+=(s&&", ")+t.types.notebookServerSetting),r.indexOf("GeoAnalytics")>-1&&(s+=(s&&", ")+t.types.geoAnalyticsServerSetting),r.indexOf("RasterAnalytics")>-1&&(s+=(s&&", ")+t.types.rasterAnalysisSetting),r.indexOf("ImageHosting")>-1&&(s+=(s&&", ")+t.types.imageHostingSetting),r.indexOf("MissionServer")>-1&&(s+=(s&&", ")+t.types.missionServerSetting),e.serverType=s}))}convertStatusDisplayText(e){const t=this.i18n,r=e.serverStatus;return{success:t.status.success,failure:t.status.failure,error:t.status.error,validating:t.status.validating}[r]}closeModal(){this.openRequireRestartModal=!1,this.newItemUpdatePage.emit("dataStoreSelectFolder")}async acceptRequireRestart(){this.loading=!0,this.openRequireRestartModal=!1,this.item.allowServicesRestart=!0,this.requireRestart=!0;const e=await(0,a.d)({item:this.item,serverList:this.serverList,datastoreType:this.dataStoreType,portal:i.c.portal});this.serverList=[...e];const t=await(0,a.e)(this.serverList);this.serverList=[...t.servers],this.serverTypes=[...t.serverTypes],this.renderTable(),this.appendServerTypes(),this.loading=!1}checkValidServers(){this.noValidServers=!this.serverList.some((e=>"success"===e.serverStatus))}checkAllBoxes(){this.selectedServers=[],this.allBoxesSelected||this.serverList.forEach((e=>{this.selectedServers=[...this.selectedServers,e.id]})),this.allBoxesSelected=!this.allBoxesSelected}handleNext(){const e=this.selectedServers||[];0!==e.length?(this.requireRestart&&(n.a.allowServicesRestart=!0),n.a.dataStoreSelectedServers=e,this.newItemUpdatePage.emit("itemProperties")):this.error="noServerSelected"}render(){const{i18n:e,error:t,serverList:r,loading:i,allBoxesSelected:a,noValidServers:n}=this;return(0,s.h)("div",{key:"12468f17a6426fd116aca8a3dd6cc126f184c78d"},(0,s.h)("arcgis-new-item-description",{key:"95059c68b971ab669d4675085bfb3d1cb309124b",header:e.dataStoreServerSelect.heading}),(0,s.h)("p",{key:"1739c763a9ef8f193728b1dc17f1d0a9eb950b7a",class:"sub-heading"},e.dataStoreServerSelect.subHeading),i?(0,s.h)("calcite-loader",{label:"server-loader",text:e.loader.validating}):(0,s.h)(s.F,null,(0,s.h)("div",{class:"row-wrapper"},(0,s.h)("div",{class:"half-row"},(0,s.h)("calcite-label",{layout:"inline"},(0,s.h)("calcite-checkbox",{disabled:n,checked:a,onCalciteCheckboxChange:()=>{this.checkAllBoxes()}}),e.list.title)),(0,s.h)("div",{class:"half-row"},(0,s.h)("calcite-label",{layout:"inline"},e.list.status))),r.map((e=>(0,s.h)("div",{class:"row-wrapper row-divider"},(0,s.h)("div",{class:"half-row"},(0,s.h)("calcite-label",{layout:"inline",class:"server-wrapper"},(0,s.h)("calcite-checkbox",{disabled:"success"!==e.serverStatus,value:e.id,onCalciteCheckboxChange:e=>{const t=e.target.value;-1===this.selectedServers.indexOf(t)?this.selectedServers=[...this.selectedServers,t]:this.selectedServers=this.selectedServers.filter((e=>e!==t))},checked:this.selectedServers.includes(e.id)}),e.url+(e.serverType&&` (${e.serverType})`))),(0,s.h)("div",{class:"half-row"},(0,s.h)("div",{class:"status-wrapper",title:e.errorMsg||e.serverStatus},(0,s.h)("calcite-icon",{class:{success:"success"===e.serverStatus,failure:"failure"===e.serverStatus,error:"error"===e.serverStatus,validating:"validating"===e.serverStatus},scale:"s",icon:this.serverStatusIcons[e.serverStatus]}),this.convertStatusDisplayText(e)))))),(0,s.h)("arcgis-new-item-alert",{heading:e.dataStoreServerSelect.noServerSelected.heading,description:e.dataStoreServerSelect.noServerSelected.description,active:null!==t&&!i,onAlertDismiss:()=>{this.error=null}})),(0,s.h)("calcite-modal",{key:"95939787c134096d116d091d9946767eb9d39582",open:this.openRequireRestartModal,class:"requireRestartModal",onCalciteModalClose:e=>e.stopPropagation()},(0,s.h)("div",{key:"3b32fbc785148fb458f6b873ef31cf593a725143",slot:"content"},"You are registering a folder data store that uses a new path and host that has not been registered with ArcGIS Enterprise. This will cause several of your system and utility services to restart. To avoid disruption, consider registering during off-peak hours.",(0,s.h)("br",{key:"0dd29f4c8b2e8afa7dc9887084bdc394a3492de1"}),(0,s.h)("br",{key:"b70006d90ac4402b19d657cfdbbbf04e1bfd8eb7"}),"Are you sure you want to proceed"),(0,s.h)("calcite-button",{key:"67c3883667a69e4fd4587bd65401b53161712e02",slot:"secondary",appearance:"outline",onClick:()=>this.closeModal()},"Cancel"),(0,s.h)("calcite-button",{key:"d37b4c5cbe7e1ab4dcc01e0149a07ecc2e65c46c",slot:"primary",onClick:()=>this.acceptRequireRestart()},"OK")))}static get watchers(){return{serverList:["checkValidServers"]}}};l.style=".sub-heading{font-weight:400;color:var(--calcite-color-text-3)}.row-wrapper{margin-top:0.5rem;margin-bottom:0.5rem;display:flex;width:100%;padding-top:0.75rem}.row-divider{box-shadow:0 -1px 0 #eaeaea}.title{gap:0.5rem}.status-wrapper{display:flex;gap:0.5rem;line-height:1rem}.success{--calcite-ui-icon-color:var(--calcite-color-status-success)}.failure{--calcite-ui-icon-color:var(--calcite-color-status-danger)}.error{--calcite-ui-icon-color:var(--calcite-color-status-danger)}.validating{--calcite-ui-icon-color:var(--calcite-color-status-info)}.half-row{width:50%;padding-left:0.5rem;padding-right:0.5rem}.requireRestartModal{--calcite-modal-width:500px;--calcite-modal-height:400px}"},91102:(e,t,r)=>{r.d(t,{a:()=>c,c:()=>i,d:()=>l,g:()=>a,i:()=>n,s:()=>o});var s=r(73807);function i(e,t){return function e(r){return r?r.closest(t)||e(function(e){return e.getRootNode()}(r).host||null):null}(e)}function a(e){const t=i(e,".calcite-mode-dark, .calcite-mode-light");return(null==t?void 0:t.classList.contains("calcite-mode-dark"))?"dark":"light"}function n(e){let t=e;for(;null==t?void 0:t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function o(e){return(new s.S).sanitize(e)}function c(e){const t=o(e),r=document.createElement("div");return r.innerHTML=t,r.textContent||r.innerText||""}function l(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}},98034:(e,t,r)=>{r.d(t,{e:()=>a,l:()=>n});var s,i=r(99004),a={exports:{}};s=a.exports,i.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",s="next";function i(e){if(e.toLowerCase()===s)return s;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function a(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function n(e){void 0===e&&(e=r);var t=a(e),n=i(e);if(n!==s&&3===n.major){var o=n.minor<=10?"js/":"";return"".concat(t).concat(o,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function o(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function d(e){return!e||i(e)?n(e):e}function u(e,t){var r=d(e),s=l(r);return s||c(s=o(r),t),s}var h={};function v(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function p(e,t,r){var s;r&&(s=f(e,r));var i=function(){t(e),e.removeEventListener("load",i,!1),s&&e.removeEventListener("error",s,!1)};e.addEventListener("load",i,!1)}function f(e,t){var r=function(s){t(s.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function S(e){void 0===e&&(e={}),h=e}function m(){return document.querySelector("script[data-esri-loader]")}function g(){var e=window.require;return e&&e.on}function y(e){void 0===e&&(e={});var r={};[h,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var s=r.version,i=r.url||a(s);return new t.Promise((function(e,t){var a=m();if(a){var n=a.getAttribute("src");n!==i?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(n,")."))):g()?e(a):p(a,e,t)}else if(g())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var o=r.css;o&&u(!0===o?s:o,r.insertCssBefore),p(a=v(i),(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),t),document.body.appendChild(a)}}))}function b(e){return new t.Promise((function(t,r){var s=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];s.remove(),t(e)}))}))}function w(e,t){if(void 0===t&&(t={}),g())return b(e);var r=m(),s=r&&r.getAttribute("src");return!t.url&&s&&(t.url=s),y(t).then((function(){return b(e)}))}e.utils=t,e.loadModules=w,e.getScript=m,e.isLoaded=g,e.loadScript=y,e.setDefaultOptions=S,e.loadCss=u,Object.defineProperty(e,"__esModule",{value:!0})}(s);const n=async(e,t)=>(await a.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);