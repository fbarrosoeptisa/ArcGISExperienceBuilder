/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-1ac00f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-1ac00f"],{14471:(e,n,i)=>{i.d(n,{a:()=>t,b:()=>s,s:()=>o});i(68180);var a=i(99592);i(97127);const t={true:"https://ndh-inf-ml-p01.esri.com/dev/mapping",vpn:"https://ndh-inf-ml-p01.esri.com/dev/mapping",aws:"https://devsummitdemowin.webgistesting.net/dev/mapping"};async function s(e,n){const{text:i}=n,{layer:t,modules:s}=e;if(!(0,a.n)(t))throw new Error("layer is not a FeatureLayer");const o={token:"",map_data:{data:t.fields.map((e=>({fieldName:e.name,alias:e.alias,dataType:e.type})))},messages:i,entry_point:"style"},r={method:"post",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}};console.log("request body: ",o);try{const{data:n}=await s.esriRequest(l(e),r);if(n.status_code&&200!==n.status_code)return console.log("*** question/response: ",JSON.stringify({question:i,response:n})),{message:n.botMessage,status:"error",type:"response"};const a=n[0],t=a.botMessage;return{message:t,status:"map_style"===a.actionType?"valid":"invalid",dataObject:a,type:"response"}}catch(e){return{message:e.message,status:"error",type:"response"}}}async function o(e,n){const{text:i}=n,{layer:t,modules:s}=e;if(!(0,a.n)(t))throw new Error("layer is not a FeatureLayer");const o=t.fields.map((e=>({fieldName:e.name,alias:e.alias,dataType:e.type}))),r={method:"post",body:JSON.stringify({token:"",map_data:{data:o},messages:i,entry_point:"style"}),headers:{"Content-Type":"application/json"}};console.log(JSON.stringify(r));try{await s.esriRequest(l(e),r)}catch(e){throw new Error("submit feedback failed")}}function l(e){const{modules:n}=e,i=n.urlUtils.urlToObject(document.URL),a=i.query||{};return i.query?.assistUrl||t[a.assist]}},58825:(e,n,i)=>{i.d(n,{a:()=>o,c:()=>s,g:()=>l});var a=i(68180),t=i(99592);i(97127);async function s(e,n){const{layer:i,useFeatureReduction:s,mapImageSublayer:o,mapView:l,modules:r}=e,d=i;n=n||{};const u=(0,t.k)((0,t.j)(e));return await r.ColorCreator.createContinuousRenderer({layer:d,view:l,field:n.fieldInfos[0].field,theme:"above-and-below",colorScheme:(0,t.Y)(e,"above-and-below"),normalizationField:n.fieldInfos[1].field,outlineOptimizationEnabled:!o&&((0,a.i)(n.outlineOptimizationEnabled)?n.outlineOptimizationEnabled:(0,t.z)(e)),sizeOptimizationEnabled:!o&&(!(0,a.i)(n.sizeOptimizationEnabled)||n.sizeOptimizationEnabled),legendOptions:n.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===d.featureReduction?.type&&s}).then((e=>(((0,t.G)(e.renderer,"color")||{}).style="ratio",(0,t.l)(u,e.renderer),e)))}async function o(e,n){const{layer:i,useFeatureReduction:s,mapImageSublayer:o,mapView:r,modules:d}=e,u=i;n=n||{};const f=(0,t.j)(e),c=(0,t.b)(f,"color");if(c&&n.fieldInfo&&n.fieldInfo.field===c.field&&n.normalizationField===c.normalizationField&&(delete n.fieldInfos,(0,t.T)(n)))return{renderer:f.clone()};const m=(0,t.G)(f,"color"),b=(0,t.k)(f),p=n.fieldInfos?n.fieldInfos[0]:c?{field:c.field,expression:c.valueExpression,expressionTitle:c.valueExpressionTitle,simpleFieldType:t.q.NUMBER}:{field:f.field,expression:f.valueExpression,expressionTitle:f.valueExpressionTitle,simpleFieldType:t.q.NUMBER},y=n.normalizationField?n.normalizationField:c?c.normalizationField:f.normalizationField,h=f.classBreakInfos?.length?f.classBreakInfos[0].symbol:null,g=f.defaultSymbol,I=f.defaultLabel;let z=!1;(null===n.normalizationField||n.normalizationField||n.fieldInfo)&&(z=!0);const v=n.discardMinMax?void 0:(0,a.i)(n.min)?n.min:z?void 0:m?m.minSliderValue:f.classBreakInfos[0].minValue,V=n.discardMinMax?void 0:(0,a.i)(n.max)?n.max:z?void 0:m?m.maxSliderValue:f.classBreakInfos[f.classBreakInfos.length-1].maxValue;return await d.ColorCreator.createContinuousRenderer({layer:u,view:r,field:p?p.field:f.field,theme:"above-and-below",colorScheme:(0,t.Y)(e,"above-and-below"),normalizationField:y,minValue:v,maxValue:V,outlineOptimizationEnabled:!o&&((0,a.i)(n.outlineOptimizationEnabled)?n.outlineOptimizationEnabled:!!b.sizeOutlineVisVar),sizeOptimizationEnabled:!o&&((0,a.i)(n.sizeOptimizationEnabled)?n.sizeOptimizationEnabled:!!b.sizeAutoVisVar),legendOptions:n.legendOptions?.toJSON()||c?.legendOptions?.toJSON()||f.legendOptions?.toJSON(),defaultSymbolEnabled:(0,a.i)(n.defaultSymbolEnabled)?n.defaultSymbolEnabled:!!f.defaultSymbol,forBinning:"binning"===u.featureReduction?.type&&s}).then((e=>{if(n.discardMinMax){const n=(0,t.b)(f,"color"),i=(0,t.b)(e.renderer,"color");n.stops.forEach(((e,n)=>e.value=i.stops[n].value));const a=!!m&&"percent"===m.style,s=!!m&&"percent-of-total"===m.style;n.stops[0].label=`< ${l(n.stops[0].value,a,s)}`,n.stops[2].label=l(n.stops[2].value,a,s),n.stops[4].label=`> ${l(n.stops[4].value,a,s)}`}return((0,t.G)(e.renderer,"color")||{}).style="ratio",(0,t.l)(b,e.renderer),h&&e.renderer.classBreakInfos?.length&&(e.renderer.classBreakInfos[0].symbol=h),g&&(e.renderer.defaultSymbol=g,e.renderer.defaultLabel=I),e}))}function l(e,n,i){return i?Math.round(e/(1+e)*1e4)/100+"%":n?Math.round(1e4*e)/100+"%":`${e}`}},5738:(e,n,i)=>{i.d(n,{a:()=>l,b:()=>p,c:()=>f,d:()=>y,e:()=>c,f:()=>r,g:()=>b,u:()=>m});var a=i(68180),t=i(99592),s=(i(97127),i(58944)),o=i(372);async function l(e,n){const{layer:i,useFeatureReduction:t,mapImageSublayer:s,mapView:o,modules:l}=e,r=i;return n=n||{},await l.DotDensityCreator.createRenderer({layer:r,view:o,attributes:(0,a.i)(n.attributes)?n.attributes:d(e,n.fieldInfos),dotBlendingEnabled:!(0,a.i)(n.dotBlendingEnabled)||n.dotBlendingEnabled,dotValueOptimizationEnabled:!(0,a.i)(n.dotValueOptimizationEnabled)||n.dotValueOptimizationEnabled,outlineOptimizationEnabled:!s&&(!(0,a.i)(n.outlineOptimizationEnabled)||n.outlineOptimizationEnabled),legendOptions:n.legendOptions,forBinning:"binning"===r.featureReduction?.type&&t})}async function r(e,n){const{layer:i,mapImageSublayer:s,mapView:o,modules:l}=e,r=i;n=n||{};const d=(0,t.j)(e);return await l.DotDensityCreator.createRenderer({layer:r,view:o,attributes:n.attributes??d.attributes.map((e=>new l.AttributeColorInfo({field:e.field,label:e.label}))),dotBlendingEnabled:n.dotBlendingEnabled??d.dotBlendingEnabled,dotValueOptimizationEnabled:n.dotValueOptimizationEnabled??(0,a.i)(d.referenceScale),outlineOptimizationEnabled:!s&&(n.dotValueOptimizationEnabled??!0),legendOptions:n.legendOptions??d.legendOptions,forBinning:n.forBinning??"binning"===r.featureReduction?.type})}function d(e,n){return n.map((n=>({field:n.field,label:u(e,n.field)})))}function u(e,n){const i=e.fields.filter((e=>e.layerField.name===n));return i.length?i[0].label:""}async function f(e,n){const{layer:i,mapView:a,modules:s}=e,o=i,l=(0,t.j)(e);return n=n||{},"heatmap"===(0,t.a)(e)&&(n.radius=n.radius||l.radius,n.heatmapScheme=n.heatmapScheme||(0,t.a1)(e)),n.fieldInfos?.length&&(0,t.S)(e,[n.fieldInfos[0].field]),await s.HeatmapCreator.createRenderer({layer:o,view:a,field:n.fieldInfos?.length?n.fieldInfos[0].field:null,radius:n.radius||10,heatmapScheme:n.heatmapScheme||void 0})}async function c(e,n){const{layer:i,mapView:a,modules:s}=e,o=i;n=n||{};const l=(0,t.j)(e),r=l.authoringInfo;return await s.HeatmapCreator.createRenderer({layer:o,view:a,field:n.fieldInfos?.length?n.fieldInfos[0].field:l.field,fadeRatio:n.fadeRatio??r?.fadeRatio,radius:n.radius||l.radius||10,heatmapScheme:n.heatmapScheme||(0,t.a1)(e)})}function m(e,n){const{modules:i}=e,a=(0,t.j)(e);return i.HeatmapCreator.updateRenderer({renderer:a,fadeRatio:n})}async function b(e,n){const{layer:i,mapView:a,modules:s}=e,o=i,l=(0,t.j)(e);return n=n||{},await s.heatmapStatistics({layer:o,view:a,field:l.field,radius:n.radius||l.radius||10}).then((e=>(l.minDensity=e.min,l.maxDensity=e.max,e)))}async function p(e,n){n=n||{};const i=[],a=[];return i.push(n.fieldInfos[0]),i.push(n.fieldInfos[1]),a.push(n.fieldInfos[2]),function(e,n){if("relationship"===(0,t.a)(e)&&void 0===n.normalizationField1&&void 0===n.normalizationField2){const i=(0,t.j)(e).authoringInfo;if(n.fieldInfos&&n.fieldInfos.length>1&&n.fieldInfos[0].field===i.field1.field&&n.fieldInfos[1].field===i.field2.field)return!0}return!1}(e,n)?await h(e,(0,t.j)(e),a,n).then((e=>({renderer:e}))):await(0,o.c)(e,{...n,fieldInfos:i}).then((async i=>await h(e,i.renderer,a,n).then((e=>(i.renderer=e,i)))))}async function y(e,n,i){return n=n||{},await(0,s.f)(e,{...n,fieldInfos:n.fieldInfos?[n.fieldInfos[2]]:null}).then((async a=>await(0,o.a)(e,{...n,fieldInfos:n.fieldInfos?[n.fieldInfos[0],n.fieldInfos[1]]:null}).then((n=>(function(e,n,i){const{modules:a}=e;n.visualVariables=(0,t.V)(n,"size")||[],n.visualVariables=(0,t.V)(n,"size","auto")||[];const s=(0,t.b)(i,"size");n.visualVariables.push(s),n.authoringInfo=n.authoringInfo||new a.AuthoringInfo({}),n.authoringInfo.visualVariables=(0,t.W)(n,"size")||[];const o=(0,t.G)(i,"size");if(n.authoringInfo.visualVariables.push(o),(0,t.z)(e)){const a=i.classBreakInfos?.length?i.classBreakInfos[0].symbol:i.uniqueValueInfos?.length?i.uniqueValueInfos[0].symbol:(0,t.m)(e,"relationship-size"),s=n.uniqueValueInfos.slice();s.forEach((n=>{const i=(0,t.Z)(e,n.symbol);n.symbol=a.clone(),(0,t.X)(e,n.symbol,i)})),n.uniqueValueInfos=s,n.backgroundFillSymbol=i.backgroundFillSymbol;const o=(0,t.b)(i,"size","outline");o&&n.visualVariables.push(o)}}(e,n.renderer,a.renderer),n.backgroundFillSymbol=(0,t.j)(e).backgroundFillSymbol,"size"===i&&(n.statistics=a.statistics),n)))))}async function h(e,n,i,a){const{modules:o}=e;return await(0,s.c)(e,{...a,fieldInfos:i}).then((i=>{const a=i.renderer;n.visualVariables=(0,t.V)(n,"size")||[],n.visualVariables=(0,t.V)(n,"size","auto")||[];const s=(0,t.b)(a,"size"),l=(0,t.G)(a,"reference-size");l||n.visualVariables.push(s),n.authoringInfo.visualVariables=(0,t.W)(n,"size")||[];const r=(0,t.G)(a,"size");if(n.authoringInfo.visualVariables.push(r),(0,t.z)(e)){const i=a.classBreakInfos[0].symbol,s=[];n.uniqueValueInfos.forEach((e=>{s.push(o.esriLang.clone(e))})),s.forEach((e=>{n.removeUniqueValueInfo(e.value)})),s.forEach((a=>{const s=i.clone();(0,t.X)(e,s,(0,t.Z)(e,a.symbol)),n.addUniqueValueInfo({value:a.value,symbol:s,label:a.label})})),n.backgroundFillSymbol=a.backgroundFillSymbol;const r=(0,t.b)(a,"size","outline");!l&&r&&n.visualVariables.push(r)}return n}))}},79323:(e,n,i)=>{i.d(n,{a:()=>l,b:()=>r,c:()=>o,d:()=>d});i(68180);var a=i(99592),t=(i(97127),i(58944)),s=i(67751);async function o(e,n){const i=(0,a.a)(e),s=(n=n||{}).fieldInfos.length>1?n.fieldInfos[1]:n.fieldInfos[0];if((0,t.s)(e,{fieldInfos:[s]})&&["color-size","type-size"].includes(i)){if((0,a.b)((0,a.j)(e),"size")&&(0,a.j)(e).authoringInfo)return await u(e,(0,a.j)(e),n)}return await(0,t.c)(e,{...n,fieldInfos:[n.fieldInfos[1]]}).then((async i=>await u(e,i.renderer,n)))}async function l(e,n){const i=(0,a.a)(e),s=(n=n||{}).fieldInfos.length>1?n.fieldInfos[1]:n.fieldInfos[0];if((0,t.s)(e,{fieldInfos:[s]})&&["color-size-age","type-size-age"].includes(i)){if((0,a.b)((0,a.j)(e),"size")&&(0,a.j)(e).authoringInfo)return await u(e,(0,a.j)(e),n)}return await(0,t.a)(e,{...n,fieldInfos:[n.fieldInfos[1]]}).then((async i=>await u(e,i.renderer,n)))}async function r(e,n,i){return n=n||{},await(0,t.f)(e,{...n,fieldInfos:n.fieldInfos?[n.fieldInfos[1]]:null}).then((async t=>await(0,s.a)(e,{...n,fieldInfos:n.fieldInfos?[n.fieldInfos[0]]:null}).then((n=>(f(e,n.renderer,t.renderer),n.backgroundFillSymbol=(0,a.j)(e).backgroundFillSymbol,"size"===i&&(n.statistics=t.statistics),n)))))}async function d(e,n,i){const{modules:o}=e;return n=n||{},await(0,t.h)(e,{...n,fieldInfos:n.fieldInfos?[n.fieldInfos[1]]:null}).then((async t=>{if(delete n.units,delete n.startTime,delete n.endTime,(0,a.T)(n)){const n=(0,a.j)(e).clone();n.visualVariables=(0,a.V)(n,"size")||[];const i=(0,a.b)(t.renderer,"size");n.visualVariables.push(i),n.authoringInfo=n.authoringInfo||new o.AuthoringInfo({}),n.authoringInfo.visualVariables=(0,a.W)(n,"size")||[];const s=(0,a.G)(t.renderer,"size");return n.authoringInfo.visualVariables.push(s),{renderer:n}}return await(0,s.a)(e,{...n,fieldInfos:n.fieldInfos?[n.fieldInfos[0]]:null}).then((n=>(f(e,n.renderer,t.renderer),n.backgroundFillSymbol=(0,a.j)(e).backgroundFillSymbol,"size"===i&&(n.statistics=t.statistics),n)))}))}async function u(e,n,i){const t=(0,a.a)(e);if((0,s.s)(e,i)&&["type","type-size","type-size-age"].includes(t)){const i=(0,a.j)(e).clone();return f(e,i,n),{renderer:i}}return await(0,s.c)(e,{...i,fieldInfos:[i.fieldInfos[0]]}).then((i=>(f(e,i.renderer,n),i)))}function f(e,n,i){const{modules:t}=e;n.visualVariables=(0,a.V)(n,"size")||[],n.visualVariables=(0,a.V)(n,"size","auto")||[];const s=(0,a.b)(i,"size");n.visualVariables.push(s),n.authoringInfo=n.authoringInfo||new t.AuthoringInfo({}),n.authoringInfo.visualVariables=(0,a.W)(n,"size")||[];const o=(0,a.G)(i,"size");if(n.authoringInfo.visualVariables.push(o),(0,a.z)(e)){const t=i.classBreakInfos?.length?i.classBreakInfos[0].symbol:i.uniqueValueInfos?.length?i.uniqueValueInfos[0].symbol:(0,a.m)(e,"type-size"),s=n.uniqueValueInfos.slice();s.forEach((n=>{const i=(0,a.Z)(e,n.symbol);n.symbol=t.clone(),(0,a.X)(e,n.symbol,i)})),n.uniqueValueInfos=s,n.backgroundFillSymbol=i.backgroundFillSymbol;const o=(0,a.b)(i,"size","outline");o&&n.visualVariables.push(o)}}}}]);