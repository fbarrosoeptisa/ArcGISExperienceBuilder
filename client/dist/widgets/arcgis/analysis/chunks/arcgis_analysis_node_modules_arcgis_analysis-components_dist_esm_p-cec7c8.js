"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_p-cec7c8"],{96063:(e,a,l)=>{l.d(a,{A:()=>u,N:()=>C,a:()=>M,b:()=>s,c:()=>D,d:()=>I,e:()=>d,f:()=>A,g:()=>R,h:()=>k,i:()=>L,j:()=>T,k:()=>F,l:()=>U,m:()=>_,n:()=>x,o:()=>N,p:()=>p,s:()=>y});var t=l(64872),n=l(86312),i=l(12064),r=l(22069),o=l(46784);const u={GPBoolean:"GPBoolean",GPComposite:"GPComposite",GPDataFile:"GPDataFile",GPDate:"GPDate",GPDouble:"GPDouble",GPFeatureRecordSetLayer:"GPFeatureRecordSetLayer",GPField:"Field",GPLinearUnit:"GPLinearUnit",GPArealUnit:"GPArealUnit",GPLong:"GPLong",GPMultiValueBoolean:"GPMultiValue:GPBoolean",GPMultiValueComposite:"GPMultiValue:GPComposite",GPMultiValueDataFile:"GPMultiValue:GPDataFile",GPMultiValueDate:"GPMultiValue:GPDate",GPMultiValueDouble:"GPMultiValue:GPDouble",GPMultiValueFeatureRecordSetLayer:"GPMultiValue:GPFeatureRecordSetLayer",GPMultiValueField:"GPMultiValue:Field",GPMultiValueLinearUnit:"GPMultiValue:GPLinearUnit",GPMultiValueArealUnit:"GPMultiValue:GPArealUnit",GPMultiValueLong:"GPMultiValue:GPLong",GPMultiValueRasterDataLayer:"GPMultiValue:GPRasterDataLayer",GPMultiValueRecordSet:"GPMultiValue:GPRecordSet",GPMultiValueString:"GPMultiValue:GPString",GPMultiValueValueTable:"GPMultiValue:GPValueTable",GPRasterDataLayer:"GPRasterDataLayer",GPRecordSet:"GPRecordSet",GPString:"GPString",GPValueTable:"GPValueTable"},s={Vertical:"vertical",Horizontal:"horizontal"};function c(e,a,l,n){if(!(0,t.a)(e))return e;for(var i=-1,r=(a=(0,t.y)(a,e)).length,o=r-1,u=e;null!=u&&++i<r;){var s=(0,t.t)(a[i]),c=l;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(i!=o){var d=u[s];void 0===(c=n?n(d,s,u):void 0)&&(c=(0,t.a)(d)?d:(0,t.c)(a[i+1])?[]:{})}(0,t.A)(u,s,c),u=u[s]}return e}function d(e,a,l){for(var n=-1,i=a.length,r={};++n<i;){var o=a[n],u=(0,t.r)(e,o);l(u,o)&&c(r,(0,t.y)(o,e),u)}return r}const p=(0,t.B)((function(e,a){return null==e?{}:function(e,a){return d(e,a,(function(a,l){return(0,n.h)(e,l)}))}(e,a)}));function y(e,a,l){return null==e?e:c(e,a,l)}const f=({key:e,onSetRef:a,onValueChange:l,onHelpClick:t,dataType:n,label:r,value:o,required:s,choiceList:c,choiceListLabels:d,choiceListIcons:p,placeholderText:y,...f})=>(0,i.h)("analysis-string-input",{key:e,ref:a,label:r,value:o,required:s,choiceList:c,selectionMode:n===u.GPMultiValueString?"multi":"single",choiceListIcons:p,choiceListLabels:d,onAnalysisStringInputChange:l,onAnalysisHelpClick:t,placeholderText:y,...f}),m=({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,value:r,...o})=>{const{dataType:u,...s}=o;return(0,i.h)("analysis-boolean-input",{key:e,ref:a,label:n,value:r,onAnalysisBooleanInputChange:l,onAnalysisHelpClick:t,...s})},h=({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,dataType:n,label:r,value:o,required:s,choiceList:c,placeholderText:d,...p})=>{const y=c?.map(parseFloat).filter(isFinite),f=n===u.GPLong||n===u.GPMultiValueLong?"integer":"float",m=n===u.GPMultiValueDouble||n===u.GPMultiValueLong?"multi":"single";return(0,i.h)("analysis-number-input",{key:e,ref:a,"number-type":f,label:r,value:o,selectionMode:m,choiceList:y,required:s,onAnalysisNumberInputChange:l,onAnalysisHelpClick:t,placeholderText:d,...p})},v=({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,value:r,...o})=>(0,i.h)("analysis-date-input",{key:e,ref:a,label:n,value:r,onAnalysisHelpClick:t,onAnalysisDateInputChange:l,...o}),P=({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,value:r,required:o,choiceList:u,placeholderText:s,...c})=>{const{dataType:d,...p}=c;return(0,i.h)("analysis-linear-unit-input",{key:e,ref:a,label:n,value:r,required:o,unitChoiceList:u,onAnalysisLinearUnitInputChange:l,onAnalysisHelpClick:t,placeholderText:s,...p})},G=({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,value:r,required:o,choiceList:u,placeholderText:s,...c})=>{const{dataType:d,...p}=c;return(0,i.h)("analysis-areal-unit-input",{key:e,ref:a,label:n,value:r,required:o,unitChoiceList:u,onAnalysisArealUnitInputChange:l,onAnalysisHelpClick:t,placeholderText:s,...p})},b=({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,dataType:n,label:s,layerFilterType:c,value:d,required:p,user:y,portalHelpMap:f,mapLayers:m,modelVariableLayers:h,selectedLayers:v,...P})=>{const G=n===u.GPMultiValueFeatureRecordSetLayer||n===u.GPMultiValueRecordSet,b=n===u.GPRecordSet||n===u.GPMultiValueRecordSet,g=n===u.GPFeatureRecordSetLayer||n===u.GPMultiValueFeatureRecordSetLayer;let V=c;return b?V=Array.isArray(c)?c.concat([o.L.Feature_Table]):void 0!==c?[c,o.L.Feature_Table]:[o.L.Feature_Table,o.L.Feature_All]:(0,r.i)(c)&&g&&(V=o.L.Feature_All),(0,i.h)("analysis-layer-input",{key:e,ref:a,label:s,value:d,required:p,user:y,portalHelpMap:f,layerFilterType:V,mapLayers:m,modelVariableLayers:h,selectionMode:G?"multi":"single",selectedLayers:v,onAnalysisLayerInputChange:l,onAnalysisHelpClick:t,...P})},g=({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,dataType:n,label:r,value:o,required:s,layer:c,analysisDataset:d,placeholderText:p,...y})=>(0,i.h)("analysis-field-input",{key:e,ref:a,label:r,value:o,storeAsGPValue:n===u.GPField||n===u.GPMultiValueField,required:s,selectionMode:n===u.GPMultiValueField?"multi":"single",mapLayer:c,analysisDataset:d,onAnalysisFieldInputChange:l,onAnalysisHelpClick:t,placeholderText:p,...y}),V=({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,value:r,portal:o,required:u,...s})=>{const{supportsUpload:c,serviceUrl:d}=s;return(0,i.h)("analysis-data-file-input",{key:e,ref:a,label:n,value:r,onAnalysisDataFileInputChange:l,onAnalysisHelpClick:t,portal:o,required:u,hideUpload:!1===c||void 0===d,...s})},C=({name:e,label:a,user:l,portalHelpMap:t,required:n,onHelpClick:r,onSetRef:o,...u})=>(0,i.h)("analysis-unsupported-input",{key:e,label:a,ref:o,user:l,portalHelpMap:t,required:n,onAnalysisHelpClick:r,...u}),k={[u.GPString]:f,[u.GPMultiValueString]:f,[u.GPBoolean]:m,[u.GPDouble]:h,[u.GPMultiValueDouble]:h,[u.GPLong]:h,[u.GPMultiValueLong]:h,[u.GPDate]:v,[u.GPLinearUnit]:P,[u.GPArealUnit]:G,[u.GPFeatureRecordSetLayer]:b,[u.GPRecordSet]:b,[u.GPMultiValueFeatureRecordSetLayer]:b,[u.GPMultiValueRecordSet]:b,[u.GPField]:g,[u.GPMultiValueField]:g,[u.GPDataFile]:V,[u.GPRasterDataLayer]:({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,mapLayers:r,value:o,portal:u,required:s,...c})=>{const{supportsUpload:d,serviceUrl:p}=c;return(0,i.h)("analysis-data-file-input",{browseOption:"layer",hideUpload:!1===d||void 0===p,key:e,label:n,mapLayers:r,onAnalysisDataFileInputChange:l,onAnalysisHelpClick:t,portal:u,ref:a,required:s,value:o,...c})},[u.GPMultiValueRasterDataLayer]:C,[u.GPMultiValueDataFile]:C},L={"analysis-areal-unit-input":G,"analysis-string-input":f,"analysis-date-input":v,"analysis-boolean-input":m,"analysis-number-input":h,"analysis-field-input":g,"analysis-traffic-time-input":({name:e,toolData:a,onSetRef:l,onValueChange:t,onHelpClick:n,label:r,...o})=>{const{value:u,resetTimeZoneValue:s,...c}=o,d=null===u?void 0:u,p=null===a?.timeZoneForTimeOfDay||!0===s?void 0:a?.timeZoneForTimeOfDay;return!0===s&&void 0!==a&&(a.timeZoneForTimeOfDay=void 0),(0,i.h)("analysis-traffic-time-input",{value:{timeOfDay:d,timeZoneForTimeOfDay:p},resetTimeZoneValue:s,key:e,ref:l,label:r,onAnalysisTrafficTimeInputChange:t,onAnalysisHelpClick:n,...c})},"analysis-linear-unit-input":P,"analysis-layer-input":b,"analysis-dataset-input":({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,value:r,required:o,analysisDatasets:u,...s})=>(0,i.h)("analysis-dataset-input",{key:e,ref:a,label:n,value:r,required:o,analysisDatasets:u,onAnalysisDatasetInputChange:l,onAnalysisHelpClick:t,...s}),"analysis-summary-fields":({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,layer:r,required:o,...u})=>{const{value:s,...c}=u;return(0,i.h)("analysis-summary-fields",{key:e,ref:a,label:n,required:o,layer:r,value:s,onAnalysisSummaryFieldsChange:l,onAnalysisHelpClick:t,...c})},"analysis-item-input":({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,value:r,portal:o,user:u,required:s,...c})=>{if(null==o||void 0===u)throw new Error("Portal and user required for item input");return(0,i.h)("analysis-item-input",{key:e,ref:a,label:n,value:r,onAnalysisItemInputChange:l,onAnalysisHelpClick:t,portal:o,user:u,required:s,...c})},"analysis-folder-input":({name:e,user:a,label:l,value:t,onValueChange:n,onHelpClick:r,onSetRef:o,...u})=>{if(void 0===a)throw new Error("User required for output folder input");return(0,i.h)("analysis-folder-input",{key:e,user:a,value:t,ref:o,onAnalysisFolderInputChange:n,onAnalysisHelpClick:r,label:l,...u})},"analysis-spatial-reference-input":({name:e,onSetRef:a,onValueChange:l,onHelpClick:t,label:n,value:r,required:o,...u})=>(0,i.h)("analysis-spatial-reference-input",{key:e,ref:a,label:n,value:r,required:o,onAnalysisSpatialReferenceInputChange:l,onAnalysisHelpClick:t,...u}),"analysis-slot":e=>(0,i.h)("slot",{name:e.slotName,ref:e.onSetRef}),"analysis-geoenrichment-input":({name:e,toolData:a,onSetRef:l,onValueChange:t,onHelpClick:n,label:r,portal:o,required:u,...s})=>{const{value:c,...d}=s,p={analysisVariables:c??void 0,country:a?.country??void 0,hierarchy:a?.hierarchy??void 0,labels:a?.labels??void 0};return(0,i.h)("analysis-geoenrichment-input",{key:e,ref:l,label:r,value:p,portal:o,onAnalysisGeoenrichmentInputChange:t,onAnalysisHelpClick:n,required:u,...d})},"analysis-query-input":({name:e,onSetRef:a,onValueChange:l,mapLayers:t,value:n,toolData:r,onHelpClick:o,label:u,required:s,...c})=>{let d=n;const{expressions:p,inputLayers:y}=r??{};return"sql"!==c.mode&&void 0!==p&&void 0!==y&&(d={expressions:p,inputLayers:y}),(0,i.h)("analysis-query-input",{key:e,label:u,ref:a,onAnalysisQueryInputChange:l,onAnalysisHelpClick:o,value:d,mapLayers:t,required:s,...c})},"analysis-overwrite":({value:e,portal:a,onSetRef:l,toolData:t,required:n,onValueChange:r,...o})=>(0,i.h)("analysis-overwrite",{portal:a,toolData:t,value:e,ref:l,required:n,onAnalysisOverwriteValueChange:r,...o}),"analysis-workflow-select":({name:e,onSetRef:a,onHelpClick:l,onValueChange:t,label:n,value:r,required:o,...u})=>(0,i.h)("analysis-workflow-select",{key:e,ref:a,label:n,required:o,value:r,onAnalysisWorkflowSelectChange:t,onAnalysisHelpClick:l,...u}),"analysis-data-file-input":V},A=({required:e,parameterType:a,label:l,displayName:t,name:n,filter:i,...r})=>{const{direction:u,componentName:s,defaultValue:c,...d}=r;return{required:e??"esriGPParameterTypeRequired"===a,label:l??t??n,...(0,o.l)(i),...d}},M=e=>{let a;return void 0!==e.componentName?a=L[e.componentName]:void 0!==e.dataType&&(a=k[e.dataType]),a=a??C,(0,i.h)(a,{...A(e)})};function S(e){const a=e.indexOf(".");let l=e,t="";return a>0&&(l=e.substring(0,a),t=e.substring(a+1)),[l,t]}function T(e,a){return e.filter((e=>"esriGPParameterDirectionOutput"!==e.direction))?.map((e=>({...a.find((a=>a.name===e.name)),...e})))}function R(e){const a=new Map;for(const l of e){const e=Array.isArray(l.destination)?l.destination:[l.destination];for(const t of e){const[e]=S(t);a.has(e)?a.get(e).push(l):a.set(e,[l])}}return a}function H(e,a,l){let t={...e};for(const e of l)for(const[l,n]of Object.entries(a)){const a=""===e?l:`${e}.${l}`;a.includes("parameterInfos")?t=(0,r.at)(t,a,n):y(t,a,n)}return t}async function D(e){const{param:a,data:l,rules:t,renderedParameters:n,currentTool:i}=e,o=a.name;if(void 0===o)return[a,l];let u={...a};for(const e of t){const a=await(0,r.as)({rule:e,data:l,renderedParams:n??{},currentTool:i});if(void 0===a)continue;const t=(Array.isArray(e.destination)?e.destination:[e.destination]).map(S).filter((([e])=>e===o));"value"in a&&(l[o]=a.value),u=H(u,a,t.map((([,e])=>e))),u.value=l[o]}return[u,l]}function q(e){let a;return e.impedanceAttributeName===e.timeAttributeName?a="time":e.impedanceAttributeName===e.distanceAttributeName&&(a="distance"),a}function F(e){const{param:a,data:l,travelModeInfo:t,straightLineLabel:n}=e,i=a.name;if(void 0===i)return[a,l];const o=l[i],u="defaultValue"in a?a.defaultValue:void 0,s=[],c={},d={};let p;if(void 0!==t){const e=t?.travelModes?.filter((e=>void 0===a.filterTravelModeType||q(e)===a.filterTravelModeType));p=t?.defaultTravelMode??void 0,void 0!==a.filterTravelModeType&&q(p)!==a.filterTravelModeType&&(p=e?.[0]??void 0),((0,r.i)(o)||o===u&&o!==r.a8)&&(l[i]=p),e?.forEach((e=>{const a=q(e);s.push(e.id),c[e.id]=e.name,d[e.id]=function(e,a){let l;switch(e.type.toLowerCase()){case"automobile":const e={time:"driving-time",distance:"driving-distance",other:"car"};l=e[a??"other"]??e.other;break;case"walk":const t={time:"walking-time",distance:"walking-distance",other:"walk"};l=t[a??"other"]??t.other;break;case"truck":const n={time:"trucking-time",distance:"trucking-distance",other:"dashboard"};l=n[a??"other "]??n.other;break;default:const i={time:"edit-attributes",distance:"edit-attributes",other:"dashboard"};l=i[a??"other "]??i.other}return l}(e,a)}))}u!==r.a8&&!0!==a.includeStraightLine||!1!==s.includes(r.a8)||(s.push(r.a8),c[r.a8]=n??r.a8,d[r.a8]="line-straight");let y=u===r.a8?r.a8:p?.id??"";(0,r.i)(o)||(y=o===r.a8?r.a8:o?.id??"");return[{...a,choiceListLabels:c,choiceList:s,choiceListIcons:d,value:y},l]}function I(e){const{param:a,data:l,renderedParameters:t}=e,n=a.name;if(void 0===n)return[a,l];const i=t?.[n],r=void 0===i&&!0===a.visible,o=void 0!==i&&!1===a.visible,u=void 0!==i&&!0===a.visible&&!1===a.readOnly&&void 0===a.value&&void 0!==a.defaultValue;return r||u?(l[n]??(l[n]=a.defaultValue??void 0),a.value=l[n]):o&&(l[n]=void 0,a.value=l[n]),[a,l]}const w=e=>void 0===e.visible||!0===e.visible;function U(e){const{defaultValues:a,user:l,hasAdvancedLicense:t}=e;return a.userSettings={unitSystem:l?.units,hasNAPrivilege:(0,r.ae)(l),hasGEPrivilege:(0,r.af)(l),hasAdvancedLicense:t},a}function _(e){let{defaultValues:a}=e;const{toolName:l,toolUIJsonParametersByName:t,travelModeInfo:n}=e;return Object.keys(t??{}).forEach((e=>{const i=t?.[e];void 0!==i?.name&&!0===w(i)?void 0!==n&&void 0!==l&&!0===(0,r.a9)(i.name,l)?(a[i.name]=i.defaultValue,[,a]=F({param:i,data:a,travelModeInfo:n})):a[i.name]=i.defaultValue:void 0!==i?.name&&!1===i.visible&&(a[i.name]=void 0)})),a}function x(e){const{defaultValues:a,toolJsonParameters:l,toolUIJsonParametersByName:t}=e;return l?.forEach((e=>{const l=t?.[e.name];"esriGPParameterDirectionOutput"===e.direction||void 0!==a[e.name]||void 0!==l?.visible&&!0!==l?.visible||(a[e.name]=e.defaultValue??void 0)})),a}async function N(e){const{defaultValues:a,toolUIJsonParametersByName:l,rules:t}=e,n=function(e){const a=e?.filter((e=>(e=>{switch(e.ruleType){case"expression":return e.expression?.includes("userSettings");case"equals":return!0===e.valueA?.toString().includes("userSettings")||!0===e.valueB?.toString().includes("userSettings");default:return!1}})(e)&&(e=>"effectParams"in e&&"defaultValue"in e.effectParams)(e)));return a??[]}(t),i=R(n);for(const e of Object.keys(l??{})){const t=l?.[e];if(void 0!==t?.name&&!0===w(t)){const l=i.get(e);if(void 0!==l){const[e]=await D({param:t,data:a,rules:l,renderedParameters:{}});a[t.name]=e.defaultValue}}}return a}}}]);