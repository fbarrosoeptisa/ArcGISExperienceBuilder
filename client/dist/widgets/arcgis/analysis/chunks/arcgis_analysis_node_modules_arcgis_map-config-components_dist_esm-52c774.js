/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-52c774.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-52c774"],{76110:(e,o,r)=>{r.d(o,{a:()=>h,b:()=>d,c:()=>C,d:()=>y,e:()=>f,f:()=>u,g:()=>m,h:()=>p});r(68180);var l=r(99592);r(97127);let s;const n="polygon";function t(e){const{modules:o}=e,r=o.EsriColor;return[new r("#ff4040"),new r("#ff8200"),new r("#faa83f"),new r("#ffd159"),new r("#74b566"),new r("#008977"),new r("#33e3c8"),new r("#43abeb"),new r("#4c64c9"),new r("#9868ed"),new r("#b155e6"),new r("#db5181"),new r("#e03b99"),new r("#2b2b2b"),new r("#bdbdbd"),new r("#ffffff")]}async function a(e,o){const r=document.createElement("arcgis-symbol-styler");return r.initialSourceId=s,r.hideSvgUploadSymbols=e.hideSvgUploadSymbols,r.hideAddStyles=e.hideAddStyles,r.style="max-height: max(calc(100vh - 200px), 300px)",r.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:e.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await o.getPopoverRefElement()},r.addEventListener("arcgisSourceIdChange",(({detail:e})=>s=e)),r}function i(e,o,r){return document.URL.includes("debug=true")&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify({...r,portal:"..."}))),e.edit(o,r)}function c(e,o){const{symbol:r,info:{marker:l,stroke:s,fill:n}}=o.detail;document.URL.includes("debug=true")&&(console.log("onStylerEdit - symbol:",JSON.stringify(r?.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(s)),console.log("onStylerEdit - info.fill:",JSON.stringify(n))),e(o)}async function p(e,o){const{mapView:r,modules:s,portal:p,strings:m}=e,u=(0,l.R)(e),{onChange:d,popoverNode:f}=o,g=(0,l.b)(u,"color"),y=await a(e,f);let h,C;if(g){const o=g.stops.map((e=>e.color)),t=s.colorSchemes.getSchemes({basemapTheme:await s.colorUtils.getBackgroundColorTheme(r),geometryType:n,theme:"high-to-low"});let a=(0,l.ab)(t,0);a=a.filter((e=>e.colors?.length===g.stops.length));const c=a.map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})));h=({detail:o})=>{const r=(0,l.R)(e);(0,l.b)(r,"color").stops.reverse().forEach(((e,r)=>{e.color=o.info.fill.color[r]})),d()},C=i(y,(0,l.m)(e),{portal:p,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRamps:c}},fill:{color:o.reverse()}}),y.stringOverrides={fillColor:m.styler.color,fillTransparency:m.styler.transparency}}else{const o=t(e);h=({detail:o})=>{(0,l.R)(e).color=o.symbol.color,d()},C=i(y,(0,l.m)(e),{portal:p,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",optional:!1,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:o}},fill:{color:u.color||o[1]},fillEnabled:!0}),y.stringOverrides={fillColor:m.styler.color,fillTransparency:m.styler.transparency}}y.addEventListener("arcgisSymbolStylerEdit",c.bind(null,h)),f.addStyler(y),await C}async function m(e,o){const{modules:r,strings:s}=e,n=(0,l.R)(e),{onChange:t,popoverNode:i}=o,c=await a(e,i);o.defaultColors=n.colorRamp?g(n.colorRamp).map((e=>new r.EsriColor(e))):null;const p=c.edit(new r.SimpleMarkerSymbol,w(e,o));c.stringOverrides={fillColor:s.styler.color};c.addEventListener("arcgisFillChange",(({detail:o})=>{const s=r.esriLang.clone(o.color);(0,l.R)(e).colorRamp=C(e,s.reverse()),t()})),i.addStyler(c),await p}async function u(e,o){const{modules:r,strings:s}=e,n=(0,l.R)(e),{onChange:t,popoverNode:i}=o,c=await a(e,i);o.defaultColors=n.colorRamp?g(n.colorRamp).map((e=>new r.EsriColor(e))):null;const p=c.edit(new r.SimpleMarkerSymbol,w(e,o));c.stringOverrides={fillColor:s.styler.color};c.addEventListener("arcgisFillChange",(({detail:o})=>{const s=r.esriLang.clone(o.color);(0,l.R)(e).colorRamp=C(e,s.reverse()),t()})),i.addStyler(c),await p}async function d(e,o){const{classedSymbolSelectedIdx:r,portal:s,modules:n,strings:p}=e,m=(0,l.R)(e),{onChange:u,popoverNode:d}=o,f=(0,l.a)(e),g=m.classBreakInfos?.length?n.esriLang.clone(m.classBreakInfos[r].symbol):(0,l.m)(e,f),y="picture-marker"!==g.type&&!!g.color,h=(0,l.a9)(g),C=t(e);let w;if("simple-fill"===g.type){const e=g;e.outline&&(w={color:e.outline.color||new n.EsriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style})}const b=await a(e,d),S=i(b,n.esriLang.clone(g),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.aa)(e,g),suggestedColors:C,parts:{transparency:!1}}},fill:{color:(0,l.Z)(e,g)},stroke:w,fillEnabled:y,strokeEnabled:h});b.stringOverrides={fillColor:p.styler.color,fillTransparency:p.styler.transparency},b.addEventListener("arcgisSymbolStylerEdit",c.bind(null,(({detail:{symbol:o}})=>{o.outline&&(o.outline.width=0);const s=(0,l.j)(e),n=s.classBreakInfos.slice();n[r].symbol=o,s.classBreakInfos=n,u()}))),d.addStyler(b),await S}async function f(e,o){const{modules:r,strings:s}=e,n=(0,l.R)(e),{onChange:t,popoverNode:i}=o;let c=S(e,n.authoringInfo.colorRamp,n.classBreakInfos.length).map((e=>new r.EsriColor(e.slice(1))));n.classBreakInfos&&(c=n.classBreakInfos.map((e=>e.symbol.color)));const p=await a(e,i);o.defaultColors=(n.authoringInfo?.colorRamp?c:[[0,0,255],[0,255,255],[255,255,0],[255,0,0]]).map((e=>new r.EsriColor(e))),v(e,o.defaultColors);const m=p.edit(new r.SimpleMarkerSymbol,w(e,o));p.stringOverrides={fillColor:s.styler.color,fillTransparency:s.styler.transparency};p.addEventListener("arcgisFillChange",(({detail:o})=>{const s=r.esriLang.clone(o.color),n=(0,l.R)(e),a=r.esriLang.clone(s).reverse();n.classBreakInfos.map(((e,o)=>e.symbol.color=new r.EsriColor(a[o])));const i=function(e,o){const{modules:r}=e,s=(0,l.R)(e),n=b(e),t=r.esriLang.clone(n);t.forEach((o=>{o.stops=S(e,C(e,o.stops),s.classBreakInfos.length).map((e=>new r.EsriColor(e.slice(1)))).reverse()}));const a=t.filter((e=>{const l=JSON.stringify(e.stops)===JSON.stringify(o),s=JSON.stringify(r.esriLang.clone(e.stops).reverse())===JSON.stringify(o);return l||s}));if(a.length){const o=n.filter((e=>e.name===a[0].name));return C(e,o[0]?.stops)}return null}(e,s);i&&(n.authoringInfo.colorRamp=i),t()})),i.addStyler(p),await m}function g(e){if("multipart"===e?.type){const o=e.colorRamps,r=o.map((e=>e.fromColor));return r.push(o[o.length-1].toColor),r}return[e.fromColor,e.toColor]}async function y(e,o){const{mapView:r,modules:s}=e,t=(0,l.R)(e),{onChange:i,popoverNode:c}=o,p=t.uniqueValueInfos,m=await a(e,c),u=s.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.A)(e)||n}),d=[],f=(0,l.ab)(u,Math.min(p.length,10)),y=f[0].colors;d.push(...p?.length?t.uniqueValueInfos.map(((o,r)=>(0,l.Z)(e,o.symbol)||new s.EsriColor(y[r%y.length]))):[]);const h=f.map((e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name})));if(!t.authoringInfo?.colorRamp&&d||!function(e,o){const{modules:r}=e,l=r.rasterColorRampUtils.getColorRampName(o);return!!l}(e,t.authoringInfo?.colorRamp)&&!function(e,o){if(!o?.colorRamps)return!1;const{mapView:r,modules:s}=e,t=(0,l.R)(e),a=t.uniqueValueInfos,i=s.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.A)(e)||n}),c=(0,l.ab)(i,Math.min(a.length,10)),p=c.filter((e=>e.colors.length===o.colorRamps.length+1)),m=[];m.push(o.colorRamps[0].fromColor),o.colorRamps.forEach((e=>{m.push(e.toColor)}));const u=p.filter((e=>{const o=JSON.stringify(e.colors)===JSON.stringify(m),r=JSON.stringify(s.esriLang.clone(e.colors).reverse())===JSON.stringify(m);return o||r}));return u.length>0}(e,t.authoringInfo?.colorRamp))o.defaultColors=d.reverse()||null;else{const r=S(e,t.authoringInfo?.colorRamp,t.uniqueValueInfos.length).map((e=>e.slice(1)));JSON.stringify(r)!==JSON.stringify(d)&&(o.defaultColors=d.reverse()||null)}o.extraColorRamps=h,o.defaultColors||(o.defaultColors=t.authoringInfo?.colorRamp?g(t.authoringInfo.colorRamp).reverse().map((e=>new s.EsriColor(e))):d.reverse()||null),v(e,o.defaultColors);const b=m.edit(new s.SimpleMarkerSymbol,w(e,o));m.stringOverrides={fillColor:""};m.addEventListener("arcgisFillChange",(({detail:o})=>{const r=s.esriLang.clone(o.color),n=C(e,r),t=(0,l.R)(e),a=t.authoringInfo||{};a.colorRamp=n,t.authoringInfo=a;const c=S(e,n,t.uniqueValueInfos.length).map((e=>e.slice(1))),p=[];t.uniqueValueInfos.forEach(((o,r)=>{o=o.clone(),p.push(o),(0,l.X)(e,o.symbol,new s.EsriColor(c[r]))})),t.uniqueValueInfos=p,i()})),c.addStyler(m),await b}async function h(e,o){const{mapView:r,selectedValue:s,lastDefault:n,portal:t,modules:p}=e,m=(0,l.R)(e),u=(0,l.g)(e),{onChange:d,popoverNode:f}=o,g=(0,l.z)(e);let y=-1===s?m.defaultSymbol||n.defaultSymbol:m.uniqueValueInfos[s].symbol;(function(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].includes(e?.type)})(y)||(y=(0,l.m)(e,u),-1!==s||m.defaultSymbol||(n.defaultSymbol=y));const h="picture-marker"!==y.type&&!!y.color,C=(0,l.a9)(y);let w;if(-1===s)w=function(e){const{modules:o}=e;return[new o.EsriColor([255,255,255]),new o.EsriColor([178,178,178]),new o.EsriColor([128,128,128]),new o.EsriColor([92,92,92]),new o.EsriColor([77,77,77]),new o.EsriColor([51,51,51]),new o.EsriColor([26,26,26])]}(e);else{const o=p.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.A)(e)});w=(0,l.ac)(o).slice(0,16)}let b;const S=y;b=S.outline?{color:S.outline.color?S.outline.color:new p.EsriColor([0,0,0,.5]),size:S.outline.width,style:S.outline.style,autoAdjusted:!1}:{color:new p.EsriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!1};const v=await a(e,f),R=i(v,p.esriLang.clone(y),{portal:t,symbolFilter:g&&!(0,l.ad)(e)?"simple":void 0,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,parts:{transparency:!1}}},fill:{color:(0,l.Z)(e,y)||E(w[s],.85)},stroke:b,fillEnabled:h,strokeEnabled:C});v.addEventListener("arcgisSymbolStylerEdit",c.bind(null,(({detail:{symbol:o}})=>{o.outline&&(o.outline.width=0);const r=(0,l.j)(e);if(-1===s)r.defaultSymbol=o;else{const e=r.uniqueValueInfos.slice();e[s].symbol=o,r.uniqueValueInfos=e}d()}))),f.addStyler(v),await R}function C(e,o){const{modules:r}=e,l=[];for(let e=0;e<o.length-1;e++)l[e]=new r.AlgorithmicColorRamp({algorithm:"hsv",fromColor:o[e],toColor:o[e+1]||new r.EsriColor({r:255,g:255,b:255,a:1})});if(o.length>2){return new r.MultipartColorRamp({colorRamps:l})}return l[0]}function w(e,o){const{layer:r,modules:s,portal:n}=e,t=r,a=(0,l.R)(e),{defaultColors:i,extraColorRamps:c}=o,p={color:i?.reverse()||[new s.EsriColor([255,255,255,1]),new s.EsriColor([0,0,0,1])]},m={color:new s.EsriColor([0,0,0,.5]),size:1,style:"solid"},u=b(e);c&&u.push(...c),u.sort((e=>e.tags.indexOf("raster")>-1?-1:1));return"class-breaks"===a.type?u.forEach((o=>{o.stops=S(e,C(e,o.stops),a.classBreakInfos.length).map((e=>new s.EsriColor(e.slice(1)))).reverse()})):["unique-value","raster-stretch","raster-shaded-relief"].includes(a.type)&&u.forEach((e=>e.stops.reverse())),{portal:n,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"class-breaks"===a.type?"discrete":"continuous",colorRamps:u,open:!0,colorRampsOpen:!0,parts:{colorRamps:!0,transparency:"imagery-tile"===t.type&&"unique-value"!==a.type},extraParts:{autoStrokeAdjust:!1,width:!0}}},stroke:{...m,color:[new s.EsriColor([13,38,68,1]),new s.EsriColor([56,98,122,1]),new s.EsriColor([98,158,176,1]),new s.EsriColor([177,205,194,1]),new s.EsriColor([255,252,212,1])]},fill:p}}function b(e){const{modules:o}=e;return o.rasterColorRampUtils.all().map((({name:e,colors:o})=>({name:e,stops:o,tags:["raster"]})))}function S(e,o,r){const{modules:l}=e;return l.rasterColorRampUtils.convertColorRampToColormap(o,{numColors:r,interpolateAlpha:!0})}function E(e,o){return e&&(e.a=o),e}function v(e,o){const{modules:r}=e;o?.forEach(((e,l)=>{0===e.r&&0===e.g&&0===e.b&&0===e.a&&(o[l]=new r.EsriColor([255,255,255,0]))}))}}}]);