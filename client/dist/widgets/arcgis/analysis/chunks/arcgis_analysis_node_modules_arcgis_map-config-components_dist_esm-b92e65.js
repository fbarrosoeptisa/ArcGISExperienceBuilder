/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-b92e65.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-b92e65"],{12512:(e,t,i)=>{i.r(t),i.d(t,{arcgis_smart_mapping_action:()=>p,arcgis_smart_mapping_attribute_input:()=>m,arcgis_smart_mapping_symbol_button:()=>g});var s=i(28614),n=i(68180),r=i(99592),a=i(97127),o=i(48122),l=i(50732),c=i(33101),d=i(76110),u=i(39304),h=i(36392);i(71480),i(99818),i(80216);const p=class{constructor(e){(0,s.r)(this,e),this.manager=(0,a.u)(this),this.hideOutline=!1,this.text=void 0,this.icon=void 0,this.disabled=!1}async setFocus(){await(this.calciteActionNode?.setFocus())}disconnectedCallback(){(0,r.ah)()}render(){return(0,s.h)("calcite-action",{key:"519496ddfcf3424086178d617f630f620da3a204",class:this.hideOutline?"":"smart-mapping-action-outline",scale:"s",text:this.text,icon:this.icon,disabled:this.disabled,ref:e=>this.calciteActionNode=e,onMouseOver:()=>(0,r.ai)(this.calciteActionNode,this.text),onMouseOut:()=>(0,r.ah)(),onFocus:()=>(0,r.ai)(this.calciteActionNode,this.text),onFocusout:()=>(0,r.ah)()})}get el(){return(0,s.g)(this)}};p.style=".smart-mapping-action-outline{border:#eaeaea 1px solid}";const m=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingAttributeInputChange=(0,s.c)(this,"arcgisSmartMappingAttributeInputChange",7),this.arcgisSmartMappingAttributeInputError=(0,s.c)(this,"arcgisSmartMappingAttributeInputError",7),this.manager=(0,a.u)(this),this.smartMappingState=(0,c.u)(),this.fieldList=void 0,this.selectedField=void 0,this.label=void 0,this.mode="simple",this.popoverReferenceElement=void 0,this.hideLabel=!1}async clear(){this.currentField=void 0,(0,s.f)(this.el)}componentWillLoad(){this.currentField=this.selectedField,this.popoverReferenceElement||(this.popoverReferenceElement=(0,o.f)(this.el,"calcite-flow-item"))}componentWillUpdate(){this.currentField!==this.selectedField&&(this.currentField=this.selectedField)}render(){const{strings:e}=this.smartMappingState;return this.hideLabel?(0,s.h)("div",{class:"field-select-with-icon"},this.renderFieldButton(),"remove"===this.mode&&this.currentField&&this.renderRemoveButton(),"expression"===this.mode&&this.renderArcadeButton()):(0,s.h)("calcite-label",null,this.label||e.attributeInput.attribute,(0,s.h)("div",{class:"field-select-with-icon"},this.renderFieldButton(),"remove"===this.mode&&this.currentField&&this.renderRemoveButton(),"expression"===this.mode&&this.renderArcadeButton()))}renderArcadeButton(){const{strings:e}=this.smartMappingState,t=this.currentField?.field?e.attributeInput.useExpression:e.attributeInput.useField;return(0,s.h)(s.F,null,(0,s.h)("div",null,"\xa0"),(0,s.h)("calcite-button",{id:"smart-mapping-attribute-switch",appearance:"outline-fill",kind:"neutral",iconStart:this.currentField?.field?"code":"brackets-curly",label:t,class:"field-button",onClick:()=>{this.handleSwitchAttributeType()},ref:e=>this.switchButtonNode=e}),(0,s.h)("calcite-tooltip",{referenceElement:"smart-mapping-attribute-switch",overlayPositioning:"fixed"},t))}renderFieldButton(){const{smartMappingState:e}=this,{strings:t}=e,i="remove"!==this.mode&&"expression"!==this.mode||!this.currentField?"":"non-simple-field-button",n=!(!this.currentField?.field||1!==this.fieldList.length||"remove"===this.mode);return(0,s.h)("calcite-button",{alignment:"icon-end-space-between",appearance:"outline-fill",kind:"neutral",disabled:n,iconEnd:this.currentField?.expression?"pencil":n?void 0:"chevron-down",width:"full",class:`field-button ${i}`,onClick:()=>{this.currentField?.expression?(this.openArcadeEditorModal(this.currentField),this.fieldButtonNode?.setFocus()):this.openFieldPickList()},ref:e=>{e&&(this.fieldButtonNode=e)}},this.currentField?.field?(0,r.o)(e,this.currentField.field)?.label:this.currentField?.expression?this.currentField?.expressionTitle:t.attributeInput.chooseField)}renderRemoveButton(){const{strings:e}=this.smartMappingState;return(0,s.h)(s.F,null,(0,s.h)("div",null,"\xa0"),(0,s.h)("calcite-button",{id:"smart-mapping-attribute-switch",appearance:"outline-fill",kind:"neutral",iconStart:"x",label:e.clear,class:"field-button",onClick:()=>{this.handleRemoveField()}}),(0,s.h)("calcite-tooltip",{referenceElement:"smart-mapping-attribute-switch",overlayPositioning:"fixed"},e.clear))}async handleRemoveField(){this.currentField=null,this.arcgisSmartMappingAttributeInputChange.emit()}async handleSwitchAttributeType(){if((0,r.B)(),this.currentField?.field)if(this.lastSettings?.expression){const e={expression:this.lastSettings.expression,expressionTitle:this.lastSettings.expressionTitle,simpleFieldType:this.lastSettings.simpleFieldType};this.currentField.field=void 0,this.currentField=e,this.arcgisSmartMappingAttributeInputChange.emit(this.currentField)}else try{await this.openArcadeEditorModal(),this.fieldButtonNode?.setFocus()}catch(e){this.switchButtonNode?.setFocus()}else this.openFieldPickList()}async openArcadeEditorModal(e){const{smartMappingState:t}=this,{strings:i}=t;(0,r.B)();try{if((e=await(0,l.u)(t,e)).simpleFieldType===r.q.STRING)return void this.arcgisSmartMappingAttributeInputError.emit({message:i.attributeInput.errors.expressionMustBeNumber,type:"warning"});e.simpleFieldType===r.q.UNKNOWN&&(e.simpleFieldType=r.q.NUMBER),this.currentField&&(this.currentField.field=void 0,this.currentField.expression=e.expression,this.currentField.expressionTitle=e.expressionTitle,this.currentField.simpleFieldType=e.simpleFieldType),this.arcgisSmartMappingAttributeInputChange.emit(this.currentField)}catch(e){throw new Error("")}}openFieldPickList(){const{smartMappingState:e}=this,{layer:t,mapView:i,strings:s}=e;(0,r.B)();const n=document.createElement("arcgis-field-pick-list");n.classList.add("arcgis-smart-mapping-attribute-input-field-pick-list"),n.fields=this.fieldList.map((e=>({name:e.layerField.name,alias:e.label,type:e.simpleFieldType,description:"description"in e.layerField?e.layerField.description:void 0}))),this.currentField?(n.heading=s.replaceField,n.selectedFields=[this.currentField.field]):n.heading=s.addField,n.popoverProps={refElement:this.popoverReferenceElement,placement:"leading",popoverWidth:1.05*this.popoverReferenceElement.getBoundingClientRect().width,overlayPositioning:"absolute",flipDisabled:!1,triggerDisabled:!1},n.layer=t,n.mapView=i,n.showFieldInfo=!0,n.sortBy=this.lastFieldSortBy||"default",(0,r.J)(this.popoverReferenceElement,!0),document.body.appendChild(n),n.addEventListener("arcgisSortByChange",(e=>{this.lastFieldSortBy=e.detail})),n.addEventListener("arcgisClose",(t=>{if(t.detail?.selectedFields){const i=(0,r.o)(e,t.detail.selectedFields[0]),s={field:i.layerField.name,simpleFieldType:i.simpleFieldType};this.currentField?.expression&&(this.lastSettings={expression:this.currentField.expression,expressionTitle:this.currentField.expressionTitle,simpleFieldType:this.currentField.simpleFieldType}),this.currentField=s,this.arcgisSmartMappingAttributeInputChange.emit(this.currentField)}this.fieldButtonNode?.setFocus(),document.body.removeChild(n),(0,r.J)(this.popoverReferenceElement,!1)}))}get el(){return(0,s.g)(this)}};m.style=".field-select-with-icon{display:flex;width:100%;justify-content:space-between;align-items:stretch;min-width:0}.field-button:focus{z-index:10}.non-simple-field-button{width:calc(100% - 32px)}";const g=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingSymbolButtonSymbolChange=(0,s.c)(this,"arcgisSmartMappingSymbolButtonSymbolChange",7),this.manager=(0,a.u)(this),this.resizeObserver=new ResizeObserver((e=>{const t=e.pop();this.symbolNodeWidth=t?.contentRect.width})),this.smartMappingState=(0,c.u)(),this.afterCreateSymbolDiv=(e,t)=>{if(!t)return;const{isReferenceSize:i,smartMappingState:s}=this,{modules:n}=s,{colors:r,symbol:a}=e,o=this.buttonNode,l=o?o.getBoundingClientRect().width:0;if(o&&!l)return;const c=e=>{for(;e?.childNodes?.length;)e.removeChild(e.childNodes[0])};if(r){const e=n.symbolUtils.renderColorRampPreviewHTML(r,{align:"horizontal",width:l?l-40:150,height:16});c(t),t.appendChild(e)}else if(a){const e=l?Math.round((0,h.p)(l-40)):110,s="simple-line"===a.type||"cim"===a.type&&"CIMLineSymbol"===a.data.symbol.type,r="simple-fill"===a.type||"cim"===a.type&&"CIMPolygonSymbol"===a.data.symbol.type,o="cim"===a.type&&!s&&!r,d=s?{width:e,height:"simple-line"===a.type?3:6}:r?{width:i?18:e,height:i?18:12}:o?16:14;n.symbolUtils.renderPreviewHTML(a,{size:d,symbolConfig:r?{isSquareFill:!0}:void 0}).then((e=>{c(t),t.style.height=r?i?"24px":"16px":o?"21px":"auto",t.appendChild(e)}))}},this.handleClick=async()=>{const{internalPopoverReferenceElement:e,label:t,popoverNode:i,buttonNode:s,smartMappingState:n}=this,{strings:a}=this.smartMappingState;if(i)this.onPopoverClose();else{(0,r.B)(),this.selected=!0;document.createElement("div").className="symbol-styler-div",this.popoverNode=(0,u.c)(n,{referenceElement:"string"==typeof e?document.getElementById(e)||void 0:e,heading:t||a.styler.symbolStyle}),this.popoverNode.addEventListener("arcgisSmartMappingStylerPopoverClose",(()=>{this.onPopoverClose(),setTimeout((()=>s?.focus()),300)})),this.popoverNode.addEventListener("arcgisSmartMappingStylerPopoverDisconnected",(()=>{this.onPopoverClose()}));const i=this.getOnClickCall();this.symbolStylerWatchScaleHandle=await i(n,{popoverNode:this.popoverNode,onChange:()=>{(0,r.u)(n),this.arcgisSmartMappingSymbolButtonSymbolChange.emit()}})}},this.type=void 0,this.rampType=void 0,this.label=void 0,this.hideLabel=!1,this.symbol=void 0,this.colors=void 0,this.width=void 0,this.isReferenceSize=!1,this.popoverReferenceElement=void 0,this.selected=!1,this.symbolNodeWidth=void 0}async setFocus(){this.buttonNode?.focus()}disconnectedCallback(){this.onPopoverClose(),this.resizeObserver.unobserve(this.buttonNode)}componentDidLoad(){if(this.internalPopoverReferenceElement=this.popoverReferenceElement,!this.internalPopoverReferenceElement){const e=(0,n.q)(this.el,"calcite-panel"),t=(0,n.q)(this.el,"calcite-flow-item");this.internalPopoverReferenceElement=t||e}(0,s.f)(this.el),this.resizeObserver.observe(this.buttonNode)}render(){const{label:e,width:t,hideLabel:i,smartMappingState:n}=this,{strings:r}=n;return(0,s.h)(s.H,{key:"34676ba7e2125d9340ee24f32ca25392ca14b643"},(0,s.h)("div",{key:"99e674d848b6e5714294dc8a7ccb56c4bf504e3f",class:"block-content-padding "+("half"===t?"half":"")},!i&&(0,s.h)("calcite-label",{key:"3b5248301e59123929e787f0eca10dd901a7bcf0",id:"symbol-button-label"},e||r.styler.symbolStyle,this.renderSymbolButton()),i&&this.renderSymbolButton()))}renderSymbolButton(){const{rampType:e,symbol:t,colors:i,selected:n,smartMappingState:a}=this,{modules:o}=a;"raster-class-breaks"===((0,r.i)(a)?(0,r.g)(a):(0,r.a)(a))&&i?.forEach(((e,t)=>{0===e.r&&0===e.g&&0===e.b&&0===e.a&&(i[t]=new o.EsriColor([255,255,255,0]))}));const l="discrete"===e&&i?.length?i.map(((e,t)=>(0,s.h)("div",{key:`symbol-button-icon-${t}`,class:"classed-color-icon-section",style:{width:95/("type-ramp"===this.type?i.length:Math.min(10,i.length))+"%",backgroundColor:e?.toHex()??"#ffffff"}}))):null,c=!e&&(0,r.aJ)(a,t),d=(0,r.A)(a)||"point",u={"symbol-selector":!0,"symbol-is-white":(0,r.av)(a,t),selected:n};return(0,s.h)("div",{class:u,onClick:this.handleClick,role:"button",tabIndex:0,"aria-labelledby":"symbol-button-label","aria-haspopup":"true","aria-expanded":!!n,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.handleClick())},ref:e=>this.buttonNode=e},c?this.renderTransparentSymbol(t):"discrete"===e?(0,s.h)("div",{class:"classed-color-icon","aria-hidden":"true"},l):(0,s.h)("div",{key:`${t||i}`,class:`symbol-icon ${d}`,style:this.symbolNodeWidth?{width:.95*this.symbolNodeWidth+"px"}:void 0,ref:e=>{this.afterCreateSymbolDiv({colors:i,symbol:t},e)},"aria-hidden":"true"}),(0,s.h)("div",{class:"symbol-edit-button"},(0,s.h)("calcite-icon",{scale:"s",icon:"pencil"})))}renderTransparentSymbol(e){return(0,s.h)("div",{key:e,class:"symbol-icon transparent","aria-hidden":"true",style:this.symbolNodeWidth?{width:.95*this.symbolNodeWidth+"px"}:void 0},(0,s.h)("svg",{xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("defs",null,(0,s.h)("pattern",{id:"16cf9653474-widget-3-bg-fill",patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"15",height:"15"},(0,s.h)("image",{x:"0",y:"0",width:"15",height:"15",href:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+"}))),(0,s.h)("rect",{x:"0",y:"0",fill:"url(#16cf9653474-widget-3-bg-fill)",height:"100%",width:"100%"}),(0,s.h)("rect",{x:"0",y:"0",fill:"url(#16cf9653474-widget-3-ramp-fill)",height:"100%",width:"100%"})))}getOnClickCall(){const{type:e}=this;switch(e){case"background":return u.w;case"simple":return u.v;case"size":return u.u;case"color-ramp":return u.t;case"relationship-ramp":return u.s;case"geo-rss-point":return u.q.bind(this,"point");case"geo-rss-line":return u.q.bind(this,"line");case"geo-rss-polygon":return u.q.bind(this,"polygon");case"dot-density-ramp":return u.p;case"dot-density-background":return u.o;case"dot-density-value":return u.b;case"heatmap-ramp":return u.n;case"predominance-ramp":return u.m;case"above":return u.l;case"below":return u.k;case"chart-ramp":return u.j;case"type-ramp":return u.i;case"raster-flow":return d.h;case"raster-stretch":return d.g;case"raster-shaded-relief":return d.f;case"raster-class-breaks":return d.e;case"raster-unique-value":return d.d;default:return u.h}}onPopoverClose(){this.symbolStylerWatchScaleHandle?.remove(),this.selected=!1,(0,u.r)(this.popoverNode),this.popoverNode=void 0}get el(){return(0,s.g)(this)}};g.style=".half {\n  width: 49%;\n}\n\n.symbol-selector {\n  display: flex;\n  padding: 6px;\n  justify-content: space-between;\n  align-items: center;\n  border-radius: 0;\n  cursor: pointer;\n\n  background-color: var(--calcite-color-foreground-1);\n  color: var(--calcite-color-text-1);\n  border-color: var(--calcite-color-foreground-3);\n  border-width: 1px;\n  border-style: solid;\n  box-shadow: transparent 0px 0px 0px 1px inset;\n\n  &:hover {\n    box-shadow: inset 0 0 0 1px var(--calcite-color-foreground-3);\n  }\n  &:active {\n    box-shadow: inset 0 0 0 2px var(--calcite-color-foreground-3);\n  }\n  &:focus {\n    box-shadow: inset 0 0 0 2px var(--calcite-color-foreground-3);\n    outline: 2px solid var(--calcite-color-brand);\n    outline-offset: 2px;\n  }\n  &.selected {\n    box-shadow: inset 0 0 0 2px var(--calcite-color-foreground-3);\n  }\n}\n\n.symbol-icon {\n  max-height: 30px;\n  overflow: hidden;\n}\n.symbol-icon.transparent {\n  height: 15px;\n  width: 100%;\n}\n.symbol-icon.transparent svg {\n  height: 15px;\n  width: 95%;\n  stroke: #e0e0e0;\n  stroke-width: 1px;\n}\n.symbol-is-white {\n  background-color: #f3f3f3;\n}\n.symbol-edit-button {\n  padding: 1px;\n  height: 18px;\n  width: 18px;\n  border: none;\n  cursor: pointer;\n  color: var(--calcite-ui-icon-color);\n\n  &:focus {\n    outline: none;\n  }\n}\n.classed-color-icon {\n  width: 100%;\n  height: 16px;\n  overflow: hidden;\n  border-radius: 0;\n}\n.classed-color-icon-section {\n  height: 16px;\n  display: inline-block;\n}\n"},50732:(e,t,i)=>{i.d(t,{u:()=>r});var s=i(68180),n=i(99592);i(97127);async function r(e,t){const{layer:i,strings:r,modules:o}=e,l=i,c=document.createElement("arcgis-modal-arcade");return c.arcadeScript=t?.expression||"",c.arcadeProfile=function(e){const{layer:t,useFeatureReduction:i}=e;return{id:"visualization",definitions:{$feature:i?{fields:(0,s.n)(t.featureReduction.popupTemplate,!1)}:t}}}(e),c.testData=await async function(e){const{layer:t,mapView:i,useFeatureReduction:n}=e;return{profileVariableInstances:{$feature:n?await(0,s.o)(i,t,t.featureReduction.popupTemplate):await a(e),$view:{scale:i.scale,timeProperties:i.timeExtent?{currentStart:i.timeExtent.start,currentEnd:i.timeExtent.end,startIncluded:!0,endIncluded:!0}:void 0}},spatialReference:i.spatialReference}}(e),c.addExistingExpressions=!0,c.layer=l,c.arcadeTitle=t?.expressionTitle||r.arcade.newExpression,c.arcadeTitleEditable=!0,c.arcadeTitleEditingEnabled=!t?.expressionTitle,document.body.appendChild(c),await new Promise(((t,i)=>{c.addEventListener("arcgisClose",(async s=>{if(document.body.removeChild(c),!s.detail)return void i(new Error);const{script:r,title:a,predictOutputType:d}=s.detail;r?.trim().length?await o.fieldUtils.getExpressionFields(l,[r]).then((i=>{(0,n.S)(e,i),t({expression:r,expressionTitle:a,simpleFieldType:"number"===d?n.q.NUMBER:"string"===d?n.q.STRING:"date"===d?n.q.NUMBER:n.q.UNKNOWN})})):i(new Error)}))}))}async function a(e){const{layer:t,mapView:i,modules:s}=e;let r;if(!("fields"in t))return null;{await async function(e){const{oneFeatureResponse:t,oneFeatureResponseStatus:i}=e;if(t&&i!==n.s.MISSING)return e.oneFeatureResponse;{const t=await async function(e){const{mapView:t,layer:i,mapImageSublayer:s}=e;if(!("fields"in i))throw new Error("getOneFeature: wrong layer type");if(s)return await o(e);return await t.whenLayerView(i).then((async t=>{const s=t;if("feature"===i.type&&!i.url||"wfs"===i.type){const t=i.createQuery();return t.start=0,t.num=5,t.outFields=["*"],await i.queryFeatures(t).then((async t=>t.features?.length?t:l(e)))}{const t="hasM"in i&&i.hasM,n="hasZ"in i&&i.hasZ,r=s.availableFields.length===i.fields?.length&&!t&&!n;if("createQuery"in i&&r){const t=i.createQuery();return t.start=0,t.num=5,t.outFields=["*"],await s.queryFeatures(t).then((async t=>t.features?.length?t:await o(e)))}return await o(e)}}))}(e);return e.oneFeatureResponse=t?.features.length&&t,e.oneFeatureResponseStatus=t?.features.length?n.s.SUCCESS:n.s.FAILED,t}}(e);const{oneFeatureResponse:a}=e;if(a?.features?.length)r=s.esriLang.clone(a.features[0]);else{const a={};t.fields?.forEach((e=>{["small-integer","big-integer","integer","single","double","string","date","date-only","oid","guid"].includes(e.type)&&!1===e.nullable?e.defaultValue?a[e.name]=e.defaultValue:"string"===e.type?a[e.name]="":a[e.name]=0:a[e.name]=null}));const o=i.extent;let l,c;(0,n.z)(e)?(l=new s.Polygon({spatialReference:new s.SpatialReference(i.spatialReference.toJSON())}),l.addRing([[o.xmin,o.ymin],[o.xmax,o.ymin],[o.xmax,o.ymax],[o.xmin,o.ymax],[o.xmin,o.ymin]]),c=new s.SimpleLineSymbol):(0,n.w)(e)?(l=new s.Point(o.center.toJSON()),c=new s.SimpleMarkerSymbol):(0,n.x)(e)&&(l=new s.Polyline({spatialReference:new s.SpatialReference(i.spatialReference.toJSON())}),l.addPath([[o.xmin,o.ymin],[o.xmax,o.ymax]]),c=new s.SimpleFillSymbol),r=new s.Graphic({geometry:l,symbol:c,attributes:a})}}return r}async function o(e){const{layer:t,mapView:i,modules:s}=e;if(!("queryFeatures"in t))return l(e);const n=new s.Query({outFields:["*"],where:"1=1",outSpatialReference:i.spatialReference,returnGeometry:!0,returnM:"hasM"in t&&t.hasM,returnZ:"hasZ"in t&&t.hasZ});return"sourceJSON"in t&&t.sourceJSON?.advancedQueryCapabilities?.supportsPagination&&(n.num=1),await t.queryFeatures(n).catch(l)}function l(e){const{layer:t,modules:i}=e,s={};"fields"in t&&t.fields?.forEach((e=>{e.defaultValue?s[e.name]=e.defaultValue:["small-integer","big-integer","integer","single","double","long","date","oid"].includes(e.type)?s[e.name]=0:"date-only"===e.type?s[e.name]=null:s[e.name]=""}));const r=new i.Graphic({geometry:void 0,symbol:void 0,attributes:s});return new i.FeatureSet({features:[r],fields:[],geometryType:(0,n.A)(e),spatialReference:"spatialReference"in t?t.spatialReference.clone():void 0})}},36392:(e,t,i)=>{i.d(t,{a:()=>n,p:()=>r});const s=96;function n(e){return e?e/72*s:0}function r(e){return e?72*e/s:0}},99818:(e,t,i)=>{i.d(t,{a:()=>r,b:()=>a,g:()=>o,s:()=>l});var s=i(68180),n=i(99592);i(97127);function r(e){const{mapView:t}=e,i=(0,n.j)(e),r=i.authoringInfo,a="class-breaks"===i.type?i.classBreakInfos:i.uniqueValueInfos,o=(0,n.b)(i,"size"),c=(0,n.G)(i,"reference-size"),d=!!o&&!(0,s.i)(o.minSize),u=!!o&&"number"==typeof o.minSize,h="above-and-below"===r?.univariateTheme;let p=2,m=20;if(c)c.referenceSizeScale&&l(e),[p,m]=[c.sizeStops[0].size,c.sizeStops[1].size];else if(o)if(h){const e=o.stops;[p,m]=[e[2].size,Math.max(e[0].size,e[4].size)]}else if(d){const e=o.stops;[p,m]=[e[0].size,e[e.length-1].size]}else if(u)[p,m]=[o.minSize,o.maxSize];else{const e=t.scale,i=o.minSize.stops,s=o.maxSize.stops;[p,m]=[i[i.length-1].size,s[s.length-1].size];for(let t=0;t<i.length;t++){const n=i[t],r=s[t];if(e<=n.value){if(t>0){const a=i[t-1],o=s[t-1],l=(e-a.value)/(n.value-a.value);[p,m]=[a.size+(n.size-a.size)*l,o.size+(r.size-o.size)*l]}else[p,m]=[i[0].size,s[0].size];break}}}else if(a){const t=a[0].symbol,i=a[a.length-1].symbol;[p,m]=[(0,n.$)(e,t),(0,n.$)(e,i)],p>m&&([p,m]=[m,p])}return[p,m]}function a(e,t){const{mapView:i,modules:a}=e,o=(0,n.j)(e),l=(0,n.b)(o,"size");let c=t[0],d=(0,s.i)(t[1])?t[1]:c;if(l){const n=o.authoringInfo,u="above-and-below"===n?.univariateTheme,h=!!l&&!(0,s.i)(l.minSize),p=!!l&&"number"==typeof l.minSize,[m,g]=r(e),f=m>g;if(!f&&c>=g?c=g-.75:f&&c>=m&&(c=m-.75),!f&&m>=d?d=m+.75:f&&g>=d&&(d=g+.75),u){const e=l.stops,i=f?t[1]:t[0],s=f?t[0]:t[1],n=Math.max(...e.map((e=>e.value))),r=e[2].value,a=Math.min(...e.map((e=>e.value))),o=Math.abs(n-r),c=Math.abs(a-r),d=o>c?o:c,u=s-i;e.forEach((e=>{const{value:t}=e;e.size=Math.abs(t-r)/d*u+i}))}else if(h){const e=l.stops;l.stops=null,l.minSize=c,l.maxSize=d,l.minDataValue=e[0].value,l.maxDataValue=e[e.length-1].value}else if(p)f?(l.maxSize=c,l.minSize=d):(l.minSize=c,l.maxSize=d);else{const e=i.scale;let t=a.esriLang.clone(l.minSize.stops),s=a.esriLang.clone(l.maxSize.stops);f&&([t,s]=[s,t]);let n=c/t[t.length-1].size,r=d/s[s.length-1].size;for(let i=0;i<t.length;i++){const a=t[i],o=s[i];if(e<=a.value){if(i>0){const l=t[i-1],u=s[i-1],h=(e-l.value)/(a.value-l.value),[p,m]=[l.size+(a.size-l.size)*h,u.size+(o.size-u.size)*h];n=c/p,r=d/m}else n=c/t[0].size,r=d/s[0].size;break}}t.forEach((e=>e.size=Math.round(n*e.size*10)/10)),s.forEach((e=>e.size=Math.round(r*e.size*10)/10)),f&&([t,s]=[s,t]),l.minSize.stops=t,l.maxSize.stops=s}}else{const t=o.classBreakInfos[0].symbol,i=o.classBreakInfos[o.classBreakInfos.length-1].symbol;let s=(0,n.$)(e,t),r=(0,n.$)(e,i),a=!1;s>r&&([s,r]=[r,s],a=!0),s!==r&&c>r&&(c=r-.75),s=c,s!==r&&s>d&&(d=s+.75),r=d;const l=1===o.classBreakInfos.length?1:Math.max(r-s,10)/(o.classBreakInfos.length-1);o.classBreakInfos.forEach(((t,i)=>{const o=t.symbol;a?(0,n.a0)(e,o,r-l*i):(0,n.a0)(e,o,s+l*i)}))}}function o(e,t){const i=e.stops,s=i.length-1,n=i[0].value,r=i[s].value;if(t<=n)return i[0].size;if(t>=r)return i[s].size;for(let e=0;e<=s;e++){const s=i[e],n=i[e+1];if(t>=s.value&&t<n.value){const e=n.value-s.value,i=s.size-n.size,r=(t-s.value)/e,a=s.size-i*r;return Math.round(100*a)/100}}return 1}function l(e){const{mapView:t}=e,i=(0,n.j)(e),s=(0,n.G)(i,"reference-size"),r=s.referenceSizeScale/t.scale;s.sizeStops.forEach((e=>e.size*=r)),s.referenceSizeScale=t.scale}},33101:(e,t,i)=>{i.d(t,{c:()=>r,u:()=>a});var s=i(97127),n=(i(68180),i(99592));function r(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=n.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.hideSvgUploadSymbols=!1,e.hideAddStyles=!1,e.rasterInfo=void 0}function a(){const e=(0,s.r)(),t=e;e.manager.onLoad((()=>{t.smartMappingState=function(e,t){const i=o.get(e);if(i)return i;const n=(0,s.c)(e,t);if(n&&"store"in n)return o.set(e,n.store),n.store;return null}(e.el,"arcgis-smart-mapping").state}))}const o=new WeakMap}}]);