"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_a-e3e5cf"],{37514:(e,a,i)=>{i.d(a,{A:()=>o});var t=i(12064),s=i(22069),r=i(46784);const n="chip-container",l="custom-input-label",o=class{constructor(e){(0,t.r)(this,e),this.analysisMultipleInputChange=(0,t.c)(this,"analysisMultipleInputChange",7),this.renderCombobox=()=>{const{choiceList:e,errorMessage:a,value:i,scale:r,placeholderText:n}=this,l=void 0!==this.errorMessage,o=e?.map((e=>{const a=void 0!==i&&i.includes(e);return this.buildComboBoxItem(e,a)})),u=(0,s.f)(this.validationParams),c=!1===(0,s.i)(u)||!0===l,h=l?s.b.INVALID:(0,s.g)(this.validationParams?.type);return(0,t.h)("calcite-label",{scale:r},(0,t.h)("calcite-combobox",{label:this.label,scale:r,selectionMode:"multiple",placeholder:n??this.strings.defaultPlaceholder,onCalciteComboboxChange:this.handleComboboxChange},o),(0,t.h)("calcite-input-message",{status:h,scale:s.U.Scale,hidden:!c,icon:"exclamationMarkTriangle"},a??u))},this.buildComboBoxItem=(e,a)=>(0,t.h)("calcite-combobox-item",{key:e,value:e,textLabel:e,selected:a}),this.buildChip=e=>(0,t.h)("calcite-chip",{label:e,closable:!0,scale:s.U.Scale,value:e,key:e,onCalciteChipClose:this.handleChipClose,messageOverrides:{dismissLabel:this.strings.remove}},(0,s.k)(e)),this.handleComboboxChange=e=>{const a=e.target?.selectedItems,i=a?.map((e=>e.value));Array.isArray(i)&&0!==i.length||!0!==this.required?(this.value=i,this.analysisMultipleInputChange.emit(this.value),this.errorMessage=this.validate(this.value),this.checkUnderMinValues()):this.errorMessage=this.strings.requiredInputMessage},this.handleNewChip=()=>{if(this.isAtMaxValues)return;const e=this.inputElement?.value;if(void 0!==e&&""!==e&&(this.errorMessage=this.validate([e]),this.isValid)){const a=new Set([...this.value??[],e]);this.value=Array.from(a),this.analysisMultipleInputChange.emit(this.value),void 0!==this.inputElement&&(this.inputElement.value=""),this.errorMessage=this.validate(this.value),this.checkUnderMinValues()}},this.handleKeyDown=e=>{"Tab"===e?.key&&""!==this.inputElement?.value&&(e.preventDefault(),this.handleNewChip())},this.handleChipClose=async e=>{const a=e?.target,i=a?.value,t=a?.previousElementSibling,s=this.value.filter((e=>e!==i));this.value=s,this.analysisMultipleInputChange.emit(this.value),this.errorMessage=this.validate(this.value),this.checkUnderMinValues(),await(t?.setFocus())},this.checkUnderMinValues=()=>{const e=this.validationOptions?.minValues;void 0!==e&&(this.errorMessage=this.isUnderMinValues?(0,s.a)(this.strings.minValuesMessage,{minValues:(0,s.k)(e)}):this.errorMessage)},this.value=void 0,this.label=void 0,this.placeholderText=void 0,this.dataType="number",this.choiceList=void 0,this.scale=s.U.Scale,this.required=void 0,this.validationParams=void 0,this.validationOptions=void 0,this.errorMessage=void 0}get isValid(){return void 0===this.errorMessage||""===this.errorMessage}get isOverMaxValues(){const e=this.validationOptions?.maxValues??Number.MAX_SAFE_INTEGER;return this.value?.length>e}get isAtMaxValues(){const e=this.validationOptions?.maxValues??Number.MAX_SAFE_INTEGER;return this.value?.length===e}get isUnderMinValues(){const e=this.validationOptions?.minValues??0;return this.value?.length<e}async checkValidity(){this.isOverMaxValues&&(this.errorMessage=(0,s.a)(this.strings.maxValuesMessage,{maxValues:(0,s.k)(this.validationOptions?.maxValues)})),0!==this.value?.length&&this.isUnderMinValues&&(this.errorMessage=(0,s.a)(this.strings.minValuesMessage,{minValues:(0,s.k)(this.validationOptions?.minValues)}));const e="informative"!==this.validationParams?.type;return this.errorMessage=this.validate(this.value)??this.errorMessage??(e?this.validationParams?.message:void 0),Promise.resolve(this.isValid)}async componentWillLoad(){({strings:this.strings}=await(0,s.d)(this.hostElement,(0,t.a)(".")))}render(){return void 0!==this.choiceList&&this.choiceList.length>0?this.renderCombobox():this.renderNoChoiceList()}renderNoChoiceList(){const e=void 0!==this.errorMessage;let a,i=!1;void 0!==this.validationOptions?.maxValues&&(i=!e&&this.isAtMaxValues,a=(0,s.a)(this.strings.maxValuesMessage,{maxValues:(0,s.k)(this.validationOptions.maxValues)}));const r=(0,s.f)(this.validationParams),o=!0===e||!0===i,u=!1===(0,s.i)(r)||o,c=o?s.b.INVALID:(0,s.g)(this.validationParams?.type),h=o?s.b.INVALID:(0,s.i)(this.validationParams)?s.b.IDLE:(0,s.g)(this.validationParams?.type);return(0,t.h)(t.H,null,(0,t.h)("calcite-label",{scale:this.scale,class:l},this.label,(0,t.h)("calcite-input",{disabled:this.isAtMaxValues,type:this.dataType,placeholder:this.placeholderText??this.strings.defaultPlaceholder,scale:this.scale,status:h,numberButtonType:"none",max:this.validationOptions?.max,min:this.validationOptions?.min,step:!0===this.validationOptions?.isFloatType?"any":1,onCalciteInputChange:this.handleNewChip,onKeyDown:this.handleKeyDown,ref:e=>this.inputElement=e},(0,t.h)("calcite-button",{disabled:this.isAtMaxValues,scale:this.scale,slot:"action",onClick:this.handleNewChip,"icon-start":"plus"},this.strings.add)),(0,t.h)("calcite-input-message",{class:l,status:c,scale:s.U.Scale,hidden:!u,icon:"exclamationMarkTriangle"},this.errorMessage??a??r)),(0,t.h)("div",{class:n},this.value?.map((e=>this.buildChip(e)))))}validate(e=this.value){let a;if(!0!==this.required||void 0!==e&&0!==e?.length)if("number"===this.dataType){const i={required:!1,...this.validationOptions},t=e=>(0,r.j)((0,s.P)(e),i),n=e?.map(t).find((e=>void 0!==e)),{min:l,max:o}=i,u={min:(0,s.k)(l),max:(0,s.k)(o)};a=void 0!==n?(0,s.a)(this.strings[n],u):void 0}else a=void 0;else a=this.strings.requiredInputMessage;return a}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,t.g)(this)}};o.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{--calcite-color-border-input:var(--analysis-ui-border-input)}.chip-container{display:flex;flex-wrap:wrap;gap:0.25rem}.custom-input-label{margin-bottom:var(--analysis-quarter-spacing)/2}"},99519:(e,a,i)=>{i.r(a),i.d(a,{analysis_multiple_input:()=>t.A});var t=i(37514);i(12064),i(22069),i(44345),i(55448),i(18423),i(91813),i(21255),i(588),i(54312),i(34031),i(9316),i(61320),i(64016),i(56451),i(6550),i(2924),i(5258),i(52373),i(33752),i(53976),i(49403),i(77462),i(23054),i(73645),i(12762),i(82567),i(28927),i(35970),i(5933),i(57295),i(5294),i(13661),i(35431),i(32513),i(11840),i(440),i(66744),i(23795),i(17902),i(71802),i(36596),i(72349),i(89962),i(97703),i(43284),i(46784)},46784:(e,a,i)=>{i.d(a,{L:()=>s,S:()=>r,a:()=>p,b:()=>V,c:()=>v,d:()=>P,e:()=>M,f:()=>y,g:()=>I,h:()=>f,i:()=>T,j:()=>_,k:()=>x,l:()=>C,m:()=>b,n:()=>n,r:()=>g,v:()=>F});var t=i(22069);const s={Feature_All:"feature",Feature_Extract:"extract",Feature_Point:"feature_point",Feature_MultiPoint:"feature_multiPoint",Feature_Line:"feature_line",Feature_Polygon:"feature_polygon",Feature_Table:"table",Imagery_All:"imagery",Imagery_SingleBand:"imagery_singleBand",Imagery_MultiBand:"imagery_multiBand",Imagery_Integer:"imagery_integer",Imagery_Float:"imagery_float",Imagery_Multidimension:"imagery_multidimension",Imagery_Trend:"imagery_trend",Tile:"tile",Imagery_Change:"imagery_change"},r={Any:"any",Count:"count",First:"first",Last:"last",Maximum:"max",Mean:"mean",Minimum:"min",Range:"range",StdDev:"stddev",Sum:"sum",Variance:"variance"},n={Select:"select",Filter:"filter",Reset:"reset",Remove:"remove"},l="invalidIntegerMessage",o="invalidDoubleMessage",u="requiredInputMessage",c="belowMinimumMessage",h="aboveMaximumMessage",d="strictlyMinimumMessage",m="strictlyMaximumMessage";function g(e){void 0!==e&&(e.open=!1,e.remove())}function p(e,a){!1===e.body.contains(a)&&(e.body.appendChild(a),a.open=!0)}function y(e){const{layers:a,layerFilterTypes:i}=e,r=[],n=[];if(void 0!==i){if((Array.isArray(i)?i:[i]).includes(s.Feature_Table))return{validLayers:a,filteredLayers:n};a.forEach((e=>{(0,t.aq)(e)?n.push(e):r.push(e)}))}else r.push(...a);return{validLayers:r,filteredLayers:n}}function v(e){return e.includes("derived-")}const _=(e,a)=>{const{required:i,isFloatType:s,excludeMinValue:r,excludeMaxValue:n,min:g,max:p}=a;let y;return(0,t.ar)(e)?!1!==s||Number.isInteger(e)?null!=g&&(e<g||!0===r&&e<=g)?y=!0===r?d:c:null!=p&&(e>p||!0===n&&e>=p)&&(y=!0===n?m:h):y=l:Number.isNaN(e)?y=!0===s?o:l:!0===i&&(y=u),y};function b(e,a){const i=e.map((e=>`type:"${e}"`)).join(" OR ");return void 0!==a?`${a} (${i})`:`(${i})`}function M(e){const a=Array.isArray(e)?e:[e],i=new Set;return a.forEach((e=>{switch(e){case s.Feature_Extract:case s.Feature_All:case s.Feature_Point:case s.Feature_MultiPoint:case s.Feature_Line:case s.Feature_Polygon:case s.Feature_Table:i.add("Feature Service"),i.add("Map Service");break;case s.Imagery_All:case s.Imagery_SingleBand:case s.Imagery_MultiBand:case s.Imagery_Integer:case s.Imagery_Float:case s.Imagery_Multidimension:case s.Imagery_Trend:case s.Imagery_Change:i.add("Image Service");break;default:i.add("Feature Service"),i.add("Image Service"),i.add("Map Service")}})),b(Array.from(i))}function f(e){const a=Array.isArray(e)?e:[e],i=new Set;let t=!1;return a.forEach((e=>{switch(e){case s.Feature_All:i.add("point"),i.add("multipoint"),i.add("polyline"),i.add("polygon");break;case s.Feature_Point:i.add("point");break;case s.Feature_MultiPoint:i.add("multipoint");break;case s.Feature_Line:i.add("polyline");break;case s.Feature_Polygon:i.add("polygon");break;case s.Feature_Table:i.add("nonspatial");break;case s.Feature_Extract:i.add("point"),i.add("multipoint"),i.add("polyline"),i.add("polygon"),i.add("nonspatial");break;case s.Imagery_All:case s.Imagery_SingleBand:case s.Imagery_MultiBand:case s.Imagery_Integer:case s.Imagery_Float:case s.Imagery_Multidimension:case s.Imagery_Trend:case s.Imagery_Change:t=!0}})),0===i.size||t?void 0:Array.from(i)}function F(e){return"3d"===e?.type}function I(e,a,i){const t=Array.isArray(a)?a:[a],r=void 0===i?'(-typekeywords: "Hosted Service" AND type: "Image Service") OR (servicetags: "allowAnalysis"':`(-typekeywords: "Hosted Service" AND type: "Image Service") OR ((servicetags: "allowAnalysis" OR orgid: ${i}) AND type: "Image Service"`;let n="";const l=[];if(t.forEach((e=>{switch(e){case s.Imagery_SingleBand:l.push("(bandcount: 1)");break;case s.Imagery_MultiBand:l.push("(bandcount: [2 TO 65536])");break;case s.Imagery_Integer:l.push('(NOT (servicetags: "PixelTypeF32" OR servicetags: "PixelTypeF64"))');break;case s.Imagery_Float:l.push('(servicetags: "PixelTypeF32" OR servicetags: "PixelTypeF64")');break;case s.Imagery_Multidimension:l.push('(servicetags: "hasMultidimensions")');break;case s.Imagery_All:case s.Imagery_Trend:case s.Imagery_Change:l.push("i");break;case s.Feature_All:case s.Feature_Point:case s.Feature_MultiPoint:case s.Feature_Line:case s.Feature_Polygon:case s.Feature_Table:case s.Feature_Extract:l.push("f")}})),l.length>0&&!l.every((e=>"f"===e))){const e=l.filter((e=>e.length>1));if(e.length>0){n=`${r} AND (${e.join(" OR ")}))`}else n=`${r})`;n=l.indexOf("f")>-1?`(${n} OR (type: "Feature Service"))`:`(${n})`}return F(e)?`${n} -typekeywords: "Table"`:n}function x(e){return`${e.url}/${e.layerId}`}const A={esriGeometryPoint:s.Feature_Point,esriGeometryPolyline:s.Feature_Line,esriGeometryPolygon:s.Feature_Polygon,esriGeometryMultipoint:s.Feature_MultiPoint};function k(e){switch(e){case"esriFieldTypeSingle":return"single";case"esriFieldTypeDouble":return"double";case"esriFieldTypeGeometry":return"geometry";case"esriFieldTypeInteger":return["long","integer","big-integer"];case"esriFieldTypeSmallInteger":return"small-integer";case"esriFieldTypeString":return"string";case"esriFieldTypeDate":return"date";default:return}}function C(e){const a={};switch(e?.type){case"range":a.min=e.minimum,a.max=e.maximum;break;case"featureClass":void 0!==e.list&&(a.layerFilterType=e.list.map((e=>A[e])).filter((e=>void 0!==e)));break;case"field":void 0!==e.list&&(a.fieldTypes=e.list.flatMap(k).filter((e=>void 0!==e)));break;case"file":a.accept=e.list?.filter((e=>void 0!==e))}return a}function T(e){return new RegExp(/^(http|https|ftp):\/\//i).test(e)}function V(e,a){if(void 0===a||0===a.length)return!0;const i=e.split(".").pop();return void 0!==i&&a.includes(i)}function P(e){return null==e?e:(Array.isArray(e)||(e=[e]),e.includes(s.Feature_Table)?e.filter((e=>e!==s.Feature_Table)):e.includes(s.Feature_All)?(e.push(s.Feature_Polygon,s.Feature_Line,s.Feature_MultiPoint,s.Feature_Point),e.filter((e=>e!==s.Feature_All))):e)}}}]);