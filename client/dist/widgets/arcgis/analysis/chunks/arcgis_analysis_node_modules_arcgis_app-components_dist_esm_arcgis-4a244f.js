/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4a244f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4a244f"],{84305:(e,r,t)=>{t.r(r),t.d(r,{arcgis_smart_mapping_panels_raster_gallery:()=>d});var s=t(19564),a=(t(12350),t(98034),t(52437)),l=t(95875),i=t(89261),n=t(91243),o=t(41588);t(99004),t(66507),t(91102),t(73807),t(18991),t(9421),t(8348);function c(e,r){switch(e){case"raster-flow":r((0,n.c)());break;case"raster-vector-field":r((0,o.a)());break;case"raster-stretch":r((0,a.a8)());break;case"raster-rgb":r((0,a.a7)());break;case"raster-shaded-relief":r(function(){const{layer:e,modules:r}=a.s,t=e,s="imagery"===t.type?t.rasterFunction:void 0;return r.RasterShadedReliefCreator.createRenderer({layer:t,rasterFunction:s})}());break;case"raster-class-breaks":r((0,o.c)());break;case"raster-colormap":r(async function(){const{layer:e,modules:r}=a.s,t=e,s="imagery"===t.type?t.rasterFunction:void 0;return r.RasterColormapCreator.createRenderer({layer:t,rasterFunction:s}).then((e=>(e.renderer.colormapInfos.forEach(((r,t)=>{r.label||(e.renderer.colormapInfos[t].label=" ")})),Promise.resolve(e))))}());break;case"raster-unique-value":r((0,a.a6)())}}const d=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingPanelsRasterGalleryClose=(0,s.c)(this,"arcgisSmartMappingPanelsRasterGalleryClose",7),this.arcgisSmartMappingPanelsRasterGalleryError=(0,s.c)(this,"arcgisSmartMappingPanelsRasterGalleryError",7),this.tileNodes=[],this.handleSelectClick=e=>{const{layer:r}=a.s;r.bandIds=[],c(e,this.galleryRequestWrapper)},this.handleOptionsClick=e=>{switch(e){case"raster-class-breaks":{const e=document.createElement("arcgis-smart-mapping-panels-raster-class-breaks");e.addEventListener("arcgisSmartMappingPanelsRasterClassBreaksClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterClassBreaksBackClick",(()=>{this.focusSelectedTile(),this.flowNode.removeChild(e),this.selected=!0})),e.addEventListener("arcgisSmartMappingPanelsRasterClassBreaksError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e),e.selected=!0,this.selected=!1;break}case"raster-colormap":{const e=document.createElement("arcgis-smart-mapping-panels-raster-colormap");e.addEventListener("arcgisSmartMappingPanelsRasterColormapClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterColormapBackClick",(()=>{this.focusSelectedTile(),this.flowNode.removeChild(e),this.selected=!0})),this.flowNode.appendChild(e),e.selected=!0,this.selected=!1;break}case"raster-flow":{const e=document.createElement("arcgis-smart-mapping-panels-raster-flow");e.addEventListener("arcgisSmartMappingPanelsRasterFlowClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterFlowBackClick",(()=>{this.focusSelectedTile(),this.flowNode.removeChild(e),this.selected=!0})),e.addEventListener("arcgisSmartMappingPanelsRasterFlowError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e),e.selected=!0,this.selected=!1;break}case"raster-rgb":{const e=document.createElement("arcgis-smart-mapping-panels-raster-rgb");e.addEventListener("arcgisSmartMappingPanelsRasterRgbClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterRgbBackClick",(()=>{this.focusSelectedTile(),this.flowNode.removeChild(e),this.selected=!0})),e.addEventListener("arcgisSmartMappingPanelsRasterRgbError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e),e.selected=!0,this.selected=!1;break}case"raster-shaded-relief":{const e=document.createElement("arcgis-smart-mapping-panels-raster-shaded-relief");e.addEventListener("arcgisSmartMappingPanelsRasterShadedReliefClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterShadedReliefBackClick",(()=>{this.focusSelectedTile(),this.flowNode.removeChild(e),this.selected=!0})),e.addEventListener("arcgisSmartMappingPanelsRasterShadedReliefError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e),e.selected=!0,this.selected=!1;break}case"raster-stretch":{const e=document.createElement("arcgis-smart-mapping-panels-raster-stretch");e.addEventListener("arcgisSmartMappingPanelsRasterStretchClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterStretchBackClick",(()=>{this.focusSelectedTile(),this.flowNode.removeChild(e),this.selected=!0})),e.addEventListener("arcgisSmartMappingPanelsRasterStretchError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e),e.selected=!0,this.selected=!1;break}case"raster-unique-value":{const e=document.createElement("arcgis-smart-mapping-panels-raster-unique-value");e.addEventListener("arcgisSmartMappingPanelsRasterUniqueValueClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterUniqueValueBackClick",(()=>{this.focusSelectedTile(),this.flowNode.removeChild(e),this.selected=!0})),e.addEventListener("arcgisSmartMappingPanelsRasterUniqueValueError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e),e.selected=!0,this.selected=!1;break}case"raster-vector-field":{const e=document.createElement("arcgis-smart-mapping-panels-raster-vector-field");e.addEventListener("arcgisSmartMappingPanelsRasterVectorFieldClose",(()=>{this.flowNode.removeChild(e),this.focusSelectedTile()})),e.addEventListener("arcgisSmartMappingPanelsRasterVectorFieldBackClick",(()=>{this.focusSelectedTile(),this.flowNode.removeChild(e),this.selected=!0})),e.addEventListener("arcgisSmartMappingPanelsRasterVectorFieldError",(({detail:e})=>this.arcgisSmartMappingPanelsRasterGalleryError.emit(e))),this.flowNode.appendChild(e),e.selected=!0,this.selected=!1;break}}},this.handleDone=()=>{this.arcgisSmartMappingPanelsRasterGalleryClose.emit("save")},this.handleCancel=()=>{const{originalRendererObj:e,originalEffect:r,originalBandCombination:t}=this,{layer:s}=a.s,l=s;l.effect=r,l.bandIds=t,(0,a.a9)(e),this.arcgisSmartMappingPanelsRasterGalleryClose.emit("cancel")},this.galleryRequestWrapper=e=>{const{strings:r}=a.s;(0,l.r)(e,this.flowItemNode).then((e=>{(0,a.a9)(e.renderer),(0,s.f)(this.hostElement)}),(()=>{this.arcgisSmartMappingPanelsRasterGalleryError.emit({message:r.panels.gallery.errors.changeRendererErrorMsg,type:"warning"})}))},this.menuOpen=void 0,this.showBackButton=void 0,this.selected=!1,this.beforeBack=void 0}async setFocus(){var e;null===(e=this.flowItemNode)||void 0===e||e.setFocus()}async componentWillLoad(){const{layer:e,modules:r}=a.s,t=e,{rasterFunction:s}=t;await r.smartMappingRasterUtils.getSupportedRendererInfo({layer:t,rasterFunction:s}).then((async e=>{this.supportedRendererTypes=e.supportedTypes,this.originalRendererObj=(0,a.aa)(),this.originalEffect=t.effect,this.originalBandCombination=t.bandIds||await r.smartMappingRasterUtils.getDefaultBandCombination({layer:t,rasterFunction:s})})),this.flowNode=(0,a.f)(this.hostElement,"calcite-flow")}componentDidLoad(){requestAnimationFrame((()=>{var e;return null===(e=this.flowItemNode)||void 0===e?void 0:e.setFocus()}))}componentDidUpdate(){setTimeout((()=>{var e;return null===(e=this.tileNodes[0])||void 0===e?void 0:e.setFocus()}),300)}render(){const{isRTL:e,strings:r}=a.s;return(0,s.h)(s.H,{key:"a4985d47af6ed1d8faf3858c98e22e2783a974d8",class:"calcite-match-height"},(0,s.h)("calcite-flow-item",{key:"9a411190457d9e18ce8d113d0548c5761b278a72",heading:r.panels.rasterGallery.style,class:{"flow-item":!0,[i.C.rtl]:e},closable:(0,a.F)(this.hostElement),selected:this.selected,showBackButton:this.showBackButton,onCalciteFlowItemClose:this.handleDone,ref:e=>this.flowItemNode=e},this.renderRasterGalleryContent()))}renderRasterGalleryContent(){return(0,s.h)(s.F,null,this.renderStyleOptions(),this.renderDoneButton(),this.renderCancelButton())}renderStyleOptions(){const{modules:e,strings:r}=a.s,t=(0,a.g)(),l=e.esriLang.clone(this.supportedRendererTypes).sort((e=>e===t?-1:1)).map(((e,r)=>this.renderStyleTile(e,r)));return(0,s.h)(s.F,null,(0,s.h)("calcite-label",{class:"styles-msg-title"},r.panels.rasterGallery.symbologyOptions),l)}renderStyleTile(e,r){const t=(0,a.g)();return(0,s.h)("arcgis-smart-mapping-tile",{key:`tile-${e}`,tileType:"gallery",type:e,selected:e===t,ref:e=>{e&&(this.tileNodes[r]=e)},onArcgisSmartMappingTileSelect:()=>this.handleSelectClick(e),onArcgisSmartMappingTileOptions:()=>this.handleOptionsClick(e)})}renderDoneButton(){const{strings:e}=a.s;return(0,s.h)("calcite-button",{slot:"footer",label:e.done,onClick:this.handleDone,appearance:"solid",width:"half"},e.done)}renderCancelButton(){const{strings:e}=a.s;return(0,s.h)("calcite-button",{slot:"footer",label:e.cancel,onClick:this.handleCancel,appearance:"outline-fill",width:"half"},e.cancel)}focusSelectedTile(){setTimeout((()=>requestAnimationFrame((()=>{var e;return null===(e=this.tileNodes[0])||void 0===e?void 0:e.setFocus()}))),300)}get hostElement(){return(0,s.d)(this)}};d.style=":host{display:none}:host([selected]){display:flex}.styles-msg-title{margin-top:12px;padding:6px;font-weight:bold;font-size:16px;display:flex}.styles-msg{font-size:var(--calcite-font-size--2)}"},95875:(e,r,t)=>{let s,a;function l(e){e.loading=!1}function i(e,r){return function(e){e.loading=!0,a=!1,s&&clearTimeout(s),s=setTimeout((()=>{l(e),a=!0}),6e4)}(r),e.then((e=>(l(r),a?Promise.reject(new Error("timeout")):Promise.resolve(e)))).catch((e=>(l(r),Promise.reject(e))))}t.d(r,{r:()=>i})},41588:(e,r,t)=>{t.d(r,{a:()=>l,b:()=>o,c:()=>n,d:()=>i,g:()=>c});t(12350),t(98034);var s=t(52437),a=t(8348);function l(){const{layer:e,modules:r}=s.s,t=e,a="imagery"===t.type?t.rasterFunction:void 0;return r.RasterVectorFieldCreator.createRenderer({layer:t,rasterFunction:a}).then((e=>(t.effect=void 0,(0,s.a9)(e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function i(e){const{layer:r,modules:t}=s.s,a=r,l=(0,s.aa)(),i="imagery"===a.type?a.rasterFunction:void 0;return e=e||{},t.RasterVectorFieldCreator.createRenderer({layer:a,rasterFunction:i,style:e.style||l.style}).then((e=>{e.renderer.symbolTileSize=l.symbolTileSize;const r=(0,s.d)(l,"size");return e.renderer.visualVariables=(0,s.U)(e.renderer,"size")||[],e.renderer.visualVariables.push(r),e.renderer.flowRepresentation=l.flowRepresentation,e.renderer.inputUnit=l.inputUnit,e.renderer.outputUnit=l.outputUnit,Promise.resolve(e)}),(e=>Promise.reject(e)))}function n(){const{layer:e,modules:r}=s.s,t=e,l="imagery"===t.type?t.rasterFunction:void 0,i=(0,a.c)([[245,245,0],[255,0,0]].map((e=>new r.esriColor(e))));return r.RasterClassBreaksCreator.createRenderer({layer:t,rasterFunction:l,colorRamp:i}).then((e=>(e.renderer.classBreakInfos.forEach((e=>e.symbol.outline.width=0)),Promise.resolve(e))))}function o(e){const{layer:r,modules:t}=s.s,a=r,l=(0,s.aa)(),i="imagery"===a.type?a.rasterFunction:void 0;return t.RasterClassBreaksCreator.createRenderer({layer:a,rasterFunction:i,field:e.field||l.field,classificationMethod:e.classificationMethod||l.authoringInfo.classificationMethod,numClasses:e.numClasses||l.classBreakInfos.length,colorRamp:l.authoringInfo.colorRamp,definedInterval:e.definedInterval}).then((e=>(e.renderer.classBreakInfos.forEach((e=>e.symbol.outline.width=0)),Promise.resolve(e))))}function c(){var e;const{rasterInfo:r,modules:t,strings:a}=s.s;let l;const i=null===(e=null==r?void 0:r.attributeTable)||void 0===e?void 0:e.fields;return l=i?i.filter((e=>"oid"!==e.type&&"string"!==e.type)):[new t.Field({name:"value",alias:a.panels.classBreaks.value})],l}},91243:(e,r,t)=>{t.d(r,{a:()=>l,c:()=>a,f:()=>i});t(12350),t(98034);var s=t(52437);function a(e){const{layer:r,mapView:t,modules:a}=s.s,l=r;return e=e||{},a.RasterFlowCreator.createRenderer({layer:l,view:t,theme:e.flowTheme||"flow-line",includeColorVariable:e.includeColorVariable,legendOptions:e.legendOptions,flowRepresentation:e.flowRepresentation,flowScheme:e.flowScheme||i()}).then((r=>(r.layerEffect&&-1===r.layerEffect.indexOf("drop-shadow")&&(l.effect=r.layerEffect),r.renderer.color=r.renderer.color&&(e.color||r.renderer.color),Promise.resolve(r))),(e=>Promise.reject(e)))}function l(e){var r;const{layer:t,mapView:a,modules:l}=s.s,n=t;e=e||{};const o=(0,s.aa)(),c=(0,s.d)(o,"color"),d=o.authoringInfo,h=e.flowTheme||(null==d?void 0:d.flowTheme)||"flow-line";return l.RasterFlowCreator.createRenderer({layer:n,view:a,theme:h,includeColorVariable:null!==(r=e.includeColorVariable)&&void 0!==r?r:!!c,legendOptions:e.legendOptions||(null==c?void 0:c.legendOptions),flowRepresentation:e.flowRepresentation||o.flowRepresentation,flowScheme:e.flowScheme}).then((r=>{const t=(0,s.J)(o,"color"),a=(0,s.J)(r.renderer,"color");(null==t?void 0:t.minSliderValue)&&(null==t?void 0:t.maxSliderValue)&&a&&(a.minSliderValue=t.minSliderValue,a.maxSliderValue=t.maxSliderValue);const n=(0,s.d)((0,s.aa)(),"color"),c=(0,s.d)(r.renderer,"color");n&&c&&n.stops.forEach(((e,r)=>{c.stops[r].value=e.value})),r.renderer.color=r.renderer.color&&(e.color||o.color||r.renderer.color);return(e.flowScheme||i())&&n&&c&&n.stops.forEach(((e,r)=>{c.stops[r].color=new l.esriColor(e.color.toJSON())})),h===d.flowTheme&&(r.renderer.flowSpeed=o.flowSpeed,r.renderer.density=o.density,r.renderer.trailLength=o.trailLength,r.renderer.trailWidth=o.trailWidth,r.renderer.trailCap=o.trailCap),Promise.resolve(r)}),(e=>Promise.reject(e)))}function i(){const{mapView:e,modules:r}=s.s,t=(0,s.aa)(),a=(0,s.d)(t,"color");if(!a)return null;const l=a.stops.map((e=>e.color)),i=r.flowSchemes.getSchemes({basemap:e.map.basemap||"topo"}),n=[i.primaryScheme].concat(i.secondarySchemes),o=[];return n.forEach((e=>{let r=l.some(((r,t)=>!(0,s.ab)(e.colors[t],r)));r?(e.colors=e.colors.reverse(),r=l.some(((r,t)=>!(0,s.ab)(e.colors[t],r))),r||o.push(e)):o.push(e)})),o.length?o[0]:null}}}]);