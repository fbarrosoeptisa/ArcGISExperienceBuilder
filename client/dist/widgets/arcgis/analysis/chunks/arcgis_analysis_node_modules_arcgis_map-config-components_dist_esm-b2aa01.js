/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-b2aa01.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-b2aa01"],{58944:(e,i,n)=>{n.d(i,{a:()=>t,b:()=>p,c:()=>r,d:()=>y,e:()=>h,f:()=>d,g:()=>I,h:()=>f,i:()=>g,j:()=>S,k:()=>u,l:()=>b,m:()=>m,n:()=>z,s:()=>c});var a=n(68180),s=n(99592),l=(n(97127),n(84521)),o=n(99818);async function r(e,i){const{layer:n,useFeatureReduction:l,mapImageSublayer:o,mapView:r,supportsArcade:t,modules:d}=e,f=n;if(o&&!t)return await async function(e,i){const{layer:n,useFeatureReduction:l,mapImageSublayer:o,mapView:r,modules:t}=e,d=n;i=i||{};const f=(0,s.k)((0,s.j)(e)),u=i.fieldInfos?.[0];return await t.SizeCreator.createClassBreaksRenderer({layer:d,view:r,field:u?.field,valueExpression:u?.expression,valueExpressionTitle:u?.expressionTitle,normalizationField:void 0,classificationMethod:i.classificationMethod?i.classificationMethod:"natural-breaks",standardDeviationInterval:"standard-deviation"===i.classificationMethod?i.standardDeviationInterval?i.standardDeviationInterval:1:void 0,numClasses:i.numClasses?i.numClasses:4,outlineOptimizationEnabled:!o&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:(0,s.z)(e)),legendOptions:i.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===d.featureReduction?.type&&l}).then((e=>((0,s.l)(f,e.renderer),e)))}(e,i);const u=(0,s.j)(e),m=u.authoringInfo,z=(0,s.G)(u,"reference-size"),b=(0,s.a)(e);i=i||{};const p=(0,s.k)((0,s.j)(e)),y=i.fieldInfos?.[0],h=i.theme?i.theme:z?"reference-size":void 0,I={layer:f,view:r,field:y?.field,theme:h,valueExpression:y?.expression,valueExpressionTitle:y?.expressionTitle,normalizationField:i.normalizationField,outlineOptimizationEnabled:!o&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:(0,s.z)(e)),sizeOptimizationEnabled:!o&&(!(0,a.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled),legendOptions:i.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===f.featureReduction?.type&&l,referenceSizeOptions:i.theme&&"reference-size"!==i.theme||!y?.field?void 0:(0,a.i)(i.referenceSizeOptions)?i.referenceSizeOptions:z?{symbolStyle:z.referenceSizeSymbolStyle}:void 0};return await d.SizeCreator.createContinuousRenderer(I).then((n=>{const l=(0,s.G)(n.renderer,"reference-size");if(!i.noReuse&&c(e,i)&&["size","color-size","type-size","relationship-size"].includes(b)&&m&&"above-and-below"!==m.univariateTheme&&!(0,a.i)(l)&&!(0,a.i)(z)){const i=(0,s.j)(e).clone(),a=(0,s.b)(i,"size"),l=(0,s.G)(i,"size"),o=(0,s.b)(i,"size","outline");n.renderer.visualVariables=[a],o&&n.renderer.visualVariables.push(o),l&&(n.renderer.authoringInfo.visualVariables=[l]),(0,s._)(e,n.renderer)}return(0,s.l)(p,n.renderer),n}))}async function t(e,i){const{layer:n,mapImageSublayer:l,mapView:o,modules:r}=e,t=n,d=(0,s.j)(e).authoringInfo,f=(0,s.a)(e);i=i||{};const u=(0,s.k)((0,s.j)(e)),m=i.fieldInfos?.[0],z=i.theme?i.theme:"high-to-low",b={layer:t,view:o,startTime:m?.field,endTime:new Date,theme:z,unit:void 0,outlineOptimizationEnabled:!l&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:(0,s.z)(e)),sizeOptimizationEnabled:!0,legendOptions:i.legendOptions,defaultSymbolEnabled:!1};return await r.SizeCreator.createAgeRenderer(b).then((n=>{if(c(e,i)&&["size-age","color-size-age","type-size-age"].includes(f)&&d&&"above-and-below"!==d?.univariateTheme){const i=(0,s.j)(e).clone(),a=(0,s.b)(i,"size"),l=(0,s.G)(i,"size"),o=(0,s.b)(i,"size","outline");n.renderer.visualVariables=[a],o&&n.renderer.visualVariables.push(o),l&&(n.renderer.authoringInfo.visualVariables=[l]),(0,s._)(e,n.renderer)}return(0,s.l)(u,n.renderer),n}))}async function d(e,i){const{layer:n,useFeatureReduction:l,mapImageSublayer:o,mapView:r,supportsArcade:t,modules:d}=e,f=n;if(o&&!t)return await u(e,i);i=i||{};const c=(0,s.j)(e),m=c.authoringInfo||{},z=(0,s.a)(e),b=(0,s.b)(c,"size"),p=(0,s.G)(c,"size"),y=(0,s.G)(c,"reference-size"),h=(0,s.k)(c);let I;if(["type-size","relationship-size"].includes(z)){const i=(0,s.j)(e);I=i.uniqueValueInfos?.length?i.uniqueValueInfos[0].symbol:(0,s.m)(e,z)}else I=c.classBreakInfos?.length?c.classBreakInfos[c.classBreakInfos.length-1].symbol:(0,s.m)(e,z);const S=c.defaultSymbol,g=c.defaultLabel,v=c.backgroundFillSymbol,V=(0,a.i)(i.referenceSizeOptions)?"reference-size":i.theme?i.theme:p&&!y?p.theme:y?"reference-size":"high-to-low";let x=!1;if(b)V===b.theme&&(x=b.minSize.stops?b.minSize.stops[0].size>b.maxSize.stops[0].size:b.minSize>b.maxSize);else if(!y){const i=c.classBreakInfos[0].symbol,n=c.classBreakInfos[c.classBreakInfos.length-1].symbol,a=(0,s.$)(e,i),l=(0,s.$)(e,n);x=a>l}if(i.fieldInfos?.[0]&&b&&i.fieldInfos?.[0].field===b.field&&i.fieldInfos?.[0].expression===b.valueExpression&&i.normalizationField===b.normalizationField&&(delete i.fieldInfos,(0,s.T)(i))){const e=c.clone();return e.visualVariables=(0,s.V)(c,"color"),{renderer:e}}const E=i.fieldInfos?.[0]?i.fieldInfos[0]:b?{field:b.field,expression:b.valueExpression,expressionTitle:b.valueExpressionTitle,simpleFieldType:s.q.NUMBER}:y?{field:y.field,simpleFieldType:s.q.NUMBER}:{field:c.field,expression:c.valueExpression,expressionTitle:c.valueExpressionTitle,simpleFieldType:s.q.NUMBER},k=null===i.normalizationField?void 0:i.normalizationField?i.normalizationField:b?b.normalizationField:y?y.normalizationField:c.normalizationField;let O=!1;(null===i.normalizationField||i.normalizationField||i.fieldInfos?.[0]||"manual"===m.classificationMethod&&!i.theme||"equal-interval"===m.classificationMethod)&&(O=!0);const w=i.discardMinMax?void 0:(0,a.i)(i.min)?i.min:O?void 0:b?p?.minSliderValue:y?y.minSliderValue:c.classBreakInfos[0].minValue,B=i.discardMinMax?void 0:(0,a.i)(i.max)?i.max:O?void 0:b?p?.maxSliderValue:y?y.maxSliderValue:c.classBreakInfos[c.classBreakInfos.length-1].maxValue,F={layer:f,view:r,theme:V,field:E.field,valueExpression:E.expression,valueExpressionTitle:E.expressionTitle,normalizationField:k,minValue:w,maxValue:B,outlineOptimizationEnabled:!o&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!h.sizeOutlineVisVar),sizeOptimizationEnabled:!o&&(!b||((0,a.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:"object"==typeof b?.minSize)),legendOptions:i.legendOptions?.toJSON()||b?.legendOptions?.toJSON()||c.legendOptions?.toJSON(),defaultSymbolEnabled:(0,a.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!c.defaultSymbol,forBinning:"binning"===f.featureReduction?.type&&l,referenceSizeOptions:i.theme&&"reference-size"!==i.theme?void 0:(0,a.i)(i.referenceSizeOptions)?i.referenceSizeOptions:y?{symbolStyle:y.referenceSizeSymbolStyle}:void 0};return await d.SizeCreator.createContinuousRenderer(F).then((n=>{const a=(0,s.G)(n.renderer,"reference-size");if(a){const i=a.sizeStops?.map((e=>e.size));if(!i||i[1]<i[0]||1===Math.round(i[1])){const{strings:i}=e;return Promise.reject({message:i.themeButton.errors.invalidReferenceSizeStops,type:"warning"})}}const l=y?.referenceSizeSymbolStyle!==a?.referenceSizeSymbolStyle;if(i.referenceSizeOptions||y||(n.renderer.authoringInfo.visualVariables=(0,s.W)(n.renderer,"reference-size")||[]),i.discardMinMax&&!y&&!a){const e=(0,s.b)(c,"size"),i=(0,s.b)(n.renderer,"size");e.minDataValue=i.minDataValue,e.maxDataValue=i.maxDataValue}if(!i.fieldInfos&&void 0===i.normalizationField&&b&&!a&&V===b?.theme){const e=(0,s.b)(n.renderer,"size");e.minDataValue=b.minDataValue,e.maxDataValue=b.maxDataValue}if(!y&&a&&(n.renderer.defaultLabel=void 0,n.renderer.defaultSymbol=void 0,n.renderer.backgroundFillSymbol=void 0),["color-size","color-age-size","color-size-age","type-size","type-size-age","relationship-size","predominance-size"].includes(z)){if(l)return n;c.visualVariables=(0,s.V)(c,"size")||[],c.visualVariables=(0,s.V)(c,"size","outline")||[],c.authoringInfo.visualVariables=(0,s.W)(c,"size")||[],c.authoringInfo.visualVariables=(0,s.W)(c,"reference-size")||[];const i=(0,s.b)(n.renderer,"size");i&&c.visualVariables.push(i);const a=(0,s.b)(n.renderer,"size","outline");a&&c.visualVariables.push(a);const o=(0,s.G)(n.renderer,"size");return o&&c.authoringInfo.visualVariables.push(o),(0,s._)(e,c),n.renderer=c.clone(),n}if((0,s.l)(h,n.renderer),!l&&I&&n.renderer.classBreakInfos?.length&&(n.renderer.classBreakInfos[0].symbol=I),l&&I&&n.renderer.classBreakInfos?.length){const i=(0,s.Z)(e,I);(0,s.X)(e,n.renderer.classBreakInfos[0].symbol,i)}if(!S||a&&!y||(n.renderer.defaultSymbol=S,n.renderer.defaultLabel=g),!v||a&&!y||(n.renderer.backgroundFillSymbol=v),x){const e=(0,s.b)(n.renderer,"size");if(e){const i=e.minSize;e.minSize=e.maxSize,e.maxSize=i}}return n}))}async function f(e,i){const{layer:n,mapImageSublayer:l,mapView:o,modules:r}=e,t=n;i=i||{};const d=(0,s.j)(e),f=(0,s.a)(e),u=(0,s.b)(d,"size"),c=(0,s.G)(d,"size"),m=(0,s.k)(d),z=i.startTime?i.startTime:c.startTime,b=i.endTime?i.endTime:c.endTime;let p;if(["type-size-age"].includes(f)){const i=(0,s.j)(e);p=i.uniqueValueInfos?.length?i.uniqueValueInfos[0].symbol:(0,s.m)(e,f)}else p=d.classBreakInfos?.length?d.classBreakInfos[0].symbol:(0,s.m)(e,f);const y=d.defaultSymbol,h=d.defaultLabel,I=d.backgroundFillSymbol;let S=!1;if(u)S=u.minSize.stops?u.minSize.stops[0].size>u.maxSize.stops[0].size:u.minSize>u.maxSize,"below"===c.theme&&(S=!S);else{const i=d.classBreakInfos[0].symbol,n=d.classBreakInfos[d.classBreakInfos.length-1].symbol,a=(0,s.$)(e,i),l=(0,s.$)(e,n);S=a>l}if(i.fieldInfos?.[0]&&u&&i.fieldInfos[0].field===u.field&&(delete i.fieldInfos,(0,s.T)(i))){const e=d.clone();return e.visualVariables=(0,s.V)(d,"color"),{renderer:e}}let g=!1;(i.startTime||i.endTime||i.units||i.fieldInfo||i.theme)&&(g=!0);const v=i.discardMinMax?void 0:(0,a.i)(i.min)?i.min:g?void 0:c?c.minSliderValue:d.classBreakInfos[0].minValue,V=i.discardMinMax?void 0:(0,a.i)(i.max)?i.max:g?void 0:c?c.maxSliderValue:d.classBreakInfos[d.classBreakInfos.length-1].maxValue,x={layer:t,view:o,theme:i.theme?i.theme:c?c.theme:"high-to-low",startTime:z,endTime:b,unit:i.units?i.units:c.units,minValue:v,maxValue:V,outlineOptimizationEnabled:!l&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!m.sizeOutlineVisVar),sizeOptimizationEnabled:!l&&(!u||((0,a.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:"object"==typeof u.minSize)),legendOptions:i.legendOptions?.toJSON()||u?.legendOptions?.toJSON()||d.legendOptions?.toJSON(),defaultSymbolEnabled:(0,a.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!d.defaultSymbol};return await r.SizeCreator.createAgeRenderer(x).then((n=>{if(i.discardMinMax){const e=(0,s.b)(d,"size"),i=(0,s.b)(n.renderer,"size");e.minDataValue=i.minDataValue,e.maxDataValue=i.maxDataValue}if((0,s.G)(n.renderer,"size").field=c.field,!g){const e=(0,s.b)(n.renderer,"size");e.minDataValue=u.minDataValue,e.maxDataValue=u.maxDataValue}if(["color-size-age"].includes(f)){d.visualVariables=(0,s.V)(d,"size")||[],d.visualVariables=(0,s.V)(d,"size","outline")||[],d.authoringInfo.visualVariables=(0,s.W)(d,"size")||[];const i=(0,s.b)(n.renderer,"size");d.visualVariables.push(i);const a=(0,s.G)(n.renderer,"size");d.authoringInfo.visualVariables.push(a);const l=(0,s.b)(n.renderer,"size","outline");return l&&d.visualVariables.push(l),(0,s._)(e,d),n.renderer=d.clone(),n}if((0,s.l)(m,n.renderer),p&&n.renderer.classBreakInfos?.length&&(n.renderer.classBreakInfos[0].symbol=p),y&&(n.renderer.defaultSymbol=y,n.renderer.defaultLabel=h),I&&(n.renderer.backgroundFillSymbol=I),S){const e=(0,s.b)(n.renderer,"size"),i=e.minSize;e.minSize=e.maxSize,e.maxSize=i}return n}))}async function u(e,i){const{layer:n,useFeatureReduction:l,mapImageSublayer:o,mapView:r,modules:t}=e,d=n;i=i||{};const f=(0,s.j)(e),u=(0,s.a)(e),c=f.authoringInfo,m=(0,s.b)(f,"size"),z=(0,s.G)(f,"size"),b=(0,s.k)(f),p={field:f.field,expression:f.valueExpression,expressionTitle:f.valueExpressionTitle,simpleFieldType:s.q.NUMBER},y=i.fieldInfos?i.fieldInfos[0]:m?{field:m.field,expression:m.valueExpression,expressionTitle:m.valueExpressionTitle,simpleFieldType:s.q.NUMBER}:p,h=void 0!==i.normalizationField?i.normalizationField:m?m.normalizationField:f.normalizationField;let I;if(["type-size"].includes(u)){const i=(0,s.j)(e);I=i.uniqueValueInfos?.length?i.uniqueValueInfos[0].symbol:(0,s.m)(e,u)}else I=f.classBreakInfos?.length?f.classBreakInfos[0].symbol:(0,s.m)(e,u);const S=f.defaultSymbol,g=f.defaultLabel,v=f.backgroundFillSymbol;let V=!1;if(f.classBreakInfos.length>1){const i=f.classBreakInfos[0].symbol,n=f.classBreakInfos[1].symbol,a=(0,s.$)(e,i)||0,l=(0,s.$)(e,n)||0;V=a>l}if(!m&&c&&(0,s.r)(y,p)&&h===f.normalizationField&&(delete i.fieldInfos,(0,s.T)(i))){const e=f.clone();return e.visualVariables=(0,s.V)(f,"color"),{renderer:e}}const x=i.classificationMethod?i.classificationMethod:c?.classificationMethod&&"manual"!==c.classificationMethod?c.classificationMethod:"equal-interval",E="standard-deviation"===x?i.standardDeviationInterval?i.standardDeviationInterval:c?.standardDeviationInterval?c.standardDeviationInterval:1:void 0;let k=!0;!i.classificationMethod||i.classificationMethod===c?.classificationMethod||"standard-deviation"!==i.classificationMethod&&"standard-deviation"!==c?.classificationMethod||(k=!1);let O=!1;(void 0!==i.normalizationField||!(0,s.r)(y,p)||"equal-interval"!==x||z?.minSliderValue||z?.maxSliderValue)&&(O=!0);const w=(0,a.i)(i.min)?i.min:O?void 0:z?z.minSliderValue:f.classBreakInfos[0].minValue,B=(0,a.i)(i.max)?i.max:O?void 0:z?z.maxSliderValue:f.classBreakInfos[f.classBreakInfos.length-1].maxValue;return await t.SizeCreator.createClassBreaksRenderer({layer:d,view:r,field:y.field,valueExpression:y.expression,valueExpressionTitle:y.expressionTitle,normalizationField:h,classificationMethod:x,standardDeviationInterval:E,numClasses:(0,a.i)(i.numClasses)?i.numClasses:m||!k?4:f.classBreakInfos.length,minValue:w,maxValue:B,outlineOptimizationEnabled:!o&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!b.sizeOutlineVisVar),legendOptions:i.legendOptions||f.legendOptions,defaultSymbolEnabled:(0,a.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!f.defaultSymbol,forBinning:"binning"===d.featureReduction?.type&&l}).then((i=>{if((0,s.l)(b,i.renderer),I&&i.renderer.classBreakInfos&&i.renderer.classBreakInfos.forEach((i=>{const n=I.clone();(0,s.a0)(e,n,(0,s.$)(e,i.symbol)),i.symbol=n})),S&&(i.renderer.defaultSymbol=S,i.renderer.defaultLabel=g),v&&(i.renderer.backgroundFillSymbol=v),V){const e=(0,s.b)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return i}))}function c(e,i){const n=(0,s.j)(e).clone(),a=(0,s.a)(e);if(["size","size-age","color-size","color-size-age","color-age-size","type-size","type-size-age","relationship-size"].includes(a)&&void 0===i.normalizationField){let e;const l=(0,s.b)(n,"size");if(l)if(["size-age","color-size-age","type-size-age"].includes(a)){e={field:(0,s.G)(n,"size").field}}else e={field:l.field,expression:l.valueExpression,expressionTitle:l.valueExpressionTitle};else e={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle};if((0,s.r)(i.fieldInfos?.[0],e))return!0}return!1}function m(e){const{mapView:i,modules:n}=e,a=(0,s.j)(e),l=(0,s.b)(a,"size"),r=(0,s.G)(a,"reference-size"),t=i.scale;let d;if(l?.stops)d=n.esriLang.clone(l.stops);else if(r?.sizeStops)r.referenceSizeScale&&(0,o.s)(e),d=n.esriLang.clone(r.sizeStops);else{const{minSize:e,maxSize:i,minDataValue:a,maxDataValue:s}=l;let o,r;if("number"==typeof e)o=e,r=i;else{const n=e.stops.length-1;t>e.stops[n].value?(o=e.stops[n].size,r=i.stops[n].size):e.stops.forEach(((e,n)=>{t<=e.value&&(o=e.size,r=i.stops[n].size)}))}d=[new n.SizeStop({value:a,size:o}),new n.SizeStop({value:s,size:r})]}return d}function z(e){return(0,s.j)(e).classBreakInfos.map((i=>{const n=i.symbol;return{min:i.minValue,max:i.maxValue,size:(0,s.$)(e,n)}}))}async function b(e,i){const{layer:n,modules:l,useFeatureReduction:o,mapView:r}=e,t=(0,s.j)(e),d=(0,s.G)(t,"reference-size");i=i||{};const f={layer:n,view:r,renderer:t.clone(),field:d.field,normalizationField:d.normalizationField,sizeStops:i.sizeStops??l.esriLang.clone(d.sizeStops),forBinning:"binning"===n.featureReduction?.type&&o,sizeOptimizationEnabled:(0,a.i)(d.referenceSizeScale),referenceSizeOptions:i.referenceSizeOptions??{symbolStyle:d.referenceSizeSymbolStyle}};return await l.SizeCreator.updateRendererWithReferenceSize(f).then((e=>e))}async function p(e,i){const n=(0,s.j)(e).authoringInfo,a=(0,s.a)(e),l=(i=i||{}).fieldInfos.length>1?i.fieldInfos[1]:i.fieldInfos[0];if(c(e,{fieldInfos:[l]})&&["color-size","color-age-size","type-size"].includes(a)&&n&&"above-and-below"!==n?.univariateTheme){if((0,s.b)((0,s.j)(e),"size"))return await v(e,(0,s.j)(e),i)}return await r(e,{...i,fieldInfos:[l]}).then((async n=>await v(e,n.renderer,i)))}async function y(e,i){const n=(0,s.j)(e).authoringInfo,a=(0,s.a)(e),l=(i=i||{}).fieldInfos.length>1?i.fieldInfos[1]:i.fieldInfos[0];if(c(e,{fieldInfos:[l]})&&["color-size","color-age-size","type-size"].includes(a)&&n&&"above-and-below"!==n?.univariateTheme){if((0,s.b)((0,s.j)(e),"size"))return await V(e,(0,s.j)(e),i)}return await r(e,{...i,fieldInfos:[l]}).then((async n=>await V(e,n.renderer,i)))}async function h(e,i){const n=(0,s.j)(e).authoringInfo,a=(0,s.a)(e),l=(i=i||{}).fieldInfos.length>1?i.fieldInfos[1]:i.fieldInfos[0];if(c(e,{fieldInfos:[l]})&&["color-size-age","type-size-age"].includes(a)&&n&&"above-and-below"!==n?.univariateTheme){if((0,s.b)((0,s.j)(e),"size"))return await v(e,(0,s.j)(e),i)}return await t(e,{...i,fieldInfos:[l]}).then((async n=>await v(e,n.renderer,i)))}async function I(e,i,n){return i=i||{},await d(e,{...i,fieldInfos:i.fieldInfos?i.fieldInfos.length>1?[i.fieldInfos[1]]:[i.fieldInfos[0]]:null}).then((async a=>await(0,l.b)(e,{...i,fieldInfos:i.fieldInfos?[i.fieldInfos[0]]:null}).then((i=>(x(e,i.renderer,a.renderer),i.backgroundFillSymbol=(0,s.j)(e).backgroundFillSymbol,"size"===n&&(i.statistics=a.statistics),i)))))}async function S(e,i,n){return i=i||{},await d(e,{...i,fieldInfos:i.fieldInfos?i.fieldInfos.length>1?[i.fieldInfos[1]]:[i.fieldInfos[0]]:null}).then((async a=>await(0,l.d)(e,{...i,fieldInfos:i.fieldInfos?[i.fieldInfos[0]]:null}).then((i=>(x(e,i.renderer,a.renderer),i.backgroundFillSymbol=(0,s.j)(e).backgroundFillSymbol,"size"===n&&(i.statistics=a.statistics),i)))))}async function g(e,i,n){return i=i||{},await f(e,{...i,fieldInfos:i.fieldInfos?i.fieldInfos.length>1?[i.fieldInfos[1]]:[i.fieldInfos[0]]:null}).then((async a=>await(0,l.b)(e,{...i,fieldInfos:i.fieldInfos?[i.fieldInfos[0]]:null}).then((i=>(x(e,i.renderer,a.renderer),i.backgroundFillSymbol=(0,s.j)(e).backgroundFillSymbol,"size"===n&&(i.statistics=a.statistics),i)))))}async function v(e,i,n){const a=(0,s.j)(e),o=a.authoringInfo,r=(0,s.a)(e),t=(0,s.G)(a,"color");if((0,s.b)(a,"color")&&(0,l.s)(e,n)&&["color","color-size","color-size-age"].includes(r)&&o&&"above-and-below"!==o?.univariateTheme&&!["centered-on","extremes"].includes(t.theme)){const a=(0,s.j)(e).clone();if(x(e,a,i),2===n.fieldInfos.length){const e=a.authoringInfo;e.type=void 0,e.univariateTheme=void 0,e.univariateSymbolStyle=void 0}return{renderer:a}}return await(0,l.c)(e,{...n,fieldInfos:[n.fieldInfos[0]]}).then((n=>(x(e,n.renderer,i),n)))}async function V(e,i,n){const a=(0,s.j)(e).authoringInfo,o=(0,s.a)(e);if((0,l.s)(e,n)&&["color-age","color-age-size"].includes(o)&&a&&"above-and-below"!==a?.univariateTheme){const n=(0,s.j)(e).clone();return x(e,n,i),{renderer:n}}return await(0,l.a)(e,{...n,fieldInfos:[n.fieldInfos[0]]}).then((n=>(x(e,n.renderer,i),n)))}function x(e,i,n){if(!i.authoringInfo)return;i.visualVariables=(0,s.V)(i,"size")||[],i.visualVariables=(0,s.V)(i,"size","auto")||[];const a=(0,s.b)(n,"size");(0,s.G)(n,"reference-size")||i.visualVariables.push(a),i.authoringInfo.visualVariables=(0,s.W)(i,"size")||[];const l=(0,s.G)(n,"size");i.authoringInfo.visualVariables.push(l);const o=n.classBreakInfos?.length?n.classBreakInfos:n.uniqueValueInfos;let r=o?.length?o[0].symbol:(0,s.m)(e,"color-size");if("picture-marker"===r.type&&(r=(0,s.m)(e,"color-size")),(0,s.z)(e)){i.classBreakInfos.forEach((i=>{const n=(0,s.Z)(e,i.symbol);i.symbol=r.clone(),(0,s.X)(e,i.symbol,n)})),i.backgroundFillSymbol=n.backgroundFillSymbol;const a=(0,s.b)(n,"size","outline");a&&i.visualVariables.push(a)}!function(e,i){const{modules:n}=e;"simple-line"===i.type?(i.color=[0,0,0,.5],i.width=1):"cim"===i.type?((0,s.X)(e,i,new n.EsriColor([0,0,0,.5])),(0,s.a0)(e,i,4)):(i.color=null,i.outline.color=[0,0,0,.5],(0,s.a0)(e,i,4))}(e,r)}}}]);