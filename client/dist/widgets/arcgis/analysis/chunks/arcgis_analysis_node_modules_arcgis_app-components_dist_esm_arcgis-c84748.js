/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c84748.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c84748"],{99004:(e,t,r)=>{r.d(t,{c:()=>i,g:()=>n});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},84411:(e,t,r)=>{r.r(t),r.d(t,{arcgis_member_browser_filter_categories:()=>d});var i=r(19564),n=r(93863),o=r(29259),s=r(67489),a=r(4948),c=r(39489),l=r(24211);r(57159),r(98034),r(99004),r(44508),r(65174),r(80015),r(18991),r(91102),r(73807),r(67336);const d=class{constructor(e){(0,i.r)(this,e),this.arcgisMemberBrowserFilter=(0,i.c)(this,"arcgisMemberBrowserFilter",7),this.arcgisMemberBrowserCategorySchemaUpdate=(0,i.c)(this,"arcgisMemberBrowserCategorySchemaUpdate",7),this.arcgisMemberBrowserCategoryEditSuccess=(0,i.c)(this,"arcgisMemberBrowserCategoryEditSuccess",7),this.arcgisMemberBrowserCategoryEditRowWarningClick=(0,i.c)(this,"arcgisMemberBrowserCategoryEditRowWarningClick",7),this.refetchCategories=async()=>{(null===a.c||void 0===a.c?void 0:a.c.portal)&&await this.fetchMemberCategories(a.c.portal,!1)},this.setSchema=e=>{this.schema=e,this.arcgisMemberBrowserCategorySchemaUpdate.emit(e)},this.renderSchemaEditor=()=>{const{allowEdit:e,isEditing:t,handleEditSchemaComplete:r,setSchema:n,defaultCategories:o}=this,{user:s,portal:c}=a.c;return e?(0,i.h)("arcgis-tunnel",{reference:this.el},(0,i.h)("arcgis-member-category-schema-editor",{isActive:t,user:s,config:a.c.config,portal:c,defaultMemberCategories:o,onArcgisMemberCategoryEditorRowWarningClick:()=>this.arcgisMemberBrowserCategoryEditRowWarningClick.emit(),onWorkflowCancel:async e=>{e.detail?(r(e.detail.hasChangeSinceLastOpen),e.detail.hasChangeSinceLastOpen&&this.arcgisMemberBrowserCategoryEditSuccess.emit()):this.isEditing=!1},onNewSchemaWorkflowComplete:async({detail:e})=>{this.isEditing=!1,n(e.newSchema),this.arcgisMemberBrowserCategoryEditSuccess.emit()},onDeleteAllSchema:async()=>{r(!0),this.arcgisMemberBrowserCategoryEditSuccess.emit()}})):null},this.handleEditSchemaComplete=async e=>{this.isEditing=!1,e&&await this.refetchCategories();const{category:t,schema:r,clearFilter:i,checkSchemaFilterStillValid:n}=this;t&&!n(r,t,o.U)&&i()},this.checkSchemaFilterStillValid=(e,t,r)=>e.some((e=>{var i;const n=(0,o.b)(r,e,!1);return n===t||!!(null===(i=e.categories)||void 0===i?void 0:i.length)&&this.checkSchemaFilterStillValid(e.categories,t,n)})),this.clearFilter=()=>{this.category=null,this.emitFilterEvent()},this.category=void 0,this.expanded=void 0,this.allowEdit=void 0,this.defaultCategories=[],this.loading=void 0,this.schema=[],this.categoriesCount={},this.isEditing=!1,this.tooltipReferenceElement=void 0}async componentWillLoad(){this.store=(0,s.g)(this.el),this.i18n=this.store.state.i18n.filterCategories,(null===a.c||void 0===a.c?void 0:a.c.portal)?await this.fetchMemberCategories(a.c.portal):(0,a.o)("portal",(e=>{this.fetchMemberCategories(e)})),(0,c.a)("categories",this.store,(()=>this.category=null))}async componentDidLoad(){this.category&&this.emitFilterEvent()}async fetchMemberCategories(e,t=!1){var r,i;const o=await(0,n.c)(e,null===a.c||void 0===a.c?void 0:a.c.user,t),s=null===(i=null===(r=null==o?void 0:o.memberCategorySchema)||void 0===r?void 0:r[0])||void 0===i?void 0:i.categories;this.setSchema(s),this.loading=!1}emitFilterEvent(){const{category:e,i18n:t}=this,r="null"===e?"null":e?[e]:"",i=t.label.replace("${name}","null"===e?t.noCategoriesAssigned:null==e?void 0:e.replace(`${o.U}/`,""));this.arcgisMemberBrowserFilter.emit({id:"categories",param:"categories",value:r,label:i})}renderNestedCategories(e,t){return e.map((e=>{var r;const n=t?`${t}/${e.title}`:`${o.U}/${e.title}`,s=!!(null===(r=e.categories)||void 0===r?void 0:r.length);return(0,i.h)("calcite-tree-item",{"data-value":n,"data-children":s,selected:this.category===n,key:`${n}--${s}`},(0,i.h)("a",null,e.displayName||e.title),s&&(0,i.h)("calcite-tree",{slot:"children",selectionMode:"children"},this.renderNestedCategories(e.categories,n)))}))}render(){const{loading:e,schema:t,i18n:r,allowEdit:n}=this,o=(null==t?void 0:t.length)>0;return this.store.state.groupId&&!this.store.state.myOrgView||!o&&!n||e||(0,l.b)(a.c.user)||this.store.state.includeExternalUsers?null:(0,i.h)(i.F,null,(0,i.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.category,filterID:"categories",onArcgisBrowserFilterRemove:()=>{this.category=null}},o?(0,i.h)("calcite-tree",{selectionMode:"children",onCalciteTreeSelect:e=>{var t,r;const i=e.target,n=null===(r=null===(t=null==i?void 0:i.selectedItems)||void 0===t?void 0:t[0])||void 0===r?void 0:r.dataset,o=(null==n?void 0:n.value)||"";this.category===o?this.category=null:this.category=o,this.emitFilterEvent()}},(0,i.h)("calcite-tree-item",{"data-value":"null",selected:"null"===this.category},(0,i.h)("a",null,r.noCategoriesAssigned)),this.renderNestedCategories(t)):(0,i.h)("div",null,(0,i.h)("p",{class:"no-category-title"},r.noCategoriesTitle),(0,i.h)("p",{class:"no-category-description"},r.noCategories),n&&(0,i.h)("calcite-button",{class:"add-category-button",appearance:"outline-fill",onClick:()=>this.isEditing=!0},r.setupCategories)),o&&n&&(0,i.h)(i.F,null,(0,i.h)("calcite-button",{iconStart:"pencil",appearance:"transparent",kind:"neutral",slot:"action","aria-label":r.configureCategories,onClick:()=>this.isEditing=!0,ref:e=>this.tooltipReferenceElement=e}),(0,i.h)("calcite-tooltip",{referenceElement:this.tooltipReferenceElement},r.configureCategories))),this.renderSchemaEditor())}get el(){return(0,i.d)(this)}};d.style=".no-category-title{margin-bottom:0.75rem;margin-top:1rem;font-size:1rem;font-weight:400}.no-category-description{overflow-wrap:break-word}.no-category-description:not(:last-child){margin-bottom:1rem;margin-top:0px}.add-category-button{margin-bottom:1rem;max-width:100%;overflow-wrap:break-word}"},91102:(e,t,r)=>{r.d(t,{a:()=>c,c:()=>n,d:()=>l,g:()=>o,i:()=>s,s:()=>a});var i=r(73807);function n(e,t){return function e(r){return r?r.closest(t)||e(function(e){return e.getRootNode()}(r).host||null):null}(e)}function o(e){const t=n(e,".calcite-mode-dark, .calcite-mode-light");return(null==t?void 0:t.classList.contains("calcite-mode-dark"))?"dark":"light"}function s(e){let t=e;for(;null==t?void 0:t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function a(e){return(new i.S).sanitize(e)}function c(e){const t=a(e),r=document.createElement("div");return r.innerHTML=t,r.textContent||r.innerText||""}function l(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}},67336:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>s,c:()=>d,d:()=>u,e:()=>h,f:()=>v,g:()=>S,h:()=>f,i:()=>c,j:()=>y,k:()=>b,l:()=>p,m:()=>E,n:()=>C,o:()=>g,p:()=>w,q:()=>m,u:()=>l});var i=r(98034),n=r(44508);function o(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function s(e){var t;return o(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function a(e){var t;return o(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function c(e,t){return e.owner===t.username}function l(e,t){return c(e,t)||function(e,t){var r;if(null!=e.isAdmin)return!!e.isAdmin;const i=e.owner,n="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(r=e.portal)||void 0===r?void 0:r.isPortal)&&!c(e,t)&&n&&i.includes("esri_")&&!o.includes(i))return!1;return n}(e,t)}const d=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),u=(e,t)=>`${(0,n.a)(t)}item.html?id=${e}`,h=(e,t)=>`${(0,n.g)(t)}/content/users/${e}`,m=e=>e.reduce(((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e)),{});function g(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Spatiotemporal")}function v(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("View Service")}function f(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Hosted Service")}function p(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Multi Services View")}function w(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function y(e){var t;const r=null==e?void 0:e.portalItem;if(!r)return Promise.resolve(null);const o=r.portal,[s]=await(0,i.l)(["esri/request"]);if(null==o?void 0:o.user){return s(`${(0,n.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(t=r.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,r;const i=null!==(r=null===(t=e.data)||void 0===t?void 0:t.groups)&&void 0!==r?r:[];return Promise.resolve(i)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function b(e){var t;const r=null==e?void 0:e.portalItem;if(!r)return Promise.resolve(null);const o=r.portal,[s]=await(0,i.l)(["esri/request"]);return s(`${(0,n.g)(o)}content/items/${r.id}/groups`,{query:{f:"json",token:null===(t=r.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,r,i,n,o,s;const a=[...null!==(r=null===(t=e.data)||void 0===t?void 0:t.admin)&&void 0!==r?r:[],...null!==(n=null===(i=e.data)||void 0===i?void 0:i.member)&&void 0!==n?n:[],...null!==(s=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==s?s:[]];return Promise.resolve(a)}),(()=>Promise.reject()))}async function C(e,t,{relationshipType:r,direction:o}){const s=`${(0,n.g)(t)}content/items/${e}/relatedItems`,[a]=await(0,i.l)(["esri/request"]);return await a(s,{query:{f:"json",relationshipType:r,direction:o},method:"get",responseType:"json"})}function E(e,t){return null==e?void 0:e.some((e=>null==t?void 0:t.some((t=>e.id===t.id&&e.capabilities.includes("updateitemcontrol")))))}const S=(e,t)=>`${(0,n.a)(t)}content/items/${e}`},98034:(e,t,r)=>{r.d(t,{e:()=>o,l:()=>s});var i,n=r(99004),o={exports:{}};i=o.exports,n.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",i="next";function n(e){if(e.toLowerCase()===i)return i;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function o(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function s(e){void 0===e&&(e=r);var t=o(e),s=n(e);if(s!==i&&3===s.major){var a=s.minor<=10?"js/":"";return"".concat(t).concat(a,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function a(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function d(e){return!e||n(e)?s(e):e}function u(e,t){var r=d(e),i=l(r);return i||c(i=a(r),t),i}var h={};function m(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function g(e,t,r){var i;r&&(i=v(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",n,!1)}function v(e,t){var r=function(i){t(i.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function f(e){void 0===e&&(e={}),h=e}function p(){return document.querySelector("script[data-esri-loader]")}function w(){var e=window.require;return e&&e.on}function y(e){void 0===e&&(e={});var r={};[h,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var i=r.version,n=r.url||o(i);return new t.Promise((function(e,t){var o=p();if(o){var s=o.getAttribute("src");s!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(s,")."))):w()?e(o):g(o,e,t)}else if(w())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=r.css;a&&u(!0===a?i:a,r.insertCssBefore),g(o=m(n),(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),t),document.body.appendChild(o)}}))}function b(e){return new t.Promise((function(t,r){var i=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];i.remove(),t(e)}))}))}function C(e,t){if(void 0===t&&(t={}),w())return b(e);var r=p(),i=r&&r.getAttribute("src");return!t.url&&i&&(t.url=i),y(t).then((function(){return b(e)}))}e.utils=t,e.loadModules=C,e.getScript=p,e.isLoaded=w,e.loadScript=y,e.setDefaultOptions=f,e.loadCss=u,Object.defineProperty(e,"__esModule",{value:!0})}(i);const s=async(e,t)=>(await o.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},67489:(e,t,r)=>{r.d(t,{g:()=>o,o:()=>s});var i=r(18991),n=r(39489);function o(e){return(0,n.g)(e,"arcgis-member-browser")}(0,i.c)({type:"member-browser",includeExternalUsers:!1});const s=(e,t)=>{e.onChange("sort",(e=>{t(e)}))}},39489:(e,t,r)=>{r.d(t,{a:()=>o,b:()=>a,g:()=>l,i:()=>n,o:()=>s});var i=r(91102);const n=e=>"item-browser"===e.state.type,o=(e,t,r)=>{t.onChange("filters",(t=>{t[e]&&t[e].value||r()}))},s=(e,t)=>{e.onChange("preview",(e=>{t()}))},a=(e,t)=>{e.onChange("groupId",(e=>{t()}))},c=new Map;function l(e,t){const r=c.get(e);if(r)return r;const n=(0,i.c)(e,t);return n?(c.set(e,n.store),n.store):null}}}]);