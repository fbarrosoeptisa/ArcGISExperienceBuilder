/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_item-7-87cefb.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_item-7-87cefb"],{77265:(e,r,t)=>{t.d(r,{a:()=>i,b:()=>a,i:()=>o});const n=["appExtensionError","forbiddenCredential","disabledSubscription","unauthorized","timeout","itemExists","exceedsFileSize","fileExists","emptyFile","unavailableGeocoder","dataNotAvailable","invalidShapefile","invalidFileGeodatabase","providePath","useSameFileName","invalidExtension","tokenRequired","invalidToken","invalid3DObjectFeatureClass","invalidClassification","serviceNameInvalid","titleInvalid","titleStartsWithNumber","titleRequired","titleInUseService","itemInRecycleBin","summaryInvalid","descriptionInvalid","missingUserOrPortal","dataStoreTitleInvalid","serviceNameExists","folderNameExists","serviceNotExist","unsupportedWFSVersion","invalidWMTS","invalidSpatialRef","emptyFeatureLayer","invalidFeatureLayerUrl","invalidUrl","httpWarning","flowAborted","duplicateFieldNames","failToFetchText","mapServiceError","noTilingSchemeFound","noMatchSpatialRef","invalidDataStorePublishType","noRegisteredServersForDataStore","noContentInDataStore","failToPublishFromDataStore","failToListDataStoreContents","invalidUsernameOrPassword","invalidConnection","invalidCredentials","invalidBigQueryProjectId","invalidSnowflakeServer","invalidSnowflakeRole","invalidSnowflakeWarehouse","invalidSnowflakeSchema","invalidSnowflakeDatabase","invalidAWSBucket","invalidAzureContainer","invalidJSON","unknownAGSType","unhandledError","incompatibleGeometries","multiPatchRestriction","invalidUniqueIdentifier","cannotAddNullData","exceededMaxFieldLength","invalidFieldType","failToCreate3DLayer"],a=e=>n.includes(null==e?void 0:e.code),i=e=>e&&e.hasOwnProperty("code")&&e.hasOwnProperty("message")&&e.hasOwnProperty("details")&&(!e.details||Array.isArray(e.details)),o=e=>{const r=e.toLocaleLowerCase();return r.includes("unexpected end of")||r.includes("did not match the expected pattern")}},5011:(e,r,t)=>{t.d(r,{a:()=>h,b:()=>u,c:()=>m,f:()=>c,g:()=>v,l:()=>g});var n=t(57159),a=t(77265),i=t(67336),o=t(98034),s=t(44508),l=t(82297),d=t(5076);const c=async(e,r)=>{const{owningSystemUrl:t}=await(0,n.f)((async()=>(0,l.g)(e)),"portalInfo",e.id);return(await Promise.all(r.map((async e=>{try{const{owningSystemUrl:r}=await(0,l.a)(e);return{owningSystemUrl:r,url:e}}catch(r){return console.error(r),{owningSystemUrl:null,url:e}}})))).filter((({owningSystemUrl:e})=>e===t)).map((({url:e})=>e))};async function u(e,r,t){var a;const{relationshipType:i,direction:o}=t,l=`${(0,s.g)(r)}content/items/${e}/relatedItems`,d=await(0,n.r)(l,{relationshipType:i,direction:o,includeRecycleBin:!0});return(null===(a=null==d?void 0:d.relatedItems)||void 0===a?void 0:a.length)&&(d.relatedItems=d.relatedItems.filter((r=>(null==r?void 0:r.id)!==e))),d}const m=async(e,r,t)=>{const a=!!t,i=(0,s.g)(r),o=a?`${i}/content/groups/${t.id}/search`:`${i}/search`;try{return{result:(await(0,n.r)(o,{filter:`id:(${e.join(" OR ")})`,num:100})).results}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},v=async(e,r)=>{try{const t=[],a=[],i=[];await Promise.all(e.map((async e=>{const{result:o,error:s}=await(0,n.f)((()=>(async(e,r)=>{var t;try{return{result:await(0,d.r)(e,r,{addTokenManually:!1})}}catch(e){const r="token required";return(null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase().includes(r))?{error:{code:"tokenRequired"}}:(console.error(e),{error:{code:"unhandledError"}})}})(e,r)),"itemMetadata",`${e}--no-token`);if("tokenRequired"!==(null==s?void 0:s.code))if(y(o))t.push(p(o,e));else try{const r=await(0,l.a)(e);i.push(Object.assign(Object.assign({},o),{owningSystemUrl:r.owningSystemUrl}))}catch(s){console.warn(s)}else a.push(e)})));const o=await c(r,a),s=(await Promise.all(o.map((async e=>({response:await(0,d.r)(e,r,{addTokenManually:!0}),owningSystemUrl:(await(0,l.a)(e)).owningSystemUrl,url:e}))))).reduce(((e,{response:r,url:n,owningSystemUrl:a})=>y(r)?(t.push(p(r,n)),e):[...e,Object.assign(Object.assign({},r),{owningSystemUrl:a})]),[]),u=await Promise.all([...i,...s].map((async({serviceItemId:e,owningSystemUrl:r})=>{if(!e)return null;const{result:t}=await w({itemId:e,owningSystemUrl:r});return{item:t,owningSystemUrl:r}}))),{result:m}=t.length<=0?{result:[]}:await v(t,r);return{result:[...u.filter((e=>!!e)),...m]}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},y=e=>!!(null==e?void 0:e.sources),p=(e,r)=>{var t;const n=null===(t=Object.values(e.sources)[0])||void 0===t?void 0:t.url;return n?n.includes("..")?(0,s.t)({url:r,path:n}):n:null},f=e=>`${e}/sharing/rest`,w=async({itemId:e,owningSystemUrl:r,requestOptions:t})=>{try{const a=(0,i.g)(e,f(r));return{result:await(0,n.r)(a,{},Object.assign(Object.assign({},t),{addTokenManually:!1}))}}catch(e){return console.error(e),(0,a.a)(e)&&e.message.toLocaleLowerCase().includes("invalid token")?{error:{code:"invalidToken"}}:{error:{code:"unhandledError"}}}},h=async({itemId:e,owningSystemUrl:r,requestOptions:t})=>{try{const a=`${(0,i.g)(e,f(r))}/data`;return{result:await(0,n.r)(a,{},Object.assign(Object.assign({},t),{addTokenManually:!1}))}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},g=async(e,r)=>{try{const[t]=await(0,o.l)(["esri/portal/PortalItem"]),n=new t({id:e,portal:r});return await n.load(),{result:n}}catch(e){return console.error("Fail to reload item",e),{error:{code:"unhandledError"}}}}},82297:(e,r,t)=>{t.d(r,{a:()=>m,b:()=>c,c:()=>s,d:()=>l,e:()=>v,f:()=>i,g:()=>u,h:()=>o,i:()=>y,q:()=>d});var n=t(57159),a=t(44508);function i(e){var r;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(r=e.sourceJSON)||void 0===r?void 0:r.portalDeploymentType))}function o(e){var r,t;return e.isPortal?"modern"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)||function(e){var r;return e.isPortal&&"modernOnly"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)}(e):"modern"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)||function(e){const r=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=r}(e)}async function s(e){try{return{result:await(0,n.f)((()=>(0,n.r)(`${(0,a.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function l(e){return(0,n.f)((()=>(0,n.r)(`${(0,a.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function d(e={},r){return(0,n.r)(`${(0,a.g)(r)}/community/groups`,e)}const c=async(e,r)=>{var t;if(!e)return[];const i=`${(0,a.a)(null!==(t=r.restUrl)&&void 0!==t?t:r.portalUrl)}portals/self/servers`,o=await(0,n.f)((()=>(0,n.r)(i)),"selfServers",r.id);return null==o?void 0:o.servers},u=e=>m((0,a.c)(e)),m=e=>{var r;const t=`${(0,a.a)(null!==(r=(0,a.b)(e))&&void 0!==r?r:e)}info`;return(0,n.f)((()=>(0,n.r)(t,{},{addTokenManually:!1})),"portalInfo",t)};async function v(e,r){return!e.isPortal||await y(e,r)}async function y(e,r){if(!r||!e)return!1;if(!e.isPortal)return!0;const{result:t,error:a}=await(0,n.f)((()=>p(e,r)),"isPortalBackedBySDS",e.id);return!a&&t}const p=async(e,r)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await f(r,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},f=async(e,r)=>{var t;return(null!==(t=await c(e,r))&&void 0!==t?t:[]).filter((e=>e.isHosted))[0]}},5076:(e,r,t)=>{t.d(r,{r:()=>i});var n=t(57159),a=t(4948);const i=async(e,r,t={})=>{const{body:i,usePost:o,addTokenManually:s,api:l=(null===a.c||void 0===a.c?void 0:a.c.api),customToken:d}=t,c=new URLSearchParams;i&&Object.entries(i).forEach((([e,r])=>{void 0!==r&&c.append(e,r)}));const u=new URL(e);if(u.searchParams.append("f","json"),d)u.searchParams.append("token",d);else{const e=!1===s?null:await(0,n.g)(r,l);e&&u.searchParams.append("token",e)}const m=await fetch(u.toString(),{body:o?c:void 0,method:o?"POST":"GET"}),v=await m.json(),y=v.error;if(y)throw"string"==typeof y?new Error(y):y;return v}},68616:(e,r,t)=>{t.d(r,{i:()=>n});const n=(e,r)=>"Feature Service"===r&&e.includes("Hosted Service")}}]);