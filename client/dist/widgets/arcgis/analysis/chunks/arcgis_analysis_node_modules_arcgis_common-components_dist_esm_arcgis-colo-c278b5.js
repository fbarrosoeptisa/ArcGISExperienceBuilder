/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_esm_arcgis-colo-c278b5.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_esm_arcgis-colo-c278b5"],{45217:(e,t,o)=>{o.r(t),o.d(t,{arcgis_color_input:()=>l});var i=o(99184),s=o(85068),r=o(40612);const l=class{constructor(e){(0,i.r)(this,e),this.arcgisChange=(0,i.c)(this,"arcgisChange",7),this.arcgisColorInputChange=(0,i.c)(this,"arcgisColorInputChange",7),this.arcgisSwatchUpdate=(0,i.c)(this,"arcgisSwatchUpdate",7),this.arcgisColorInputSwatchUpdate=(0,i.c)(this,"arcgisColorInputSwatchUpdate",7),this.arcgisInternalStoredColor=(0,i.c)(this,"arcgisInternalStoredColor",7),this.arcgisPickerOpen=(0,i.c)(this,"arcgisPickerOpen",7),this.arcgisColorInputPopoverOpen=(0,i.c)(this,"arcgisColorInputPopoverOpen",7),this.arcgisPickerClose=(0,i.c)(this,"arcgisPickerClose",7),this.arcgisColorInputPopoverClose=(0,i.c)(this,"arcgisColorInputPopoverClose",7),this.manager=(0,s.u)(this),this.messages=(0,s.a)(),this.focusHandler=e=>{this.activeEl=e.target},this.onClose=e=>{this.storeRecentColorToStorage(this.colorPickerEl?.value),e.stopPropagation(),this.arcgisPickerClose.emit(this.colorPickerEl?.value),this.arcgisColorInputPopoverClose.emit(this.colorPickerEl?.value)},this.handleSwatchClickOrKeyUp=e=>{if("key"in e&&"Enter"!==e.key&&"Space"!==e.key)return;const t=e.currentTarget.color||void 0;this.updateColor(t),this.arcgisSwatchUpdate.emit(t),this.arcgisColorInputSwatchUpdate.emit(t);setTimeout((()=>this.recentColor1El?.focus()),200)},this.recentColorsKeyDownHandler=e=>{if(1===this.recentColors.length)return;const t=e.key;let o;this.activeEl===this.recentColor1El?o=1:this.activeEl===this.recentColor2El?o=2:this.activeEl===this.recentColor3El&&(o=3),"ArrowLeft"===t&&(o&&1!==o?this.getRecentColorElement(o-1)?.focus():this.getRecentColorElement(this.recentColors.length)?.focus()),"ArrowRight"===t&&(o&&o!==this.recentColors.length?this.getRecentColorElement(o+1)?.focus():this.recentColor1El?.focus())},this.setInlineInputRef=e=>{this.inlineInputEl=e},this.setColorPickerRef=e=>{e&&(this.colorPickerEl=e)},this.setRecentColorRef1=e=>{e&&(this.recentColor1El=e)},this.setRecentColorRef2=e=>{e&&(this.recentColor2El=e)},this.setRecentColorRef3=e=>{e&&(this.recentColor3El=e)},this.onOpen=async()=>{await(this.colorPickerEl?.setFocus()),this.arcgisPickerOpen.emit(),this.arcgisColorInputPopoverOpen.emit()},this.handleClear=()=>{this.updateColor(void 0)},this.clearable=!1,this.color=void 0,this.compact=!1,this.disabled=!1,this.placement="auto",this.popoverProps=void 0,this.storageId=void 0,this.recentColors=[]}storedColorHandler(e){e.composedPath().includes(this.el)||this.setRecentColorsFromStorage()}arcgisRecentColorsUpdateHandler(e){this.storeRecentColorToStorage(e.detail)}async setFocus(){await(this.inlineInputEl?.setFocus())}async close(){await(this.inlineInputEl?.close())}updateColor(e,t=!0){e!==this.color&&(this.color=e,this.arcgisChange.emit(),this.arcgisColorInputChange.emit(),t&&this.storeRecentColorToStorage(e))}storeRecentColorToStorage(e){if(!e)return;const t=[e,...this.recentColors.filter((t=>t!==e))].slice(0,3);var o,i,s;o=this.storageId,i=t,s=!0,window.localStorage.setItem(o,s?JSON.stringify(i):i),this.recentColors=t,this.arcgisInternalStoredColor.emit()}async componentWillLoad(){this.setRecentColorsFromStorage()}setRecentColorsFromStorage(){const e=function(e,t){const o=window.localStorage.getItem(e);return o&&t?JSON.parse(o):o}(this.storageId,!0);e&&(this.recentColors=[...e])}disconnectedCallback(){this.removeTooltip()}render(){const{compact:e,disabled:t,recentColors:o,messages:s}=this,l=[o[0],o[1]],n="rtl"===(0,r.g)(this.el);return e||l.push(o[2]),(0,i.h)(i.H,{key:"8ef51d113a2dd3ff5506889dd9e8678974c7c341"},(0,i.h)("arcgis-picker-input",{key:"0cba71a2f97448bdda2afde246a898162d1f0c0f",disabled:t,intlDone:s.commitColor,heading:s.selectColor,label:s.selectColor,onArcgisPopoverClose:e=>this.onClose(e),onArcgisPopoverOpen:()=>{this.onOpen()},popoverProps:this.popoverProps,ref:this.setInlineInputRef},(0,i.h)("div",{key:"4dfe41e13e04ece6b2884346b45b574dafd61dde",class:"color-picker-container",slot:"content"},(0,i.h)("calcite-color-picker",{clearable:this.clearable,class:"color-picker",key:"color-picker"+(e?"--compact":""),onCalciteColorPickerInput:e=>{this.updateColor(this.colorPickerEl.value,!1),e.stopPropagation()},ref:this.setColorPickerRef,scale:e?"s":"m",storageId:this.storageId,value:this.color})),(0,i.h)("div",{key:"643e30a46721783e0208417d108aa963aa4047c3",slot:"preview"},(0,i.h)("calcite-color-picker-swatch",{key:"2e57d7e0ebdfa72cf6a2509dd23aa8689c3078e7",color:this.color,scale:"s"})),(0,i.h)("div",{key:"15bdf5bf40fda70311985cc9e999880cdf4b8a81","aria-label":s.recentColors,class:"recent",onKeyDown:this.recentColorsKeyDownHandler,slot:"content-end",tabindex:-1},l.map(((e,t)=>e?(0,i.h)("calcite-color-picker-swatch",{active:e===this.color,color:e,key:e,onClick:this.handleSwatchClickOrKeyUp,onFocus:this.focusHandler,onKeyUp:this.handleSwatchClickOrKeyUp,ref:e=>this.setRecentColorElement(t+1,e),role:"button",scale:"s",tabindex:0}):this.renderEmptySwatch(`empty-swatch-${t}`)))),this.clearable&&[(0,i.h)("div",{key:"206957baa1a58fe1d10cf329607c498849109b3f",slot:"content-end"},(0,i.h)("calcite-action",{key:"6ce0ff1055d7d46889ee8d37f94c1485f09c2e38",icon:"circle-disallowed",scale:"s",label:s.clearColor,text:s.clearColor??"",ref:e=>this.actionEl=e,onClick:this.handleClear,onMouseOver:()=>this.addTooltip({referenceElement:this.actionEl,placement:n?"right-start":"left-start",innerHTML:s.noColor??""}),onMouseOut:()=>this.removeTooltip()}))]))}renderEmptySwatch(e){return(0,i.h)("svg",{class:"empty-swatch",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",width:"20",key:e},(0,i.h)("rect",{width:"20",height:"20",fill:"#f8f8f8",stroke:"#000","stroke-dasharray":"2"}))}addTooltip(e){this.removeTooltip(),this.tooltipEl=document.createElement("calcite-tooltip"),this.tooltipEl.placement=e.placement??"auto",this.tooltipEl.referenceElement=e.referenceElement,this.tooltipEl.overlayPositioning="fixed",this.tooltipEl.innerHTML=e.innerHTML,this.tooltipEl.open=!0,this.el.parentElement.appendChild(this.tooltipEl)}removeTooltip(){this.tooltipEl?.parentNode&&(this.tooltipEl.parentNode.removeChild(this.tooltipEl),this.tooltipEl=void 0)}getRecentColorElement(e){switch(e){case 1:return this.recentColor1El;case 2:return this.recentColor2El;default:return this.recentColor3El}}setRecentColorElement(e,t){switch(e){case 1:this.recentColor1El=t;break;case 2:this.recentColor2El=t;break;default:this.recentColor3El=t}}static get assetsDirs(){return["assets"]}get el(){return(0,i.g)(this)}};l.style=':host,\narcgis-picker-input {\n  display: block;\n}\n\n.color-picker-container {\n  display: flex;\n  flex-direction: column;\n}\n\n.color-picker {\n  --calcite-color-border-1: transparent;\n  overflow-x: hidden;\n}\n\n[slot="preview"] {\n  calcite-color-picker-swatch {\n    width: 100%;\n    height: 24px;\n  }\n}\n\n.recent {\n  align-items: center;\n  border: 1px solid #949494;\n  display: flex;\n  gap: 8px;\n  height: 32px;\n  padding: 0px 6px;\n  transition:\n    outline-offset 100ms ease-in-out,\n    outline-color 100ms ease-in-out;\n\n  &:focus {\n    outline: 2px solid var(--calcite-color-brand);\n    outline-offset: 2px;\n  }\n  calcite-color-picker-swatch {\n    &:not([active]) {\n      cursor: pointer;\n    }\n\n    &:focus {\n      outline: 2px solid var(--calcite-color-brand);\n      outline-offset: 2px;\n    }\n    &:focus[active] {\n      border-radius: 100%;\n    }\n  }\n}\n\n.empty-swatch {\n  cursor: default;\n}\n\ncalcite-tooltip {\n  &:not([open]) {\n    visibility: hidden;\n    pointer-events: none;\n  }\n}\n'}}]);