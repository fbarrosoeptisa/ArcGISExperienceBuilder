/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-e1f0d3.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-e1f0d3"],{11148:(e,t,i)=>{i.r(t),i.d(t,{arcgis_lazy_loading_list:()=>l});var s=i(19564),n=i(26408);const l=class{constructor(e){(0,s.r)(this,e),this.arcgisLazyLoadingListChange=(0,s.c)(this,"arcgisLazyLoadingListChange",7),this.hasSelectedScrolled=!1,this.suspendObserver=!1,this.filterHeight=56,this.itemHeight=33,this.itemHeightAdjusted=!1,this.listChange=()=>{if(!this.refListNode)return;const e=this.refListNode.selectedItems[0];if(!e)return;const t=e.value,i=this.list.findIndex((({value:e})=>e===t));this.arcgisLazyLoadingListChange.emit({selectedValue:t,selectedIndex:i})},this.setLastNode=e=>{var t;e&&(this.refLastNode&&(null===(t=this.observer)||void 0===t||t.unobserve(this.refLastNode)),this.refLastNode=e)},this.setFirstNode=e=>{var t;e&&(this.refFirstNode&&(null===(t=this.observer)||void 0===t||t.unobserve(this.refFirstNode)),this.refFirstNode=e)},this.setSecondNode=e=>{e&&(this.refSecondNode=e)},this.setSecondLastNode=e=>{e&&(this.refSecondLastNode=e)},this.setSelectedNode=e=>{this.refSelectedNode=e},this.updateFilter=(0,n.d)((()=>{if(!this.refFilterNode)return;const e=this.refFilterNode.filteredItems;if(!e.length)return;const t=new Set(e.map((({label:e})=>e)));this.suspendObserver=!0,this.filterList=this.list.filter((({label:e})=>t.has(e))),this.pageRanges=[0,1],this.pageId=0}),100),this.list=void 0,this.popoverProps=void 0,this.selectedIndex=0,this.strings=void 0,this.showFilter=!1,this.pageSize=500,this.removeOldPages=!1,this.position="auto",this.pageBufferSize=10,this.useFlyOut=!1,this.pageId=0,this.filterList=void 0}watchSelectedIndex(e){this.updatePageId(e)}watchList(){this.lockedMenuPosition=void 0}componentWillLoad(){const e=Math.floor(this.list.length/this.pageSize);e<2||(this.updatePageId(),this.setupObserver(e))}componentDidRender(){if(this.useFlyOut&&!this.itemHeightAdjusted&&this.refSelectedNode){const e=this.refSelectedNode.getBoundingClientRect().height;if(e&&this.itemHeight!==e){this.itemHeight=e;const{refMenuNode:t}=this;if(t){const{height:e,translateX:i,translateY:s}=this.getListPosition();t.style.height=`${e}px`,t.style.transform=`translate(${i}px, ${s}px)`}}this.itemHeightAdjusted=!0}requestAnimationFrame((()=>{!this.hasSelectedScrolled&&this.refSelectedNode&&(this.refSelectedNode.scrollIntoView(),this.hasSelectedScrolled=!0),this.pendingScroll&&this.pendingScroll(),requestAnimationFrame((()=>{const{observer:e,refFirstNode:t,refLastNode:i}=this;e&&(this.suspendObserver=!1,t&&e.observe(t),i&&e.observe(i))}))}))}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}render(){var e,t;let i;if(this.suspendObserver=!0,this.useFlyOut){const{width:e,height:t,translateX:s,translateY:n}=this.getListPosition();i={width:`${e}px`,height:`${t}px`,transform:`translate(${s}px, ${n}px)`}}const n=this.list.map((({label:e})=>({label:e})));return(0,s.h)(s.H,{key:"88bace85a738334f37fa48660735d4f0f14fe36c",class:this.useFlyOut?"js-app-flyout":""},(0,s.h)("div",{key:"3c3e1a14bb8d05dd81ddc4eb559b6a9072588ee0",class:this.useFlyOut?"pop-menu pop-menu-flyout":"pop-menu",style:i,ref:e=>this.refMenuNode=e},this.showFilter&&(0,s.h)("div",{key:"8504f9502ece61c686493c610b7d264a63f63dd5"},(0,s.h)("calcite-filter",{key:"342f69f9233ae185c89709ed83b044855b03dfa5",items:n,messageOverrides:{clear:null===(e=this.strings)||void 0===e?void 0:e.clearFilter,label:null===(t=this.strings)||void 0===t?void 0:t.filterLabel},onCalciteFilterChange:this.updateFilter,ref:e=>this.refFilterNode=e})),(0,s.h)("div",{key:"279dab1d22c387c7b242ee7a64acd29e2dd4b91b",class:"pop-list"},this.renderList())))}renderList(){const{pageBufferSize:e}=this,t=Math.floor(e/2),i=this.getSubList(),n=this.getSelectedIndex(),l=this.list[n];return(0,s.h)("calcite-list",{label:this.strings.filterLabel,ref:e=>{this.refListNode&&this.refListNode.removeEventListener("calciteListChange",this.listChange),null==e||e.addEventListener("calciteListChange",this.listChange),this.refListNode=e},selectionMode:"single-persist",filterEnabled:!1,displayMode:"nested",scale:"s"},i.map((({value:n,label:o},r)=>(0,s.h)("calcite-list-item",{value:n,label:o,key:o,selected:n===l.value,ref:this.hasSelectedScrolled||o!==l.label?r===i.length-t?this.setLastNode:r===i.length-e?this.setSecondLastNode:r===t?this.setFirstNode:r===e?this.setSecondNode:void 0:this.setSelectedNode}))))}getSelectedIndex(e=this.selectedIndex){return e>=this.list.length?0:e}getListPosition(){var e;const{width:t,left:i,top:s,bottom:n,containerTop:l,containerBottom:o=0}=this.popoverProps,r=null!==(e=this.filterList)&&void 0!==e?e:this.list,d=this.itemHeight*r.length+(this.showFilter?this.filterHeight:0),h=(o>n?o:document.body.clientHeight)-n,a=s-l;this.lockedMenuPosition||("auto"===this.position?this.lockedMenuPosition=1.5*d<=h||a/(a+h)<.618?"down":"up":this.lockedMenuPosition="down"===this.position?"down":"up");const c="down"===this.lockedMenuPosition,u=c?Math.min(d,h-2):Math.min(d,a-2);return{width:t,height:u,translateX:i,translateY:c?n:Math.max(l,s-u)}}getSubList(){var e;const{pageRanges:t,removeOldPages:i}=this,s=t&&!i?Math.min(t[0],this.pageId):this.pageId,n=t&&!i?Math.max(t[1],this.pageId+1):this.pageId+1,l=null!==(e=this.filterList)&&void 0!==e?e:this.list,{pageBufferSize:o}=this,r=l.slice(0===s?0:s*this.pageSize-o,n*this.pageSize+o);return i||(this.pageRanges=[s,n]),r}setupObserver(e){this.observer=new IntersectionObserver(((t,i)=>{if(this.suspendObserver)return;let s=!1;if(1===(t=t.filter((({isIntersecting:e})=>e))).length){const i=t[0];if(this.refLastNode&&"label"in i.target&&i.target.label===this.refLastNode.label)this.pageId<e&&(this.pageId++,s=!0,this.removeOldPages&&(this.pendingScroll=()=>{var e;return this.pageId>0&&(null===(e=this.refSecondNode)||void 0===e?void 0:e.scrollIntoView(!0))}));else if(this.pageId>0){if(this.pageId--,this.removeOldPages)this.pendingScroll=()=>{var e;null===(e=this.refSecondLastNode)||void 0===e||e.scrollIntoView(!1),this.pendingScroll=void 0};else{const e=i.target;this.pendingScroll=()=>{e.scrollIntoView(),this.pendingScroll=void 0}}s=!0}}else if(2===t.length&&this.pageId===e){if(this.pageId--,!this.removeOldPages){const e=this.refLastNode;this.pendingScroll=()=>{null==e||e.scrollIntoView(),this.pendingScroll=void 0}}s=!0}s&&(this.refLastNode&&i.unobserve(this.refLastNode),this.refFirstNode&&i.unobserve(this.refFirstNode))}))}updatePageId(e=this.selectedIndex){e=this.getSelectedIndex(e);const t=Math.floor(e/this.pageSize);t!==this.pageId&&(this.pageId=t)}get hostElement(){return(0,s.d)(this)}static get watchers(){return{selectedIndex:["watchSelectedIndex"],list:["watchList"]}}};l.style=":host{display:flex;flex-direction:column;overflow:hidden}.pop-menu{display:flex;flex-direction:column;position:absolute;max-height:100%;width:100%;overflow-y:hidden;border:1px solid var(--calcite-color-border-3)}.pop-menu.pop-menu-flyout{top:0px;left:0px;--calcite-popover-z-index:100}.pop-list{overflow-y:scroll}"},26408:(e,t,i)=>{i.d(t,{a:()=>h,b:()=>u,c:()=>n,d:()=>s,e:()=>o,f:()=>l,g:()=>a,h:()=>f,i:()=>g,m:()=>r,t:()=>d,u:()=>c});const s=(e,t)=>{let i,s="idle";const n=(...n)=>new Promise((l=>{switch(s){case"flushed":s="idle",i?(clearTimeout(i),l(e(...n))):l(null);break;case"invoked":clearTimeout(i),s="idle",l(e(...n));break;case"cancelled":clearTimeout(i),s="idle",l(null);break;default:i&&clearTimeout(i),s="pending",i=setTimeout((()=>(s="idle",l(e(...n)))),t)}}));return n.flush=function(...e){return s="flushed",n(...e)},n.invoke=function(...e){return s="invoked",n(...e)},n.cancel=function(...e){return s="cancelled",n(...e)},n.getStatus=function(){return s},n},n=(e,t)=>{let i;return(...s)=>new Promise((n=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,n(e(...s))}),t))}))};function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function r(e,t){return await Promise.all([e,d(t)]),e}function d(e){return new Promise((t=>setTimeout(t,e)))}const h=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:i,data:s}=t(e);return[i,s]}))),a=(e,t)=>e.length===t.length&&e.reduce(((e,i)=>e&&t.indexOf(i)>-1),!0);function c(e,t){const i=[],s={};return e.forEach((e=>{const n=t(e);null==s[n]&&(s[n]=e,i.push(e))})),i}function u(e){const t={boolean:{},number:{},string:{}},i=[];return e.filter((e=>{let s=typeof e;return s in t?!t[s].hasOwnProperty(e)&&(t[s][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)}))}const f=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((i,s)=>e.slice(t*s,t+t*s))),g=(e,t)=>e.includes(t)}}]);