/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899"],{83682:(e,t,r)=>{r.r(t),r.d(t,{arcgis_user_picker:()=>h});var i=r(19564),o=r(4948),s=r(26408),n=r(46227),a=r(66507),l=r(67582),c=r(44508),d=r(66484),u=r(57159);r(18991),r(91102),r(73807),r(89261),r(98034),r(99004),r(65174),r(22112);const h=class{constructor(e){(0,i.r)(this,e),this.arcgisUserPickerSelect=(0,i.c)(this,"arcgisUserPickerSelect",7),this.arcgisUserPickerUpdate=(0,i.c)(this,"arcgisUserPickerUpdate",7),this.uniqueId=(0,n.g)(),this.scrollToActiveItem=()=>{var e;const t=null===(e=this.list)||void 0===e?void 0:e.querySelector(`li#${this.getActiveDescendantId()}`);if(!t||!this.list)return;const r=this.list.parentElement;(t.offsetTop<r.scrollTop||t.offsetTop+t.offsetHeight>r.offsetTop+r.offsetHeight)&&t.scrollIntoView({behavior:"smooth"})},this.keydownHandler=e=>{const{key:t}=e;switch(t){case"ArrowUp":e.preventDefault(),this.shiftActiveItemIndex(-1);break;case"ArrowDown":e.preventDefault(),this.shiftActiveItemIndex(1);break;case"Home":e.preventDefault(),this.activeItemIndex=0,this.scrollToActiveItem();break;case"End":if(!this.open)return;e.preventDefault(),this.activeItemIndex=this.getResultsLength()-1,this.scrollToActiveItem();break;case"Escape":this.reset(),e.preventDefault(),this.waitAndFocusButton();break;case"Enter":const t=this.getActiveUser();t&&(this.selectedUser=t,this.arcgisUserPickerSelect.emit(t),e.preventDefault(),this.reset(),this.waitAndFocusButton())}},this.searchUsers=async()=>{const{portal:e,query:t,search:r,group:i}=this,o=await async function({portal:e,query:t,searchTerm:r,group:i,config:o}){const s=function(e){return"enterprise"===(null==e?void 0:e.provider)&&!!(null==e?void 0:e.providerGroupName)}(i)||function(e){var t;return(null===(t=null==e?void 0:e.provider)||void 0===t?void 0:t.includes("oidc_"))&&!!(null==e?void 0:e.providerGroupName)}(i),n=(0,d.c)(r),a=s?n:n?`(${n}) `:"",l=s?`${(0,c.g)(e)}community/groups/${i.id}/userlist`:`${(0,c.g)(e)}portals/self/users/search`,h=e.isPortal?"-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav -username:esri_webstyles":"",p=((null==o?void 0:o.systemUsers)||[]).reduce(((e,t)=>`${e} -username: ${t}`),""),m=(null==l?void 0:l.includes("www.arcgis.com"))&&e.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,u.r)(l,Object.assign({num:100,sortField:"relevance"},s?{name:a}:{q:`${a} ${null!=t?t:""} ${h} ${p}`}),m)}({portal:e,query:t,searchTerm:r.trim(),group:i});o.users&&!o.results&&(o.results=o.users),this.searchResults=o,this.arcgisUserPickerUpdate.emit(o),this.loading=!1,this.computeActiveItemIndex(),this.open=!0},this.computeActiveItemIndex=()=>{var e,t,r;(null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t.length)?this.activeItemIndex=Math.max(null===(r=this.searchResults.results)||void 0===r?void 0:r.findIndex((e=>{var t;return e.username===(null===(t=this.selectedUser)||void 0===t?void 0:t.username)})),0):this.activeItemIndex=0},this.inputHandler=(0,s.d)(this.searchUsers,300),this.renderUser=(e,t)=>{const{portal:r,selectedUser:o,activeItemIndex:s}=this,n=this.formatUniqueUserId(e);return(0,i.h)("li",{"aria-selected":(null==o?void 0:o.username)===e.username,key:n,id:n,role:"option",tabindex:"-1",class:{"list-item":!0,"list-item--active":s===t},onClick:()=>{this.selectedUser=e,this.arcgisUserPickerSelect.emit(e),this.reset()}},(0,i.h)("arcgis-user-avatar",{class:"user-avatar",user:e,scale:"m",portal:r,showName:!0,description:e.username}))},this.portal=void 0,this.query="",this.group=void 0,this.config=void 0,this.selectedUser=void 0,this.selection="single",this.status="idle",this.search="",this.activeItemIndex=0,this.searchResults=void 0,this.open=!1,this.loading=!0}async componentWillLoad(){var e;const t=await(0,a.g)(this.el);this.i18n=t[0],this.lang=t[1],null!==(e=this.config)&&void 0!==e||(this.config=null===o.c||void 0===o.c?void 0:o.c.config)}async setFocus(){var e;null===(e=this.input)||void 0===e||e.focus()}reset(){this.search="",this.computeActiveItemIndex(),this.open=!1,this.loading=!0}getResultsLength(){var e,t;return(null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t.length)||0}getActiveUser(){var e,t;return null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t[this.activeItemIndex]}getActiveDescendantId(){const e=this.getActiveUser();return this.formatUniqueUserId(e)}formatUniqueUserId(e){return(null==e?void 0:e.username)?`${e.username.replace(".","")}-${this.uniqueId}`:""}shiftActiveItemIndex(e){const t=this.getResultsLength(),r=(this.activeItemIndex+t+e)%t;this.activeItemIndex=r,this.scrollToActiveItem()}async waitAndFocusButton(){var e;await(0,s.t)(200),null===(e=this.button)||void 0===e||e.focus()}render(){var e;const{i18n:t,portal:r,selectedUser:o,referenceElement:n,uniqueId:a,open:c,loading:d,lang:u,status:h}=this;return(0,i.h)(i.H,{key:"c3359e242eb5c6074c7862b4becb581c6b49fec1"},(0,i.h)("div",{key:"b3ccaee3f867af521beadb4c80e5d37ca40106e6",class:"wrapper"},c||!o?(0,i.h)("div",{class:"search-wrapper"},(0,i.h)("calcite-icon",{icon:"search",scale:"s",class:"search"}),(0,i.h)("label",{class:"screen-readers-only",htmlFor:`input-${a}`,id:`label-${a}`},t.selectUser),(0,i.h)("input",{ref:e=>this.input=e,class:"input",id:`input-${a}`,role:"combobox","aria-autocomplete":"none","aria-expanded":"false","aria-controls":`listbox-${a}`,"aria-activedescendant":this.getActiveDescendantId(),onInput:e=>{this.search=e.currentTarget.value,this.loading=!0,this.open=!0,this.inputHandler()},onBlur:async()=>{await(0,s.t)(300),this.open=!1},onFocus:()=>{!this.search&&this.searchResults||this.searchUsers()},onKeyDown:this.keydownHandler,placeholder:this.i18n.searchMembers,type:"text",value:this.search,onClick:e=>{this.open=!0,e.stopPropagation()}}),!!this.search&&(0,i.h)("button",{class:"x","aria-label":this.i18n.clear,onClick:()=>{this.search="",this.searchUsers()},tabIndex:-1},(0,i.h)("calcite-icon",{icon:"x",scale:"m",class:"x--icon"}))):(0,i.h)("button",{class:{edit:!0,invalid:"invalid"===h},onClick:()=>{this.open=!0,this.searchUsers(),setTimeout((()=>{var e;null===(e=this.input)||void 0===e||e.focus()}),200)},"aria-label":o?t.editSelection.replace("${name}",(0,l.g)(o,u)):t.selectUser,ref:e=>this.button=e},o?(0,i.h)(i.F,null,(0,i.h)("arcgis-user-avatar",{class:"user-avatar",user:o,scale:"m",portal:r,showName:!0,description:o.username}),(0,i.h)("calcite-icon",{icon:"pencil",scale:"s"})):(0,i.h)(i.F,null,t.searchMembers,(0,i.h)("calcite-icon",{icon:"chevron-down",scale:"s"}))),(0,i.h)("div",{key:"d388cb90cafbb482b777b89a42627964a172b59c",class:"reference-element",ref:e=>this.referenceElement=e}),(0,i.h)("slot",{key:"d0f6a9942f1b36d9fda41cf5aaa57e6e2fbc9260",name:"input-message"})),(0,i.h)("calcite-popover",{key:"3b14e0b9fd4dc2e6066b2a9f2ff7a0f3ba3fd647",class:"popover",label:t.selectUser,pointerDisabled:!0,referenceElement:n,placement:"bottom-start",open:c&&(d||!!this.getResultsLength()),focusTrapDisabled:!0,offsetDistance:2},(0,i.h)("div",{key:"c89679038953d112ad51ec7d13e0226563a83f2d",class:"list-wrapper"},d?(0,i.h)("calcite-loader",{label:"Loading",class:"loader"}):(0,i.h)("ul",{ref:e=>this.list=e,"aria-label":t.members,"aria-multiselectable":"false",class:"list",id:`listbox-${a}`,role:"listbox",tabIndex:-1},null===(e=this.searchResults)||void 0===e?void 0:e.results.map(this.renderUser)))))}get el(){return(0,i.d)(this)}};h.style=":host{position:relative;display:block;width:100%}.edit{border:1px solid var(--calcite-color-border-input);font-family:inherit;margin-bottom:0.75rem;box-sizing:border-box;display:flex;width:100%;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;align-items:center;justify-content:space-between;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.75rem;padding-bottom:0.75rem;color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.edit:hover{background-color:var(--calcite-color-background)}.edit:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.invalid{border-color:var(--calcite-color-status-danger)}.invalid:focus{outline-color:var(--calcite-color-status-danger)}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.search-wrapper{position:relative;display:block;width:100%}.search{pointer-events:none;position:absolute;z-index:10;margin-top:1rem;font-size:0.875rem;color:var(--calcite-color-text-3);inset-inline-start:0.75rem}.x{position:absolute;top:0px;z-index:10;margin-top:0.25rem;cursor:pointer;border-style:none;padding:0.5rem;color:var(--calcite-color-text-1);outline:2px solid transparent;outline-offset:2px;inset-inline-end:0.25rem;background:transparent}.input{position:relative;z-index:0;box-sizing:border-box;display:block;height:3rem;width:100%;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:2.5rem;padding-right:2.5rem;font-size:0.875rem;color:var(--calcite-color-text-1);--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border:1px solid var(--calcite-color-border-input);background-color:transparent;font-family:inherit}.input::-webkit-search-cancel-button{display:none}.input::-ms-clear{display:none}.input:focus{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.popover{z-index:20;width:100%}.loader{width:100%;padding-top:6rem;padding-bottom:6rem}.list-wrapper{height:auto;overflow:auto;max-height:16rem;min-width:min(80vw, 32rem)}.list{margin:0px;width:100%;list-style-type:none;padding:0px}.list-item{box-sizing:border-box;display:block;height:3rem;width:100%;cursor:pointer;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:2.5rem;padding-right:2.5rem;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border-bottom:1px solid var(--calcite-color-border-3)}.list-item:hover{background-color:var(--calcite-color-background)}.list-item:last-child{border-bottom-width:0px}.list-item--active{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}"},46227:(e,t,r)=>{r.d(t,{g:()=>i});const i=()=>[2,1,1,1,3].map((e=>{let t="";for(let r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},96295:(e,t,r)=>{r.d(t,{H:()=>i,R:()=>o});const i='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',o="Indoors Map Configuration,Code Attachment"},66484:(e,t,r)=>{r.d(t,{a:()=>l,c:()=>c,g:()=>s,h:()=>o,i:()=>n,r:()=>a});var i=r(91102);function o(e){const t=document.createElement("textarea");return t.innerHTML=e,t.innerText}function s(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,(e=>`<a href="${e}" target="_blank">${e}</a>`))}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function n(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function a(e,t,r){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${r}" href="${t}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function l(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function c(e){return(0,i.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},67582:(e,t,r)=>{r.d(t,{a:()=>d,b:()=>u,c:()=>h,d:()=>p,f:()=>c,g:()=>m});var i=r(44508),o=r(96295),s=r(57159),n=r(91102),a=r(65174),l=r(22112);async function c(e,t,r){const o=`${r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t)}community/users/${e}`,n=(null==o?void 0:o.includes("www.arcgis.com"))&&t.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,s.f)((async()=>{try{return await(0,s.r)(o,{},n)}catch(t){return{username:e}}}),"user",o)}async function d(e,t,r,i){var o,s;if("public_authoritative"===(null==e?void 0:e.contentStatus)||"public_authoritative"===(null===(o=e.sourceJSON)||void 0===o?void 0:o.contentStatus)){const o=await(0,l.f)(e,r,t,i);if(!o)return c(e.owner,t,i);const{description:a,name:d,thumbnail:u,url:h}=o;return{description:a?(0,n.s)(a):"",fullName:d,username:e.owner,thumbnail:u,id:e.orgId||(null===(s=e.portal)||void 0===s?void 0:s.id),url:h}}return c(e.owner,t,i)}async function u(e,t,r){const o=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),n=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,s.f)((async()=>(0,s.r)(`${o}community/groups`,{q:`(owner:"${e}")`,num:100},n)),"userGroups",e)}async function h(e,t,r){const n=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),a=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,s.f)((async()=>(await(0,s.r)(`${n}search`,{q:`(owner:"${e}") ${o.H}`,num:1},a)).total),"userItemsTotal",e)}function p(e,t,r=!1){if(null==e?void 0:e.thumbnailUrl)return e.thumbnailUrl;if(!(null==e?void 0:e.thumbnail))return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const o=(0,a.g)(t);return`${r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t)}community/users/${e.username}/info/${e.thumbnail}${o&&!r?`?token=${o}`:""}`}function m(e,t){const{fullName:r,firstName:i,lastName:o,username:s}=e;return r||(i&&o?"ja"===t?`${o} ${i}`:`${i} ${o}`:s)}},22112:(e,t,r)=>{r.d(t,{f:()=>s});var i=r(57159),o=r(91102);async function s(e,t,r,s){var n,a,l,c,d;const u=null!==(d=null!==(l=null!==(n=e.orgId)&&void 0!==n?n:null===(a=e.sourceJSON)||void 0===a?void 0:a.orgId)&&void 0!==l?l:null===(c=e.portal)||void 0===c?void 0:c.id)&&void 0!==d?d:null==r?void 0:r.id;return(0,i.f)((()=>async function(e,t,r,s,n){var a,l;const c=(null===(a=e.portal)||void 0===a?void 0:a.portalHostname)||(null==s?void 0:s.portalHostname)||(null===(l=null==s?void 0:s.restUrl)||void 0===l?void 0:l.replace("/sharing/rest","")),d=n?`https://www.arcgis.com/sharing/rest/portals/${t}`:`https://${c}/sharing/rest/portals/${t}`;if(!c&&!n)return null;const u=n?{disableIdentityLookup:!0,addTokenManually:!1}:{},h=await(0,i.r)(d,{},u),{urlKey:p,thumbnail:m,customBaseUrl:v}=h,f=`https://${p}.${v}/`,g=m?`${f}sharing/rest/portals/self/resources/${m}`:null;let b,w;try{const e=await(0,i.r)(`${d}/resources/localizedOrgProperties`,{start:1,num:100},u);if(e){const t=e[r]||e.default;b=t.name,w=t.description||e.description}}catch(e){}return{name:b||h.name,description:(0,o.a)(w||h.description),url:`${f}home/`,thumbnail:g}}(e,u,t,r,s)),"verified",u)}}}]);