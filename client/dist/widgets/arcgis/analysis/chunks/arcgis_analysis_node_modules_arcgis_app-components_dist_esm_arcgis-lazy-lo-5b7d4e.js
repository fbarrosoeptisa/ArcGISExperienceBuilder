/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-lazy-lo-5b7d4e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-lazy-lo-5b7d4e"],{40976:(e,t,s)=>{s.r(t),s.d(t,{arcgis_lazy_loading_select:()=>n});var i=s(19564);const n=class{constructor(e){(0,i.r)(this,e),this.arcgisLazyLoadingSelectChange=(0,i.c)(this,"arcgisLazyLoadingSelectChange",7),this.handleOutsideClick=e=>{if(this.open){if(this.list.length>1){const t=e.composedPath();if(t.includes(this.hostElement)||this.menuPopOver&&t.includes(this.menuPopOver))return}this.closeMenuPopOverAndDisconnectHandles()}},this.list=void 0,this.selectedIndex=0,this.containerTop=0,this.containerBottom=0,this.pageSize=500,this.removeOldPages=!1,this.strings=void 0,this.ariaLabeledBy=void 0,this.showFilterLength=20,this.pageId=0,this.open=!1}watchSelectedIndex(e){this.menuPopOver&&(this.menuPopOver.selectedIndex=e)}watchPageSize(e){this.menuPopOver&&(this.menuPopOver.pageSize=e)}disconnectedCallback(){this.closeMenuPopOverAndDisconnectHandles()}render(){var e;const{selectedIndex:t,list:s}=this,n=t>=s.length?s[0]:s[t];return(0,i.h)("calcite-button",{key:"bc92a5edb60c772e1ddbb32771e5bfb4f50656e5",scale:"s",width:"full",appearance:"outline-fill",kind:this.open?"brand":"neutral",class:this.open?void 0:"lazy-select-button",alignment:"icon-end-space-between",iconEnd:this.open?"chevron-up":"chevron-down","aria-haspopup":"true","aria-expanded":this.open?"true":"false","aria-label":this.ariaLabeledBy||null===(e=this.strings)||void 0===e?void 0:e.selectLabel,"aria-labelledby":this.ariaLabeledBy,onClick:()=>this.renderSelectMenu(),ref:e=>this.refNode=e},n.label)}renderSelectMenu(){if(this.menuPopOver)return void this.closeMenuPopOverAndDisconnectHandles();if(!this.refNode)return;this.open=!0,document.addEventListener("pointerdown",this.handleOutsideClick),window.addEventListener("resize",this.handleOutsideClick);const e=document.createElement("arcgis-lazy-loading-list"),{height:t,top:s}=this.hostElement.getBoundingClientRect(),{width:i,left:n,bottom:o,top:r,height:d}=this.refNode.getBoundingClientRect(),c=t-d-(o-s);e.popoverProps={width:i,left:n,top:r,bottom:o,height:c,containerTop:this.containerTop,containerBottom:this.containerBottom},e.useFlyOut=!0,e.strings=this.strings,e.showFilter=this.list.length>=this.showFilterLength,e.pageSize=this.pageSize,e.removeOldPages=this.removeOldPages,this.menuPopOver=e,e.addEventListener("arcgisLazyLoadingListChange",(e=>{this.selectedIndex=e.detail.selectedIndex,this.arcgisLazyLoadingSelectChange.emit(e.detail),this.closeMenuPopOverAndDisconnectHandles()})),document.body.appendChild(e),e.list=this.list,e.selectedIndex=this.selectedIndex,this.setupMarginObservers()}closeMenuPopOverAndDisconnectHandles(){this.disconnectObservers(),document.removeEventListener("pointerdown",this.handleOutsideClick),window.removeEventListener("resize",this.handleOutsideClick);const{menuPopOver:e}=this;e&&(this.menuPopOver=void 0,setTimeout((()=>{document.body.removeChild(e)}),100)),this.open=!1}setupMarginObservers(){if(!this.refNode)return;const{top:e,bottom:t}=this.refNode.getBoundingClientRect(),{clientHeight:s}=document.body;this.disconnectObservers();const i=`0px 0px ${t-s}px 0px`;this.topObserver=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting||this.closeMenuPopOverAndDisconnectHandles()}))}),{rootMargin:i});const n=-e+"px 0px 0px 0px";this.bottomObserver=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting||this.closeMenuPopOverAndDisconnectHandles()}))}),{rootMargin:n}),this.topObserver.observe(this.refNode),this.bottomObserver.observe(this.refNode)}disconnectObservers(){var e,t;null===(e=this.topObserver)||void 0===e||e.disconnect(),null===(t=this.bottomObserver)||void 0===t||t.disconnect(),this.topObserver=void 0,this.bottomObserver=void 0}get hostElement(){return(0,i.d)(this)}static get watchers(){return{selectedIndex:["watchSelectedIndex"],pageSize:["watchPageSize"]}}};n.style=":host{width:100%;overflow:hidden}.lazy-select-button{--calcite-color-foreground-3:var(--calcite-color-border-input)}"}}]);