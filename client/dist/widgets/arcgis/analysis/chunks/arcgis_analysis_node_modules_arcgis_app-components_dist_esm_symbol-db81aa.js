/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_symbol-db81aa.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_symbol-db81aa"],{59551:(e,o,s)=>{s.d(o,{a:()=>r,b:()=>n,c:()=>i,d:()=>a});var l=s(9421),t=s(52437);s(98034);function i(e){var o;const{layer:s,useFeatureReduction:i,mapImageSublayer:r,mapView:a,modules:n}=t.s,c=s;e=e||{};const p=(0,t.o)((0,t.b)());return n.LocationCreator.createRenderer({layer:c,view:a,outlineOptimizationEnabled:!r&&(!(0,l.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!r&&(!(0,l.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),forBinning:"binning"===(null===(o=c.featureReduction)||void 0===o?void 0:o.type)&&i}).then((e=>((0,t.n)(p,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function r(e){var o;const{layer:s,useFeatureReduction:i,mapImageSublayer:r,mapView:a,modules:n}=t.s,c=s;e=e||{};const p=(0,t.b)(),u=(0,t.a)(),d=(0,t.o)(p),m=p.symbol?p.symbol:(0,t.p)(u),y={layer:c,view:a,outlineOptimizationEnabled:!r&&((0,l.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!d.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&((0,l.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!d.sizeAutoVisVar),forBinning:"binning"===(null===(o=c.featureReduction)||void 0===o?void 0:o.type)&&i};return n.LocationCreator.createRenderer(y).then((e=>((0,t.n)(d,e.renderer),m&&(e.renderer.symbol=m),Promise.resolve(e))),(e=>Promise.reject(e)))}function a(){var e;const{layer:o,useFeatureReduction:s,mapView:l,modules:i}=t.s,r=o;return i.LocationCreator.createRenderer({layer:r,view:l,outlineOptimizationEnabled:!0,forBinning:"binning"===(null===(e=r.featureReduction)||void 0===e?void 0:e.type)&&s}).then((e=>{const o=(0,t.d)(e.renderer,"size","outline");return Promise.resolve(o)}))}function n(){var e;const{layer:o,useFeatureReduction:s,mapView:l,modules:i}=t.s,r=o;return i.LocationCreator.createRenderer({layer:r,view:l,outlineOptimizationEnabled:!1,sizeOptimizationEnabled:!0,forBinning:"binning"===(null===(e=r.featureReduction)||void 0===e?void 0:e.type)&&s}).then((e=>{const o=(0,t.d)(e.renderer,"size","auto");return Promise.resolve(o)}))}},95597:(e,o,s)=>{s.d(o,{a:()=>i,b:()=>r,g:()=>a,s:()=>n});var l=s(9421),t=s(52437);s(98034);function i(){const{mapView:e}=t.s,o=(0,t.b)(),s=o.authoringInfo,i="class-breaks"===o.type?o.classBreakInfos:o.uniqueValueInfos,r=(0,t.d)(o,"size"),a=(0,t.J)(o,"reference-size"),c=!!r&&!(0,l.i)(r.minSize),p=!!r&&"number"==typeof r.minSize,u="above-and-below"===(null==s?void 0:s.univariateTheme);let d=2,m=20;if(a)a.referenceSizeScale&&n(),[d,m]=[a.sizeStops[0].size,a.sizeStops[1].size];else if(r)if(u){const e=r.stops;[d,m]=[e[2].size,Math.max(e[0].size,e[4].size)]}else if(c){const e=r.stops;[d,m]=[e[0].size,e[e.length-1].size]}else if(p)[d,m]=[r.minSize,r.maxSize];else{const o=e.scale,s=r.minSize.stops,l=r.maxSize.stops;[d,m]=[s[s.length-1].size,l[l.length-1].size];for(let e=0;e<s.length;e++){const t=s[e],i=l[e];if(o<=t.value){if(e>0){let r=s[e-1],a=l[e-1];const n=(o-r.value)/(t.value-r.value);[d,m]=[r.size+(t.size-r.size)*n,a.size+(i.size-a.size)*n]}else[d,m]=[s[0].size,l[0].size];break}}}else if(i){const e=i[0].symbol,o=i[i.length-1].symbol;[d,m]=[(0,t.Y)(e),(0,t.Y)(o)],d>m&&([d,m]=[m,d])}return[d,m]}function r(e){const{mapView:o,modules:s}=t.s,r=(0,t.b)(),a=(0,t.d)(r,"size");let n=e[0],c=(0,l.i)(e[1])?e[1]:n;if(a){const t=r.authoringInfo,p="above-and-below"===(null==t?void 0:t.univariateTheme),u=!!a&&!(0,l.i)(a.minSize),d=!!a&&"number"==typeof a.minSize;let[m,y]=i();const b=m>y;if(!b&&n>=y?n=y-.75:b&&n>=m&&(n=m-.75),!b&&m>=c?c=m+.75:b&&y>=c&&(c=y+.75),p){const o=a.stops,s=b?e[1]:e[0],l=b?e[0]:e[1],t=Math.max(...o.map((e=>e.value))),i=o[2].value,r=Math.min(...o.map((e=>e.value))),n=Math.abs(t-i),c=Math.abs(r-i),p=n>c?n:c,u=l-s;o.forEach((e=>{const{value:o}=e;e.size=Math.abs(o-i)/p*u+s}))}else if(u){const e=a.stops;a.stops=null,a.minSize=n,a.maxSize=c,a.minDataValue=e[0].value,a.maxDataValue=e[e.length-1].value}else if(d)b?(a.maxSize=n,a.minSize=c):(a.minSize=n,a.maxSize=c);else{const e=o.scale;let l=s.esriLang.clone(a.minSize.stops),t=s.esriLang.clone(a.maxSize.stops);b&&([l,t]=[t,l]);let i=n/l[l.length-1].size,r=c/t[t.length-1].size;for(let o=0;o<l.length;o++){const s=l[o],a=t[o];if(e<=s.value){if(o>0){let p=l[o-1],u=t[o-1];const d=(e-p.value)/(s.value-p.value),[m,y]=[p.size+(s.size-p.size)*d,u.size+(a.size-u.size)*d];i=n/m,r=c/y}else i=n/l[0].size,r=c/t[0].size;break}}l.forEach((e=>e.size=Math.round(i*e.size*10)/10)),t.forEach((e=>e.size=Math.round(r*e.size*10)/10)),b&&([l,t]=[t,l]),a.minSize.stops=l,a.maxSize.stops=t}}else{const e=r.classBreakInfos[0].symbol,o=r.classBreakInfos[r.classBreakInfos.length-1].symbol;let s=(0,t.Y)(e),l=(0,t.Y)(o),i=!1;s>l&&([s,l]=[l,s],i=!0),s!==l&&n>l&&(n=l-.75),s=n,s!==l&&s>c&&(c=s+.75),l=c;const a=1===r.classBreakInfos.length?1:Math.max(l-s,10)/(r.classBreakInfos.length-1);r.classBreakInfos.forEach(((e,o)=>{const r=e.symbol;i?(0,t.Z)(r,l-a*o):(0,t.Z)(r,s+a*o)}))}}function a(e,o){const s=e.stops,l=s.length-1,t=s[0].value,i=s[l].value;if(o<=t)return s[0].size;if(o>=i)return s[l].size;for(let e=0;e<=l;e++){const l=s[e],t=s[e+1];if(o>=l.value&&o<t.value){const e=t.value-l.value,s=l.size-t.size,i=(o-l.value)/e,r=l.size-s*i;return Math.round(100*r)/100}}return 1}function n(){const{mapView:e}=t.s,o=(0,t.b)(),s=(0,t.J)(o,"reference-size"),l=s.referenceSizeScale/e.scale;s.sizeStops.forEach((e=>e.size*=l)),s.referenceSizeScale=e.scale}},60281:(e,o,s)=>{s.d(o,{a:()=>P,b:()=>q,c:()=>u,d:()=>I,e:()=>j,f:()=>x,g:()=>v,h:()=>h,i:()=>E,j:()=>L,k:()=>z,l:()=>k,m:()=>R,n:()=>g,o:()=>T,p:()=>f,q:()=>B,r:()=>d,s:()=>S,t:()=>V,u:()=>A,v:()=>O,w:()=>C});s(12350),s(98034);var l=s(52437),t=s(95597),i=s(59551);let r;const a="polygon";function n(){const{modules:e}=l.s;return[new e.esriColor([255,255,255]),new e.esriColor([178,178,178]),new e.esriColor([128,128,128]),new e.esriColor([92,92,92]),new e.esriColor([77,77,77]),new e.esriColor([51,51,51]),new e.esriColor([26,26,26])]}function c(){const{modules:e}=l.s;return[new e.esriColor("#ff4040"),new e.esriColor("#ff8200"),new e.esriColor("#faa83f"),new e.esriColor("#ffd159"),new e.esriColor("#74b566"),new e.esriColor("#008977"),new e.esriColor("#33e3c8"),new e.esriColor("#43abeb"),new e.esriColor("#4c64c9"),new e.esriColor("#9868ed"),new e.esriColor("#b155e6"),new e.esriColor("#db5181"),new e.esriColor("#e03b99"),new e.esriColor("#2b2b2b"),new e.esriColor("#bdbdbd"),new e.esriColor("#ffffff")]}function p(){return c().reverse()}function u(e){const{referenceElement:o,heading:s}=e,l=document.createElement("arcgis-smart-mapping-styler-popover");return l.referenceElement=o,l.heading=s,document.body.appendChild(l),l.open=!0,l.reposition(),l}function d(e){var o;(null==e?void 0:e.parentNode)&&(e.open=!1,null===(o=e.parentNode)||void 0===o||o.removeChild(e))}async function m(e){const o=document.createElement("arcgis-symbol-styler");return o.initialSourceId=r,o.hideSvgUploadSymbols=l.s.hideSvgUploadSymbols,o.hideAddStyles=l.s.hideAddStyles,o.style="max-height: max(calc(100vh - 200px), 300px)",o.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:l.s.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await e.getPopoverRefElement()},o.addEventListener("arcgisSymbolStylerSourceIdChange",(({detail:e})=>r=e)),o}function y(e,o,s){return document.URL.indexOf("debug=true")>-1&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify(Object.assign(Object.assign({},s),{portal:"..."})))),e.edit(o,s)}function b(e,o){const{symbol:s,info:{marker:l,stroke:t,fill:i}}=o.detail;document.URL.indexOf("debug=true")>-1&&(console.log("onStylerEdit - symbol:",JSON.stringify(null==s?void 0:s.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(t)),console.log("onStylerEdit - info.fill:",JSON.stringify(i))),e(o)}async function g(e){const{mapImageSublayer:o,portal:s,modules:t}=l.s,{onChange:i,popoverNode:r}=e,a=(0,l.b)(),c=(0,l.C)(),p="pie-chart"===(0,l.b)().type,u=(0,l.d)(a,"size"),d=(0,l.d)(a,"size","outline");let g=a.backgroundFillSymbol;g||(g=new t.SimpleFillSymbol,g.color=null,(0,l.b)().backgroundFillSymbol=g,i());const f=!!g.color,h=(0,l.ac)(g),v=n(),k=n();let z;z=g.outline?{color:g.outline.color?g.outline.color:new t.esriColor([0,0,0,.5]),size:g.outline.width,style:g.outline.style,autoAdjusted:!!d}:{color:new t.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!d},g.outline||(g.outline=new t.SimpleLineSymbol,(0,l.X)(g,new t.esriColor([0,0,0,0])));const w=await m(r),C=y(w,t.esriLang.clone(g),{portal:s,symbolFilter:"simple",sections:{fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:v},stroke:{type:"color",optional:!0,suggestedColors:k,extraParts:{width:!0,autoStrokeAdjust:!(o||c&&p&&!u)&&"editable"}}},fill:{color:g.color?g.color:new t.esriColor([0,0,0,.5])},stroke:z,fillEnabled:f,strokeEnabled:h});return w.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{(0,l.b)().backgroundFillSymbol=o,F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,w,e)}))),r.addStyler(w),await C,N(g,w)}async function f(e){var o;const{mapImageSublayer:s,portal:t,modules:i}=l.s,{popoverNode:r}=e,a=(0,l.b)(),c=(0,l.d)(a,"size","outline"),p=!!a.backgroundColor,u=!!(null===(o=a.outline)||void 0===o?void 0:o.color),d=n(),g=n();let f;f=a.outline?{color:a.outline.color?a.outline.color:new i.esriColor([0,0,0,.5]),size:a.outline.width,style:a.outline.style,autoAdjusted:!!c}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!c};const h=new i.SimpleFillSymbol;h.color=(0,l.b)().backgroundColor,h.outline=(0,l.b)().outline;const v=await m(r),k=y(v,i.esriLang.clone(h),{portal:t,symbolFilter:"simple",sections:{fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:d},stroke:{type:"color",optional:!0,suggestedColors:g,extraParts:{width:!0,autoStrokeAdjust:!s&&"editable"}}},fill:{color:a.backgroundColor?a.backgroundColor:new i.esriColor([0,0,0,.5])},stroke:f,fillEnabled:p,strokeEnabled:u});v.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{(0,l.b)().backgroundColor=(0,l.R)(o),(0,l.b)().outline=o.outline,F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,v,e)}))),r.addStyler(v),await k;const z=new i.SimpleFillSymbol;return z.color=a.backgroundColor,z.outline=a.outline,N(z,v)}async function h(e){const{onChange:o,popoverNode:s}=e,{portal:t,modules:i}=l.s,r=(0,l.z)(),a=(0,l.A)(),c=(0,l.C)(),p=(0,l.b)(),u=(0,l.a)(),d=(0,l.d)(p,"size","auto"),g=(0,l.d)(p,"size","outline");let f=p.defaultSymbol;J(f)||(f=(0,l.p)(u));const h="picture-marker"!==f.type&&!!f.color,v=(0,l.ac)(f),k="cim"===f.type&&"CIMPointSymbol"===f.data.symbol.type,z=n(),w=n();let C;if(f||(f=c?new i.SimpleFillSymbol:a?new i.SimpleLineSymbol:new i.SimpleMarkerSymbol),"simple-fill"===f.type){const e=f;if(e.outline){const o=e.outline;C={color:o.color?o.color:new i.esriColor([0,0,0,.5]),size:o.width,style:o.style,autoAdjusted:!!g}}else C={color:new i.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!g}}else if("simple-line"===f.type){const e=f;C={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style,marker:e.marker}}else if("simple-marker"===f.type&&f.outline){const e=f.outline;C={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}else C="cim"===f.type?D(f):{color:new i.esriColor([255,255,255,.5]),size:1};const S=await m(s);let O;O=y(S,i.esriLang.clone(f),a?{portal:t,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:w,extraParts:{width:!d,autoStrokeAdjust:!1}}},stroke:C}:{portal:t,symbolFilter:c&&!(0,l.ag)()?"simple":void 0,sections:{marker:k||["simple-marker","picture-marker"].indexOf(f.type)>-1?{open:!0,parts:{size:!d},symbolsOpen:!0,sizeOpen:!0,markerType:(0,l.ag)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:z},stroke:{type:"color",optional:!0,suggestedColors:w,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(f.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.R)(f)||new i.esriColor([128,128,128])},marker:r?{size:(0,l.Y)(f)}:void 0,stroke:C,fillEnabled:h,strokeEnabled:v}),S.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{(0,l.b)().defaultSymbol=e,o()}))),s.addStyler(S),await O}async function v(e){var o,s;const{mapImageSublayer:i,mapView:r,classedSymbolSelectedIdx:a,portal:n,modules:u}=l.s,{onChange:d,popoverNode:g}=e,f=(0,l.z)(),h=(0,l.A)(),v=(0,l.C)(),k=(0,l.b)(),z=(0,l.a)(),w=(0,l.d)(k,"size","auto"),C=(0,l.d)(k,"size","outline");let S=(null===(o=k.classBreakInfos)||void 0===o?void 0:o.length)?u.esriLang.clone(k.classBreakInfos[a].symbol):(0,l.p)(z);J(S)||(S=(0,l.p)(z)),w&&(0,l.Z)(S,(0,t.g)(w,r.scale));const O="picture-marker"!==S.type&&!!S.color,A=(0,l.ac)(S),E="cim"===S.type&&"CIMPointSymbol"===S.data.symbol.type,j=c(),x=p();let V;if((f||h)&&w?(0,l.Z)(S,(0,t.g)(w,r.scale)):v&&C&&S.outline&&(S.outline.width=(0,t.g)(C,r.scale)),"simple-fill"===S.type){const e=S;V=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!C}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!C}}else if("simple-marker"===S.type){const e=S;V=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===S.type)V=D(S);else if("simple-line"===S.type){const e=S;V={size:e.width,style:e.style,marker:e.marker,color:e.color?e.color:new u.esriColor([0,0,0,.5])}}else V={color:new u.esriColor([255,255,255,.5]),size:1};const R=await m(g);let I;if(I=y(R,u.esriLang.clone(S),h?{portal:n,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:j,extraParts:{style:"cim"!==S.type,arrow:"cim"!==S.type,width:"size"!==z,autoStrokeAdjust:!i&&"size"!==z&&"editable"},parts:{extra:"size"!==z&&!w||"cim"!==S.type}}},stroke:V}:{portal:n,symbolFilter:v&&!(0,l.ag)()?"simple":void 0,sections:{marker:E||["simple-marker","picture-marker"].indexOf(S.type)>-1?{open:!0,parts:{size:"size"!==z&&(!!i||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:"size"!==z,markerType:(0,l.ag)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ad)(S),suggestedColors:j},stroke:{type:"color",optional:!0,suggestedColors:x,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(S.type),width:!0,autoStrokeAdjust:!(i||!v||"cim"===S.type||"size"===z)&&"editable"}}},fill:{color:(0,l.R)(S)||Z(j[1],.85)},marker:f?{size:(0,l.Y)(S),autoAdjusted:!!w}:void 0,stroke:V,fillEnabled:O,strokeEnabled:A}),R.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{const i=(0,l.b)(),r=i.classBreakInfos.slice(),n=r[a],c=(0,l.Y)(n.symbol);n.symbol=o,i.classBreakInfos=r,"size"===z?((0,l.Z)(n.symbol,c),d()):F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,R,e)}))),g.addStyler(R),await I,"size"!==z)return N((null===(s=k.classBreakInfos)||void 0===s?void 0:s.length)?k.classBreakInfos[0].symbol:void 0,R)}async function k(e){await w(Object.assign(Object.assign({},e),{type:"above"}))}async function z(e){await w(Object.assign(Object.assign({},e),{type:"below"}))}async function w(e){var o,s;const{portal:t,modules:i}=l.s,{onChange:r,popoverNode:a}=e,n=(0,l.b)(),u=(0,l.d)(n,"color"),d="above"===e.type;let g=(null===(s=null===(o=n.classBreakInfos)||void 0===o?void 0:o[d?1:0])||void 0===s?void 0:s.symbol)||(0,l.p)("color-size");J(g)||(g=(0,l.p)("color-size"));const f="picture-marker"!==g.type&&!!g.color,h=(0,l.ac)(g),v=c(),k="simple-line"===g.type?c():p();let z;if("simple-marker"===g.type){const e=g;z=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===g.type){const e=g;z={color:e.color,size:e.width,style:e.style,marker:e.marker}}else z="cim"===g.type?D(g):{color:new i.esriColor([255,255,255,.5]),size:1};const w=await m(a),C=y(w,i.esriLang.clone(g),{portal:t,sections:{marker:u&&["simple-marker","cim"].indexOf(g.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.ag)()?["simple","cim:vector"]:["simple"]}:!u&&["simple-marker","picture-marker","cim"].indexOf(g.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1}:void 0,fill:u?void 0:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ad)(g),suggestedColors:v},stroke:u?void 0:{type:"color",optional:!0,suggestedColors:k,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(g.type),width:!0,autoStrokeAdjust:!1}}},fill:u?void 0:{color:(0,l.R)(g)||Z(v[1],.85)},marker:{size:(0,l.Y)(g)},stroke:z,fillEnabled:f,strokeEnabled:h});w.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{const o=(0,l.b)();o.authoringInfo.univariateSymbolStyle="custom";const s=o.classBreakInfos.slice();s[d?1:0].symbol=e,o.classBreakInfos=s,r()}))),a.addStyler(w),await C}async function C(e){const{layer:o,mapImageSublayer:s,mapView:i,portal:r,modules:a}=l.s,{popoverNode:n}=e,u="ogc-feature"===o.type,d=(0,l.z)(),g=(0,l.A)(),f=(0,l.C)(),h=(0,l.b)(),v=(0,l.d)(h,"size","auto"),k=(0,l.d)(h,"size","outline");let z=h.symbol;J(z)||(z=(0,l.p)());const w="picture-marker"!==z.type&&!!z.color,C=(0,l.ac)(z),S="cim"===z.type&&"CIMPointSymbol"===z.data.symbol.type,O=c(),A="simple-line"===z.type?c():p();let E;if("simple-fill"===z.type){const e=z;E=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!k}:{color:new a.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===z.type){const e=z;E=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new a.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===z.type){const e=z;E={color:e.color,size:v?(0,t.g)(v,i.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!v}}else"cim"===z.type?(E=D(z),g&&(E.size=v?(0,t.g)(v,i.scale):E.size,E.autoAdjusted=!!v,v&&(0,l.Z)(z,E.size))):E={color:new a.esriColor([255,255,255,.5]),size:1};const j=await m(n);let x;return x=y(j,a.esriLang.clone(z),g?{portal:r,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color",optional:"cim"===z.type,open:!0,suggestedColorsOpen:!0,suggestedColors:A,extraParts:{style:"cim"!==z.type,arrow:"cim"!==z.type,width:!0,autoStrokeAdjust:!u&&!s&&"editable"}}},stroke:E}:{portal:r,symbolFilter:f&&!(0,l.ag)()?"simple":void 0,sections:{marker:S||["simple-marker","picture-marker"].indexOf(z.type)>-1?{open:!0,symbolsOpen:!0,sizeOpen:!0,parts:{size:{autoSizeAdjust:!u&&!s&&"editable"}},markerType:(0,l.ag)()?"all":["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ad)(z),suggestedColors:O},stroke:{type:"color",optional:!0,suggestedColors:A,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(z.type),width:!0,autoStrokeAdjust:!(u||s||!f||"cim"===z.type)&&"editable"}}},fill:{color:(0,l.R)(z)||Z(O[1],.85)},marker:d?{size:v?(0,t.g)(v,i.scale):(0,l.Y)(z),autoAdjusted:!s&&!!v}:void 0,stroke:E,fillEnabled:w,strokeEnabled:C}),j.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{(0,l.b)().symbol=o,F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,j,e)}))),n.addStyler(j),await x,N(h.symbol,j)}async function S(e,o){const{layer:s,portal:t,modules:i}=l.s,{onChange:r,popoverNode:a}=o,n=s,u="point"===e,d="line"===e;let g=u?n.pointSymbol:d?n.lineSymbol:n.polygonSymbol;J(g)||(g=(0,l.az)(e));const f="picture-marker"!==g.type&&!!g.color,h=(0,l.ac)(g),v=c(),k="simple-line"===g.type?c():p();let z;if("simple-fill"===g.type){const e=g;z=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!1}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===g.type){const e=g;z=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===g.type){const e=g;z={color:e.color,size:e.width,style:e.style,marker:e.marker,autoAdjusted:!1}}else z={color:new i.esriColor([255,255,255,.5]),size:1};const w=await m(a);let C;C=y(w,i.esriLang.clone(g),d?{portal:t,sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:k,extraParts:{width:!0,autoStrokeAdjust:!1}}},stroke:z}:{portal:t,sections:{marker:["simple-marker","picture-marker"].indexOf(g.type)>-1?{open:!0,symbolsOpen:!0,sizeOpen:!0,markerType:["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ad)(g),suggestedColors:v},stroke:{type:"color",optional:!0,suggestedColors:k,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(g.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.R)(g)||Z(v[1],.85)},marker:u?{size:(0,l.Y)(g),autoAdjusted:!1}:void 0,stroke:z,fillEnabled:f,strokeEnabled:h}),w.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{u?n.pointSymbol=e:d?n.lineSymbol=e:n.polygonSymbol=e,r()}))),a.addStyler(w),await C}async function O(e){var o,s;const{portal:t,modules:i}=l.s,{onChange:r,popoverNode:a}=e,n=(0,l.A)(),u=(0,l.b)(),d=(0,l.a)(),g=(0,l.d)(u,"color"),f=(0,l.J)(u,"reference-size");let h;if(["type-size","type-size-age","predominance-size","relationship-size"].indexOf(d)>-1){const e=(0,l.b)();h=(null===(o=e.uniqueValueInfos)||void 0===o?void 0:o.length)?e.uniqueValueInfos[0].symbol:(0,l.p)(d)}else h=(null===(s=u.classBreakInfos)||void 0===s?void 0:s.length)?u.classBreakInfos[0].symbol:(0,l.p)(d);J(h)||(h=(0,l.p)(d));const v="picture-marker"!==h.type&&!!h.color,k=(0,l.ac)(h),z="cim"===h.type&&"CIMPointSymbol"===h.data.symbol.type,w=c(),C="simple-line"===h.type?c():p();let S;if("simple-fill"===h.type){const e=h;S=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===h.type){const e=h;S=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===h.type){const e=h;S={color:e.color,size:e.width,style:e.style,marker:e.marker}}else S="cim"===h.type?D(h):{color:new i.esriColor([255,255,255,.5]),size:1};const O=await m(a);let A;f&&(O.mode="minimal"),A=["color-size","color-age-size","color-size-age","type-size","type-size-age","predominance-size","relationship-size"].indexOf((0,l.a)())>-1?y(O,i.esriLang.clone(h),n?{portal:t,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraOpen:!0,extraParts:{style:"cim"!==h.type,arrow:"cim"!==h.type,width:!1,autoStrokeAdjust:!1},suggestedColors:C,parts:{suggestedColors:!1,customColor:!1,transparency:!0,extra:"cim"!==h.type}}},stroke:S}:{portal:t,sections:{marker:z||["simple-marker","picture-marker"].indexOf(h.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.ag)()?["simple","cim:vector"]:["simple"]}:f?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,stroke:{type:"color",open:!0,optional:!0,suggestedColors:C,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(h.type),width:!0,autoStrokeAdjust:!1}}},marker:{size:(0,l.Y)(h)},stroke:S,strokeEnabled:k}):y(O,i.esriLang.clone(h),n?{portal:t,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraParts:{style:"cim"!==h.type,arrow:"cim"!==h.type,width:!1,autoStrokeAdjust:!1},suggestedColorsOpen:!0,suggestedColors:C,parts:{extra:"cim"!==h.type}}},stroke:S}:{portal:t,sections:{marker:z||["simple-marker","picture-marker"].indexOf(h.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.ag)()?"all":["simple","picture"]}:f?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ad)(h),suggestedColors:w},stroke:{type:"color",optional:!0,suggestedColors:C,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(h.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.R)(h)||Z(w[1],.85)},marker:{size:(0,l.Y)(h)},stroke:S,fillEnabled:v,strokeEnabled:k}),O.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{const o=(0,l.b)();if(o.classBreakInfos){let s=o.classBreakInfos;if(!s||!s.length)return;s=s.slice(),s.forEach((s=>{const t=(0,l.Y)(s.symbol),r=(0,l.R)(s.symbol);s.symbol=e.clone(),g?(0,l.X)(s.symbol,new i.esriColor([0,0,0,.5])):o.uniqueValueInfos&&(0,l.X)(s.symbol,r),f||(0,l.Z)(s.symbol,t)})),o.classBreakInfos=s}else{let s=o.uniqueValueGroups;if(!(s&&s.length&&s[0].classes&&s[0].classes.length))return;s=s.slice(),s.forEach((o=>{o.classes.forEach((o=>{const s=(0,l.Y)(o.symbol),t=(0,l.R)(o.symbol);o.symbol=e.clone(),g?(0,l.X)(o.symbol,new i.esriColor([0,0,0,.5])):(0,l.X)(o.symbol,t),(0,l.Z)(o.symbol,s)}))})),o.uniqueValueGroups=s}r()}))),a.addStyler(O),await A}async function A(e){var o,s,i,r;const{mapImageSublayer:n,mapView:c,portal:u,modules:d}=l.s,{onChange:g,popoverNode:f}=e,h=(0,l.z)(),v=(0,l.A)(),k=(0,l.C)(),z=(0,l.b)(),w=z.authoringInfo,C=(0,l.a)(),S="univariate-color-size"===(null==w?void 0:w.type),O="above-and-below"===(null==w?void 0:w.univariateTheme),A=O&&!w.univariateSymbolStyle,E=(0,l.d)((0,l.b)(),"color"),j=(0,l.d)(z,"size","auto"),x=(0,l.d)(z,"size","outline"),V=(0,l.J)(z,"reference-size"),R=["color-size","color-age-size","color-size-age"].indexOf(C)>-1,I=(0,l.J)((0,l.b)(),"color");let L,q=E?E.stops.map((e=>e.color)):z.classBreakInfos.map((e=>{var o;return(null===(o=(0,l.R)(e.symbol))||void 0===o?void 0:o.clone())||new d.esriColor([0,0,0,0])}));q.length>10&&(q=q.slice(0,10)),q.reverse();let B=(null===(o=z.classBreakInfos)||void 0===o?void 0:o.length)?z.classBreakInfos[0].symbol:(0,l.p)();if(!J(B)||(!O||A)&&!X(B)){const e=null!==(s=(0,l.Y)(B))&&void 0!==s?s:B.width;B=(0,l.p)(C),(0,l.Z)(B,e)}const P=!(O&&!E&&"picture-marker"===B.type&&"picture-marker"===(null===(i=z.classBreakInfos[1].symbol)||void 0===i?void 0:i.type)),T=(0,l.ac)(B),G="cim"===B.type&&"CIMPointSymbol"===B.data.symbol.type,M=await d.colorUtils.getBackgroundColorTheme(c),Y=d.colorSchemes.getSchemes({basemapTheme:M,geometryType:(0,l.D)()||a,theme:(null==w?void 0:w.univariateTheme)||(null==I?void 0:I.theme)||"high-to-low"});if(!E){const e=d.colorSchemes.getSchemes({basemap:c.map.basemap||"topo",geometryType:(0,l.D)()||a,theme:"above-and-below"});Y.secondarySchemes.push(e.primaryScheme),Y.secondarySchemes=Y.secondarySchemes.concat(e.secondarySchemes)}const Z=E?0:z.classBreakInfos.length;let _=(0,l.ae)(Y,Z);_=_.filter((e=>{var o;return null===(o=e.colors)||void 0===o?void 0:o.length}));const U=_.map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),W=p();let H;if((0,l.X)(B,q[q.length-1]),(R||h||v)&&j?(0,l.Z)(B,(0,t.g)(j,c.scale)):k&&x&&B.outline&&(B.outline.width=(0,t.g)(x,c.scale)),"simple-fill"===B.type){const e=B;H=e.outline?{color:e.outline.color?e.outline.color:new d.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!x}:{color:new d.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!x}}else if("simple-marker"===B.type){const e=B;H=e.outline?{color:e.outline.color?e.outline.color:new d.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new d.esriColor([0,0,0,.5]),size:1}}else if("cim"===B.type)H=D(B),v&&(H.size=j?(0,t.g)(j,c.scale):H.size,H.autoAdjusted=!!j,j&&(0,l.Z)(B,H.size));else if("simple-line"===B.type){const e=B;H={color:new d.esriColor([255,255,255,.5]),size:j?(0,t.g)(j,c.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!j}}else H={color:new d.esriColor([255,255,255,.5]),size:1};const K=await m(f);let Q;return V&&(K.mode="minimal"),L=B.clone(),Q=v?y(K,d.esriLang.clone(B),{portal:u,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:E?"continuous":"discrete",colorRamps:U,open:!0,colorRampsOpen:!0,extraParts:{style:"cim"!==B.type,arrow:"cim"!==B.type,autoStrokeAdjust:!n&&!R&&"editable",width:!R},parts:{extra:!R||"cim"!==B.type}}},stroke:Object.assign(Object.assign({},H),{color:q})}):y(K,!O||A?d.esriLang.clone(B):(0,l.p)(),{portal:u,symbolFilter:k&&!(0,l.ag)()?"simple":void 0,sections:{marker:O&&!A||!(G||["simple-marker","picture-marker"].indexOf(B.type)>-1)?O&&!A?{parts:{preview:!1,rotation:!1,size:!1}}:V?{parts:{preview:!1,size:!1}}:void 0:{open:!0,parts:{size:!R&&(!!n||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!R,markerType:(0,l.ag)()?["simple","cim:vector"]:["simple"]},fill:{type:"color-ramp",style:E?"continuous":"discrete",open:!(0,l.aA)(B),colorRampsOpen:!(0,l.aA)(B),colorRamps:U},stroke:!O||A?{type:"color",optional:!0,open:!1,suggestedColors:W,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(B.type),width:!0,autoStrokeAdjust:!(n||!k||"cim"===B.type||R)&&"editable"}}:void 0},fill:{color:q},marker:O&&!A||!R&&!h?void 0:{size:j?(0,t.g)(j,c.scale):(0,l.Y)(B),autoAdjusted:!!j},stroke:H,strokeEnabled:T,fillEnabled:P}),K.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const r=(0,l.b)(),a=(0,l.d)(r,"color");let n=d.esriLang.clone((i||t).color);const c=q[0],p=q.length!==n.length||q.some(((e,o)=>e.r!==n[o].r||e.g!==n[o].g||e.b!==n[o].b))||c.r!==n[0].r||c.g!==n[0].g||c.b!==n[0].b,u=c.a!==n[0].a,m=n[0].a,y=(0,l.aD)(o,L);if(p&&!y.any&&(y.any=!0,y.color=!0),S&&O||n.reverse(),!O||A){if(y.any){const e=r.classBreakInfos.slice();e.forEach(((e,s)=>{e.symbol=(0,l.aE)(e.symbol,o,p&&!a?n[s%n.length]:u&&!a?(0,l.aF)((0,l.R)(e.symbol),m):(0,l.R)(e.symbol)||new d.esriColor([0,0,0,0]),y)})),r.classBreakInfos=e}}else if(!a){n.reverse();const e=r.classBreakInfos.slice();e.forEach(((e,o)=>{(0,l.X)(e.symbol,n[o])})),r.classBreakInfos=e}if(a){if(q.length!==n.length&&5===n.length){const e=a.stops.length,o=[];o[0]=a.stops[0],o[1]=a.stops[Math.floor(e/4)],o[2]=a.stops[Math.floor(e/2)],o[3]=a.stops[e-Math.ceil(e/4)],o[4]=a.stops[e-1],a.stops=o}a.stops.forEach(((e,o)=>{e.color=n[o]}));const e=r.classBreakInfos.slice();(0,l.X)(e[0].symbol,new d.esriColor([170,170,170,1])),r.classBreakInfos=e}R?g():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,K,e),L=o.clone(),q=a?a.stops.map((e=>e.color)):r.classBreakInfos.map((e=>(0,l.R)(e.symbol)||new d.esriColor([0,0,0,0]))).reverse()}))),f.addStyler(K),await Q,N((null===(r=z.classBreakInfos)||void 0===r?void 0:r.length)?z.classBreakInfos[0].symbol:void 0,K,(e=>{k&&B.outline?B.outline.width=e:!k&&(0,l.Z)(B,e),L=B.clone()}))}async function E(e){var o,s,i,r,n;const{mapImageSublayer:c,mapView:u,portal:d,modules:g}=l.s,{onChange:f,popoverNode:h}=e,v=(0,l.z)(),k=(0,l.A)(),z=(0,l.C)(),w=(0,l.b)(),C=(0,l.a)(),S=["type-size","type-size-age"].indexOf(C)>-1,O=(0,l.d)(w,"size","auto"),A=(0,l.d)(w,"size","outline"),E=(0,l.J)(w,"reference-size"),j=w.uniqueValueGroups;let x,V=[];const R=j.length?j[j.length-1]:void 0;let I=(null===(o=null==R?void 0:R.classes)||void 0===o?void 0:o.length)&&(null===(s=(0,l.R)(R.classes[R.classes.length-1].symbol))||void 0===s?void 0:s.a)||1;j.forEach((e=>V=V.concat(e.classes.map((e=>(0,l.R)(e.symbol)||new g.esriColor([0,0,0,I])))))),V.reverse(),V.length>10&&(V=V.slice(0,10));const L=g.typeSchemes.getSchemes({basemap:u.map.basemap,geometryType:(0,l.D)()||a});let q=(null===(i=w.uniqueValueGroups)||void 0===i?void 0:i.length)&&w.uniqueValueGroups[0].classes.length?g.esriLang.clone(w.uniqueValueGroups[0].classes[0].symbol):(0,l.p)(C);if(!X(q)){const e=null!==(r=(0,l.Y)(q))&&void 0!==r?r:q.width;q=(0,l.p)(C),(0,l.Z)(q,e)}const B=(0,l.ac)(q),P="cim"===q.type&&"CIMPointSymbol"===q.data.symbol.type;let T=0;j.forEach((e=>T+=e.classes.length));const G=(0,l.ae)(L,Math.min(T,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),M=p();let Y;if((0,l.X)(q,V[V.length-1]),(S||v||k)&&O?(0,l.Z)(q,(0,t.g)(O,u.scale)):z&&A&&q.outline&&(q.outline.width=(0,t.g)(A,u.scale)),"simple-fill"===q.type){const e=q;Y=e.outline?{color:e.outline.color?e.outline.color:new g.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!A}:{color:new g.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!A}}else if("simple-marker"===q.type){const e=q;Y=e.outline?{color:e.outline.color?e.outline.color:new g.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new g.esriColor([0,0,0,.5]),size:1}}else if("cim"===q.type)Y=D(q),k&&(Y.size=O?(0,t.g)(O,u.scale):Y.size,Y.autoAdjusted=!!O,O&&(0,l.Z)(q,Y.size));else if("simple-line"===q.type){const e=q;Y={color:V[V.length-1],size:O?(0,t.g)(O,u.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!O}}else Y={color:new g.esriColor([255,255,255,.5]),size:1};const Z=await m(h);let J;return E&&(Z.mode="minimal"),x=q.clone(),J=y(Z,g.esriLang.clone(q),k?{portal:d,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:G,extraParts:{style:"cim"!==q.type,arrow:"cim"!==q.type,autoStrokeAdjust:!c&&!S&&"editable",width:!S},parts:{extra:!S||"cim"!==q.type}}},stroke:Object.assign(Object.assign({},Y),{color:V})}:{portal:d,symbolFilter:z&&!(0,l.ag)()?"simple":void 0,sections:{marker:P||["simple-marker","picture-marker"].indexOf(q.type)>-1?{open:!!(0,l.aA)(q),parts:{size:!S&&(!!c||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!S,markerType:(0,l.ag)()?["simple","cim:vector"]:["simple"]}:E?{parts:{preview:!1,size:!1}}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.aA)(q),colorRampsOpen:!(0,l.aA)(q),colorRamps:G},stroke:{type:"color",optional:!0,open:!1,suggestedColors:M,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(q.type),width:!0,autoStrokeAdjust:!(c||!z||"cim"===q.type||S)&&"editable"}}},fill:{color:V},marker:S||v?{size:O?(0,t.g)(O,u.scale):(0,l.Y)(q),autoAdjusted:!!O}:void 0,stroke:Y,strokeEnabled:B}),Z.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const r=g.esriLang.clone((i||t).color),a=V[0],n=V.length!==r.length||V.some(((e,o)=>e.r!==r[o].r||e.g!==r[o].g||e.b!==r[o].b))||a.r!==r[0].r||a.g!==r[0].g||a.b!==r[0].b,c=a.a!==r[0].a,p=r[0].a;r.reverse();const u=(0,l.b)(),d=(0,l.aD)(o,x);if(n&&!d.any&&(d.any=!0,d.color=!0),d.any){const e=u.uniqueValueGroups.slice();let s=0;e.forEach((e=>{e.classes.forEach(((e,t)=>{"picture-marker"===e.symbol.type&&(n||c)&&(e.symbol=g.esriLang.clone(o),(0,l.X)(e.symbol,r[(s+t)%r.length])),e.symbol=(0,l.aE)(e.symbol,o,n?r[(s+t)%r.length]:c?(0,l.aF)((0,l.R)(e.symbol),p):(0,l.R)(e.symbol)||new g.esriColor([0,0,0,0]),d)})),s+=e.classes.length})),u.uniqueValueGroups=e}S?f():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,Z,e),x=o.clone(),n&&(V=[],u.uniqueValueGroups.forEach((e=>V=V.concat(e.classes.map((e=>(0,l.R)(e.symbol)||new g.esriColor([0,0,0,0])))))),V.reverse(),V.length>10&&(V=V.slice(0,10)))}))),h.addStyler(Z),await J,N((null===(n=w.uniqueValueGroups)||void 0===n?void 0:n.length)&&w.uniqueValueGroups[0].classes.length?w.uniqueValueGroups[0].classes[0].symbol:void 0,Z,(e=>{z&&q.outline?q.outline.width=e:!z&&(0,l.Z)(q,e),x=q.clone()}))}async function j(e){var o;const{mapView:s,portal:t,modules:i}=l.s,{groupIdx:r,onChange:n,popoverNode:c}=e,p=(0,l.b)().uniqueValueGroups[r];let u=(null===(o=(0,l.R)(p.classes[p.classes.length-1].symbol))||void 0===o?void 0:o.a)||1,d=p.classes.map((e=>(0,l.R)(e.symbol)||new i.esriColor([0,0,0,u])));d.reverse(),d.length>10&&(d=d.slice(0,10));const g=await i.colorUtils.getBackgroundColorTheme(s),f=i.typeSchemes.getSchemes({basemapTheme:g,geometryType:(0,l.D)()||a}),h=i.colorSchemes.getSchemes({basemapTheme:g,geometryType:(0,l.D)()||a,theme:"high-to-low"});h.primaryScheme.colors=h.primaryScheme.colorsForClassBreaks[9].colors,h.primaryScheme.colorsForClassBreaks=void 0,h.secondarySchemes=h.secondarySchemes.filter((e=>{var o;return(null===(o=e.colorsForClassBreaks)||void 0===o?void 0:o.length)>=10})),h.secondarySchemes.forEach((e=>{e.colors=e.colorsForClassBreaks[9].colors,e.colorsForClassBreaks=void 0})),f.secondarySchemes.push(h.primaryScheme),f.secondarySchemes=f.secondarySchemes.concat(h.secondarySchemes);let v=p.classes.length;const k=(0,l.ae)(f,Math.min(v,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),z=await m(c),w=y(z,new i.SimpleFillSymbol,{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:k,parts:{transparency:!1}}},fill:{color:d}});z.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{info:{fill:e}}})=>{const o=i.esriLang.clone(e.color).reverse(),s=(0,l.b)(),t=(0,l.a)(),a=s.uniqueValueGroups.slice();a[r].classes.forEach(((e,s)=>{"picture-marker"===e.symbol.type&&(e.symbol=(0,l.p)(t)),(0,l.X)(e.symbol,o[s%o.length])})),s.uniqueValueGroups=a,n(),d=s.uniqueValueGroups[r].classes.map((e=>(0,l.R)(e.symbol))),d.reverse(),d.length>10&&(d=d.slice(0,10))}))),c.addStyler(z),await w}async function x(e){var o,s;const{mapImageSublayer:i,mapView:r,lastDefault:c,portal:u,modules:d}=l.s,{onChange:g,popoverNode:f,selectedValue:h}=e,v=(0,l.i)(),[k,z]=!v&&h.split("/").map((e=>parseInt(e))),w=(0,l.z)(),C=(0,l.A)(),S=(0,l.C)(),O=(0,l.b)(),A=(0,l.a)(),E=["type-size","type-size-age"].indexOf(A)>-1,j=(0,l.d)(O,"size","auto"),x=(0,l.d)(O,"size","outline"),V=(0,l.J)(O,"reference-size");let R;R=!v&&-1===k||v&&-1===h?O.defaultSymbol||c.defaultSymbol:v?O.uniqueValueInfos[h].symbol:O.uniqueValueGroups[k].classes[z].symbol,J(R)||(R=v?(0,l.al)():(0,l.p)(A),(!v&&-1===k||v&&-1===h)&&!O.defaultSymbol&&(c.defaultSymbol=R));const I="picture-marker"!==R.type&&!!R.color,L=(0,l.ac)(R),q="cim"===R.type&&"CIMPointSymbol"===R.data.symbol.type;let B;if(!v&&-1===k||v&&-1===h)B=n();else{const e=d.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.D)()||a});B=(0,l.af)(e).slice(0,16)}const P=p();let T;if((E||w||C)&&j?(0,l.Z)(R,(0,t.g)(j,r.scale)):S&&x&&R.outline&&(R.outline.width=(0,t.g)(x,r.scale)),"simple-fill"===R.type){const e=R;T=e.outline?{color:e.outline.color?e.outline.color:new d.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!x}:{color:new d.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!x}}else if("simple-marker"===R.type){const e=R;T=e.outline?{color:e.outline.color?e.outline.color:new d.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new d.esriColor([0,0,0,.5]),size:1}}else if("cim"===R.type)T=D(R),C&&(T.size=j?(0,t.g)(j,r.scale):T.size,T.autoAdjusted=!!j,j&&(0,l.Z)(R,T.size));else if("simple-line"===R.type){const e=R;T={size:j?(0,t.g)(j,r.scale):e.width,style:e.style,marker:e.marker,color:e.color,autoAdjusted:!!j}}else T={color:new d.esriColor([255,255,255,.5]),size:1};const G=await m(f);let M;return V&&(G.mode="minimal"),M=y(G,d.esriLang.clone(R),C?{portal:u,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:B,extraParts:{style:"cim"!==R.type,arrow:"cim"!==R.type,autoStrokeAdjust:!i&&!E&&"editable",width:!E},parts:{extra:!E||"cim"!==R.type}}},stroke:T}:v?{portal:u,symbolFilter:"simple",sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:B,parts:{transparency:!1}}},fill:{color:(0,l.R)(R)||(-1===h?(0,l.al)().color:Z(B[h%B.length],.85))},stroke:T,fillEnabled:I}:{portal:u,symbolFilter:S&&!(0,l.ag)()?"simple":void 0,sections:{marker:q||["simple-marker","picture-marker"].indexOf(R.type)>-1?{open:!0,parts:{size:!E&&(!!i||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!E,markerType:(0,l.ag)()?"all":["simple","picture"]}:V?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ad)(R),suggestedColors:B},stroke:{type:"color",optional:!0,suggestedColors:P,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(R.type),width:!0,autoStrokeAdjust:!(i||!S||"cim"===R.type||E)&&"editable"}}},fill:{color:(0,l.R)(R)||Z(B[z%B.length],.85)},marker:E||w?{size:j?(0,t.g)(j,r.scale):(0,l.Y)(R),autoAdjusted:!!j}:void 0,stroke:T,fillEnabled:I,strokeEnabled:L}),G.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{const i=(0,l.b)();if(!v&&-1===k||v&&-1===h)i.defaultSymbol=o;else if(v){const e=i.uniqueValueInfos.slice();e[h].symbol=o,i.uniqueValueInfos=e}else{const e=i.uniqueValueGroups.slice();e[k].classes[z].symbol=o,i.uniqueValueGroups=e}E?g():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,G,e)}))),f.addStyler(G),await M,N(v?(null===(o=O.uniqueValueInfos)||void 0===o?void 0:o.length)?O.uniqueValueInfos[0].symbol:void 0:(null===(s=O.uniqueValueGroups)||void 0===s?void 0:s.length)&&O.uniqueValueGroups[0].classes.length?O.uniqueValueGroups[0].classes[0].symbol:void 0,G)}async function V(e){var o,s,i;const{mapImageSublayer:r,mapView:a,portal:n,modules:c}=l.s,{onChange:u,popoverNode:d}=e,g=(0,l.z)(),f=(0,l.A)(),h=(0,l.C)(),v=(0,l.b)(),k=(0,l.a)(),z="relationship-size"===k,w=(0,l.J)(v,"reference-size"),C=(0,l.d)(v,"size","auto"),S=(0,l.d)(v,"size","outline"),O=v.uniqueValueGroups[0].classes,A=O.map((e=>(0,l.R)(e.symbol)||new c.esriColor([0,0,0,0]))),E=c.relationshipSchemes.getSchemes({basemap:a.map.basemap||"topo",geometryType:(0,l.D)()});let j=(null===(o=v.uniqueValueGroups[0].classes)||void 0===o?void 0:o.length)?c.esriLang.clone(v.uniqueValueGroups[0].classes[0].symbol):(0,l.p)(k);if(!X(j)){const e=null!==(s=(0,l.Y)(j))&&void 0!==s?s:j.width;j=(0,l.p)(k),(0,l.Z)(j,e)}const x=(0,l.ac)(j),V="cim"===j.type&&"CIMPointSymbol"===j.data.symbol.type,R=(0,l.ae)(E,Math.sqrt(O.length)).map((({colors:e,scheme:{tags:o,name:s}})=>({stops:c.relationshipSchemes.flatten2DArray(e),tags:o,name:s}))),I=p();let L;if("simple-fill"===j.type){const e=j;L=e.outline?{color:e.outline.color?e.outline.color:new c.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!S}:{color:new c.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!S}}else if("simple-marker"===j.type){const e=j;L=e.outline?{color:e.outline.color?e.outline.color:new c.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new c.esriColor([0,0,0,.5]),size:1}}else if("cim"===j.type)L=D(j),f&&(L.size=C?(0,t.g)(C,a.scale):L.size,L.autoAdjusted=!!C,C&&(0,l.Z)(j,L.size));else if("simple-line"===j.type){const e=j;L={color:new c.esriColor([255,255,255,.5]),size:C?(0,t.g)(C,a.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!C}}else L={color:new c.esriColor([255,255,255,.5]),size:1};const q=await m(d);let B;return w&&(q.mode="minimal"),B=y(q,c.esriLang.clone(j),f?{portal:n,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"2d",open:!0,colorRampsOpen:!0,colorRamps:R,extraParts:{style:"cim"!==j.type,arrow:"cim"!==j.type,autoStrokeAdjust:!r&&!z&&"editable",width:!z},parts:{extra:!z||"cim"!==j.type}}},stroke:Object.assign(Object.assign({},L),{color:A})}:{portal:n,symbolFilter:h&&!(0,l.ag)()?"simple":void 0,sections:{marker:V||["simple-marker","picture-marker"].indexOf(j.type)>-1?{open:!!(0,l.aA)(j),parts:{size:!z&&(!!r||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!z,markerType:(0,l.ag)()?["simple","cim:vector"]:["simple"]}:w?{parts:{preview:!1,size:!1,rotation:!1}}:void 0,fill:{type:"color-ramp",style:"2d",open:!(0,l.aA)(j),colorRampsOpen:!(0,l.aA)(j),colorRamps:R},stroke:{type:"color",optional:!0,open:!1,suggestedColors:I,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(j.type),width:!0,autoStrokeAdjust:!(r||!h||"cim"===j.type||z)&&"editable"}}},fill:{color:A},marker:z||g?{size:C?(0,t.g)(C,a.scale):(0,l.Y)(j),autoAdjusted:!!C}:void 0,stroke:L,strokeEnabled:x}),q.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const r=c.esriLang.clone((i||t).color),a=(0,l.b)(),n=a.uniqueValueGroups[0].classes.slice();n.forEach(((e,s)=>{e.symbol=o.clone(),(0,l.X)(e.symbol,r[s%r.length])})),a.uniqueValueGroups[0].classes=n,z?u():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,q,e)}))),d.addStyler(q),await B,N((null===(i=v.uniqueValueGroups[0].classes)||void 0===i?void 0:i.length)?v.uniqueValueGroups[0].classes[0].symbol:void 0,q)}async function R(e){var o,s,i,r;const{mapImageSublayer:a,mapView:n,portal:c,modules:u}=l.s,{onChange:d,popoverNode:g}=e,f=(0,l.z)(),h=(0,l.A)(),v=(0,l.C)(),k=(0,l.b)(),z=(0,l.a)(),w="predominance-size"===z,C=(0,l.d)(k,"size","auto"),S=(0,l.d)(k,"size","outline"),O=k.uniqueValueGroups[0].classes;let A,E=O.length&&(null===(o=(0,l.R)(O[O.length-1].symbol))||void 0===o?void 0:o.a)||1,j=O.map((e=>(0,l.R)(e.symbol)||new u.esriColor([0,0,0,E])));j.reverse();const x=u.predominanceSchemes.getSchemes({basemap:n.map.basemap,geometryType:(0,l.D)(),numColors:O.length});let V=(null===(s=k.uniqueValueGroups[0].classes)||void 0===s?void 0:s.length)?u.esriLang.clone(k.uniqueValueGroups[0].classes[0].symbol):(0,l.p)(z);if(!X(V)){const e=null!==(i=(0,l.Y)(V))&&void 0!==i?i:V.width;V=(0,l.p)(z),(0,l.Z)(V,e)}const R=(0,l.ac)(V),I="cim"===V.type&&"CIMPointSymbol"===V.data.symbol.type,L=(0,l.ae)(x,O.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),q=p();let B;if((0,l.X)(V,j[j.length-1]),(w||f||h)&&C?(0,l.Z)(V,(0,t.g)(C,n.scale)):v&&S&&V.outline&&(V.outline.width=(0,t.g)(S,n.scale)),"simple-fill"===V.type){const e=V;B=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!S}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!S}}else if("simple-marker"===V.type){const e=V;B=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===V.type)B=D(V),h&&(B.size=C?(0,t.g)(C,n.scale):B.size,B.autoAdjusted=!!C,C&&(0,l.Z)(V,B.size));else if("simple-line"===V.type){const e=V;B={color:new u.esriColor([255,255,255,.5]),size:C?(0,t.g)(C,n.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!C}}else B={color:new u.esriColor([255,255,255,.5]),size:1};const P=await m(g);let T;return A=V.clone(),T=y(P,u.esriLang.clone(V),h?{portal:c,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:L,parts:{transparency:!0,extra:!w||"cim"!==V.type},extraParts:{style:"cim"!==V.type,arrow:"cim"!==V.type,autoStrokeAdjust:!a&&!w&&"editable",width:!w}}},stroke:Object.assign(Object.assign({},B),{color:j})}:{portal:c,symbolFilter:v&&!(0,l.ag)()?"simple":void 0,sections:{marker:I||["simple-marker","picture-marker"].indexOf(V.type)>-1?{open:!!(0,l.aA)(V),parts:{size:!w&&(!!a||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!w,markerType:(0,l.ag)()?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.aA)(V),colorRampsOpen:!(0,l.aA)(V),colorRamps:L},stroke:{type:"color",optional:!0,open:!1,suggestedColors:q,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(V.type),width:!0,autoStrokeAdjust:!(a||!v||"cim"===V.type||w)&&"editable"}}},fill:{color:j},marker:w||f?{size:C?(0,t.g)(C,n.scale):(0,l.Y)(V),autoAdjusted:!!C}:void 0,stroke:B,strokeEnabled:R}),P.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const r=u.esriLang.clone((i||t).color),a=j[0],n=j.length!==r.length||j.some(((e,o)=>e.r!==r[o].r||e.g!==r[o].g||e.b!==r[o].b))||a.r!==r[0].r||a.g!==r[0].g||a.b!==r[0].b,c=a.a!==r[0].a,p=r[0].a;r.reverse();const m=(0,l.b)(),y=(0,l.aD)(o,A);if(n&&!y.any&&(y.any=!0,y.color=!0),y.any){const e=m.uniqueValueGroups[0].classes.slice();e.forEach(((e,s)=>{"picture-marker"===e.symbol.type&&(n||c)&&(e.symbol=u.esriLang.clone(o),(0,l.X)(e.symbol,r[s%r.length])),e.symbol=(0,l.aE)(e.symbol,o,n?r[s%r.length]:c?(0,l.aF)((0,l.R)(e.symbol),p):(0,l.R)(e.symbol)||new u.esriColor([0,0,0,0]),y)})),m.uniqueValueGroups[0].classes=e}w?d():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,P,e),A=o.clone(),n&&(j=m.uniqueValueGroups[0].classes.map((e=>(0,l.R)(e.symbol)||new u.esriColor([0,0,0,.5]))),j.reverse())}))),g.addStyler(P),await T,N((null===(r=k.uniqueValueGroups[0].classes)||void 0===r?void 0:r.length)?k.uniqueValueGroups[0].classes[0].symbol:void 0,P,(e=>{v&&V.outline?V.outline.width=e:!v&&(0,l.Z)(V,e),A=V.clone()}))}async function I(e){var o;const{mapImageSublayer:s,mapView:i,selectedValue:r,lastDefault:a,portal:c,modules:u}=l.s,{onChange:d,popoverNode:g}=e,f=(0,l.z)(),h=(0,l.A)(),v=(0,l.C)(),k=(0,l.b)(),z=(0,l.a)(),w="predominance-size"===z,C=(0,l.d)(k,"size","auto"),S=(0,l.d)(k,"size","outline");let O;O=-1===r?k.defaultSymbol||a.defaultSymbol:k.uniqueValueGroups[0].classes[r].symbol,J(O)||(O=(0,l.p)(z),-1!==r||k.defaultSymbol||(a.defaultSymbol=O));const A="picture-marker"!==O.type&&!!O.color,E=(0,l.ac)(O),j="cim"===O.type&&"CIMPointSymbol"===O.data.symbol.type;let x;if(-1===r)x=n();else{const e=u.predominanceSchemes.getSchemes({basemap:i.map.basemap,geometryType:(0,l.D)(),numColors:10});x=(0,l.af)(e).slice(0,16)}const V=p();let R;if((w||f||h)&&C?(0,l.Z)(O,(0,t.g)(C,i.scale)):v&&S&&O.outline&&(O.outline.width=(0,t.g)(S,i.scale)),"simple-fill"===O.type){const e=O;R=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!S}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!S}}else if("simple-marker"===O.type){const e=O;R=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===O.type)R=D(O);else if("simple-line"===O.type){const e=O;R={size:e.width,style:e.style,marker:e.marker,color:e.color}}else R={color:new u.esriColor([255,255,255,.5]),size:1};const I=await m(g);let L;return L=y(I,u.esriLang.clone(O),h?{portal:c,symbolFilter:(0,l.ag)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:x,extraParts:{style:"cim"!==O.type,arrow:"cim"!==O.type,autoStrokeAdjust:!s&&!w&&"editable",width:!w},parts:{extra:!w||"cim"!==O.type}}},stroke:R}:{portal:c,symbolFilter:v&&!(0,l.ag)()?"simple":void 0,sections:{marker:j||["simple-marker","picture-marker"].indexOf(O.type)>-1?{open:!0,parts:{size:!w&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!w,markerType:(0,l.ag)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ad)(O),suggestedColors:x},stroke:{type:"color",optional:!0,suggestedColors:V,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(O.type),width:!0,autoStrokeAdjust:!(s||!v||"cim"===O.type||w)&&"editable"}}},fill:{color:(0,l.R)(O)||Z(x[r],.85)},marker:w||f?{size:C?(0,t.g)(C,i.scale):(0,l.Y)(O),autoAdjusted:!!C}:void 0,stroke:R,fillEnabled:A,strokeEnabled:E}),I.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{const i=(0,l.b)();if(-1===r)i.defaultSymbol=o;else{const e=i.uniqueValueGroups[0].classes.slice();e[r].symbol=o,i.uniqueValueGroups[0].classes=e}w?d():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,I,e)}))),g.addStyler(I),await L,N((null===(o=k.uniqueValueGroups[0].classes)||void 0===o?void 0:o.length)?k.uniqueValueGroups[0].classes[0].symbol:void 0,I)}async function L(e){const{mapView:o,portal:s,strings:t,modules:i}=l.s,{onChange:r,popoverNode:c}=e,p=(0,l.b)(),u=p.attributes,d=u.map((e=>e.color)),g=i.pieChartSchemes.getSchemes({basemap:o.map.basemap,geometryType:(0,l.D)()||a,numColors:u.length}),f=n(),h=(0,l.ae)(g,u.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),v=(0,l.p)();let k;if(v.outline=p.outline,"simple-fill"===v.type)if(v.outline){const e=v.outline;k={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}else k={color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"};else if("simple-marker"===v.type&&v.outline){const e=v.outline;k={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}const z=await m(c),w=y(z,v,{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:h},stroke:{type:"color",optional:!0,suggestedColors:f,extraParts:{style:!1,width:!0,autoStrokeAdjust:!1}}},fill:{color:d.reverse()},stroke:k});z.stringOverrides={fillColor:t.styler.color,fillTransparency:t.styler.transparency},z.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e,info:{fill:o}}})=>{const s=i.esriLang.clone(o.color);s.reverse(),(0,l.b)().attributes.forEach(((e,o)=>e.color=s[o])),(0,l.b)().outline=e.outline.clone(),r()}))),c.addStyler(z),await w}async function q(e){var o;const{mapView:s,selectedAttribute:t,lastDefault:i,portal:r,strings:n,modules:c}=l.s,{onChange:p,popoverNode:u}=e,d=(0,l.b)(),g=d.attributes;let f;f=-1===t?(null===(o=d.othersCategory)||void 0===o?void 0:o.color)||(null==i?void 0:i.otherColor)||new c.esriColor([170,170,170,1]):-2===t?d.defaultColor||(null==i?void 0:i.defaultColor)||new c.esriColor([170,170,170,1]):g[t].color;const h=c.pieChartSchemes.getSchemes({basemap:s.map.basemap,geometryType:(0,l.D)()||a,numColors:g.length}),v=(0,l.af)(h).slice(0,16),k=(0,l.p)();k.outline=void 0,(0,l.X)(k,f);const z=await m(u),w=y(z,k,{portal:r,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:v}},fill:{color:f}});z.stringOverrides={fillColor:n.styler.color,fillTransparency:n.styler.transparency},z.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{var o;-1===t?(0,l.b)().othersCategory?(0,l.b)().othersCategory.color=(0,l.R)(e):(0,l.b)().othersCategory={color:(0,l.R)(e),label:(null==i?void 0:i.otherLabel)||n.styler.other,threshold:null!==(o=null==i?void 0:i.threshold)&&void 0!==o?o:0}:-2===t?(0,l.b)().defaultColor=(0,l.R)(e):(0,l.b)().attributes[t].color=(0,l.R)(e),p()}))),u.addStyler(z),await w}async function B(e){const{mapView:o,portal:s,strings:t,modules:i}=l.s,{onChange:r,popoverNode:a}=e,n=(0,l.b)().attributes,c=n.map((e=>e.color)),p=i.dotDensitySchemes.getSchemes({basemap:o.map.basemap,numColors:n.length}),u=(0,l.ae)(p,n.length).map((e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name}))),d=await m(a),g=y(d,(0,l.p)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:u}},fill:{color:c}});d.stringOverrides={fillColor:t.styler.dotColor,fillTransparency:t.styler.dotTransparency},d.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{info:{fill:e}}})=>{(0,l.b)().attributes.forEach(((o,s)=>o.color=e.color[s])),r()}))),a.addStyler(d),await g}async function P(e){const{mapView:o,portal:s,strings:t,modules:i}=l.s,{onChange:r,popoverNode:a,selectedAttribute:n}=e,c=(0,l.b)().attributes,p=i.dotDensitySchemes.getSchemes({basemap:o.map.basemap,numColors:c.length}),u=(0,l.af)(p).slice(0,16),d=await m(a),g=y(d,(0,l.p)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:u}},fill:{color:c[n].color}});d.stringOverrides={fillColor:t.styler.dotColor,fillTransparency:t.styler.dotTransparency},d.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{(0,l.b)().attributes[n].color=(0,l.R)(e),r()}))),a.addStyler(d),await g}async function T(e){const{mapView:o,portal:s,strings:t,modules:i}=l.s,{onChange:r,popoverNode:a}=e,n=(0,l.b)().colorStops,c=n.filter(((e,o)=>o>=3)).map((e=>e.color)),p=await i.colorUtils.getBackgroundColorTheme(o),u=i.heatmapSchemes.getSchemes({basemapTheme:p}),d=(0,l.ae)(u,n.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),g=await m(a),f=y(g,(0,l.p)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRampsOpen:!0,colorRamps:d,parts:{transparency:!1}}},fill:{color:c.reverse()}});g.stringOverrides={fillTransparency:t.styler.transparency},g.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{info:{fill:e}}})=>{const o=i.esriLang.clone(e.color);o.reverse();const s=Math.max(n.length-o.length,0);(0,l.b)().colorStops.forEach(((e,l)=>{const t=e.color.a;e.color=l<=s-2||l<=s?i.esriLang.clone(o[0]):i.esriLang.clone(o[l-s]),e.color.a=t})),r()}))),a.addStyler(g),await f}function F(e,o,s,r,a){const{modules:n}=l.s,c=(0,l.z)(),p=(0,l.A)();c?G(o,(0,l.Y)(e),e,r,a):p?G(s,(0,l.Y)(e),e,r,a):function(e,o,s,r,a){const{mapView:n}=l.s,{onChange:c}=a,p=(0,l.b)(),u=(0,l.d)(p,"size","outline");e&&!u?(0,i.d)().then((e=>{if(e){const o=(0,l.b)();o.visualVariables=o.visualVariables||[],o.visualVariables.push(e),Y(e,n.scale,s,r)}c()})):!e&&u?(p.visualVariables=p.visualVariables.filter((e=>!("size"===e.type&&"outline"===e.target))),p.visualVariables&&!p.visualVariables.length&&(p.visualVariables=void 0),c()):(e&&function(e,o){const{mapView:s}=l.s,{onChange:r}=o,a=s.scale;let n=(0,l.b)();const c=(0,l.d)(n,"size","outline"),p=c.stops;if(0!==e&&0===p[p.length-2].size)(0,i.d)().then((o=>{if(o){const s=(0,t.g)(o,a);M(o,(0===e?Math.max(.5,e):e)/(0===s?Math.max(.5,s):s));const i=(0,l.U)((0,l.b)(),"size","outline")||[];i.push(o),(0,l.b)().visualVariables=i,r(),setTimeout((()=>{}),2e3)}}));else{const o=(0,t.g)(c,a),s=(0===e?Math.max(.5,e):e)/(0===o?Math.max(.5,o):o);M(c,s),0!==e&&0!==o||(!function(e,o,s){const l=e.stops,t=l.length-1,i=l[0].value,r=l[t].value;if(o<=i){for(let e=0;e<=t;e++)l[e].size=s;return}if(o>=r)return void(l[t].size=s);for(let e=0;e<t;e++){const i=l[e],r=l[e+1];if(o>=i.value&&o<r.value){for(let o=e+1;o<=t;o++)l[o].size=s;break}}}(c,a,e),c.stops.forEach(((e,o)=>{o>0&&e.size===c.stops[o-1].size&&(o===c.stops.length-1?o>1&&(c.stops[o-1].size=(c.stops[o-2].size+e.size)/2):e.size=(c.stops[o+1].size+c.stops[o-1].size)/2)})))}}(o,a),c())}(s,"cim"===e.type?(0,l.aG)(e):(0,l.Y)(e.outline||new n.SimpleLineSymbol),e,r,a)}function G(e,o,s,r,a){const{mapView:n}=l.s,{onChange:c}=a,p=(0,l.b)();o=Math.max(o,.1);const u=(0,l.d)(p,"size","auto");if(e&&!u)(0,i.b)().then((e=>{if(e){const o=(0,l.b)();if(o.visualVariables=o.visualVariables||[],o.visualVariables.push(e),(0,l.aB)(s)){M(e,(0,l.Y)(s)/(0,t.g)(e,n.scale))}Y(e,n.scale,s,r)}c()}));else if(!e&&u){const e=(0,l.U)(p,"size","auto");(null==e?void 0:e.length)?p.visualVariables=e:p.visualVariables=void 0,c()}else e&&function(e){const{mapView:o}=l.s,s=o.scale,i=(0,l.b)(),r=(0,l.d)(i,"size","auto"),a=(0,t.g)(r,s),n=e/a;M(r,n)}(o),c()}function M(e,o){e.stops.forEach((e=>{e.size*=o}))}function N(e,o,s){const{mapView:t,modules:i}=l.s;let r;return i.reactiveUtils.when((()=>t.stationary),(()=>{const i=t.scale;if(r!==i){const t=(0,l.b)(),a=(0,l.d)(t,"size","simple-fill"===e.type?"outline":"auto");a&&Y(a,i,e,o,s),r=i}}))}function Y(e,o,s,i,r){const a=(0,t.g)(e,o),n=["simple-line","simple-fill"].indexOf(s.type)>-1||(0,l.aB)(s)?"stroke":"marker";i.setSize(n,a),null==r||r(a)}function Z(e,o){return e&&(e.a=o),e}function D(e){var o,s,t;const{modules:i}=l.s;if((0,l.aB)(e))return{color:(null===(o=(0,l.R)(e))||void 0===o?void 0:o.clone())||new i.esriColor([255,255,255,.5]),size:null!==(s=(0,l.Y)(e))&&void 0!==s?s:1};{const o=(0,l.aC)(e);return{color:new i.esriColor(null==o?void 0:o.color)||new i.esriColor([255,255,255,.5]),size:null!==(t=null==o?void 0:o.width)&&void 0!==t?t:1}}}function J(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].indexOf(null==e?void 0:e.type)>-1}function X(e){return["simple-fill","simple-marker","simple-line","cim"].indexOf(e.type)>-1}}}]);