/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-efd36d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-efd36d"],{81635:(e,r,i)=>{i.r(r),i.d(r,{arcgis_privileges_picker:()=>j});var s=i(19564),a=i(66507),t=i(82297),o=i(96487),n=i(4948),l=i(69117);i(91102),i(73807),i(89261),i(98034),i(99004),i(57159),i(44508),i(65174),i(18991);function p(e){return{key:"general-members",heading:e.members,privileges:[{privilege:"portal:user:viewOrgUsers"}]}}function d(e,r){return{key:"general-groups",heading:e.groups,privileges:[{privilege:"portal:user:createGroup"},{privilege:"portal:user:joinGroup"},{privilege:"portal:user:joinNonOrgGroup",hidden:r},{privilege:"portal:user:viewOrgGroups"},{privilege:"portal:user:invitePartneredCollaborationMembers",dependencies:["portal:user:createGroup","portal:user:addExternalMembersToGroup"],hidden:r},{privilege:"portal:user:addExternalMembersToGroup",dependencies:["portal:user:createGroup"],hidden:r}]}}function u(e,r,i,s,a,t,o,n){return{key:"general-content",heading:e.content,privileges:[{privilege:"portal:user:createItem"},{privilege:"portal:publisher:publishFeatures",dependencies:["portal:user:createItem"]},{privilege:"portal:publisher:publishTiles",dependencies:["portal:user:createItem"]},{privilege:"portal:publisher:publishScenes",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"],hidden:!i.sceneViewerEnabled},{privilege:"portal:publisher:publishTiledImagery",dependencies:["portal:user:createItem"],hidden:r},{privilege:"portal:publisher:publishDynamicImagery",dependencies:["portal:user:createItem"]},{privilege:"portal:publisher:publishServerServices",dependencies:["portal:user:createItem"],removeDependencies:["portal:publisher:bulkPublishFromDataStores","portal:publisher:publishServerGPServices"],hidden:!r},{privilege:"portal:publisher:publishKnowledgeGraph",dependencies:["portal:user:createItem"],hidden:!r||!t},{privilege:"portal:user:viewOrgItems"},{privilege:"premium:publisher:createNotebooks",removeDependencies:["premium:publisher:scheduleNotebooks","premium:publisher:createAdvancedNotebooks"],hidden:!s},{privilege:"premium:publisher:scheduleNotebooks",dependencies:["premium:publisher:createNotebooks"],hidden:!s},{privilege:"portal:publisher:bulkPublishFromDataStores",dependencies:["portal:user:createItem","portal:publisher:publishServerServices"],hidden:!r||r&&!i.bulkPublishingEnabled},{privilege:"portal:publisher:registerDataStores",dependencies:["portal:user:createItem"],hidden:!r||r&&!i.bulkPublishingEnabled},{privilege:"portal:user:viewTracks",hidden:!i.locationTrackingUIEnabled},{privilege:"portal:user:reassignItems",dependencies:["portal:user:createItem","portal:user:viewOrgUsers"]},{privilege:"portal:user:receiveItems",dependencies:["portal:user:createItem"],hidden:"member"!==n},{privilege:"portal:publisher:publishFeeds",hidden:!a},{privilege:"portal:publisher:publishRealTimeAnalytics",hidden:!a},{privilege:"portal:publisher:publishBigDataAnalytics",hidden:!a},{privilege:"portal:publisher:createDataPipelines",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"],hidden:r},{privilege:"portal:publisher:publishLivestreamVideo",dependencies:["portal:user:createItem"],hidden:!r||!o},{privilege:"portal:publisher:publishVideo",dependencies:["portal:user:createItem"],hidden:!r||!o},{privilege:"portal:user:generateApiTokens",dependencies:["portal:user:createItem"],hidden:"member"!==n},{privilege:"portal:user:assignPrivilegesToApps",dependencies:["portal:user:createItem"],hidden:"member"!==n}]}}function c(e,r,i,s){var a,t;return{key:"general-sharing",heading:e.sharing,privileges:[{privilege:"portal:user:shareToGroup"},{privilege:"portal:user:shareToOrg"},{privilege:"portal:user:shareToPublic"},{privilege:"portal:user:shareGroupToOrg"},{privilege:"portal:user:shareGroupToPublic",hidden:!1===i.canSharePublic&&!s},{privilege:"opendata:user:designateGroup",dependencies:["portal:user:shareGroupToPublic"],hidden:r||!0!==(null===(t=null===(a=null==i?void 0:i.portalProperties)||void 0===a?void 0:a.openData)||void 0===t?void 0:t.enabled)}]}}function m(e,r){return{key:"location-basemaps-section",heading:e.basemaps,readonly:!0,privileges:[{privilege:"premium:user:basemaps",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/mapping/basemap-layers/#basemap-services",readonly:!0,hidden:r}]}}function g(e,r){return{key:"location-basemaps-section",heading:e.basemaps,privileges:[{privilege:"premium:user:basemaps",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/mapping/basemap-layers/#basemap-services",hidden:r},{privilege:"premium:user:staticbasemaptiles",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/mapping/basemap-layers/#basemap-services"}]}}function v(e){return{key:"location-static-maps-section",heading:e.staticMaps,privileges:[{privilege:"premium:user:staticMaps",learnMoreLink:"https://developers.arcgis.com/rest/static-maps-service/"}]}}function h(e){return{key:"location-places-section",heading:e.places,privileges:[{privilege:"premium:user:places",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/place-finding/"}]}}function b(e){return{key:"location-geocoding-section",heading:e.geocoding,privileges:[{privilege:"premium:user:geocode",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/geocoding/"}]}}function w(e){return{key:"location-geocoding-section",heading:e.geocoding,privileges:[{privilege:"premium:user:geocode:temporary",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/geocoding/geocode-addresses/#storage-parameter"},{privilege:"premium:user:geocode:stored",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/geocoding/geocode-addresses/#storage-parameter"}]}}function y(e){return{key:"location-routing-section",heading:e.routing,privileges:[{privilege:"premium:user:networkanalysis",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/"}]}}function f(e){return{key:"location-routing-section",heading:e.routing,privileges:[{privilege:"premium:user:networkanalysis:routing",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/route-and-directions/"},{privilege:"premium:user:networkanalysis:optimizedrouting",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/optimized-routing/"},{privilege:"premium:user:networkanalysis:vehiclerouting",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/fleet-routing/"},{privilege:"premium:user:networkanalysis:servicearea",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/service-areas/"},{privilege:"premium:user:networkanalysis:closestfacility",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/closest-facility-routing/"},{privilege:"premium:user:networkanalysis:locationallocation",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/location-allocation/"},{privilege:"premium:user:networkanalysis:origindestinationcostmatrix",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/routing-and-directions/travel-cost-matrix/"},{privilege:"premium:user:networkanalysis:lastmiledelivery",learnMoreLink:"https://developers.arcgis.com/rest/routing/last-mile-delivery-service/"}]}}function k(e){return{key:"location-data-enrich-section",heading:e.dataEnrichment,privileges:[{privilege:"premium:user:geoenrichment",learnMoreLink:"https://developers.arcgis.com/documentation/mapping-and-location-services/data-enrichment/"}]}}function I(e){return{key:"location-elevation-section",heading:e.elevation,privileges:[{privilege:"premium:user:elevation",learnMoreLink:"https://developers.arcgis.com/rest/elevation-service/"}]}}function P(e,r,i){return{key:"general-premium",heading:e.premiumContent,privileges:[{privilege:"premium:publisher:createAdvancedNotebooks",dependencies:["premium:publisher:createNotebooks"],hidden:!i},{privilege:"premium:user:demographics",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"],hidden:r},{privilege:"premium:user:featurereport",dependencies:["portal:user:createItem"],hidden:r}]}}function S(e,r,i,s,a){return{key:"general-premium",heading:r?e.contentAndAnalysis:e.premiumContentServices,privileges:[{privilege:"premium:user:geocode",hidden:"member"!==a},{privilege:"premium:user:networkanalysis",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"]},{privilege:"premium:user:spatialanalysis",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"]},{privilege:"premium:user:geoenrichment",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"]},{privilege:"premium:user:demographics",dependencies:["portal:user:createItem","portal:publisher:publishFeatures"],hidden:r},{privilege:"premium:publisher:geoanalytics",hidden:!r},{privilege:"premium:publisher:rasteranalysis",dependencies:["portal:user:createItem","portal:publisher:publishFeatures","portal:publisher:publishTiledImagery"]},{privilege:"premium:publisher:createAdvancedNotebooks",dependencies:["premium:publisher:createNotebooks"],hidden:!i},{privilege:"portal:user:runWebTool",hidden:!i},{privilege:"premium:user:featurereport",dependencies:["portal:user:createItem"],hidden:r},{privilege:"premium:user:realitymapping",dependencies:["features:user:edit","portal:publisher:publishDynamicImagery","portal:publisher:publishFeatures","portal:publisher:publishScenes","portal:publisher:publishServerServices","portal:user:createGroup","portal:user:createItem","portal:user:joinGroup","portal:user:shareToGroup","portal:user:viewOrgGroups","portal:user:viewOrgItems","portal:user:viewOrgUsers"],hidden:!r||!s},{privilege:"premium:user:networkanalysis:lastmiledelivery"},{privilege:"premium:user:staticbasemaptiles",hidden:"member"===a}]}}function T(e){return{key:"general-features",heading:e.features,privileges:[{privilege:"features:user:edit"},{privilege:"features:user:fullEdit",dependencies:["features:user:edit"]}]}}function U(e,r){return{key:"general-version",heading:e.versionMgmt,hidden:!r,privileges:[{privilege:"features:user:manageVersions",dependencies:["features:user:edit","features:user:fullEdit"],hidden:!r}]}}function G(e,r){return{key:"general-webhooks",heading:e.webhooks,hidden:!r,privileges:[{privilege:"portal:publisher:createFeatureWebhook",dependencies:["portal:user:createItem","portal:publisher:publishFeatures","portal:publisher:publishServerServices"],hidden:!r}]}}function O(e){return{key:"admin-members",heading:e.members,privileges:[{privilege:"portal:admin:viewUsers",dependencies:["portal:user:viewOrgUsers"]},{privilege:"portal:admin:updateUsers",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:deleteUsers",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:inviteUsers",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:disableUsers",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:changeUserRoles",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:manageLicenses",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"portal:admin:updateMemberCategorySchema",dependencies:["portal:admin:updateUsers"]}]}}function C(e){return{key:"admin-groups",heading:e.groups,privileges:[{privilege:"portal:admin:viewGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:admin:viewUsers"]},{privilege:"portal:admin:updateGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:createGroup","portal:admin:viewUsers","portal:admin:viewGroups"]},{privilege:"portal:admin:deleteGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:createGroup","portal:admin:viewUsers","portal:admin:viewGroups"]},{privilege:"portal:admin:reassignGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:admin:viewUsers","portal:admin:viewGroups"]},{privilege:"portal:admin:assignToGroups",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:createGroup","portal:user:invitePartneredCollaborationMembers","portal:user:addExternalMembersToGroup","portal:admin:viewUsers","portal:admin:viewGroups"]},{privilege:"portal:admin:manageEnterpriseGroups"},{privilege:"portal:admin:createUpdateCapableGroup",dependencies:["portal:user:createGroup"]},{privilege:"portal:admin:createLeavingDisallowedGroup",dependencies:["portal:user:createGroup"]}]}}function M(e){return{key:"admin-content",heading:e.content,privileges:[{privilege:"portal:admin:viewItems",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:admin:viewUsers"]},{privilege:"portal:admin:updateItems",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:user:createItem","portal:admin:viewUsers","portal:admin:viewItems"]},{privilege:"portal:admin:deleteItems",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:user:createItem","portal:admin:viewUsers","portal:admin:viewItems"]},{privilege:"portal:admin:reassignItems",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:admin:viewUsers","portal:admin:viewItems"]},{privilege:"portal:admin:updateItemCategorySchema",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:user:createItem","portal:admin:viewUsers","portal:admin:viewGroups","portal:admin:viewItems","portal:admin:updateItems"]},{privilege:"portal:publisher:publishServerGPServices",dependencies:["portal:user:runWebTool"]},{privilege:"portal:admin:shareToOrg",dependencies:["portal:user:viewOrgItems","portal:user:shareToOrg","portal:admin:viewUsers","portal:admin:viewItems","portal:admin:viewGroups"]},{privilege:"portal:admin:shareToPublic",dependencies:["portal:user:viewOrgItems","portal:user:shareToPublic","portal:admin:viewUsers","portal:admin:viewItems","portal:admin:viewGroups"]},{privilege:"portal:admin:createReports",dependencies:["portal:user:createItem","portal:admin:viewGroups","portal:admin:viewItems","portal:admin:viewUsers"]}]}}function E(e){return{key:"admin-marketplace",heading:e.marketplaceSubscriptions,privileges:[{privilege:"marketplace:admin:manage",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers"]},{privilege:"marketplace:admin:purchase",dependencies:["portal:user:createGroup","portal:user:joinGroup","portal:user:shareToGroup","marketplace:admin:startTrial"]},{privilege:"marketplace:admin:startTrial",dependencies:["portal:user:createGroup","portal:user:joinGroup","portal:user:shareToGroup"]}]}}function L(e,r,i){const s=["portal:user:viewOrgItems","portal:user:viewOrgUsers","portal:admin:viewItems","portal:admin:viewUsers","portal:user:viewOrgGroups","portal:admin:viewGroups"],a=[...s,"portal:admin:updateUsers","portal:admin:changeUserRoles","portal:admin:manageLicenses"];return{key:"admin-settings",heading:e.orgSettings,privileges:[{privilege:"portal:admin:manageSecurity",dependencies:r?a:s,hidden:"locationPlatform"===i},{privilege:"portal:admin:manageWebsite",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:viewOrgItems","portal:user:createItem","portal:user:createGroup","portal:user:shareToGroup","portal:user:shareToOrg","portal:user:shareToPublic","portal:user:shareGroupToOrg","portal:user:shareGroupToPublic","portal:admin:viewUsers","portal:admin:viewGroups","portal:admin:viewItems","portal:admin:updateGroups","portal:admin:updateItems","portal:admin:updateItemCategorySchema","portal:admin:shareToOrg","portal:admin:shareToPublic"]},{privilege:"portal:admin:manageCollaborations",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgGroups","portal:user:viewOrgItems","portal:user:createItem","portal:user:createGroup","portal:publisher:publishFeatures","portal:user:shareToGroup","portal:admin:viewUsers","portal:admin:viewGroups","portal:admin:updateGroups","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"]},{privilege:"portal:admin:manageCredits",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers","portal:admin:updateUsers"],hidden:r||"locationPlatform"===i},{privilege:"portal:admin:manageRoles",dependencies:["portal:user:viewOrgUsers","portal:admin:viewUsers","portal:admin:changeUserRoles"]},{privilege:"portal:admin:manageServers",dependencies:["portal:user:createItem","portal:user:viewOrgUsers","portal:admin:manageUtilityServices"],hidden:!r},{privilege:"portal:admin:manageUtilityServices",dependencies:["portal:user:viewOrgUsers","portal:user:createItem","portal:publisher:publishFeatures","portal:user:viewOrgItems","portal:user:shareToOrg"]},{privilege:"portal:admin:manageWebhooks",dependencies:["portal:user:viewOrgUsers","portal:user:viewOrgItems","portal:user:viewOrgGroups","portal:user:createItem","portal:publisher:publishFeatures","portal:publisher:publishServerServices","portal:publisher:publishServerGPServices","portal:publisher:createFeatureWebhook","portal:admin:viewUsers","portal:admin:viewGroups","portal:admin:viewItems","portal:admin:createGPWebhook"],hidden:!r}]}}function A(e,r){return{key:"admin-webhooks",heading:e.webhooks,hidden:!r,privileges:[{privilege:"portal:admin:createGPWebhook",dependencies:["portal:publisher:publishServerGPServices"],hidden:!r}]}}function F(e,r,i,s,a,t,o,n,l,m,g){return{key:"general-privileges",heading:e.generalPrivileges,sections:[p(e),d(e,i),u(e,i,s,a,t,o,n,g),c(e,i,r,m),..."locationPlatform"!==g?["app"===g?P(e,i,a):S(e,i,a,l,g)]:[],T(e),U(e,i),G(e,i)]}}function x(e,r,i){return{key:"admin-privileges",heading:e.adminPrivileges,sections:[O(e),C(e),M(e),..."member"===i?[E(e)]:[],L(e,r,i),A(e,r)]}}function D(e,r){return{key:"location-services-privileges",heading:e.locationServices,sections:[m(e,r),b(e),y(e),k(e)]}}function N(e,r){return{key:"location-services-privileges",heading:e.locationServices,sections:[g(e,r),v(e),h(e),w(e),f(e),k(e),I(e)]}}function B(e){return{key:"spatial-analysis-feature-section",heading:e.featureAnalysis,privileges:[{privilege:"premium:user:spatialanalysis"}]}}function R(e){return{key:"spatial-analysis-image-section",heading:e.imageAnalysis,privileges:[{privilege:"premium:publisher:rasteranalysis"}]}}function _(e){return{key:"spatial-analysis-feature-section",heading:e.featureAnalysis,privileges:[{privilege:"premium:user:spatialanalysis",learnMoreLink:"https://developers.arcgis.com/documentation/spatial-analysis-services/feature-analysis/introduction/"}]}}function $(e){return{key:"spatial-analysis-privileges",heading:e.spatialPrivileges,sections:[B(e),R(e)]}}function W(e){return{key:"spatial-analysis-privileges",heading:e.spatialPrivileges,sections:[_(e)]}}function V(e,r,i,s){const a=e.privileges[r];let t="";return t="locationPlatform"===i?a.descriptionLocationPlatform||a.descriptionApp||a.description:"app"===i?a.descriptionApp||a.description||a.descriptionLocationPlatform:s&&a.descriptionPortal?a.descriptionPortal:a.description,{label:s&&a.labelPortal?a.labelPortal:a.label,description:t}}const j=class{constructor(e){(0,s.r)(this,e),this.arcgisPrivilegesPickerSelectChange=(0,s.c)(this,"arcgisPrivilegesPickerSelectChange",7),this.orgCapabilities=[],this.notebookServerConfigured=!1,this.handleSwitchChange=e=>{const r=e.target,i=this.privilegesRecords[r.value];if(r.checked&&!this.value.includes(r.value)){const e=[r.value],s=this.getAllDependencies(i);null==s||s.forEach((r=>{this.value.includes(r)||e.push(r)})),this.value=[...this.value,...e]}else{const e=this.getAllDependencies(i,!0);this.value=this.value.filter((i=>i!==r.value&&!(null==e?void 0:e.includes(i))))}this.arcgisPrivilegesPickerSelectChange.emit(this.value)},this.handleToggleAll=(e,r,i)=>{const s=[];if(this.configs.forEach((a=>{(a.key===e||i)&&a.sections.forEach((a=>{a.readonly||i&&a.key!==e||a.privileges.forEach((e=>{if(!e.hidden&&!e.readonly&&!s.includes(e.privilege)){s.push(e.privilege);const i=this.getAllDependencies(e,r);null==i||i.forEach((e=>{s.includes(e)||s.push(e)}))}}))}))})),r)this.value=this.value.filter((e=>!s.includes(e)));else{const e=[...this.value];s.forEach((r=>{e.includes(r)||e.push(r)})),this.value=e}this.arcgisPrivilegesPickerSelectChange.emit(this.value)},this.portalConfig=void 0,this.portal=void 0,this.user=void 0,this.limitToUserPrivileges=!1,this.value=[],this.maxContentHeight="",this.mode="member",this.isPersonalAPIToken=!1,this.readonly=!1,this.privilegesToShow=[],this.searchTerm=""}async componentWillLoad(){var e,r;const i=await(0,a.g)(this.el);this.strings=i[0];const{portalConfig:s,user:n,portal:l}=this,p=l.isPortal;let d;this.servers=await(0,t.b)(n,l),p||(d=await(0,o.a)(l),this.orgCapabilities=(null==d?void 0:d.orgCapabilities)||[]);const u=Boolean(l&&(l.supportsHostedNotebooks||(null===(e=l.sourceJSON)||void 0===e?void 0:e.supportsHostedNotebooks))),c=l&&(l.allowedBetaFeatures||(null===(r=l.sourceJSON)||void 0===r?void 0:r.allowedBetaFeatures));if(p)this.notebookServerConfigured=Boolean(s.notebookServerEnabled&&u);else{const e=["Trial Developer","Trial","Trial Press","Developer Subscription"],r=(null==d?void 0:d.type)&&-1!==e.indexOf(d.type);this.notebookServerConfigured=Boolean(s.notebookServerEnabled&&(!r||(null==c?void 0:c.includes("notebooks"))))}this.portal.isPortal||"app"!==this.mode||this.value.includes("premium:user:basemaps")||(this.value=[...this.value,"premium:user:basemaps"]),this.initConfig()}initConfig(){const e=this.portal.isPortal,r=e?this.checkServerFunction("VelocityServer"):this.orgCapabilities.some((e=>"velocity"===e.id)),i=this.checkServerFunction("KnowledgeServer"),s=this.checkServerFunction("VideoServer"),a=this.checkServerFunction("RealityServer"),t=this.value.includes("portal:user:shareGroupToPublic");this.configs=function(e,r,i,s,a,t,o,n,l,p,d,u,c,m,g){var v;let h=[..."locationPlatform"===c?[N(e,i)]:[],..."locationPlatform"===c?[W(e)]:[],..."app"!==c||i?[]:[D(e,i)],..."app"===c?[$(e)]:[],..."member"===c||m?[F(e,r,i,s,a,t,o,n,l,p,c)]:[],..."member"===c||m?[x(e,i,c)]:[]];const b=["marketplace:admin:manage","marketplace:admin:purchase","marketplace:admin:startTrial","portal:admin:manageEnterpriseGroups","portal:admin:createGPWebhook","portal:admin:manageServers","portal:admin:manageWebhooks","portal:admin:changeUserRoles","portal:admin:deleteUsers","portal:admin:disableUsers","portal:admin:inviteUsers","portal:admin:updateMemberCategorySchema","portal:admin:updateUsers","portal:admin:viewUsers","portal:admin:manageLicenses","portal:admin:manageRoles","portal:admin:shareToPublic","premium:publisher:geoanalytics","premium:user:geometry","premium:publisher:rasteranalysis","portal:publisher:publishDynamicImagery","portal:publisher:publishLivestreamVideo","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishServerServices","portal:publisher:publishVideo","portal:publisher:registerDataStores","portal:user:runWebTool","portal:publisher:createFeatureWebhook","portal:publisher:bulkPublishFromDataStores","portal:publisher:publishBigDataAnalytics","portal:publisher:publishFeeds","portal:publisher:publishKnowledgeGraph","features:user:manageVersions","portal:user:addExternalMembersToGroup","portal:user:createGroup","portal:user:invitePartneredCollaborationMembers","premium:publisher:createNotebooks","premium:publisher:scheduleNotebooks","premium:user:demographics","premium:publisher:createAdvancedNotebooks","premium:user:featurereport","opendata:user:designateGroup","premium:user:geocode","premium:user:networkanalysis"];return((null===(v=null==d?void 0:d.privileges)||void 0===v?void 0:v.length)&&u||(null==g?void 0:g.length)||"locationPlatform"===c)&&(h=h.filter((e=>(e.sections.forEach((e=>{e.privileges.forEach((e=>{var r;e.hidden||(e.hidden=u&&!(null===(r=null==d?void 0:d.privileges)||void 0===r?void 0:r.includes(e.privilege))||(null==g?void 0:g.length)&&!g.includes(e.privilege)||"locationPlatform"===c&&b.includes(e.privilege))})),e.hidden=e.privileges.every((e=>e.hidden))})),e.sections.some((e=>!e.hidden)))))),h.forEach((e=>{e.total=0,e.sections.forEach((r=>{r.total=0,r.privileges.forEach((i=>{i.hidden||(r.total++,e.total++)}))}))})),h}(this.strings,this.portal,e,this.portalConfig,this.notebookServerConfigured,r,i,s,a,t,this.user,this.limitToUserPrivileges,this.mode,this.isPersonalAPIToken,this.privilegesToShow),this.privilegesRecords=this.configs.reduce(((e,r)=>Object.assign(Object.assign({},e),r.sections.reduce(((e,r)=>r.privileges.reduce(((e,r)=>Object.assign(Object.assign({},e),{[r.privilege]:r})),e)),{}))),{})}filterBySearchTerm(){const e=this.searchTerm.trim().toLowerCase();this.configs.forEach((r=>{r.sections.forEach((r=>{this.sectionMatchesTerm(r,e)})),r.found=r.heading.toLowerCase().includes(e)||r.sections.some((e=>e.found))}))}sectionMatchesTerm(e,r){var i;e.privileges&&e.privileges.forEach((e=>{this.privilegesMatchesTerm(e,r)})),e.found=!e.hidden&&(e.heading.toLowerCase().includes(r)||Boolean(null===(i=e.privileges)||void 0===i?void 0:i.some((e=>e.found))))}privilegesMatchesTerm(e,r){var i,s;if(e.privilege){const a=V(this.strings,e.privilege,this.mode,this.portal.isPortal),t=(null===(i=a.label)||void 0===i?void 0:i.toLowerCase())||"",o=(null===(s=a.description)||void 0===s?void 0:s.toLowerCase())||"";e.found=!e.hidden&&(t.includes(r)||o.includes(r)||e.privilege.includes(r))}}checkServerFunction(e){var r;return null===(r=this.servers)||void 0===r?void 0:r.some((r=>{var i;return null===(i=r.serverFunction)||void 0===i?void 0:i.includes(e)}))}getAllDependencies(e,r,i=[]){const s=r?e.removeDependencies:e.dependencies;return e&&(null==s?void 0:s.length)?(s.forEach((e=>{const s=this.privilegesRecords[e];s&&!s.hidden&&(i.includes(e)||i.push(e),i=this.getAllDependencies(s,r,i))})),i):i}render(){this.configs.forEach((e=>{e.enabled=0,e.sections.forEach((r=>{r.enabled=0,r.privileges.forEach((i=>{!i.hidden&&this.value.includes(i.privilege)&&(r.enabled++,e.enabled++)}))}))})),this.filterBySearchTerm();const e=Boolean(this.searchTerm);return(0,s.h)("div",{key:"a309506b8c78aa7f93c5ac197923c798a91eb141"},!this.readonly&&(0,s.h)("calcite-input",{key:"1f5efc3c3e8850591827b91d02ea9bb011d0163a",type:"search",icon:"search",placeholder:this.strings.searchPrivileges,onCalciteInputInput:e=>{this.searchTerm=e.currentTarget.value}}),(0,s.h)("calcite-accordion",{key:"6b0d566bafd27664cc482918d546f9e5d95025cd",class:"main-wrapper",appearance:this.readonly?"solid":"transparent",iconPosition:"start",style:{"max-height":this.maxContentHeight||"auto"}},this.configs.filter((e=>e.found)).map((r=>{const i=this.isPersonalAPIToken&&!this.portal.isPortal&&("general-privileges"===r.key||"admin-privileges"===r.key);return(0,s.h)("calcite-accordion-item",{key:r.key,heading:r.heading,description:e?"":`${this.strings.enabledLabel} ${r.enabled}${this.readonly?"":`/${r.total}`}`,expanded:!0},(0,s.h)("div",{slot:"actions-end",class:{"actions-end-container":i}},i&&(0,s.h)("arcgis-item-badge",{scale:"s",portal:n.c.portal,user:n.c.user,badgeType:"Personal credential"}),!e&&!this.readonly&&(0,s.h)("calcite-switch",{class:"title-action",checked:r.enabled===r.total,onCalciteSwitchChange:e=>{const i=e.currentTarget.checked;this.handleToggleAll(r.key,!i)}})),(0,s.h)("calcite-accordion",{class:"main-section-container",appearance:"transparent",iconPosition:"start"},r.sections.filter((e=>!e.hidden&&e.found)).map((r=>(0,s.h)("calcite-accordion-item",{key:r.key,heading:r.heading,description:e?"":`${this.strings.enabledLabel} ${r.enabled}${this.readonly?"":`/${r.total}`}`,class:"accordion-section-item",expanded:this.readonly},r.readonly&&(0,s.h)("arcgis-information",{slot:"actions-end",class:"read-only-tooltip",label:this.strings.readOnlyBasemapsTooltip,heading:this.strings.readOnlyBasemapsTooltip,overlayPositioning:"fixed"}),!e&&!this.readonly&&(0,s.h)("calcite-switch",{slot:"actions-end",class:"section-action",checked:r.enabled===r.total,disabled:r.readonly,onCalciteSwitchChange:e=>{const i=e.currentTarget.checked;this.handleToggleAll(r.key,!i,!0)}}),(0,s.h)("div",{class:"privileges-container"},r.privileges.filter((e=>!e.hidden&&e.found)).map((e=>{const r=V(this.strings,e.privilege,this.mode,this.portal.isPortal);return(0,s.h)("calcite-label",{key:e.privilege,class:"privilege-row",layout:"inline-space-between"},(0,s.h)("div",null,(0,s.h)("div",{class:"privilege-title"},r.label,this.isPersonalAPIToken&&(!e.privilege.includes("premium")||l.p.includes(e.privilege))&&(0,s.h)("arcgis-item-badge",{scale:"s",portal:n.c.portal,user:n.c.user,badgeType:"Personal credential"})),(0,s.h)("div",{class:"privilege-desc"},r.description,"\xa0",e.learnMoreLink&&(0,s.h)("calcite-link",{href:e.learnMoreLink,target:"_blank"},this.strings.learnMore))),!this.readonly&&(0,s.h)("calcite-switch",{value:e.privilege,checked:this.value.includes(e.privilege),onCalciteSwitchChange:this.handleSwitchChange,disabled:e.readonly}))}))))))))}))))}get el(){return(0,s.d)(this)}};j.style=".main-wrapper{margin-top:1rem;overflow-y:auto}.main-section-container{margin-top:1rem}.title-action{margin-inline-start:1rem;margin-inline-end:1.5rem}.section-action{margin-inline-end:0.75rem}.accordion-section-item{margin-bottom:1rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-2);background-color:var(--calcite-color-foreground-1)}.enabled-label{margin-inline-end:0.5rem}.privileges-container{padding-top:0.5rem}.privilege-content-end{display:flex;align-items:center;gap:0.75rem}.privilege-row{margin-inline-start:1.75rem;padding-top:0.75rem;padding-bottom:0.75rem}.privilege-title{margin-bottom:0.25rem;display:flex;align-items:center;gap:0.75rem;font-weight:500}.privilege-desc{font-size:0.75rem}.sub-section{margin-inline-start:1.75rem;padding-bottom:0.5rem}.sub-section-heading{display:flex;padding-bottom:1rem}.sub-section-title{flex:1 1 0%}.read-only-tooltip{margin-inline-end:0.75rem}.actions-end-container{display:flex;align-items:center}::-webkit-scrollbar{width:14px}::-webkit-scrollbar-track{background-color:transparent}::-webkit-scrollbar-thumb{background-color:var(--calcite-color-border-1);border-radius:14px;border:4px solid transparent;background-clip:content-box}::-webkit-scrollbar-thumb:hover{background-color:var(--calcite-color-text-3)}"},69117:(e,r,i)=>{i.d(r,{a:()=>s,d:()=>t,i:()=>n,o:()=>a,p:()=>l,s:()=>o});const s=["basemap","geocodingNotStored","routing","serviceArea","geocodingStored","optimizedRouting","closestFacility","locationAllocation","multiVehicleRouting","costMatrix","places","geoEnrichment"],a=["geocodingNotStored"],t=["geocodingNotStored","routing","serviceArea"],o={basemap:"premium:user:basemaps",geocodingNotStored:"premium:user:geocode:temporary",routing:"premium:user:networkanalysis:routing",serviceArea:"premium:user:networkanalysis:servicearea",places:"premium:user:places",geocodingStored:"premium:user:geocode:stored",optimizedRouting:"premium:user:networkanalysis:optimizedrouting",closestFacility:"premium:user:networkanalysis:closestfacility",locationAllocation:"premium:user:networkanalysis:locationallocation",multiVehicleRouting:"premium:user:networkanalysis:vehiclerouting",costMatrix:"premium:user:networkanalysis:origindestinationcostmatrix",geoEnrichment:"premium:user:geoenrichment"},n=["features:user:edit","features:user:fullEdit","features:user:manageVersions","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems","portal:admin:categorizeItems","portal:admin:reassignItems","portal:admin:updateItemCategorySchema","portal:admin:updateItemClassificationSchema","portal:admin:viewUsers","portal:user:createItem","portal:user:categorizeItems","portal:user:reassignItems","portal:user:receiveItems","portal:user:viewTracks","portal:user:viewOrgItems","portal:user:viewHostedFeatureServices","portal:user:viewHostedTileServices","portal:user:viewOrgUsers"],l=["premium:publisher:createNotebooks","premium:publisher:scheduleNotebooks"]},82297:(e,r,i)=>{i.d(r,{a:()=>c,b:()=>d,c:()=>n,d:()=>l,e:()=>m,f:()=>t,g:()=>u,h:()=>o,i:()=>g,q:()=>p});var s=i(57159),a=i(44508);function t(e){var r;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(r=e.sourceJSON)||void 0===r?void 0:r.portalDeploymentType))}function o(e){var r,i;return e.isPortal?"modern"===(null===(i=e.portalProperties)||void 0===i?void 0:i.homePage)||function(e){var r;return e.isPortal&&"modernOnly"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)}(e):"modern"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)||function(e){const r=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=r}(e)}async function n(e){try{return{result:await(0,s.f)((()=>(0,s.r)(`${(0,a.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function l(e){return(0,s.f)((()=>(0,s.r)(`${(0,a.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function p(e={},r){return(0,s.r)(`${(0,a.g)(r)}/community/groups`,e)}const d=async(e,r)=>{var i;if(!e)return[];const t=`${(0,a.a)(null!==(i=r.restUrl)&&void 0!==i?i:r.portalUrl)}portals/self/servers`,o=await(0,s.f)((()=>(0,s.r)(t)),"selfServers",r.id);return null==o?void 0:o.servers},u=e=>c((0,a.c)(e)),c=e=>{var r;const i=`${(0,a.a)(null!==(r=(0,a.b)(e))&&void 0!==r?r:e)}info`;return(0,s.f)((()=>(0,s.r)(i,{},{addTokenManually:!1})),"portalInfo",i)};async function m(e,r){return!e.isPortal||await g(e,r)}async function g(e,r){if(!r||!e)return!1;if(!e.isPortal)return!0;const{result:i,error:a}=await(0,s.f)((()=>v(e,r)),"isPortalBackedBySDS",e.id);return!a&&i}const v=async(e,r)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await h(r,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},h=async(e,r)=>{var i;return(null!==(i=await d(e,r))&&void 0!==i?i:[]).filter((e=>e.isHosted))[0]}},96487:(e,r,i)=>{i.d(r,{a:()=>o,g:()=>n});var s=i(57159),a=i(44508),t=i(84873);const o=async e=>{try{return{result:await(0,s.r)(`${(0,a.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},n=async(e,r)=>await(0,s.f)((()=>o(e)),"subscriptionType",(0,t.g)(r))}}]);