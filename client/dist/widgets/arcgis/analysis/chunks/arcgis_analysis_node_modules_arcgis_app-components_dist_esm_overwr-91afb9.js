/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_overwr-91afb9.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_overwr-91afb9"],{44069:(e,l,s)=>{s.d(l,{A:()=>r,a:()=>i,b:()=>a,c:()=>n,d:()=>o,u:()=>t});const t=["esriFieldTypeOID","esriFieldTypeGlobalID"],r={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage","service definition":"serviceDefinition"},i={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},a={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},o=["zip","csv","xls","xlsx","geojson","gpkg","json","sd"],n=["zip","csv","xls","xlsx"]},68334:(e,l,s)=>{s.d(l,{a:()=>I,b:()=>S,c:()=>m,d:()=>T,f:()=>g,g:()=>k,p:()=>y,r:()=>w,u:()=>b});var t=s(17233),r=s(61191),i=s(18409),a=s(78537),o=s(62913),n=s(97018),c=s(66484),u=s(32198),d=s(44069),p=s(57159);const v=(e,l)=>{const s=e.querySelector(l);return(0,c.h)((null==s?void 0:s.innerHTML)||"")},f=(e,l)=>{const s=Object.assign({},l);s.name=e.name,s.sourceSR=e.sourceSR,s.targetSR=e.targetSR,s.fieldTypesVersion="V2";for(let e=0;e<s.tables.length;e++)"Review"!=s.tables[e].name&&(s.layers[s.layers.length]=s.tables[e]);for(let l of s.layers)s.layers[l.id]=Object.assign({},e.layers[l.id]);return s},y=async(e,l,s,r,i)=>{var o,n;const c=await m(e,s,r,i),u=(0,t.g)(await(0,t.f)(e.owner,s),s),d=await(0,a.p)({itemId:i.sourceData.id,user:r,portal:s,title:l,itemOwnerUrl:u},c);if(null==d?void 0:d.error)return{error:{code:"unhandledError"}};const p=null===(n=null===(o=d.result)||void 0===o?void 0:o.services)||void 0===n?void 0:n[0];return{result:{id:null==p?void 0:p.serviceItemId,jobId:null==p?void 0:p.jobId,serviceType:null==p?void 0:p.type,serviceUrl:null==p?void 0:p.serviceurl,overwriteStatus:""}}},m=async(e,l,s,t,r)=>{const{result:i}=await h(e,l,!1,s);return((e,l,s,t)=>{var r,i,a,o,n,c;let u;const p=s.publishParameters,v=null!==(r=s.sourceData)&&void 0!==r?r:l;if(s.cloudProviderInfo){const e=s.cloudProviderInfo;u="zip"===(null==e?void 0:e.mimeType)?null==e?void 0:e.zipItemType:d.b[null==e?void 0:e.mimeType]}else u=null===(i=s.sourceData)||void 0===i?void 0:i.type;const y={itemId:null!=t?t:v.id,filetype:d.A[u.toLowerCase()],overwrite:!0,deleteSourceItemUponCompletion:!!t};let m;const g=(null===(o=null===(a=null==s?void 0:s.adminServiceInfo)||void 0===a?void 0:a.adminServiceInfo)||void 0===o?void 0:o.name)||(null===(n=s.itemData)||void 0===n?void 0:n.title);switch(u){case"CSV":const s=Object.assign(Object.assign({},null===(c=e.layers)||void 0===c?void 0:c[0]),{fields:p.layerInfo.fields});m=Object.assign(Object.assign({layerInfo:s,name:p.name||g.replace(/ /g,"_")},p),e);break;case"Microsoft Excel":m=f(p,e);break;case"GeoJSON":case"GeoJson":m=Object.assign(Object.assign(Object.assign({},p),e),{name:g?g.replace(/ /g,"_"):l.title.replace(/ /g,"_"),fieldTypesVersion:"V2"});break;default:m=Object.assign(Object.assign(Object.assign({},p),e),{name:g?g.replace(/ /g,"_"):l.title.replace(/ /g,"_")})}return y.publishParameters=JSON.stringify(m),y})(i,e,t,r)},g=async(e,l,s)=>{var t;const r=(null===(t=s.file)||void 0===t?void 0:t.size)>i.M;try{return await b(e,l,{file:s.file,overwrite:s.overwrite,keepDescription:s.keepDescription,fileName:s.fileName,multipart:r,existingItemId:s.existingItemId}),await(0,a.c)({id:e.id,folder:"",success:!0}),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},b=async(e,l,s)=>{var t;const a=`${l}/items/${e.id}/update`,o=(null===(t=s.file)||void 0===t?void 0:t.size)>i.M,c=((e,l)=>{const s=!!l.overwrite,t=(e=>{const{name:l,title:s,tags:t,type:r,typeKeywords:i,accessInformation:a,licenseInfo:o,description:n,snippet:c,extent:u}=e;return{name:l,title:s,tags:t,type:r,typeKeywords:i,accessInformation:a,licenseInfo:o,description:n,snippet:c,extent:u}})(e),r=new FormData;return Object.keys(t).forEach((e=>{var s;"description"===e||"snippet"===e||"extent"===e?r.append(e,l.keepDescription?t[e]:""):r.append(e,null!==(s=t[e])&&void 0!==s?s:"")})),r.set("filename",l.fileName),r.set("multipart",String(l.multipart)),r.set("overwrite","true"),r.set("async","true"),r.set("file",l.file,e.title),s&&r.set("overwriteService","on"),r.set("useDescription","on"),r})(e,{file:s.file,overwrite:s.overwrite,keepDescription:s.keepDescription,fileName:s.fileName,multipart:o});return"Raster function template"!==e.type||s.keepDescription||await(async(e,l)=>{const s=l.get("file"),t=l.get("filename");if(!s||!t)return{error:{code:"unhandledError"}};const{extension:r}=(0,n.a)(t),i=new FileReader;return new Promise(((t,a)=>{i.onload=async s=>{var i;const a=s.target.result;if(!a)return t({});let o,n;if("rft.json"===r){const e=JSON.parse(a);({description:o,thumbnailEx:n}=e)}else if("rft.xml"===r){const e=(new DOMParser).parseFromString(a,"text/xml");o=v(e,"Description"),n=v(e,"ThumbnailEx")}if(!n||"string"==typeof n&&(null===(i=null==n?void 0:n.trim())||void 0===i?void 0:i.length)<1){const l=(0,u.a)(e);try{const e=await fetch(l);n=await e.blob()}catch(e){console.error(e)}}l.set("snippet",o);try{await e.updateThumbnail({thumbnail:n})}catch(e){console.error(e)}t({})},i.onerror=()=>{i.abort(),a({code:"unhandledError"})},i.readAsText(s)}))})(e,c),o?(r.a.id=e.id,await(0,i.B)({updateUrl:a,updateFormData:c,updateSourceDataId:e.id})):await(0,p.a)(a,c,{},"post")},h=async(e,l,s,t)=>{try{const{url:l}=e,s=await(0,p.r)(l),t=await(0,p.r)(l+"/layers"),r=null==t?void 0:t.layers.map((e=>(delete e.fields,e)));return s.tables=[...null==t?void 0:t.tables],s.layers=[...r],{result:s}}catch(r){return!s&&(499===(null==r?void 0:r.code)&&"Token Required"===(null==r?void 0:r.message)||403===r.code)&&t?h(e,l,!0,t):(console.error(r),{error:{code:"unhandledError"}})}},w=async e=>{let l=e.typeKeywords.toString();const s={title:e.title||"",tags:e.tags.toString()||""};-1!==e.typeKeywords.indexOf("Involved Lookup")&&(l+=",showUnmatchedAddresses",s.typeKeywords=l);try{return{result:await(0,o.u)(e.id,s)}}catch(e){return console.error("error:",e),{error:{code:"unhandledError"}}}},I=async(e,l,s)=>{const t=e.folderId||e.ownerFolder,r=`${l}/${t||""}/items/${e.id}/updateResources`,i=new FormData;i.set("file",s.file),i.set("resourcesPrefix","styles"),i.set("filename","root.json");try{return{result:await(0,p.a)(r,i,{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},S=async(e,l,s)=>{const t=e.folderId||e.ownerFolder,r=`${l}/${t||""}/items/${e.id}/addResources`,i=new FormData;i.set("file",s.file),i.set("resourcesPrefix","styles"),i.set("filename","root.json");try{return{result:await(0,p.a)(r,i,{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},T=async(e,l,s)=>{let t=["Cloud Drive"];const r=JSON.parse(e);"address"===r.locationType||r.layers[0]&&"address"===r.layers[0].locationType?(t.push("showUnmatchedAddresses"),t.push("Involved Lookup")):("none"===r.locationType||r.layers[0]&&"none"===r.layers[0].locationType)&&t.push("Table");const i=t.join(",");return await(0,o.u)(l.id,{folderId:(null==l?void 0:l.folderId)||l.ownerFolder,id:s,typeKeywords:i})};async function k(e){try{return{result:await e.connect()}}catch(e){return{error:{code:"unhandledError"}}}}},78537:(e,l,s)=>{s.d(l,{a:()=>p,c:()=>v,p:()=>y});var t=s(4948),r=s(61191),i=s(33861),a=s(11163),o=s(69058),n=s(11560),c=s(18409),u=s(62913),d=s(57159);async function p(e,l){var s,i,o,n,c;const d=null!==(s=null!=l?l:t.c.user)&&void 0!==s?s:t.c.portal.user,{cloudProviderResource:p,geoJSONResource:v,locationType:f,csvResource:y,existingItem:m}=r.a,{result:g}=await(0,u.a)(e.id),b=[...g.typeKeywords];if((p||v||y)&&b.push("Cloud Drive"),"address"===f&&b.push("showUnmatchedAddresses"),["3DTiles Package","3DTiles Service"].includes(g.type))if("3dTiles"===r.a.tileLayerPublishType)b.push(r.a.tilesLayer3dTilesLayerType);else if(m){const e=[...m.typeKeywords].find((e=>a.t.includes(e)));e&&b.push(e)}return(null===(o=null===(i=t.c.portal)||void 0===i?void 0:i.sourceJSON)||void 0===o?void 0:o.hasClassificationSchema)&&(r.a.classification.createdUser=t.c.user.username,r.a.classification.createdDate=Date.now()),(0,u.u)(e.id,Object.assign({typeKeywords:null==b?void 0:b.join(",")},(null===(c=null===(n=t.c.portal)||void 0===n?void 0:n.sourceJSON)||void 0===c?void 0:c.hasClassificationSchema)?{classification:JSON.stringify(r.a.classification)}:{}),d)}async function v(e){const l=await(0,c.g)(e.id,{success:e.success});if("failed"===l.status)throw new Error(l.statusMessage)}function f(e,l,s){const{selectedFields:t,timezone:i,analyzeResults:a,type:o}=r.a,c=a.publishParameters,u=(0,n.a)();u.fields=Object.keys(t).map((e=>{const l=t[e];var s;return s=l.type,["esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeSmallInteger"].includes(s)&&(l.sqlType=function(e){switch(e){case"esriFieldTypeDouble":return"sqlTypeDouble";case"esriFieldTypeInteger":case"esriFieldTypeOID":return"sqlTypeInteger";case"esriFieldTypeString":return"sqlTypeNVarchar";case"esriFieldTypeSingle":return"sqlTypeFloat";case"esriFieldTypeSmallInteger":return"sqlTypeSmallInt";case"esriFieldTypeDate":return"sqlTypeDate";default:return"sqlTypeOther"}}(l.type),delete l.length),l})),u.capabilities="Query",c.capabilities="Query",u.hasStaticData=!0,c.hasStaticData=!0,c.persistErrorRecordsForReview=!0,c.name=e;const d=(null==s?void 0:s.isPortal)?{timezone:i||"UTC"}:{ianaTimeZone:i||Intl.DateTimeFormat().resolvedOptions().timeZone||"GMT"};return l||"GeoJson"===o?u.dateFieldsTimeReference=d:c.dateFieldsTimeReference=d,c}async function y(e,l){var s,t,a,n;const{user:c,portal:u,title:p,itemId:v,extension:y,type:m,dataUrl:g,itemOwnerUrl:b}=e;null!=l||(l=Object.assign({},function(e,l,s,t,i,a){l=(0,o.a)(l);let n="Scene Service"===i?i:s.toLowerCase();"zip"===n&&(n=i);const c="Microsoft Excel"===i,u={name:l,maxRecordCount:2e3},d=("GeoJson"===i||"CSV"===i)&&a,p=r.a.cloudProvider||d?{deleteSourceItemUponCompletion:!0}:{},v=JSON.stringify(u),y=JSON.stringify(Object.assign(Object.assign(Object.assign({},u),{hasStaticData:!0,layerInfo:{capabilities:"Query"}}),"geojson"===n||"json"===n?{fieldTypesVersion:"V2"}:{}));switch(n){case"3tz":return{itemId:e,publishParameters:JSON.stringify({name:l}),filetype:"3DTilesPackage",outputType:"3DTilesService"};case"csv":case"xls":case"xlsx":return Object.assign({itemId:e,filetype:c?"excel":"csv",publishParameters:JSON.stringify(f(l,c,t))},p);case"featurecollection":return{itemId:e,filetype:"featureCollection",publishParameters:y};case"geojson":case"json":return Object.assign({itemId:e,filetype:"geojson",publishParameters:y},p);case"tpk":case"tpkx":return{itemId:e,filetype:"tilePackage",publishParameters:v,buildInitialCache:!0};case"vtpk":return{itemId:e,filetype:"vectortilepackage",publishParameters:v,outputType:"vectorTiles",buildInitialCache:!0};case"spk":case"slpk":return{itemId:e,filetype:"scenepackage",publishParameters:v,outputType:"sceneService",buildInitialCache:!0};case"Scene Service":return{itemId:e,filetype:"featureService",publishParameters:JSON.stringify({name:l,targetSR:{wkid:4326,latestWkid:4326}}),outputType:"sceneService",buildInitialCache:!1};case"sd":return{itemId:e,filetype:"serviceDefinition",buildInitialCache:!1};case"File Geodatabase":return Object.assign({itemId:e,filetype:"fileGeodatabase",publishParameters:y},p);case"Shapefile":return Object.assign({itemId:e,filetype:"shapefile",publishParameters:y},p);case"gpkg":return{itemId:e,filetype:"geoPackage",publishParameters:v};case"Image Collection":return{itemId:e,filetype:"imageCollection",outputType:"image service",publishParameters:v};default:return{itemId:e,publishParameters:v}}}(v,p,y,u,m,g)));const h=`${"append"===i.u.workflow?b:c.userContentUrl}/publish`;try{const e=await(0,d.r)(h,l,{},"post");if(e.services&&e.services.length){if(null===(t=null===(s=e.services[0])||void 0===s?void 0:s.error)||void 0===t?void 0:t.message)throw null===(n=null===(a=e.services[0])||void 0===a?void 0:a.error)||void 0===n?void 0:n.message;return{result:e}}throw this.i18n.errorPublishing}catch(e){return console.error(e),e.includes("Service name")?{error:{code:"serviceNameExists"}}:{error:{code:"unhandledError"}}}}},66484:(e,l,s)=>{s.d(l,{a:()=>n,c:()=>c,g:()=>i,h:()=>r,i:()=>a,r:()=>o});var t=s(91102);function r(e){const l=document.createElement("textarea");return l.innerHTML=e,l.innerText}function i(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,(e=>`<a href="${e}" target="_blank">${e}</a>`))}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function a(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function o(e,l,s){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${s}" href="${l}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function n(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function c(e){return(0,t.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},11163:(e,l,s)=>{s.d(l,{D:()=>i,T:()=>o,a:()=>u,b:()=>p,c:()=>v,d:()=>a,e:()=>n,f:()=>t,g:()=>c,p:()=>d,t:()=>r});const t=["standard","custom"],r=["IntegratedMesh","3DObject"],i=r[0],a=["vector","raster","3dTiles"],o=147914382,n=0,c=[{level:0,label:"1:591,657,528",scale:591657527.591555},{level:1,label:"1:295,828,764",scale:295828763.795777},{level:2,label:"1:147,914,382",scale:147914381.897889},{level:3,label:"1:73,957,191",scale:73957190.948944},{level:4,label:"1:36,978,595",scale:36978595.474472},{level:5,label:"1:18,489,298",scale:18489297.737236},{level:6,label:"1:9,244,649",scale:9244648.868618},{level:7,label:"1:4,622,324",scale:4622324.434309},{level:8,label:"1:2,311,162",scale:2311162.217155},{level:9,label:"1:1,155,581",scale:1155581.108577},{level:10,label:"1:577,791",scale:577790.554289},{level:11,label:"1:288,895",scale:288895.277144},{level:12,label:"1:144,448",scale:144447.638572},{level:13,label:"1:72,224",scale:72223.819286},{level:14,label:"1:36,112",scale:36111.909643},{level:15,label:"1:18,056",scale:18055.954822},{level:16,label:"1:9,028",scale:9027.977411},{level:17,label:"1:4,514",scale:4513.988705},{level:18,label:"1:2,257",scale:2256.994353},{level:19,label:"1:1,128",scale:1128.497176},{level:20,label:"1:564",scale:564.248588},{level:21,label:"1:282",scale:282.124294},{level:22,label:"1:141",scale:141.062147}],u={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:256,cols:256,dpi:96,preciseDpi:96,lods:[{level:0,resolution:156543.033928,scale:591657527.591555},{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147}]},d={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:512,cols:512,dpi:96,preciseDpi:96,lods:[{level:0,resolution:78271.51696399994,scale:295828763.795777},{level:1,resolution:39135.75848200009,scale:147914381.897889},{level:2,resolution:19567.87924099992,scale:73957190.948944},{level:3,resolution:9783.93962049996,scale:36978595.474472},{level:4,resolution:4891.96981024998,scale:18489297.737236},{level:5,resolution:2445.98490512499,scale:9244648.868618},{level:6,resolution:1222.992452562495,scale:4622324.434309},{level:7,resolution:611.4962262813797,scale:2311162.217155},{level:8,resolution:305.74811314055756,scale:1155581.108577},{level:9,resolution:152.87405657041106,scale:577790.554289},{level:10,resolution:76.43702828507324,scale:288895.277144},{level:11,resolution:38.21851414253662,scale:144447.638572},{level:12,resolution:19.10925707126831,scale:72223.819286},{level:13,resolution:9.554628535634155,scale:36111.909643},{level:14,resolution:4.77731426794937,scale:18055.954822},{level:15,resolution:2.388657133974685,scale:9027.977411},{level:16,resolution:1.1943285668550503,scale:4513.988705},{level:17,resolution:.5971642835598172,scale:2256.994353},{level:18,resolution:.29858214164761665,scale:1128.497176},{level:19,resolution:.14929107082380833,scale:564.248588},{level:20,resolution:.07464553541190416,scale:282.124294},{level:21,resolution:.03732276770595208,scale:141.062147},{level:22,resolution:.01866138385297604,scale:70.5310735},{level:23,resolution:.009330691929342804,scale:35.265536760789715}]},p={format:"indexedVector",compressionQuality:0,antialiasing:!1},v={format:"PNG32",compressionQuality:0,antialiasing:!0}}}]);