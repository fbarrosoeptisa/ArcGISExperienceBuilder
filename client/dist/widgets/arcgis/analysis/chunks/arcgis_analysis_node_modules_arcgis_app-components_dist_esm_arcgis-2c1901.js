/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-2c1901.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-2c1901"],{82717:(e,t,s)=>{s.r(t),s.d(t,{arcgis_effects:()=>L,arcgis_effects_popovers:()=>te});var r=s(19564),a=s(66507),l=s(89261),o=s(9421),i=s(26408),n=s(60496),c=s(98034),u=s(79241);s(91102),s(73807),s(12350),s(99004);const f="panel",h="notice",p="hint",d="basemap-type",g="radio-buttons",m="switch",y="list",v="effect-thumb",b="effect-thumb-img";function E(e){return null!=e}let S=["bloom","dropShadow","blur","brightnessContrast","grayscale","hueRotate","saturate","invert","sepia"],w=["dropShadow_gray","strongDropShadow","dropShadow_transparency","dropShadow_blur","mutedBlur","mutedGray"],C=["bloom_gray","bloom_blur","bloom_transparency","mutedBlur","mutedGray"];const x={bloom:{strength:2,radius:.75,threshold:.1},dropShadow:{line:{color:[0,0,0,255],xoffset:.75,yoffset:.75,blurRadius:1.125},point:{color:[0,0,0,255],xoffset:1.125,yoffset:1.125,blurRadius:1.875},polygon:{color:[0,0,0,255],xoffset:1.125,yoffset:1.125,blurRadius:2.25}},blur:{radius:1.5},brightness:{amount:1.5},contrast:{amount:2},grayscale:{amount:1},hueRotate:{angle:100},saturate:{amount:1},invert:{amount:1},sepia:{amount:.7}},P=JSON.parse(JSON.stringify(x)),_={dropShadow_gray:{included:[{type:"drop-shadow",color:[50,50,50,255],xoffset:1.5,yoffset:1.5,blurRadius:2.25}],excluded:[{type:"grayscale",amount:1},{type:"opacity",amount:.5}]},strongDropShadow:{included:[{type:"drop-shadow",color:[0,0,0,255],xoffset:3,yoffset:3,blurRadius:3}],excluded:[]},dropShadow_transparency:{included:[{type:"drop-shadow",color:[50,50,50,255],xoffset:1.5,yoffset:1.5,blurRadius:4.5}],excluded:[{type:"opacity",amount:.35}]},dropShadow_blur:{included:[{type:"drop-shadow",color:[50,50,50,255],xoffset:1.5,yoffset:1.5,blurRadius:2.25}],excluded:[{type:"blur",radius:2.25},{type:"opacity",amount:.5}]},bloom_gray:{included:[{type:"bloom",strength:1.3,radius:.6,threshold:0}],excluded:[{type:"grayscale",amount:1},{type:"opacity",amount:.5}]},bloom_blur:{included:[{type:"bloom",strength:1.3,radius:.6,threshold:0}],excluded:[{type:"blur",radius:2.25},{type:"opacity",amount:.5}]},bloom_transparency:{included:[{type:"bloom",strength:1.3,radius:.6,threshold:0}],excluded:[{type:"opacity",amount:.35}]},mutedBlur:{included:[],excluded:[{type:"blur",radius:2.25},{type:"opacity",amount:.5}]},mutedGray:{included:[],excluded:[{type:"grayscale",amount:1},{type:"opacity",amount:.5}]}};function N(e,t,s){const r=Array.from(e.children).filter((e=>{if("calcite-list-item"===e.tagName.toLowerCase()){return e.querySelector("calcite-switch").checked}return!1})).map((e=>function(e,t,s){const r=e.value;switch(r){case"bloom":return function(e,t){const s=e.querySelectorAll("calcite-input");let r=$(s[0]),a=$(s[1]),l=$(s[2]);if(!E(r)||!E(a)||!E(l))return null;r=Math.round(10*r)/10,a=F(Math.round(10*a)/10),l=Math.round(l),l/=100,P.bloom={strength:r,radius:a,threshold:l};const o=e.querySelector(".auto");if(o.checked){const{view:e}=t,s=e.scale,o=2,i=1/o;return[{scale:.25*s,value:`bloom(${r*o}, ${a*o}pt, ${l})`},{scale:s,value:`bloom(${r}, ${a}pt, ${l})`},{scale:4*s,value:`bloom(${r*i}, ${a*i}pt, ${l})`}]}return`bloom(${r}, ${a}pt, ${l})`}(t[r],s);case"dropShadow":return function(e,t){const s=e.querySelector("calcite-color-picker"),r=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(s.value),a=e.querySelectorAll("calcite-input");let l=$(a[0]),o=$(a[1]),i=$(a[2]),n=$(a[3]);if(!(E(s.value)&&E(l)&&E(o)&&E(i)&&E(n)))return null;l=F(Math.round(l)),o=F(Math.round(o)),i=F(Math.round(i)),n=Math.round(n),n/=100,P.dropShadow[T(t)]={color:[r.r,r.g,r.b,255*n],xoffset:o,yoffset:i,blurRadius:l};const c=`rgba(${r.r}, ${r.g}, ${r.b}, ${n})`,u=e.querySelector(".auto");if(u.checked){const{view:e}=t,s=e.scale,r=2,a=1/r;return[{scale:.25*s,value:`drop-shadow(${o*r}pt ${i*r}pt ${l*r}pt ${c})`},{scale:s,value:`drop-shadow(${o}pt ${i}pt ${l}pt ${c})`},{scale:4*s,value:`drop-shadow(${o*a}pt ${i*a}pt ${l*a}pt ${c})`}]}return`drop-shadow(${o}pt ${i}pt ${l}pt ${c})`}(t[r],s);case"blur":return function(e){const t=e.querySelector("calcite-input");let s=$(t);if(!E(s))return null;return s=F(Math.round(10*s)/10),P.blur={radius:s},`blur(${s}pt)`}(t[r]);case"brightnessContrast":return function(e){const t=e.querySelectorAll("calcite-input");let s=$(t[0]),r=$(t[1]);if(!E(s)||!E(r))return null;return s=Math.round(s)/100,r=Math.round(r)/100,P.brightness={amount:s},P.contrast={amount:r},`brightness(${s}) contrast(${r})`}(t[r]);case"grayscale":return function(e){const t=e.querySelector("calcite-input");let s=$(t);if(!E(s))return null;return s=Math.round(s)/100,P.grayscale={amount:s},`grayscale(${s})`}(t[r]);case"hueRotate":return function(e){const t=e.querySelector("calcite-input");let s=$(t);if(!E(s))return null;return s=Math.round(s),P.hueRotate={angle:s},`hue-rotate(${s}deg)`}(t[r]);case"saturate":return function(e){const t=e.querySelector("calcite-input");let s=$(t);if(!E(s))return null;return s=Math.round(s)/100,P.saturate={amount:s},`saturate(${s})`}(t[r]);case"invert":return function(e){const t=e.querySelector("calcite-input");let s=$(t);if(!E(s))return null;return s=Math.round(s)/100,P.invert={amount:s},`invert(${s})`}(t[r]);case"sepia":return function(e){const t=e.querySelector("calcite-input");let s=$(t);if(!E(s))return null;return s=Math.round(s)/100,P.sepia={amount:s},`sepia(${s})`}(t[r])}}(e,t,s)));let a,l="",o="";return r.forEach((e=>{e&&"string"==typeof e?a?a.forEach((t=>{t.value+=o+e})):l+=o+e:e&&"object"==typeof e&&(a?a.forEach((t=>{Array.from(e).filter((e=>t.scale===e.scale)).forEach((e=>t.value+=o+e.value))})):(a=e,a.forEach((e=>{e.value=l+o+e.value})))),o=" "})),a||l}function k(e){const{layer:t,modules:s,supportsFeatureEffects:r}=e,a=t;if(a.effect&&a.featureEffect)throw new Error("unsupported effect");if(a.featureEffect&&!r)throw new Error("unsupported effect");if(a.effect){const e=a.effect;if("string"==typeof e)return s.effectsUtils.toJSON(e);if(3===e.length){if(function(e){const t=[e[0].value,e[1].value,e[2].value];return!S.some((e=>{if("brightnessContrast"===e){const e="brightness",s="contrast";return t[0].indexOf(e)>-1&&t[0].indexOf(s)>-1?-1===t[1].indexOf(e)||-1===t[2].indexOf(e)||-1===t[1].indexOf(s)||-1===t[2].indexOf(s):-1!==t[0].indexOf(e)||-1!==t[0].indexOf(s)||(t[1].indexOf(e)>-1||t[2].indexOf(e)>-1||t[1].indexOf(s)>-1||t[2].indexOf(s)>-1)}{const s=M(e);return t[0].indexOf(s)>-1?-1===t[1].indexOf(s)||-1===t[2].indexOf(s):t[1].indexOf(s)>-1||t[2].indexOf(s)>-1}}))}(e))return s.effectsUtils.toJSON(e[1].value);throw new Error("unsupported effect")}throw new Error("unsupported effect")}if(a.featureEffect){const e=a.featureEffect;if(!e.excludedLabelsVisible||e.includedEffect&&"string"!=typeof e.includedEffect||e.excludedEffect&&"string"!=typeof e.excludedEffect||e.filter&&e.filter.geometry)throw new Error("unsupported effect");{const t=e.toJSON(),s=e.includedEffect?t.includedEffect:[],r=e.excludedEffect?t.excludedEffect:[];let a,l;for(a in _){const e=_[a];if(A(e.included,s)&&A(e.excluded,r)){l=a;break}}return l}}return null}function I(e,t){var s,r;const{effectsJSON:a}=t,l=a&&(null===(r=null===(s=Array.from(a))||void 0===s?void 0:s.filter((t=>t.type===M(e))))||void 0===r?void 0:r[0]);if(!l){if("dropShadow"===e){let s=T(t);return P[e][s]}return P[e]}return l}function T(e){const{layer:t}=e;let s="point";const r=t;return"csv"===t.type?s="point":r.geometryType&&(s="polyline"===r.geometryType?"line":["point","multipoint"].includes(r.geometryType)?"point":"polygon"),s}function M(e){switch(e){case"dropShadow":return"drop-shadow";case"hueRotate":return"hue-rotate";case"brightnessContrast":return"brightness";default:return e}}function O(e,t,s){const{modules:r}=s,{FeatureEffect:a}=r,l=_[e];return a.fromJSON({filter:{where:t},includedEffect:l.included,excludedEffect:l.excluded,showExcludedLabels:!0})}function A(e,t){const s=JSON.parse(JSON.stringify(e)),r=JSON.parse(JSON.stringify(t));if(s.length!==r.length)return!1;s.sort(((e,t)=>e.type.localeCompare(t.type))),r.sort(((e,t)=>e.type.localeCompare(t.type)));let a=!0;for(let e=0;e<s.length;e++){const t=s[e],l=r[e];if(Object.keys(t).length!==Object.keys(l).length){a=!1;break}for(let e in t)if(("string"!=typeof t[e]||"string"!=typeof l[e]||t[e]!==l[e])&&!("number"==typeof t[e]&&"number"==typeof l[e]&&t[e]===l[e]||t[e].length&&t[e].length===l[e].length&&t[e].every(((t,s)=>t===l[e][s])))){a=!1;break}if(!a)break}return a}function $(e){const t=Number(e.value);if(!E(t))return null;const s=Math.min(e.max,Math.max(e.min,t));return e.value=`${s}`,s}function F(e){return Math.round(1e3*(0,n.p)(e))/1e3}var q=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,s=e[Symbol.asyncIterator];return s?s.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=e[s]&&function(t){return new Promise((function(r,a){(function(e,t,s,r){Promise.resolve(r).then((function(t){e({value:t,done:s})}),t)})(r,a,(t=e[s](t)).done,t.value)}))}}};const L=class{constructor(e){(0,r.r)(this,e),this.arcgisEffectsClose=(0,r.c)(this,"arcgisEffectsClose",7),this.arcgisEffectsChange=(0,r.c)(this,"arcgisEffectsChange",7),this.arcgisEffectsApplyLayerEffect=(0,r.c)(this,"arcgisEffectsApplyLayerEffect",7),this.popovers=[],this.imagesPath="../arcgis-app-assets/images/effects/test.jpg",this.afterCreatePanel=e=>{this.panelNode=e},this.onSwitchEffectType=async e=>{const{props:t,popovers:s}=this,r=t.layer,a=e.target;let l;for(l in s){(await this.getPopover(l)).open=!1}if("layer"===a.selectedItem.value)this.lastFeatureEffect=r.featureEffect||this.lastFeatureEffect,r.featureEffect=null,r.effect=this.lastLayerEffect,this.showFeatureEffects=!1;else{if(this.lastLayerEffect=r.effect,r.effect=null,this.lastFeatureEffect)r.featureEffect=this.lastFeatureEffect,t.featureEffectType=k(t);else{const{backgroundTheme:e}=t;await this.selectFeatureEffectType("light"===e?w[0]:C[0])}this.showFeatureEffects=!0;const e=await this.getPopover("featureEffect");e.open=!0,e.updateHeader(t.featureEffectType),setTimeout((()=>e.setFocus()),300)}this.reRender=!this.reRender},this.onRemoveEffect=()=>{const{props:e}=this,{layer:t}=e;t.effect=null,t.featureEffect=null,this.isUnsupported=!1},this.onSwitchChange=async e=>{const t=e.target,s=(0,o.q)(t,"calcite-list-item"),r=s.value;if(!t.checked){(await this.getPopover(r)).open=!1,s.selected=!1}this.arcgisEffectsApplyLayerEffect.emit({type:r,keepSwitch:!0})},this.onFeatureEffectEnabledSwitchChange=async e=>{const{props:t,lightListNode:s,darkListNode:r}=this,a=t.layer;if(e.target.checked){if(this.lastFeatureEffect)a.featureEffect=this.lastFeatureEffect,t.featureEffectType=k(t);else{const{backgroundTheme:e}=t;t.featureEffectType="light"===e?w[0]:C[0]}null==s||s.querySelectorAll("calcite-list-item").forEach((e=>{e.value===t.featureEffectType&&(e.selected=!0)})),null==r||r.querySelectorAll("calcite-list-item").forEach((e=>{e.value===t.featureEffectType&&(e.selected=!0)})),await this.selectFeatureEffectType(t.featureEffectType)}else{(await this.getPopover("featureEffect")).open=!1,null==s||s.querySelectorAll("calcite-list-item").forEach((e=>e.selected=!1)),null==r||r.querySelectorAll("calcite-list-item").forEach((e=>e.selected=!1)),this.lastFeatureEffect=a.featureEffect,a.featureEffect=null,this.arcgisEffectsChange.emit()}},this.openPopover=async e=>{const{popovers:t}=this,s=e.target,r=s.tagName.toLowerCase();let a;if("img"===r)a=(0,o.q)(s,"calcite-list-item");else if("calcite-switch"===r){if(!s.checked)return;a=(0,o.q)(s,"calcite-list-item")}else{if("calcite-list-item"!==r)return;a=s}a.selected=!0;const l=a.value;if(w.concat(C).indexOf(l)>-1)await this.selectFeatureEffectType(l,a);else{const e=a.querySelector("calcite-switch"),s=await this.getPopover(l);if(s.open)s.open=!1,e.checked=!1,a.selected=!1,this.arcgisEffectsApplyLayerEffect.emit();else{let r;for(r in e.checked||(e.checked=!0,this.arcgisEffectsApplyLayerEffect.emit()),t)t[r].open=!1;s.open=!0}}},this.view=void 0,this.layer=void 0,this.hideLayerTitle=!1,this.props=void 0,this.reRender=!1,this.isUnsupported=!1,this.showFeatureEffects=!1}arcgisEffectsApplyLayerEffectHandler(e){var t,s;const{props:r,listNode:a}=this,{layer:l}=r,o=null===(t=e.detail)||void 0===t?void 0:t.type;if(o&&!(null===(s=e.detail)||void 0===s?void 0:s.keepSwitch)){Array.from(a.querySelectorAll("calcite-list-item")).filter((e=>e.value===o))[0].querySelector("calcite-switch").checked=!0}const i=N(this.listNode,this.popovers,r);l.effect=i,this.arcgisEffectsChange.emit(),r.effectsJSON=k(r)}arcgisEffectsPopoverFilterChangeHandler(e){const{props:t,hostElement:s}=this,{layer:r}=t,a=e.detail,l=Array.from(s.shadowRoot.querySelectorAll("calcite-list-item")).find((e=>e.selected)),o=null==l?void 0:l.value;if(o){if(S.find((e=>e===o)))return;r.featureEffect=O(o,a,t),this.arcgisEffectsChange.emit()}else this.defaultWhere=a}arcgisEffectsPopoverCloseHandler(){const{listNode:e,lightListNode:t,darkListNode:s}=this;null==e||e.querySelectorAll("calcite-list-item").forEach((e=>{e.selected&&(e.selected=!1,setTimeout((()=>e.setFocus()),100))})),null==t||t.querySelectorAll("calcite-list-item").forEach((e=>{e.selected&&setTimeout((()=>e.setFocus()),100)})),null==s||s.querySelectorAll("calcite-list-item").forEach((e=>{e.selected&&setTimeout((()=>e.setFocus()),100)}))}async setFocus(e){var t,s;e&&"dismiss-button"!==e?null===(s=this.listNode)||void 0===s||s.setFocus():null===(t=this.panelNode)||void 0===t||t.setFocus()}async done(){const{popovers:e}=this;let t;for(t in e)e[t].open=!1;document.body.querySelectorAll("arcgis-effects-popovers").forEach((e=>e.parentNode.removeChild(e)))}async componentWillLoad(){const{view:e,layer:t}=this,[s,r]=await(0,a.g)(this.hostElement);this.strings=s;const l=!t.featureReduction&&["feature","geojson","ogc-feature","wfs","csv","stream","oriented-imagery","knowledge-graph-sublayer"].indexOf(t.type)>-1;this.props={view:e,layer:t,strings:s,supportsFeatureEffects:l};const{props:o}=this;o.locale=r;const[i,n,u]=await(0,c.l)(["esri/layers/support/FeatureEffect","esri/layers/effects/jsonUtils","esri/views/support/colorUtils"]);o.modules={FeatureEffect:i,effectsUtils:n},o.backgroundTheme=e&&await u.getBackgroundColorTheme(e);try{const e=t;e.effect&&e.featureEffect?this.isUnsupported=!0:e.effect?(o.effectsJSON=k(o),function(e){const{effectsJSON:t}=e;if(!t)return;const s=t.map((e=>e.type));S.sort(((e,t)=>{const r=s.indexOf(M(e)),a=s.indexOf(M(t));return r>-1&&a>-1&&r<a?-1:r>-1&&a>-1&&r>a?1:r>-1?-1:a>-1?1:0}))}(o)):e.featureEffect&&(o.featureEffectType=k(o))}catch(e){this.isUnsupported=!0}}componentDidLoad(){requestAnimationFrame((()=>this.setFocus())),this.createPopovers()}disconnectedCallback(){this.done()}render(){const{isUnsupported:e}=this;return(0,r.h)(r.H,{key:"9ebb4ceb2032ac0f6473766f054243da2a6095f1",class:"calcite-match-height"},e?this.renderUnsupported():this.renderContent())}renderUnsupported(){const{props:e,hideLayerTitle:t}=this,{layer:s,strings:a}=e,o="rtl"===(0,l.g)(this.hostElement);return(0,r.h)("calcite-panel",{heading:a.general.effects,description:t?void 0:s.title,class:{[f]:!0,[l.C.rtl]:o},closable:!0,onCalcitePanelClose:()=>{this.arcgisEffectsClose.emit()},ref:e=>this.panelNode=e},(0,r.h)("calcite-tip",{heading:a.error.title,closeDisabled:!0},(0,r.h)("div",null,a.error.text1),(0,r.h)("div",null,a.error.text2)),(0,r.h)("calcite-fab",{class:"autofocus",slot:"fab",appearance:"outline-fill",kind:"neutral",scale:"s",textEnabled:!0,icon:null,label:a.error.button,text:a.error.button,onClick:this.onRemoveEffect}))}renderContent(){const{props:e,hideLayerTitle:t,showFeatureEffects:s}=this,{layer:a,supportsFeatureEffects:o,strings:i}=e,n="rtl"===(0,l.g)(this.hostElement),c=o&&!!a.featureEffect;return(0,r.h)("calcite-panel",{heading:i.general.effects,description:t?void 0:a.title,class:{[f]:!0,[l.C.rtl]:n},closable:!0,onCalcitePanelClose:()=>{const{popovers:e}=this;let t;for(t in e)e[t].open=!1;this.arcgisEffectsClose.emit()},ref:this.afterCreatePanel},this.renderTip(),o?(0,r.h)("div",{class:g},(0,r.h)("calcite-segmented-control",{layout:"horizontal",appearance:"solid",scale:"s",width:"full",onCalciteSegmentedControlChange:this.onSwitchEffectType},(0,r.h)("calcite-segmented-control-item",{value:"layer",checked:!(c||s)},i.general.wholeLayer),(0,r.h)("calcite-segmented-control-item",{value:"feature",checked:c||s},i.general.featureSpecific))):null,c||s?this.renderFeatureEffectsContent():this.renderLayerEffectsContent())}renderTip(){const{props:e}=this,{strings:t}=e;return(0,u.g)(u.l.ARCGIS_COMPONENT_NOTIFICATIONS,u.a.EFFECTS_TIP_DISMISSED)?null:(0,r.h)("div",{class:h},(0,r.h)("calcite-notice",{scale:"s",width:"full",open:!0,closable:!0,onCalciteNoticeClose:()=>{(0,u.s)(u.l.ARCGIS_COMPONENT_NOTIFICATIONS,{key:u.a.EFFECTS_TIP_DISMISSED,value:"true"})}},(0,r.h)("div",{slot:"message"},t.general.notice)))}renderLayerEffectsContent(){const{strings:e}=this;return(0,r.h)("div",null,(0,r.h)("div",{class:p},(0,r.h)("calcite-label",{scale:"s"},e.general.dragToReorder)),(0,r.h)("calcite-list",{label:"",class:y,dragEnabled:!0,onCalciteListOrderChange:()=>this.arcgisEffectsApplyLayerEffect.emit(),ref:e=>this.listNode=e},S.map((e=>this.renderLayerEffectItem(e)))))}renderLayerEffectItem(e){var t;const{props:s}=this,{effectsJSON:a,strings:l}=s;let o=-1;return a&&(null===(t=Array.from(a))||void 0===t||t.forEach(((t,s)=>{t.type===M(e)&&(o=s+1)}))),(0,r.h)("calcite-list-item",{label:l.effectsTitle[e],description:l.effectsSummary[e],value:e,onClick:this.openPopover,onKeyDown:e=>{if("Enter"===e.key&&this.openPopover(e)," "===e.key){const t=e.composedPath()[0];"SPAN"===t.tagName&&t.classList.contains("handle")||this.openPopover(e)}}},(0,r.h)("div",{slot:"actions-start",class:v},(0,r.h)("img",{class:b,src:(0,r.a)(`./assets/effect-thumbs/${e}.png`),alt:""})),(0,r.h)("calcite-switch",{scale:"s",checked:o>0,slot:"actions-end",class:m,onCalciteSwitchChange:this.onSwitchChange}))}renderFeatureEffectsContent(){const{props:e,lastFeatureEffect:t,strings:s}=this,{layer:a,backgroundTheme:l}=e,o="light"===l,i=(0,r.h)("div",null,(0,r.h)("div",{class:d},(0,r.h)("calcite-label",{scale:"s"},s.general.lightBasemaps)),(0,r.h)("calcite-list",{label:"",class:y,"data-value":"light",ref:e=>this.lightListNode=e},w.map((e=>this.renderFeatureEffectItem(e,"light"))))),n=(0,r.h)("div",null,(0,r.h)("div",{class:d},(0,r.h)("calcite-label",{scale:"s"},s.general.darkBasemaps)),(0,r.h)("calcite-list",{label:"",class:y,"data-value":"dark",ref:e=>this.darkListNode=e},C.map((e=>this.renderFeatureEffectItem(e,"dark")))));return(0,r.h)("div",null,(0,r.h)("div",{class:p},(0,r.h)("calcite-label",{scale:"s"},s.general.emphasize),(0,r.h)("calcite-label",{scale:"s",layout:"inline-space-between"},s.general.enabled,(0,r.h)("calcite-switch",{scale:"s",checked:!(!a.featureEffect&&!t),onCalciteSwitchChange:this.onFeatureEffectEnabledSwitchChange,ref:e=>this.enabledSwitchNode=e}))),o?i:n,o?n:i)}renderFeatureEffectItem(e,t){const{props:s}=this,{featureEffectType:a,strings:l}=s,o=w.find((t=>e===t)),i=C.find((t=>e===t));return(0,r.h)("calcite-list-item",{label:l.featureEffectsTitle[e],description:l.featureEffectsSummary[e],value:e,selected:a===e,onClick:this.openPopover,onKeyDown:e=>{if("Enter"===e.key&&this.openPopover(e)," "===e.key){const t=e.composedPath()[0];"SPAN"===t.tagName&&t.classList.contains("handle")||this.openPopover(e)}}},(0,r.h)("div",{slot:"actions-start",class:v},(0,r.h)("img",{class:`${b} feature`,src:(0,r.a)(`./assets/effect-thumbs/${e}${o&&i?`_${t}`:""}.png`),alt:""})))}async createPopovers(){var e,t,s,r;const{props:a}=this,{featureEffectType:l,supportsFeatureEffects:o}=a,{popovers:i,panelNode:n}=this;i&&this.done();let c=o?["featureEffect"].concat(S):S;const u=async e=>new Promise((t=>{const s=document.createElement("arcgis-effects-popovers");s.props=a,s.type=e,s.referenceElement=n,s.addEventListener("arcgisEffectsPopoverReady",(()=>{t(s)})),document.body.appendChild(s)}));try{for(var f,h=!0,p=q(c);!(e=(f=await p.next()).done);h=!0){r=f.value,h=!1;const e=r;i[e]=await u(e)}}catch(e){t={error:e}}finally{try{h||e||!(s=p.return)||await s.call(p)}finally{if(t)throw t.error}}if(l){const e=await this.getPopover("featureEffect");e.open=!0,e.updateHeader(l)}}async selectFeatureEffectType(e,t){var s,r;const{popovers:a,props:l,lightListNode:o,darkListNode:i,defaultWhere:n,enabledSwitchNode:c}=this,{layer:u}=l;l.featureEffectType=e,null==o||o.querySelectorAll("calcite-list-item").forEach((t=>{t.selected&&t.value!==e&&(t.selected=!1)})),null==i||i.querySelectorAll("calcite-list-item").forEach((t=>{t.selected&&t.value!==e&&(t.selected=!1)})),u.featureEffect=O(e,(null===(r=null===(s=u.featureEffect)||void 0===s?void 0:s.filter)||void 0===r?void 0:r.where)||n,l),this.defaultWhere=void 0,this.arcgisEffectsChange.emit();const f=await this.getPopover("featureEffect");if(f.open)f.updateHeader(e),null==t||t.setFocus();else{let t;for(t in a)a[t].open=!1;f.open=!0,f.updateHeader(e),setTimeout((()=>f.setFocus()),300)}c?c.checked=!0:this.reRender=!this.reRender}async getPopover(e){const{popovers:t}=this;let s=t[e];for(;!s;)await(0,i.t)(100),s=t[e];return s}static get assetsDirs(){return["assets"]}get hostElement(){return(0,r.d)(this)}};L.style=":host{height:100%}.flow{height:100%}.panel{height:100%}.notice{margin:0.5rem}.radio-buttons{padding:0.5rem;background-color:white}.hint{padding:0.25rem 0.5rem;background-color:white}.basemap-type{padding:0.75rem 0.5rem 0.25rem 0.5rem}.switch{margin-right:0.75rem;margin-left:0;align-self:center}.list{flex-flow:column nowrap;margin:1px}.effect-thumb{display:flex;align-items:center;padding-left:0.5rem;cursor:pointer}.effect-thumb-img{margin-top:0.25rem;margin-bottom:0.25rem;height:48px;width:48px}.arcgis--rtl .switch{margin-left:0.75rem;margin-right:0}.arcgis--rtl .effect-thumb{padding-left:0;padding-right:0.5rem}";const R="panel",D="auto",H="effects-content",V="bottom-space",J="bottom-space-little",U="switch",B="select-number",j="select-number__input",G=e=>{e.stopPropagation()},W=e=>{var t,s;null===(s=(t=e.target).setFocus)||void 0===s||s.call(t),e.preventDefault()},z=e=>{const{disabled:t,min:s,max:a,step:l,value:o,units:i,classNames:n,label:c}=e;return(0,r.h)("div",{class:`${B} ${n}`},(0,r.h)("calcite-slider",{disabled:t,min:s,max:a,value:o,step:l,snap:!0,labelTicks:!0,ticks:a-s,minLabel:c,onCalciteSliderInput:t=>Y(t,e)}),(0,r.h)("calcite-input",{type:"number",onClick:G,disabled:t,min:s,max:a,value:`${o}`,scale:"s",step:l,suffixText:i,onCalciteInputInput:t=>Y(t,e),class:j,label:c}))};function Y(e,t){const{locale:s}=t,r=e.currentTarget,a=r.parentElement.querySelector("calcite-slider"),l=r.parentElement.querySelector("calcite-input"),o=Number(r.value),i=Math.min(t.max,Math.max(t.min,o));if(i===a.value&&`${i}`===l.value)return;a.value=i,l.value=`${i}`;const n=i.toLocaleString(s);l.querySelectorAll("input").forEach((e=>e.value=n)),t.onValueChange(i,r)}const X="select-xy",K="select-xy__input",Q=e=>{e.stopPropagation()},Z=e=>{const{min:t,max:s,step:a,x:l,y:o,classNames:i,strings:n,locale:c}=e;let u;return(0,r.h)("div",{class:`${X} ${i}`,ref:e=>u=e},(0,r.h)("arcgis-xy-slider",{"data-value":"slider",minX:t,maxX:s,minY:t,maxY:s,x:l,y:o,step:a,snappable:!0,onArcgisXYSliderInput:t=>{const s=t.currentTarget,r="data-active";s.hasAttribute(r)?ee(t,e,u):s.setAttribute(r,"")}}),(0,r.h)("div",null,(0,r.h)("calcite-label",{scale:"s"},n.effectsProps.xOffset,(0,r.h)("calcite-input",{"data-value":"x",type:"number",min:t,max:s,step:a,lang:c,value:`${l}`,class:K,scale:"s",onClick:Q,onCalciteInputInput:t=>ee(t,e,u)})),(0,r.h)("calcite-label",{scale:"s"},n.effectsProps.yOffset,(0,r.h)("calcite-input",{"data-value":"y",type:"number",min:t,max:s,step:a,lang:c,value:`${o}`,class:K,scale:"s",onClick:Q,onCalciteInputInput:t=>ee(t,e,u)}))))};function ee(e,t,s){const{step:r,locale:a}=t,l=e.currentTarget,o=l.getAttribute("data-value"),i=s.querySelector("arcgis-xy-slider"),n=s.querySelectorAll("calcite-input"),c=Number("slider"===o?l.x:"x"===o?l.value:n[0].value),u=Number("slider"===o?l.y:"y"===o?l.value:n[1].value),f=function(e){if(null==e)return 0;const t=e.toString().split(""),s=t.lastIndexOf(".");return s<0?0:t.length-s}(r),h=Math.pow(10,f),p=Math.round(c*h)/h,d=Math.round(u*h)/h,g=Math.min(t.max,Math.max(t.min,p)),m=Math.min(t.max,Math.max(t.min,d));if(g===i.x&&`${g}`===n[0].value&&m===i.y&&`${m}`===n[1].value)return;i.x=g,i.y=m,n[0].value=`${g}`,n[1].value=`${m}`;const y=g.toLocaleString(a),v=m.toLocaleString(a);n[0].querySelectorAll("input").forEach((e=>e.value=y)),n[1].querySelectorAll("input").forEach((e=>e.value=v)),t.onValueChange(g,m,l)}const te=class{constructor(e){(0,r.r)(this,e),this.arcgisEffectsApplyLayerEffect=(0,r.c)(this,"arcgisEffectsApplyLayerEffect",7),this.arcgisEffectsPopoverFilterChange=(0,r.c)(this,"arcgisEffectsPopoverFilterChange",7),this.arcgisEffectsPopoverClose=(0,r.c)(this,"arcgisEffectsPopoverClose",7),this.arcgisEffectsPopoverReady=(0,r.c)(this,"arcgisEffectsPopoverReady",7),this.defaultExpression=!1,this.onOpen=()=>{setTimeout((()=>requestAnimationFrame((()=>{var e;return null===(e=this.closeNode)||void 0===e?void 0:e.setFocus()}))),1)},this.onClose=()=>{var e;null===(e=this.filterNode)||void 0===e||e.closePopovers()},this.onPropChange=()=>{const{type:e}=this;this.arcgisEffectsApplyLayerEffect.emit({type:e})},this.onReset=()=>{const{type:e,props:t,popoverNode:s}=this,r=x[e];switch(e){case"bloom":{const e=s.querySelectorAll("calcite-input");e[0].value=`${r.strength}`,e[1].value=`${(0,n.a)(r.radius)}`,e[2].value=`${Math.round(100*r.threshold)}`;const t=s.querySelectorAll("calcite-slider");t[0].value=r.strength,t[1].value=(0,n.a)(r.radius),t[2].value=Math.round(100*r.threshold);break}case"dropShadow":{let e=T(t);s.querySelector("calcite-color-picker").value=`${this.rgb2Hex(r[e].color)}`;const a=s.querySelectorAll("calcite-input");a[0].value=`${Math.round((0,n.a)(r[e].blurRadius))}`,a[1].value=`${Math.round((0,n.a)(r[e].xoffset))}`,a[2].value=`${Math.round((0,n.a)(r[e].yoffset))}`,a[3].value=""+r[e].color[3]/255*100;const l=s.querySelectorAll("calcite-slider");l[0].value=Math.round((0,n.a)(r[e].blurRadius)),l[1].value=r[e].color[3]/255*100;const o=s.querySelectorAll("arcgis-xy-slider");o[0].x=Math.round((0,n.a)(r[e].xoffset)),o[0].y=Math.round((0,n.a)(r[e].yoffset));break}case"blur":s.querySelector("calcite-input").value=`${(0,n.a)(r.radius)}`,s.querySelector("calcite-slider").value=(0,n.a)(r.radius);break;case"brightnessContrast":{const e=x.brightness,t=x.contrast,r=s.querySelectorAll("calcite-input");r[0].value=`${Math.round(100*e.amount)}`,r[1].value=`${Math.round(100*t.amount)}`;const a=s.querySelectorAll("calcite-slider");a[0].value=Math.round(100*e.amount),a[1].value=Math.round(100*t.amount);break}case"grayscale":case"saturate":case"invert":case"sepia":s.querySelector("calcite-input").value=""+100*r.amount,s.querySelector("calcite-slider").value=100*r.amount;break;case"hueRotate":s.querySelector("calcite-input").value=`${r.angle}`,s.querySelector("calcite-slider").value=r.angle}this.arcgisEffectsApplyLayerEffect.emit({type:e})},this.props=void 0,this.type=void 0,this.open=!1,this.referenceElement=void 0}async reposition(){var e;null===(e=this.popoverNode)||void 0===e||e.reposition()}async setFocus(){var e;null===(e=this.filterNode||this.closeNode)||void 0===e||e.setFocus()}async updateHeader(e){const{props:t,filterNode:s}=this,{strings:r}=t;s&&(s.closePopovers(),s.panelHeading=r.featureEffectsTitle[e]||r.effectsTitle[e])}async componentWillLoad(){const{props:e}=this,{layer:t}=e;t.featureEffect||(this.defaultExpression=!0)}componentDidLoad(){this.arcgisEffectsPopoverReady.emit(this.type)}render(){const{props:e,referenceElement:t,type:s,open:a}=this,{strings:o}=e,i="rtl"===(0,l.g)(this.hostElement),n=["featureEffect","dropShadow"].indexOf(s)>-1;return(0,r.h)(r.H,{key:"77929ea80dcafb2bad922b10515eb24d8b75f942",class:"js-app-flyout"},(0,r.h)("calcite-popover",{key:"33c967ca44f8efdccd3643ae0713e6a7aa6991c0",dir:(0,l.g)(this.hostElement),pointerDisabled:!0,label:o.effectsTitle[s],offsetDistance:10,offsetSkidding:n?10:100,open:a,placement:"leading-start",triggerDisabled:!0,class:{"arcgis-effects-popover":!0,popover:!0,[l.C.rtl]:i},referenceElement:t,onCalcitePopoverOpen:this.onOpen,onCalcitePopoverClose:this.onClose,ref:e=>{this.popoverNode=e}},"featureEffect"===s?this.renderFeatureEffectProps():this.renderLayerEffectProps()))}renderLayerEffectProps(){const{props:e,referenceElement:t,type:s}=this,{strings:a}=e,o="rtl"===(0,l.g)(this.hostElement),i=t.getBoundingClientRect();return(0,r.h)("calcite-panel",{closable:!1,heading:a.effectsTitle[s],class:R,style:{maxHeight:.9*i.height+"px"},ref:e=>this.panelNode=e},["bloom","dropShadow","blur","brightnessContrast","grayscale","hueRotate","saturate","invert","sepia"].indexOf(s)>-1?(0,r.h)("calcite-action",{text:a.effectsProps.reset,scale:"s",slot:"header-actions-end",title:a.effectsProps.reset,onClick:this.onReset},(0,r.h)("calcite-icon",{scale:"s",icon:o?"redo":"undo"})):null,(0,r.h)("calcite-action",{text:a.general.close,icon:"x",slot:"header-actions-end",title:a.general.close,ref:e=>this.closeNode=e,onClick:()=>{this.arcgisEffectsPopoverClose.emit(),this.open=!1,this.popoverNode.open=!1,this.panelNode.closed=!1}}),"bloom"===s?this.renderBloom():null,"dropShadow"===s?this.renderDropShadow():null,"blur"===s?this.renderBlur():null,"brightnessContrast"===s?this.renderBrightnessContrast():null,"grayscale"===s?this.renderGrayscale():null,"hueRotate"===s?this.renderHueRotate():null,"saturate"===s?this.renderSaturate():null,"invert"===s?this.renderInvert():null,"sepia"===s?this.renderSepia():null)}renderBloom(){const{props:e,type:t}=this,{layer:s,strings:a,locale:l}=e,o=s,i=I(t,e);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s",onClick:W},a.effectsProps.strength),(0,r.h)(z,{min:0,max:5,step:.1,locale:l,value:Math.round(10*i.strength)/10,classNames:V,label:a.effectsProps.strength,onValueChange:this.onPropChange}),(0,r.h)("calcite-label",{scale:"s",onClick:W},a.effectsProps.radius),(0,r.h)(z,{min:0,max:5,step:.1,locale:l,value:Math.round(10*(0,n.a)(i.radius))/10,classNames:V,label:a.effectsProps.radius,onValueChange:this.onPropChange}),(0,r.h)("calcite-label",{scale:"s",onClick:W},a.effectsProps.threshold),(0,r.h)(z,{min:0,max:100,step:1,locale:l,value:Math.round(100*i.threshold),classNames:V,label:a.effectsProps.threshold,onValueChange:this.onPropChange}),(0,r.h)("calcite-label",{layout:"inline-space-between",scale:"s",class:U},a.effectsProps.autoAdjust,(0,r.h)("calcite-switch",{checked:!(o.effect&&"string"==typeof o.effect),scale:"s",class:D,onCalciteSwitchChange:this.onPropChange})))}renderDropShadow(){const{props:e,type:t}=this,{layer:s,strings:a,locale:l}=e,o=s,i=I(t,e),c=this.rgb2Hex(i.color);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s"},a.effectsProps.color,(0,r.h)("calcite-color-picker",{scale:"m",value:c,savedDisabled:!0,onCalciteColorPickerInput:this.onPropChange})),(0,r.h)("calcite-label",{scale:"s"},a.effectsProps.width),(0,r.h)(z,{min:0,max:20,step:1,locale:l,value:Math.round((0,n.a)(i.blurRadius)),classNames:V,label:a.effectsProps.width,onValueChange:this.onPropChange}),(0,r.h)("calcite-label",{scale:"s"},a.effectsProps.offset,(0,r.h)(Z,{min:-20,max:20,step:1,locale:l,x:Math.round((0,n.a)(i.xoffset)),y:Math.round((0,n.a)(i.yoffset)),classNames:J,strings:a,onValueChange:this.onPropChange})),(0,r.h)("calcite-label",{scale:"s",onClick:W},a.effectsProps.opacity),(0,r.h)(z,{min:0,max:100,step:1,locale:l,value:i.color[3]/255*100,classNames:V,label:a.effectsProps.opacity,onValueChange:this.onPropChange}),(0,r.h)("calcite-label",{layout:"inline-space-between",scale:"s",class:U},a.effectsProps.autoAdjust,(0,r.h)("calcite-switch",{checked:!(o.effect&&"string"==typeof o.effect),scale:"s",class:D,onCalciteSwitchChange:this.onPropChange})))}renderBlur(){const{props:e,type:t}=this,{strings:s,locale:a}=e,l=I(t,e);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s",onClick:W},s.effectsProps.strength),(0,r.h)(z,{min:0,max:30,step:.1,locale:a,value:Math.round(10*(0,n.a)(l.radius))/10,classNames:V,label:s.effectsProps.strength,onValueChange:this.onPropChange}))}renderBrightnessContrast(){const{props:e}=this,{strings:t,locale:s}=e,a=I("brightness",e),l=I("contrast",e);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s",onClick:W},t.effectsProps.brightness),(0,r.h)(z,{min:0,max:300,step:1,locale:s,value:Math.round(100*a.amount),classNames:V,label:t.effectsProps.brightness,onValueChange:this.onPropChange}),(0,r.h)("calcite-label",{scale:"s",onClick:W},t.effectsProps.contrast),(0,r.h)(z,{min:0,max:300,step:1,locale:s,value:Math.round(100*l.amount),classNames:V,label:t.effectsProps.contrast,onValueChange:this.onPropChange}))}renderGrayscale(){const{props:e,type:t}=this,{strings:s,locale:a}=e,l=I(t,e);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s",onClick:W},s.effectsProps.strength),(0,r.h)(z,{min:0,max:100,step:1,locale:a,value:100*l.amount,classNames:V,label:s.effectsProps.strength,onValueChange:this.onPropChange}))}renderHueRotate(){const{props:e,type:t}=this,{strings:s,locale:a}=e,l=I(t,e);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s",onClick:W},s.effectsProps.degrees),(0,r.h)(z,{min:0,max:360,step:1,locale:a,value:l.angle,classNames:V,label:s.effectsProps.degrees,onValueChange:this.onPropChange}))}renderSaturate(){const{props:e,type:t}=this,{strings:s,locale:a}=e,l=I(t,e);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s",onClick:W},s.effectsProps.strength),(0,r.h)(z,{min:0,max:200,step:1,locale:a,value:100*l.amount,classNames:V,label:s.effectsProps.strength,onValueChange:this.onPropChange}))}renderInvert(){const{props:e,type:t}=this,{strings:s,locale:a}=e,l=I(t,e);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s",onClick:W},s.effectsProps.strength),(0,r.h)(z,{min:0,max:100,step:1,locale:a,value:100*l.amount,classNames:V,label:s.effectsProps.strength,onValueChange:this.onPropChange}))}renderSepia(){const{props:e,type:t}=this,{strings:s,locale:a}=e,l=I(t,e);return(0,r.h)("div",{class:H},(0,r.h)("calcite-label",{scale:"s",onClick:W},s.effectsProps.strength),(0,r.h)(z,{min:0,max:100,step:1,locale:a,value:100*l.amount,classNames:V,label:s.effectsProps.strength,onValueChange:this.onPropChange}))}renderFeatureEffectProps(){const{props:e,type:t,defaultExpression:s}=this,{view:a,layer:l,strings:o}=e,i=function(e){var t,s,r,a,l;const{layer:o}=e,{renderer:i}=o;if(!i)return null;switch(i.type){case"unique-value":return"predominance"===(null===(t=i.authoringInfo)||void 0===t?void 0:t.type)?i.uniqueValueInfos[0].value:"relationship"===(null===(s=i.authoringInfo)||void 0===s?void 0:s.type)?i.authoringInfo.field1.field:i.field;case"class-breaks":if(!i.visualVariables)return i.field;{let e=null===(r=i.visualVariables.find((e=>"color"===e.type)))||void 0===r?void 0:r.field;if(e)return e;if(e=null===(a=i.visualVariables.find((e=>"size"===e.type&&!e.target&&"$view.scale"!==e.valueExpression)))||void 0===a?void 0:a.field,e)return e}break;case"dot-density":return null===(l=i.attributes)||void 0===l?void 0:l[0].field}return null}(e);return(0,r.h)("arcgis-filter",{class:`${R} filter`,view:a,layer:l,hideLayerTitle:!0,panelHeading:o.featureEffectsTitle[t],tipMsg:o.filter.tipMsg,invalidHeading:o.filter.invalidHeading,invalidMsg:o.filter.invalidMsg,mode:"effects",defaultFieldName:i,defaultOperator:">",defaultExpression:!!i&&s,hideButtons:!0,dismissible:!0,panelMaxHeight:"80vh",onArcgisFilterDismissedChange:()=>{this.arcgisEffectsPopoverClose.emit(),this.popoverNode.open=!1,this.open=!1,this.filterNode.openPanel()},onArcgisFilterWhereChange:({detail:e})=>{this.arcgisEffectsPopoverFilterChange.emit(e)},ref:e=>this.filterNode=e})}rgb2Hex(e){return"#"+this.componentToHex(Math.max(0,Math.min(255,e[0])))+this.componentToHex(Math.max(0,Math.min(255,e[1])))+this.componentToHex(Math.max(0,Math.min(255,e[2])))}componentToHex(e){const t=e.toString(16);return 1==t.length?"0"+t:t}get hostElement(){return(0,r.d)(this)}};te.style=".select-number.sc-arcgis-effects-popovers{display:flex;align-items:center;justify-content:space-between;position:relative}.select-number.sc-arcgis-effects-popovers calcite-slider.sc-arcgis-effects-popovers{width:58%;height:30px;margin:0 4px;overflow-wrap:normal;word-break:normal}.select-number__input.sc-arcgis-effects-popovers{width:35%;font-size:var(--arcgis-app-font-size-0);font-family:var(--arcgis-app-font-family)}.select-xy.sc-arcgis-effects-popovers{display:flex;align-items:center}.select-xy.sc-arcgis-effects-popovers arcgis-xy-slider.sc-arcgis-effects-popovers{width:120px;min-width:120px;margin:0 10px}.select-xy__input.sc-arcgis-effects-popovers{width:100%;font-size:var(--arcgis-app-font-size-0);font-family:var(--arcgis-app-font-family)}.popover.sc-arcgis-effects-popovers{z-index:99}.panel.sc-arcgis-effects-popovers{width:325px}.panel.filter.sc-arcgis-effects-popovers{min-height:500px;background-color:var(--calcite-color-background)}.effects-content.sc-arcgis-effects-popovers{padding:1rem;background-color:white;max-height:80vh}.bottom-space.sc-arcgis-effects-popovers{margin-bottom:1.8rem}.bottom-space-little.sc-arcgis-effects-popovers{margin-bottom:0.5rem}.switch.sc-arcgis-effects-popovers{width:100%;display:flex;justify-content:space-between}.reset.sc-arcgis-effects-popovers{display:flex;align-items:center}.sub-header.sc-arcgis-effects-popovers{margin-left:0.75rem;margin-right:0}.arcgis--rtl.sc-arcgis-effects-popovers .sub-header.sc-arcgis-effects-popovers{margin-right:0.75rem;margin-left:0}"},26408:(e,t,s)=>{s.d(t,{a:()=>c,b:()=>h,c:()=>a,d:()=>r,e:()=>o,f:()=>l,g:()=>u,h:()=>p,i:()=>d,m:()=>i,t:()=>n,u:()=>f});const r=(e,t)=>{let s,r="idle";const a=(...a)=>new Promise((l=>{switch(r){case"flushed":r="idle",s?(clearTimeout(s),l(e(...a))):l(null);break;case"invoked":clearTimeout(s),r="idle",l(e(...a));break;case"cancelled":clearTimeout(s),r="idle",l(null);break;default:s&&clearTimeout(s),r="pending",s=setTimeout((()=>(r="idle",l(e(...a)))),t)}}));return a.flush=function(...e){return r="flushed",a(...e)},a.invoke=function(...e){return r="invoked",a(...e)},a.cancel=function(...e){return r="cancelled",a(...e)},a.getStatus=function(){return r},a},a=(e,t)=>{let s;return(...r)=>new Promise((a=>{s||(s=setTimeout((()=>{clearTimeout(s),s=void 0,a(e(...r))}),t))}))};function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function i(e,t){return await Promise.all([e,n(t)]),e}function n(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:s,data:r}=t(e);return[s,r]}))),u=(e,t)=>e.length===t.length&&e.reduce(((e,s)=>e&&t.indexOf(s)>-1),!0);function f(e,t){const s=[],r={};return e.forEach((e=>{const a=t(e);null==r[a]&&(r[a]=e,s.push(e))})),s}function h(e){const t={boolean:{},number:{},string:{}},s=[];return e.filter((e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(s.indexOf(e)>=0)&&s.push(e)}))}const p=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((s,r)=>e.slice(t*r,t+t*r))),d=(e,t)=>e.includes(t)},79241:(e,t,s)=>{var r,a;s.d(t,{a:()=>a,g:()=>i,l:()=>r,s:()=>o}),function(e){e.ARCGIS_COMPONENT_NOTIFICATIONS="arcgisComponent_notifications"}(r||(r={})),function(e){e.FEATURE_REDUCTION_WARNING_DISMISSED="arcgis_feature_reduction_warning_dismissed",e.POPUP_WARNING_DISMISSED="arcgis_popup_warning_dismissed",e.INCOMPATIBLE_VECTOR_SYMBOLS_DISMISSED="arcgis_symbol_styler_incompatible_vector_symbols_dismissed",e.EFFECTS_TIP_DISMISSED="arcgis_effects_tip_dismissed",e.LAYER_VIEW_DEFINITION_DISMISSED="arcgis_layer_view_definition_dismissed",e.LAYER_OVERRIDE_STATUS_TIP_DISMISSED="arcgis_layer_override_status_tip_dismissed",e.SMART_MAPPING_TIP1_DISMISSED="arcgis_smart_mapping_tip1_dismissed",e.SMART_MAPPING_TIP2_DISMISSED="arcgis_smart_mapping_tip2_dismissed",e.LAYER_VIEW_JOIN_TIP_DISMISSED="arcgis_layer_view_join_tip_dismissed",e.MULTIDIMENSIONAL_INFO_TIP_DISMISSED="arcgis_multidimensional_info_tip_dismissed"}(a||(a={}));const l=e=>JSON.parse((e=>localStorage.getItem(e))(e))||{},o=(e,t)=>{const s=l(e);s[t.key]=t.value,((e,t)=>{localStorage.setItem(e,t)})(e,JSON.stringify(s))},i=(e,t)=>{const s=l(e);return(null==s?void 0:s.hasOwnProperty(t))?s[t]:null}},60496:(e,t,s)=>{s.d(t,{a:()=>a,p:()=>l});const r=96;function a(e){return e?e/72*r:0}function l(e){return e?72*e/r:0}}}]);