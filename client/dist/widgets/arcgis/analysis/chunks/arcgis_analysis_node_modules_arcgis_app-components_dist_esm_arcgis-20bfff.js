/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20bfff.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20bfff"],{61191:(e,i,n)=>{n.d(i,{a:()=>r,b:()=>s,c:()=>o,d:()=>t});const t=(0,n(18991).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),r=t.state,o=t.state,s=t.state},44069:(e,i,n)=>{n.d(i,{A:()=>r,a:()=>o,b:()=>s,c:()=>a,d:()=>l,u:()=>t});const t=["esriFieldTypeOID","esriFieldTypeGlobalID"],r={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage","service definition":"serviceDefinition"},o={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},s={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},l=["zip","csv","xls","xlsx","geojson","gpkg","json","sd"],a=["zip","csv","xls","xlsx"]},51716:(e,i,n)=>{n.r(i),n.d(i,{arcgis_new_item_pages_append_key_pair_select:()=>d});var t=n(19564),r=n(61191),o=n(44069),s=n(33861),l=n(8227),a=n(4948);n(18991),n(11560),n(24211),n(67336),n(98034),n(99004),n(44508),n(63330),n(82297),n(57159),n(65174),n(87382);const d=class{constructor(e){(0,t.r)(this,e),this.newItemUpdatePage=(0,t.c)(this,"newItemUpdatePage",7),this.newItemPrevPage=(0,t.c)(this,"newItemPrevPage",7),this.workflowComplete=(0,t.c)(this,"workflowComplete",7),this.handleTimezoneChange=e=>{this.selectedTimezone=e.detail},this.handleKeyPairChange=e=>{this.selectedKeyPair=e.detail},this.i18n=void 0,this.selectedKeyPair=void 0,this.selectedTimezone=void 0,this.oidFieldSelected=!1,this.insertAttachmentsEnabled=!1,this.error=void 0}handleNext(){if("add"!==r.a.addAppendSelectOption){if(Object.values(this.selectedKeyPair).includes(this.noneString))return void(this.error={title:s.u.i18n.error,message:this.i18n.noKeyPair});r.a.uidPair=this.selectedKeyPair}r.a.timezone=this.selectedTimezone,r.a.insertAttachmentsEnabled=this.insertAttachmentsEnabled,this.newItemUpdatePage.emit("appendMatchFields")}async handlePrev(e){var i;(null===(i=r.a.analyzeResults.publishParameters.layers)||void 0===i?void 0:i.length)>1||(e.preventDefault(),r.a.uidPair=null,this.newItemPrevPage.emit())}componentWillLoad(){var e,i;const{originalFileName:n,dataLayer:t,addAppendSelectOption:o}=r.a;this.i18n=s.u.i18n.appendKeyValuePair,this.serviceLayer=r.a.sourceDataLayer,this.selectedTimezone=null!==(e=r.a.timezone)&&void 0!==e?e:(null===(i=null===a.c||void 0===a.c?void 0:a.c.portal)||void 0===i?void 0:i.isPortal)?"UTC":"GMT",this.noneString=`<${s.u.i18n.appendKeyValuePair.noneField}>`,this.timezoneDescription=this.i18n.timezoneDescription.replace("${uploadedFileName}",n),this.canChooseAttachments="add"===o&&"File Geodatabase"===r.a.type&&this.serviceLayer.hasAttachments&&t.hasAttachments,r.a.attachmentsEnabled=this.canChooseAttachments,this.findKeyPairs()}findKeyPairs(){var e;const i={},n=this.serviceLayer.fields||[],t=this.serviceLayer.indexes||[],s=r.a.backupLayerFields;t.filter((e=>null==e?void 0:e.isUnique)).forEach((e=>{var i;((null===(i=e.fields)||void 0===i?void 0:i.split(","))||[]).forEach((e=>{n.some((i=>i.name.toLowerCase()===e.toLowerCase()&&(i.isUniqueIndex=!0,!0)))}))})),this.serviceUIDFields=n.filter((e=>e.type&&o.u.includes(e.type)||e.isUniqueIndex)).sort(((e,i)=>e.name.localeCompare(i.name))),this.serviceUIDFields.forEach((e=>{const n=[];s.forEach((i=>{(0,l.c)(e,i)&&n.push(i.name)})),i[e.name]={name:e.name,type:e.type,idx:0,isUniqueIndex:null==e?void 0:e.isUniqueIndex,possibleMatches:[this.noneString,...n],disabled:!0}})),this.finalKeyPairs=Object.assign({[this.noneString]:{name:this.noneString,type:"None",possibleMatches:[this.noneString]}},i),this.selectedKeyPair=null!==(e=r.a.uidPair)&&void 0!==e?e:this.finalKeyPairs[this.noneString],r.a.serviceUIDFields=this.serviceUIDFields}render(){const{error:e,i18n:i,timezoneDescription:n,canChooseAttachments:o}=this,{addAppendSelectOption:s,backupLayerFields:l}=r.a,{helpBase:d,helpMap:c}=a.c.config,u="add"===s,v=null==l?void 0:l.some((e=>"esriFieldTypeDate"===e.type)),p=`${d}${c[120004711]}`;return(0,t.h)(t.H,{key:"10b176e07f4816c9fb6152cf3fed7d6cdfa01e3f"},!u&&(0,t.h)("arcgis-new-item-append-key-value-pair",{key:"a39802d1b8e5d247e12235d3206a748b3700b01c",class:"section",keyPairs:this.finalKeyPairs,onKeyPairChange:this.handleKeyPairChange}),v&&(0,t.h)("calcite-label",{key:"be9f35d06a6baad03adfff490ff9de7f2f47139d",class:"section"},(0,t.h)("div",{key:"519e46f27b8d2144b4a75fb8d3991cf02b1fafa0",class:"header"},i.timezoneHeader),(0,t.h)("div",{key:"88eb4e26c1e25e96ab9192deebc0436997aeada4",class:"timezone-wrapper"},(0,t.h)("arcgis-new-item-timezone-dropdown",{key:"0cda794b38b920acc20840f0a79f11aa7708073c",class:"timezone",onTimezoneChange:this.handleTimezoneChange,defaultTimezone:this.selectedTimezone,subTitle:n}))),o&&(0,t.h)("calcite-label",{key:"e740ad615c730b07db26ad165b525dd93506bb83",class:"section"},(0,t.h)("div",{key:"6063754d53b6d45153455a413549303fcb06aeb5",class:"header"},i.chooseAttachments),(0,t.h)("div",{key:"fe18b0123394d53e171c00d93bb08ecfae8bdff8",class:"attachments-toggle"},i.includeAttachments,(0,t.h)("calcite-switch",{key:"8455fcf03660f8d10014437ff3d3ffcecef14b83",onCalciteSwitchChange:e=>{const i=e.target.checked;this.insertAttachmentsEnabled=i}}))),(0,t.h)("arcgis-new-item-alert",{key:"aa3f3145740bbd6d5c36290219b3b0c3fd15e1c2",active:"esriFieldTypeOID"===this.selectedKeyPair.type,kind:"warning",heading:i.learnMoreUIDTitle,link:{href:p,title:i.learnMoreUIDLink}}),(0,t.h)("arcgis-new-item-alert",{key:"63fc96e7509eabb8d2f51fc9e7b59b9faff30241",heading:null==e?void 0:e.title,description:null==e?void 0:e.message,active:!!e,kind:"danger",onAlertDismiss:()=>this.error=null}))}get el(){return(0,t.d)(this)}};d.style=".timezone-wrapper{background-color:var(--calcite-color-background);padding-left:1rem}.timezone{margin-bottom:0.75rem;margin-inline-end:2.5rem;display:block}.header{padding-bottom:0.5rem;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.attachments-toggle{display:flex;justify-content:space-between;padding:0.75rem;border:1px solid var(--calcite-ui-border-3)}.section{margin-bottom:1rem}"},67336:(e,i,n)=>{n.d(i,{a:()=>l,b:()=>s,c:()=>c,d:()=>u,e:()=>v,f:()=>m,g:()=>S,h:()=>h,i:()=>a,j:()=>b,k:()=>P,l:()=>g,m:()=>k,n:()=>w,o:()=>f,p:()=>y,q:()=>p,u:()=>d});var t=n(98034),r=n(44508);function o(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function s(e){var i;return o(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function l(e){var i;return o(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function a(e,i){return e.owner===i.username}function d(e,i){return a(e,i)||function(e,i){var n;if(null!=e.isAdmin)return!!e.isAdmin;const t=e.owner,r="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!a(e,i)&&r&&t.includes("esri_")&&!o.includes(t))return!1;return r}(e,i)}const c=(e,i)=>!!i.orgId&&e.every((e=>e.isOrgItem)),u=(e,i)=>`${(0,r.a)(i)}item.html?id=${e}`,v=(e,i)=>`${(0,r.g)(i)}/content/users/${e}`,p=e=>e.reduce(((e,i)=>(e[i.owner]=e[i.owner]?[...e[i.owner],i.id]:[i.id],e)),{});function f(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Spatiotemporal")}function m(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("View Service")}function h(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Hosted Service")}function g(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Multi Services View")}function y(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function b(e){var i;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const o=n.portal,[s]=await(0,t.l)(["esri/request"]);if(null==o?void 0:o.user){return s(`${(0,r.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(i=n.portal.credential)||void 0===i?void 0:i.token},responseType:"json"}).then((e=>{var i,n;const t=null!==(n=null===(i=e.data)||void 0===i?void 0:i.groups)&&void 0!==n?n:[];return Promise.resolve(t)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function P(e){var i;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const o=n.portal,[s]=await(0,t.l)(["esri/request"]);return s(`${(0,r.g)(o)}content/items/${n.id}/groups`,{query:{f:"json",token:null===(i=n.portal.credential)||void 0===i?void 0:i.token},responseType:"json"}).then((e=>{var i,n,t,r,o,s;const l=[...null!==(n=null===(i=e.data)||void 0===i?void 0:i.admin)&&void 0!==n?n:[],...null!==(r=null===(t=e.data)||void 0===t?void 0:t.member)&&void 0!==r?r:[],...null!==(s=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==s?s:[]];return Promise.resolve(l)}),(()=>Promise.reject()))}async function w(e,i,{relationshipType:n,direction:o}){const s=`${(0,r.g)(i)}content/items/${e}/relatedItems`,[l]=await(0,t.l)(["esri/request"]);return await l(s,{query:{f:"json",relationshipType:n,direction:o},method:"get",responseType:"json"})}function k(e,i){return null==e?void 0:e.some((e=>null==i?void 0:i.some((i=>e.id===i.id&&e.capabilities.includes("updateitemcontrol")))))}const S=(e,i)=>`${(0,r.a)(i)}content/items/${e}`},82297:(e,i,n)=>{n.d(i,{a:()=>v,b:()=>c,c:()=>l,d:()=>a,e:()=>p,f:()=>o,g:()=>u,h:()=>s,i:()=>f,q:()=>d});var t=n(57159),r=n(44508);function o(e){var i;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(i=e.sourceJSON)||void 0===i?void 0:i.portalDeploymentType))}function s(e){var i,n;return e.isPortal?"modern"===(null===(n=e.portalProperties)||void 0===n?void 0:n.homePage)||function(e){var i;return e.isPortal&&"modernOnly"===(null===(i=e.portalProperties)||void 0===i?void 0:i.homePage)}(e):"modern"===(null===(i=e.portalProperties)||void 0===i?void 0:i.homePage)||function(e){const i=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=i}(e)}async function l(e){try{return{result:await(0,t.f)((()=>(0,t.r)(`${(0,r.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function a(e){return(0,t.f)((()=>(0,t.r)(`${(0,r.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function d(e={},i){return(0,t.r)(`${(0,r.g)(i)}/community/groups`,e)}const c=async(e,i)=>{var n;if(!e)return[];const o=`${(0,r.a)(null!==(n=i.restUrl)&&void 0!==n?n:i.portalUrl)}portals/self/servers`,s=await(0,t.f)((()=>(0,t.r)(o)),"selfServers",i.id);return null==s?void 0:s.servers},u=e=>v((0,r.c)(e)),v=e=>{var i;const n=`${(0,r.a)(null!==(i=(0,r.b)(e))&&void 0!==i?i:e)}info`;return(0,t.f)((()=>(0,t.r)(n,{},{addTokenManually:!1})),"portalInfo",n)};async function p(e,i){return!e.isPortal||await f(e,i)}async function f(e,i){if(!i||!e)return!1;if(!e.isPortal)return!0;const{result:n,error:r}=await(0,t.f)((()=>m(e,i)),"isPortalBackedBySDS",e.id);return!r&&n}const m=async(e,i)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await h(i,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},h=async(e,i)=>{var n;return(null!==(n=await c(e,i))&&void 0!==n?n:[]).filter((e=>e.isHosted))[0]}},24211:(e,i,n)=>{n.d(i,{A:()=>_,a:()=>l,b:()=>o,c:()=>s,d:()=>h,e:()=>m,f:()=>v,g:()=>g,h:()=>b,i:()=>d,j:()=>y,k:()=>C,l:()=>a,m:()=>P,n:()=>u,o:()=>j,p:()=>$,q:()=>k,r:()=>S,s:()=>x,t:()=>T,u:()=>p,v:()=>f,w:()=>I,x:()=>D,y:()=>z,z:()=>c});var t=n(67336);const r=e=>{var i,n,t;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(n=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==n?n:null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.id};function o(e){return e&&!e.orgId}function s(e,i){return(0,t.u)(e,i)||"update"===e.itemControl||(0,t.c)([e],i)&&m(i)}function l(e,i){const n=(0,t.c)([e],i),r=(0,t.u)(e,i)||m(i)&&n,o=g(i)&&w(i);return!!(r||n&&o)}const a=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))};function d(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function c(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function u(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const v=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},p=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},f=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function m(e){return"org_admin"===r(e)||"account_admin"===r(e)}function h(e){return["org_admin","account_admin"].includes(r(e))&&!(null==e?void 0:e.roleId)}function g(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function y(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function b(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function P(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const w=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function I(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function D(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function x(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function C(e,i,n,t){const r=t&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(t.type),o=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!m(i)&&!o||!(null==n?void 0:n.isPortal)&&!r)}function _(e){return!!e&&(!g(e)||g(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const z=({items:e,user:i,portal:n})=>{const r=e[0],o=r.owner;if(n.isPortal&&o!==i.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const l=(0,t.u)(r,i),a=g(i),d=K(i),c=s(r,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!a&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||k(e)||S(e)||!!i.canSharePublic&&I(e)}(i,n)||K(i));return l||c||(0,t.c)(e,i)&&d};function K(e){return x(e)||T(e)||D(e)}const A=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function $(e){return e.some((e=>A.includes(e)))}function j(e){return e.filter((e=>A.includes(e)))}},33861:(e,i,n)=>{n.d(i,{a:()=>t,u:()=>r});const t=(0,n(18991).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),r=t.state}}]);