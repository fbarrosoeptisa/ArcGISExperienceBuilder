/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm_arcgis--149d87.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm_arcgis--149d87"],{4088:(e,t,s)=>{s.r(t),s.d(t,{arcgis_smart_mapping_gamma_slider:()=>l,arcgis_smart_mapping_stretch_type_button:()=>d});var a=s(28614),i=(s(68180),s(99592)),o=s(33101),n=s(58325),r=s(97127),c=s(42444);s(71480);const l=class{constructor(e){(0,a.r)(this,e),this.manager=(0,r.u)(this),this.watchHandles=[],this.smartMappingState=(0,o.u)(),this.gamma=void 0,this.rendererType=void 0}componentDidLoad(){(0,c.i)(this.el.shadowRoot,this.smartMappingState.modules.esriConfig)}render(){const{locale:e,modules:t}=this.smartMappingState;if(!this.slider){const s={min:-1e3,max:1e3,values:[this.parseGammaValue(this.gamma.toString())],visibleElements:{labels:!0,rangeLabels:!0},rangeLabelInputsEnabled:!1,precision:3,labelInputsEnabled:!0};s.labelFormatFunction=t=>this.formatGammaValue(t).toLocaleString(e),s.inputFormatFunction=t=>this.formatGammaValue(t).toLocaleString(e),s.inputParseFunction=e=>this.parseGammaValue(e),this.watchHandles[0]?.remove(),this.watchHandles=[],this.slider=new t.Slider(s)}return(0,a.h)("div",{key:"d7ac020e87764f54682af27e0b66efad1cf9fdc0",class:"slider slider-bottom-label",ref:e=>{e&&this.afterGammaSliderCreate(e)}})}afterGammaSliderCreate(e){if(this.slider.container)e.append(this.slider.container);else{const t=document.createElement("div");e.append(t),this.slider.container=t}this.createGammaSliderChangeEvents()}createGammaSliderChangeEvents(){this.watchHandles[0]?.remove(),this.watchHandles=[],this.watchHandles.push(this.slider.watch("values",(0,n.d)((()=>this.handleGammaSliderValueChange()),300)))}handleGammaSliderValueChange(){const{smartMappingState:e}=this,t=(0,i.R)(e),s=this.formatGammaValue(this.slider.values[0]);t.gamma="raster-stretch"===this.rendererType?[s]:new Array(3).fill(s),t.useGamma=!0,(0,i.Q)(e)}formatGammaValue(e){return Number.parseFloat(Math.exp(e/1e3*Math.log(10)).toFixed(2))}parseGammaValue(e){e=e.replace(",",".");const t=Number.parseFloat(e);return Math.log(t)/Math.log(10)*1e3}get el(){return(0,a.g)(this)}};l.style=".slider{height:60px;background-color:transparent;position:relative;width:90%;margin:0 auto 0 auto}.esri-slider__content{margin-bottom:30px}.slider-bottom-label .esri-slider__max,.slider-bottom-label .esri-slider__min{width:fit-content;position:absolute;bottom:0}.slider-bottom-label .esri-slider__max{right:-9px;text-align:right}.slider-bottom-label .esri-slider__min{left:-9px;text-align:left}";const d=class{constructor(e){(0,a.r)(this,e),this.arcgisSmartMappingStretchTypeButtonChange=(0,a.c)(this,"arcgisSmartMappingStretchTypeButtonChange",7),this.arcgisSmartMappingStretchTypeButtonBeforeOpen=(0,a.c)(this,"arcgisSmartMappingStretchTypeButtonBeforeOpen",7),this.manager=(0,r.u)(this),this.stretchTypeInfos=[],this.open=!1,this.smartMappingState=(0,o.u)()}async setFocus(){this.buttonNode?.focus()}componentWillLoad(){this.populateStretchTypeInfo(),this.setSelection()}componentWillUpdate(){const e=(0,i.R)(this.smartMappingState),{stretchType:t}=e;this.selectedStretchTypeInfo.value!==t&&this.setSelection()}render(){const{strings:e}=this.smartMappingState;return(0,a.h)(a.H,{key:"f29bb5a914a4f2507bfbc57b9f3142ec0e3722bc"},(0,a.h)("calcite-label",{key:"1c6827f387e69f8375f7f6d1d812bf9128bc950f"},e.stretchTypeButton.stretchType,(0,a.h)("div",{key:"c732891546090a1fb6a880f526923af2476353f8",class:"stretch-type-button",role:"button",tabindex:"0","aria-haspopup":"true","aria-label":e.stretchTypeButton.stretchType,ref:e=>this.buttonNode=e,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.openStretchTypeDropdown())},onClick:()=>this.openStretchTypeDropdown()},(0,a.h)("div",{key:"d9619dc7a1f003e23e919e799ec0c05914a17891",class:"stretch-type-content"},(0,a.h)("div",{key:"2525a7e13bda7240bca3499d786a047985c32d3f",class:"stretch-type-button-text"},(0,a.h)("div",{key:"4fb0a5f5faa949eca578a06bca5c2cf12050bc63",class:"stretch-type-button-title"},this.selectedStretchTypeInfo.title),(0,a.h)("div",{key:"2d458f37f879f45de7dab33c03836ee25a8b2838",class:"stretch-type-button-msg"},this.selectedStretchTypeInfo.msg)),(0,a.h)("div",{key:"7e2b620a2b2223a6db40105bae343c5418dca08d"},(0,a.h)("calcite-icon",{key:"f90181345f5ac2b5e9034a68230f632a02bb75c2",scale:"s",icon:"chevron-down"}))))))}populateStretchTypeInfo(){const{strings:e}=this.smartMappingState,t=e.stretchTypeButton.stretchTypeOptions,s=e.stretchTypeButton.stretchTypeOptionDescriptions;this.stretchTypeInfos.push({value:"none",title:t.none,msg:s.none,iconPath:void 0,selected:!1}),this.stretchTypeInfos.push({value:"min-max",title:t.minimumMaximum,msg:s.minimumMaximum,iconPath:void 0,selected:!1}),this.stretchTypeInfos.push({value:"percent-clip",title:t.percentClip,msg:s.percentClip,iconPath:void 0,selected:!1}),this.stretchTypeInfos.push({value:"standard-deviation",title:t.standardDeviation,msg:s.standardDeviation,iconPath:void 0,selected:!1})}setSelection(){const e=(0,i.R)(this.smartMappingState);this.selectedStretchTypeInfo=this.stretchTypeInfos.find((t=>t.value===e.stretchType)),this.stretchTypeInfos.forEach((e=>{e.selected=e.value===this.selectedStretchTypeInfo.value}))}closeDropdown(){this.open=!1,this.dropdownNode&&(this.dropdownNode.parentNode?.removeChild(this.dropdownNode),this.dropdownNode=void 0,this.buttonNode.classList.remove("active"))}openStretchTypeDropdown(){const{smartMappingState:e}=this;if(this.open)this.open=!1;else{this.arcgisSmartMappingStretchTypeButtonBeforeOpen.emit();const t=document.createElement("arcgis-smart-mapping-dropdown");t.smartMappingState=e,t.buttonNode=this.buttonNode,t.infos=this.stretchTypeInfos,this.dropdownNode=t,t.addEventListener("arcgisSmartMappingDropdownClose",(e=>{this.closeDropdown(),"Escape"===e.detail&&this.setFocus()})),t.addEventListener("arcgisSmartMappingDropdownChange",(e=>this.setStretchType(e.detail))),this.buttonNode.classList.add("active"),document.body.appendChild(t),this.open=!0}}setStretchType(e){const t=(0,i.R)(this.smartMappingState),{stretchType:s}=t,a=e.value;if(a===s)return this.closeDropdown(),void setTimeout((()=>{this.setFocus()}),300);this.stretchTypeInfos.forEach((e=>{e.selected=e.value===a})),this.selectedStretchTypeInfo=e,this.arcgisSmartMappingStretchTypeButtonChange.emit(this.selectedStretchTypeInfo.value),this.closeDropdown(),setTimeout((()=>{this.setFocus()}),300)}get el(){return(0,a.g)(this)}};d.style=".stretch-type-button{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.stretch-type-button:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.stretch-type-button:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.stretch-type-button:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.stretch-type-button.active{outline:1px solid var(--calcite-ui-focus-color, var(--calcite-color-brand))}.stretch-type-content{display:flex;align-items:center;justify-content:space-between;width:100%}.stretch-type-button-text{display:inline-block;padding:0 10px}.stretch-type-button-title{font-weight:bold}.stretch-type-button-msg{font-size:80%;line-height:16px}"},58325:(e,t,s)=>{s.d(t,{a:()=>i,d:()=>a,t:()=>o});const a=(e,t)=>{let s,a="idle";const i=async(...i)=>await new Promise((o=>{switch(a){case"flushed":a="idle",s?(clearTimeout(s),o(e(...i))):o(null);break;case"invoked":clearTimeout(s),a="idle",o(e(...i));break;case"cancelled":clearTimeout(s),a="idle",o(null);break;default:s&&clearTimeout(s),a="pending",s=setTimeout((()=>{a="idle",o(e(...i))}),t)}}));return i.flush=async function(...e){return a="flushed",await i(...e)},i.invoke=async function(...e){return a="invoked",await i(...e)},i.cancel=async function(...e){return a="cancelled",await i(...e)},i.getStatus=function(){return a},i},i=(e,t)=>{let s;return async(...a)=>await new Promise((i=>{s||(s=setTimeout((()=>{clearTimeout(s),s=void 0,i(e(...a))}),t))}))};function o(e){return new Promise((t=>setTimeout(t,e)))}},33101:(e,t,s)=>{s.d(t,{c:()=>o,u:()=>n});var a=s(97127),i=(s(68180),s(99592));function o(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=i.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.hideSvgUploadSymbols=!1,e.hideAddStyles=!1,e.rasterInfo=void 0}function n(){const e=(0,a.r)(),t=e;e.manager.onLoad((()=>{t.smartMappingState=function(e,t){const s=r.get(e);if(s)return s;const i=(0,a.c)(e,t);if(i&&"store"in i)return r.set(e,i.store),i.store;return null}(e.el,"arcgis-smart-mapping").state}))}const r=new WeakMap},42444:(e,t,s)=>{function a(e,t){if(!e||!t)return;let s=t.assetsPath;s.endsWith("/")||(s+="/"),e?.firstElementChild?.insertAdjacentHTML("beforebegin",`<link rel="stylesheet" href="${s}esri/themes/light/main.css" />`)}s.d(t,{i:()=>a})}}]);