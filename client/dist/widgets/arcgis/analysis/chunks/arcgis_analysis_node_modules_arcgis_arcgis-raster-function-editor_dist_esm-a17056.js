"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-a17056"],{56904:(e,t,i)=>{i.r(t),i.d(t,{rfx_cte_weighted_sum_table_editor:()=>g});var r=i(6225),a=(i(5294),i(13661),i(18423),i(21255),i(35431),i(93210)),l=i(22493),s=i(74229),c=i(76529),d=i(42776),n=(i(23795),i(17902),i(56451),i(81965));i(588),i(71802),i(44345),i(32513),i(33752),i(36596);const o="rfx-cte-weighted-sum-table-editor",h={grid:`${o}__grid`,layerColumn:`${o}__layer-column`,fieldColumn:`${o}__field-column`,weightColumn:`${o}__weight-column`},u="weightedSumTableHelpClickHandler",g=class{constructor(e){(0,r.r)(this,e),this.rfxArgumentChange=(0,r.c)(this,"rfxArgumentChange",7),this.helpActionClickEventHandlers=new Map,this.updateValue=e=>{const{detail:{gridOptions:t}}=e,{inputArgs:i}=this.widgetArgs;if((0,l.p)(t)||(0,l.p)(i))return;const r=[],a=[],s=[];t.forEach(((e,i)=>{if(i===t.length-1)return;const{layer:l,field:c,weight:d}=e;r.push(l),a.push(c),s.push((0,n.p)(d)??1)}));const c=i.Rasters,d=i.Fields,o=i.Weights;(0,l.p)(c.value)?c.value={elements:r,type:"ArgumentArray"}:c.value.elements=r,d.value=a,o.value=s},this.gridSchema={canAdd:!0,gridLayout:{},gridOptions:[],hasBorder:!0,hasHeader:!0,hasIdColumn:!0},this.widgetArgs=void 0}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,a.c)(this.hostElement,(0,r.a)("."))),await this.initGrid()}componentDidLoad(){this.attachHelpClickEventHandlers()}async checkValidity(){return await this.gridElement.checkValidity()}async createGridOptions(){const{inputArgs:e}=this.widgetArgs;if((0,l.p)(e))return;let t=0,i=0;const r=[],a=e.Rasters,c=e.Fields,d=e.Weights,n=a.value?.elements??a.value??[];if((0,l.p)(a)||(0,l.p)(c)||(0,l.p)(d)||(t=Math.max(n?.length,c.value?.length||0,d.value?.length||0)),(0===t||isNaN(t))&&r.push({id:0}),t>0&&((0,l.p)(d.value)||d.value.length<t)){let e=0;const i=d.value??[];for(;e<t;)(0,l.p)(d.value?.[e])&&i.push(1),e++;d.value=i}for(;i<t;){const e=n?.[i],t=e?.value;(0,l.p)(t?.url)||(e.value=await(0,s.w)(t,this.widgetArgs.inputLayers)),r.push({id:i,rasterElement:e,layer:e,field:c.value?.[i],weight:d.value?.[i]}),i++}return r}async initGrid(){const e={layer:{allowScalar:!1,label:this.strings.layer,uiType:c.G.raster,style:h.layerColumn,validationRule:{required:!0}},field:{label:this.strings.field,uiType:c.G.field,style:h.fieldColumn},weight:{label:this.strings.weight,uiType:c.G.number,style:h.weightColumn,validationRule:{required:!0,defaultValue:0,initialValue:1}}},t=await this.createGridOptions();this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.strings.weightedSumTable,referenceElement:this.weightedSumTableElement,helpTextID:this.widgetArgs.helpTextIDs?.weightedsum_weightedsumtable});this.helpActionClickEventHandlers.set(u,e)}render(){return(0,r.h)("div",{key:"567b2b22519c6b3559afe88cbc5e07c8c64c5f52"},(0,r.h)("calcite-label",{key:"0f5f5af8a534fd6c34e1e46edf9cf2a0fcd7147d",alignment:"start",scale:d.U.Scale,layout:"default",ref:e=>{this.weightedSumTableElement=e}},(0,r.h)("rfx-label",{key:"455181c1020767a22ddb1ceaa6d1e95a79e6a0a2",label:this.strings.weightedSumTable,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(u)()}),(0,r.h)("rfx-grid",{key:"8c03806a916d8446f4cbb1a7454dd8132af9fe2d",canAdd:this.gridSchema.canAdd,class:h.grid,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,hasHeader:this.gridSchema.hasHeader,hasIdColumn:this.gridSchema.hasIdColumn,inputLayers:this.widgetArgs.inputLayers,onRfxGridOptionChange:this.updateValue,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick,ref:e=>{this.gridElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.d)(this)}};g.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-weighted-sum-table-editor__grid table{width:100%;table-layout:fixed}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__layer-column{width:40%}.rfx-cte-weighted-sum-table-editor__field-column{width:30%}.rfx-cte-weighted-sum-table-editor__weight-column{width:16%}";i(55448),i(2924),i(11840),i(52373),i(440),i(66744)},81965:(e,t,i)=>{i.d(t,{a:()=>n,f:()=>d,i:()=>l,p:()=>c,s:()=>s});var r=i(93210),a=i(22493);function l(e){return null!=e&&!1===Number.isNaN(e)&&!0===Number.isFinite(e)}function s(e,t){let i;if(null!==e){const r="string"==typeof e?Number.parseFloat(e):e;l(r)?i=r:l(t)&&(i=t)}return void 0===i?"":`${i}`}function c(e){if(!(0,a.p)(e))return Number.parseFloat(e)}function d(e,t=3){if(!(0,a.p)(e))return Number.parseFloat(e.toFixed(t))}function n(e,t){let i="";if(!(0,a.p)(e)&&!Number.isNaN(e)){const a=(0,r.g)().locale;i=Intl.NumberFormat(a,t).format(Number(e))}return i}},42776:(e,t,i)=>{i.d(t,{C:()=>a,U:()=>r,a:()=>l,u:()=>s});const r={Scale:"s",PopoverTimer:60},a={s:"s",m:"m",l:"l"},l={absolute:"absolute",fixed:"fixed"},s=e=>e===a.s?a.m:a.l}}]);