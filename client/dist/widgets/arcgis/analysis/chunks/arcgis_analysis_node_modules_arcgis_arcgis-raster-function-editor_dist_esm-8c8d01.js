"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-8c8d01"],{8782:(e,t,i)=>{i.r(t),i.d(t,{rfx_editor_wrapper:()=>m});var a=i(6225),r=(i(5294),i(13661),i(18423),i(21255),i(35431),i(93210)),s=i(22493),o=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(76529)),l=i(42776),d=(i(23795),i(17902),i(56451),i(33968)),n=i(61556),c=i(40861);const h="host",p="dialog",f="dialog-heading",m=class{constructor(e){(0,a.r)(this,e),this.rfxEditorWrapperClose=(0,a.c)(this,"rfxEditorWrapperClose",7),this.hasBeenOpened=!1,this.initialDocumentOverflowStyle="",this.initState=()=>{s.L.entryPoint=this.entryPoint??o.E.ANALYSIS,s.L.portal=this.portal,s.L.rftId=this.rftItemId??this.portalItem?.id??s.L.rftId,(0,s.p)(this.user)&&!(0,s.p)(this.portal?.user)&&(this.user=this.portal.user),s.L.isViewerUserType=(0,s.J)(this.user)},this.setScale=()=>{this.scale=s.L.entryPoint===o.E.ITEM?l.C.l:l.U.Scale},this.setUIFlags=()=>{s.L.entryPoint===o.E.ITEM?(this.hideCreateNewTemplate=!0,this.hideEditTemplateProperties=!1):(this.hideCreateNewTemplate=!1,this.hideEditTemplateProperties=!0)},this.showReadOnlyAlert=()=>{this.removeReadOnlyAlert();const e=(0,n.j)({modalStrings:{header:this.strings.readOnlyModeTitle,content:this.strings.readOnlyModeMessage}});this.readOnlyAlertElement=e,document.body.appendChild(e)},this.removeReadOnlyAlert=()=>{this.readOnlyAlertElement?.remove(),this.readOnlyAlertElement=void 0},this.canClose=async()=>new Promise((async e=>{void 0!==this.rftItemId?e(await(this.rfxEditorApp?.onPanelClose(this.rftItemId))):e(!0)})),this.handleClose=async()=>{if(!0!==await this.canClose())throw new Error;this.removeReadOnlyAlert(),this.dialogElement.open=!1,this.rfxEditorWrapperClose.emit(),s.L.entryPoint===o.E.ITEM&&!0===this.newItemCreated&&(window.location.href=(0,d.a)(this.portalItem))},this.getDialogHeadingText=()=>this.rfxTemplateName??this.portalItem?.title??this.strings.defaultTemplateName,this.handleRFxTemplateNameChange=e=>{this.rfxTemplateName=e.detail},this.handleRFxTemplateSaved=e=>{const{portalItem:t,template:i}=e.detail;(0,s.p)(t)||(0,s.p)(i)||(t.id!==this.portalItem?.id&&(this.newItemCreated=!0,this.portalItem=t),this.rfxTemplateName=i.name)},this.handleRftItemDetailsLinkClicked=()=>{setTimeout((()=>{this.newItemCreated=!1,this.handleClose()}),1)},this.applyStyleToDialogContainer=e=>{(0,c.n)(e,["shadowRoot","children[0]"],(e=>{const t=document.createElement("style");t.innerHTML="div.container { z-index: 150; }",e.appendChild(t)}))},this.rfxTemplateName=void 0,this.open=void 0,this.entryPoint=void 0,this.mapView=void 0,this.mapLayers=void 0,this.portal=void 0,this.user=void 0,this.portalItem=void 0,this.rftItemId=void 0}onOpenChange(e){this.updateOverflowHiddenClass(e),!0===e&&!0===s.L.isViewerUserType&&this.showReadOnlyAlert(),!1!==this.hasBeenOpened?!0===e&&!1===s.L.isLoadingRFT&&this.rfxEditorApp?.reloadRFTItem():this.hasBeenOpened=!0}async componentWillLoad(){({strings:this.strings}=await(0,r.c)(this.hostElement,(0,a.a)("."))),this.initState(),this.setScale(),this.setUIFlags()}updateOverflowHiddenClass(e){!0===e?this.addOverflowHiddenClass():this.removeOverflowHiddenClass()}addOverflowHiddenClass(){this.initialDocumentOverflowStyle=document.body.style.overflow,document.body.style.setProperty("overflow","hidden")}removeOverflowHiddenClass(){document.body.style.setProperty("overflow",this.initialDocumentOverflowStyle)}render(){return(0,a.h)(a.H,{key:"8d15ed53f54cc3634d83e115927a65f9e7fd895f",class:h},(0,a.h)("calcite-dialog",{key:"6ff1d9ce82ee2c9bc441c41a03c6165c89ddeeb3",id:"rfx-editor-dialog",class:p,open:!0===this.open,outsideCloseDisabled:!0,scale:"l",placement:"cover",beforeClose:async()=>this.handleClose(),ref:e=>{this.dialogElement=e,this.applyStyleToDialogContainer(e)}},(0,a.h)("div",{key:"d38d00900bd748cc612a596442d5975b2c67118b",class:f,slot:"header-content"},(0,a.h)("calcite-icon",{key:"7b5328c16c1db7ae14019772528d9f4fd7412491",icon:"function-editor",scale:this.scale,"text-label":"Raster Function Editor"}),this.getDialogHeadingText()),(0,a.h)("rfx-editor-app",{key:`rfx-editor-app-${this.rftItemId}`,mapLayers:this.mapLayers,mapView:this.mapView,portal:s.L.portal,rftItemId:s.L.rftId,scale:this.scale,ref:e=>{this.rfxEditorApp=e},onAnalysisTemplateNameChanged:this.handleRFxTemplateNameChange,onAnalysisTemplateSaved:this.handleRFxTemplateSaved,onRftItemDetailsLinkClicked:this.handleRftItemDetailsLinkClicked},(0,a.h)("rfx-editor-header-actions",{key:"8c35eef42eff314176cd0cf921987cd9f3b8cfd8",slot:"action-bar",templateId:s.L.rftId,hideCreateNewTemplate:this.hideCreateNewTemplate,hideRFxNodeActions:!0===s.L.isViewerUserType,hideEditTemplateProperties:this.hideEditTemplateProperties,scale:(0,l.u)(this.scale),expanded:!1===s.L.isViewerUserType}))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.d)(this)}static get watchers(){return{open:["onOpenChange"]}}};m.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.host{height:100%;width:100%}.dialog{--calcite-dialog-content-space:0;z-index:150}.dialog-heading{font-size:var(--calcite-font-size-2);font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-line-height-wrap)}.dialog-heading calcite-icon{padding-left:0.25rem;padding-right:1rem}";i(32513),i(71802),i(36596),i(17078),i(91177),i(74229)}}]);